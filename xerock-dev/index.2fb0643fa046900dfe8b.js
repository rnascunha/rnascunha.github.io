(()=>{var e={7228:e=>{e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},2858:e=>{e.exports=function(e){if(Array.isArray(e))return e}},3646:(e,t,n)=>{var r=n(7228);e.exports=function(e){if(Array.isArray(e))return r(e)}},1506:e=>{e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},8926:e=>{function t(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}e.exports=function(e){return function(){var n=this,r=arguments;return new Promise((function(i,o){var a=e.apply(n,r);function s(e){t(a,i,o,s,c,"next",e)}function c(e){t(a,i,o,s,c,"throw",e)}s(void 0)}))}}},4575:e=>{e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},9100:(e,t,n)=>{var r=n(9489),i=n(7067);function o(t,n,a){return i()?e.exports=o=Reflect.construct:e.exports=o=function(e,t,n){var i=[null];i.push.apply(i,t);var o=new(Function.bind.apply(e,i));return n&&r(o,n.prototype),o},o.apply(null,arguments)}e.exports=o},3913:e=>{function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}},9713:e=>{e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},9754:e=>{function t(n){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},t(n)}e.exports=t},2205:(e,t,n)=>{var r=n(9489);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}},430:e=>{e.exports=function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}},7067:e=>{e.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}},6860:e=>{e.exports=function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}},3884:e=>{e.exports=function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}},521:e=>{e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},8206:e=>{e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},8585:(e,t,n)=>{var r=n(8),i=n(1506);e.exports=function(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?i(e):t}},9489:e=>{function t(n,r){return e.exports=t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},t(n,r)}e.exports=t},3038:(e,t,n)=>{var r=n(2858),i=n(3884),o=n(379),a=n(521);e.exports=function(e,t){return r(e)||i(e,t)||o(e,t)||a()}},319:(e,t,n)=>{var r=n(3646),i=n(6860),o=n(379),a=n(8206);e.exports=function(e){return r(e)||i(e)||o(e)||a()}},8:e=>{function t(n){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=t=function(e){return typeof e}:e.exports=t=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(n)}e.exports=t},379:(e,t,n)=>{var r=n(7228);e.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}},5957:(e,t,n)=>{var r=n(9754),i=n(9489),o=n(430),a=n(9100);function s(t){var n="function"==typeof Map?new Map:void 0;return e.exports=s=function(e){if(null===e||!o(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return a(e,arguments,r(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),i(t,e)},s(t)}e.exports=s},7757:(e,t,n)=>{e.exports=n(5666)},2845:(e,t,n)=>{"use strict";var r={};n.r(r);var i=n(4575),o=n.n(i),a=n(3913),s=n.n(a),c=n(2205),l=n.n(c),u=n(8585),d=n.n(u),h=n(9754),f=n.n(h),p=n(5957),_=n.n(p);var v=function(e){l()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=f()(t);if(n){var i=f()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return d()(this,e)});function i(){return o()(this,i),r.call(this)}return s()(i,[{key:"connectedCallback",value:function(){var e=this,t=this.attachShadow({mode:"open"});t.innerHTML="\n<style>\n:host \n{\n    display: none; /* Hidden by default */\n    position: fixed; /* Stay in place */\n    z-index: 10; /* Sit on top */\n    left: 0;\n    top: 0;\n    width: 100%; /* Full width */\n    height: 100%; /* Full height */\n    overflow: hidden; /* Enable scroll if needed */\n    background-color: var(--my-modal-bg, rgb(0,0,0)); /* Fallback color */\n    background-color: var(--my-modal-bg, rgba(0,0,0,0.4)); /* Black w/ opacity */\n    /* https://stackoverflow.com/a/61421444 */\n    justify-content: center;\n    align-items: center;\n}\n\n/* Modal Content/Box */\n.content \n{\n    position: relative;\n    background-color: var(--my-modal-content-bg, #fefefe);\n    margin: var(--my-modal-content-margin, 10% auto);   \n    border: var(--my-modal-content-border, 2px solid #888);\n    width: var(--my-modal-content-width, 80%); /* Could be more or less, depending on screen size */\n    height: var(--my-modal-content-height, 80%); /* Could be more or less, depending on screen size */\n    box-sizing: border-box;\n    border-radius: 15px;\n}\n\n/* The Close Button */\n.close \n{\n    color: var(--my-modal-close-color, #aaa);\n    position: absolute;\n    right: 10px;\n    top: 5px;\n    font-size: var(--my-modal-close-font-size, 28px);\n    font-weight: bold;\n    cursor: pointer;\n    z-index: 15;\n}\n\n.close:hover,\n.close:focus \n{\n  color: var(--my-modal-close-focus-color, black);\n  text-decoration: none;\n}\n</style>\n<div class=content>\n    <span class=close>&times;</span>\n    <slot></slot>\n</div>\n",t.querySelector(".content").onclick=function(e){e.stopPropagation()};var n=new Event("close");t.querySelector(".close").onclick=function(){e.dispatchEvent(n),e.style.display="none"},this.onclick=function(t){e.dispatchEvent(n),t.target==e&&(e.style.display="none")}}},{key:"show",set:function(e){this.style.display=e?"flex":"none"}}]),i}(_()(HTMLElement));customElements.define("my-modal",v);var m=function(e){l()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=f()(t);if(n){var i=f()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return d()(this,e)});function i(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"right";return o()(this,i),console.assert("right"===t||"left"===t||"top"===t||"bottom"===t,'"dir" not valid'),(e=r.call(this)).hasAttribute("dir")||(e.dir=t),e}return s()(i,[{key:"connectedCallback",value:function(){this.attachShadow({mode:"open"}).innerHTML='\n<style>\n:host{\n  position: fixed; /* Stay in place */\n  z-index: 10; /* Stay on top */\n  background-color: cadetblue; /* Black*/\n  overflow-x: hidden; /* Disable horizontal scroll */\n  transition: 0.5s; /* 0.5 second transition effect to slide in the sidenav */\n}\n\n:host([dir=right]){  \n  height: 100%; /* 100% Full-height */\n  width: 300px; /* 0 width - change this with JavaScript */\n  top: 0; /* Stay at the top */\n  left: -290px;\n}\n\n:host([dir=right]:hover){\n    left: 0;\n}\n\n:host([dir=left]){  \n  height: 100%; /* 100% Full-height */\n  width: 300px; /* 0 width - change this with JavaScript */\n  top: 0; /* Stay at the top */\n  right: -290px;\n}\n\n:host([dir=left]:hover){\n    right: 0;\n}\n\n:host([dir=top]){  \n  height: 300px; /* 100% Full-height */\n  width: 100%; /* 0 width - change this with JavaScript */\n  top: -290px; /* Stay at the top */\n  right: 0;\n}\n\n:host([dir=top]:hover){\n    top: 0;\n}\n\n:host([dir=bottom]){  \n  height: 300px; /* 100% Full-height */\n  width: 100%; /* 0 width - change this with JavaScript */\n  bottom: -290px; /* Stay at the top */\n  right: 0;\n}\n\n:host([dir=bottom]:hover){\n    bottom: 0;\n}\n</style>\n<div class="content">\n    <slot></slot>\n</div>\n'}},{key:"dir",set:function(e){console.assert("right"===e||"left"===e||"top"===e||"bottom"===e,'"val" not valid'),this.removeAttribute("dir"),this.setAttribute("dir",e)}}]),i}(_()(HTMLElement));customElements.define("my-slide-menu-hover",m);var y=function(e){l()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=f()(t);if(n){var i=f()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return d()(this,e)});function i(){var e,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];o()(this,i);var n=(e=r.call(this)).attachShadow({mode:"open"});return n.innerHTML="\n<style>\n:host{\n    display: block;\n}\n\n#title{\n    cursor: pointer;\n    font-size: 2ch;\n    padding: 3px;\n    margin: 3px;\n    text-align: var(--my-retract-title-align, inherit);\n    color: var(--my-retratct-title-color, inherit);\n}\n\n.content{\n    background-color: var(--my-retract-content-bg, inherit);\n    padding: var(--my-retract-content-padding, inherit);\n    margin: var(--my-retract-content-margin, inherit);\n}\n\n.show{\n    transition: max-height .3s ease-in, transform .3s ease-in;  \n    transform: scaleY(1);\n    max-height: 1000px;\n}\n\n.close{\n    transition: max-height .3s ease-out, transform .3s ease-out;  \n    transform: scaleY(0);\n    max-height: 0;\n}\n\n/*\n.show{\n    display: block;\n}\n\n.close{\n    display: none;\n}\n*/\n\n.icon-show{\n    content: '&larr;';\n}\n</style>\n<slot id=title name=title></slot>\n<div class=content>\n    <slot></slot>\n</div>\n",e.content=n.querySelector(".content"),e.content.onclick=function(e){e.stopPropagation()},n.querySelector("#title").onclick=function(t){e.toggle()},e.show=Boolean(t),e}return s()(i,[{key:"connectedCallback",value:function(){this.hasAttribute("show")&&(this.show=Boolean(this.getAttribute("show")))}},{key:"toggle",value:function(){this.show=!this._show}},{key:"show",set:function(e){this._show=Boolean(e),this._show?(this.content.classList.remove("close"),this.content.classList.add("show")):(this.content.classList.remove("show"),this.content.classList.add("close"))},get:function(){return this._show}}]),i}(_()(HTMLElement));customElements.define("my-retract-menu",y);var g=n(3038),b=n.n(g),k=n(4596);function w(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return E(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?E(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}customElements.define("my-tabs",function(e){l()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=f()(t);if(n){var i=f()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return d()(this,e)});function i(){var e;return o()(this,i),(e=r.call(this)).attachShadow({mode:"open"}).innerHTML='\n    <style>\n      :host {\n          display: inline-block;\n          width: auto;\n          font-family: \'Roboto Slab\';\n          contain: content;\n        }\n\n        :host([background]) {\n          background: var(--my-tabs-background-color, #9E9E9E);\n          border-radius: 10px;\n          padding: 10px;\n        }\n\n        #panels {\n            box-shadow: 0 2px 2px rgba(0, 0, 0, .3);\n            background: white;\n            border-radius: 3px;\n            padding: var(--my-tabs-panels-padding, 5px);\n            height: var(--my-tabs-panels-height, 100%);\n            overflow: auto;\n        }\n\n        #tabs {\n          display: inline-flex;\n          -webkit-user-select: none;\n          user-select: none;\n        }\n\n        #tabs slot {\n          display: inline-flex; /* Safari bug. Treats <slot> as a parent */\n        }\n\n        /* Safari does not support #id prefixes on ::slotted\n           See https://bugs.webkit.org/show_bug.cgi?id=160538 */\n        #tabs ::slotted(*) {\n          font: 400 16px/22px \'Roboto\';\n          padding: var(--my-tabs-tabs-padding, 16px 8px);\n          margin: 0;\n          text-align: center;\n          min-width: 100px;\n          width: auto;\n          text-overflow: ellipsis;\n          white-space: nowrap;\n          overflow: hidden;\n          cursor: pointer;\n          border-top-left-radius: 3px;\n          border-top-right-radius: 3px;\n          background: linear-gradient(#fafafa, #eee);\n          border: none; /* if the user users a <button> */\n        }\n\n        #tabs ::slotted([aria-selected="true"]) {\n          font-weight: 600;\n          background: white;\n          box-shadow: none;\n        }\n\n        #tabs ::slotted(:focus) {\n          z-index: 1; /* make sure focus ring doesn\'t get buried */\n        }\n\n        #panels ::slotted([aria-hidden="true"]) {\n            display: none !important;\n        }\n\n        #tabs ::slotted(:hover){\n            filter: brightness(98%);\n        }\n    </style>\n      <div id="tabs">\n        <slot id="title" name="title"></slot>\n      </div>\n      <div id="panels">\n        <slot id="panelsSlot"></slot>\n      </div>\n    ',e}return s()(i,[{key:"connectedCallback",value:function(){this.setAttribute("role","tablist");var e=this.shadowRoot.querySelector("#title"),t=this.shadowRoot.querySelector("#panelsSlot");this.tabs=e.assignedNodes({flatten:!0}),this.panels=t.assignedNodes({flatten:!0}).filter((function(e){return e.nodeType===Node.ELEMENT_NODE}));var n,r=w(this.panels.entries());try{for(r.s();!(n=r.n()).done;){var i=b()(n.value,2),o=(i[0],i[1]);o.setAttribute("role","tabpanel"),o.setAttribute("tabindex",0)}}catch(e){r.e(e)}finally{r.f()}this._boundOnTitleClick=this._onTitleClick.bind(this),this._boundOnKeyDown=this._onKeyDown.bind(this),e.addEventListener("click",this._boundOnTitleClick),e.addEventListener("keydown",this._boundOnKeyDown),this.selected=this._findFirstSelectedTab()||0}},{key:"reprocess",value:function(){this.disconnectedCallback(),this.setAttribute("role","tablist");var e=this.shadowRoot.querySelector("#title"),t=this.shadowRoot.querySelector("#panelsSlot");this.tabs=e.assignedNodes({flatten:!0}),this.panels=t.assignedNodes({flatten:!0}).filter((function(e){return e.nodeType===Node.ELEMENT_NODE}));var n,r=w(this.panels.entries());try{for(r.s();!(n=r.n()).done;){var i=b()(n.value,2),o=(i[0],i[1]);o.setAttribute("role","tabpanel"),o.setAttribute("tabindex",0)}}catch(e){r.e(e)}finally{r.f()}e.addEventListener("click",this._boundOnTitleClick),e.addEventListener("keydown",this._boundOnKeyDown),this._selectTab(this.selected)}},{key:"disconnectedCallback",value:function(){var e=this.shadowRoot.querySelector("#title");e.removeEventListener("click",this._boundOnTitleClick),e.removeEventListener("keydown",this._boundOnKeyDown)}},{key:"_onTitleClick",value:function(e){"title"===e.target.slot&&(this.selected=this.tabs.indexOf(e.target),e.target.focus())}},{key:"_onKeyDown",value:function(e){switch(e.code){case"ArrowUp":case"ArrowLeft":e.preventDefault(),t=(t=this.selected-1)<0?this.tabs.length-1:t,this.tabs[t].click();break;case"ArrowDown":case"ArrowRight":e.preventDefault();var t=this.selected+1;this.tabs[t%this.tabs.length].click()}}},{key:"_findFirstSelectedTab",value:function(){var e,t,n=w(this.tabs.entries());try{for(n.s();!(t=n.n()).done;){var r=b()(t.value,2),i=r[0],o=r[1];o.setAttribute("role","tab"),o.hasAttribute("selected")&&(e=i)}}catch(e){n.e(e)}finally{n.f()}return e}},{key:"_selectTab",value:function(){for(var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=0;e=this.tabs[n];++n){var r=n===t;e.setAttribute("tabindex",r?0:-1),e.setAttribute("aria-selected",r),this.panels[n].setAttribute("aria-hidden",!r)}}},{key:"selected",get:function(){return this.selected_},set:function(e){this.selected_=e,this._selectTab(e),this.setAttribute("selected",e)}},{key:"scroll_bottom",set:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e&&(0,k.Mf)(this.shadowRoot.querySelector("#panels"))}}]),i}(_()(HTMLElement))),customElements.define("my-draggable",function(e){l()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=f()(t);if(n){var i=f()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return d()(this,e)});function i(){var e;return o()(this,i),(e=r.call(this))._shadow=e.attachShadow({mode:"open"}),e._shadow.innerHTML="\n            <style>\n            :host{\n                position: absolute;\n                z-index: 7;\n                min-width: fit-content;\n            }\n\n            #title{\n                display: flex;\n                justify-content: space-between;\n                cursor: move;\n                z-index: 10;\n                background-color: blue;\n                font-weight: bold;\n                padding: 3px;\n                border: 1px solid black;\n                border-top-left-radius: 5px;\n                border-top-right-radius: 5px;\n            }\n\n            #window-close{\n                cursor: pointer;\n                 padding: 0px 5px 0px 5px;\n            }\n\n            #window-close:hover{\n               background-color: white;\n            }\n\n            #content{\n                background-color: aliceblue;\n                border-bottom: 1px solid black;\n                border-left: 1px solid black;\n                border-right: 1px solid black;\n                border-bottom-left-radius: 5px;\n                border-bottom-right-radius: 5px;\n            }\n            </style>\n            <div id=title>\n                <span id=title-name><slot name=title>Title</slot></span><span id=window-close>&times;</span>\n            </div>\n            <div id=content><slot><p>teste</p></slot></div>",e}return s()(i,[{key:"connectedCallback",value:function(){var e=this;this.dragElement(this),this._shadow.querySelector("#window-close").onclick=function(t){e.dispatchEvent(new Event("close")),e.outerHTML=""},this.position()}},{key:"dragElement",value:function(e){var t=0,n=0,r=0,i=0;function o(o){(o=o||window.event).preventDefault(),t=r-o.clientX,n=i-o.clientY,r=o.clientX,i=o.clientY,e.style.top=e.offsetTop-n+"px",e.style.left=e.offsetLeft-t+"px"}function a(){document.onmouseup=null,document.onmousemove=null}e._shadow.querySelector("#title").onmousedown=function(e){(e=e||window.event).preventDefault(),r=e.clientX,i=e.clientY,document.onmouseup=a,document.onmousemove=o}}},{key:"position",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"top";switch(e){case"middle":var t=window.innerWidth,n=window.innerHeight,r=this.offsetWidth,i=this.offsetHeight,o=(t-r)/2,a=(n-i)/2;this.style.top=a+"px",this.style.left=o+"px";case"top":this.style.top="5px",this.style.left="5px"}}}]),i}(_()(HTMLElement))),customElements.define("drop-menu",function(e){l()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=f()(t);if(n){var i=f()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return d()(this,e)});function i(){var e;return o()(this,i),(e=r.call(this))._shadow=e.attachShadow({mode:"open"}),e._shadow.innerHTML='\n            <style>\n            :host{\n                display: inline-block;\n                z-index: 1;\n                position: relative;\n            }\n\n            #title{\n                display: inline-flex;\n                justify-content: space-between;\n                background-color: var(--drop-menu-title-bg, blue);\n                color: var(--drop-menu-title-color, white);\n                padding: var(--drop-menu-title-padding, 5px);\n            }\n\n            #window-icon:after{\n                content: var(--drop-menu-title-icon, "▼");\n            }\n\n            :host(:hover) #title{\n                background-color: var(--drop-menu-title-bg-hover, red);\n                color: var(--drop-menu-title-color-hover, auto);\n            }\n\n            #content{\n                position: absolute;\n                bottom: var(--drop-menu-content-bottom, auto);\n                left: var(--drop-menu-content-left, auto);\n                display: none;\n                background-color: var(--drop-menu-content-bg, #ddd);\n                cursor: var(--drop-menu-content-cursor, pointer);\n                z-index: 1;\n                min-width: var(--drop-menu-content-min-width, auto);\n                padding: var(--drop-menu-title-padding, 2px 15px);\n            }\n\n            :host(:hover) #content{\n                display: block;\n            }\n            </style>\n            <div id=title>\n                <span id=title-name>\n                    <slot name=title>Menu</slot>\n                </span>\n                <span id=window-icon></span>\n            </div>\n            <div id=content>\n                <slot></slot>\n            </div>',e}return i}(_()(HTMLElement))),customElements.define("input-mac",function(e){l()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=f()(t);if(n){var i=f()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return d()(this,e)});function i(){var e;o()(this,i);var t=(e=r.call(this)).attachShadow({mode:"open"});return t.innerHTML="\n            <style>\n            :host{\n                display: inline;\n            }\n\n            #input-mac{\n                width: 17ch;\n            }\n\n            #input-mac.invalid{\n                outline: 2px solid red;\n            }\n            </style>\n            <input type=text maxlength=17 list=mac-list id=input-mac>\n            <datalist id=mac-list></datalist>",e._input_el=t.querySelector("#input-mac"),e._list_el=t.querySelector("#mac-list"),e._list=[],e._input_el.addEventListener("keydown",(function(t){return e.format_mac(t)}),!1),e._input_el.addEventListener("focusin",(function(t){return e.set_invalid(!1)}),!1),e._input_el.addEventListener("focusout",(function(t){return e.set_invalid(!e.is_valid())}),!1),e.hasAttribute("placeholder")&&(e.placeholder=e.getAttribute("placeholder")),e}return s()(i,[{key:"add",value:function(e){this._list.find((function(t){return e==t}))||(this._list.push(e),this._render_list())}},{key:"remove",value:function(e){this._list=this._list.filter((function(t){return t!=e})),this._render_list()}},{key:"focus",value:function(){this._input_el.focus()}},{key:"clear",value:function(){this._list=[],this._render_list()}},{key:"format_mac",value:function(e){"Backspace"!=e.key&&"Delete"!=e.key&&(this.value=e.target.value)}},{key:"is_valid",value:function(){return 17==this._input_el.value.length}},{key:"set_invalid",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e?this._input_el.classList.add("invalid"):this._input_el.classList.remove("invalid")}},{key:"_render_list",value:function(){var e=this;this._list_el.innerHTML="",this._list.forEach((function(t){var n=document.createElement("option");n.value=t,e._list_el.appendChild(n)}))}},{key:"value",set:function(e){for(var t=/([a-f0-9]{2})([a-f0-9]{1,2})/i,n=e.replace(/[^a-f0-9]/gi,"");t.test(n);)n=n.replace(t,"$1:$2");this._input_el.value=n.slice(0,17)},get:function(){return this._input_el.value}},{key:"placeholder",set:function(e){this._input_el.placeholder=e}}]),i}(_()(HTMLElement))),customElements.define("input-x",function(e){l()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=f()(t);if(n){var i=f()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return d()(this,e)});function i(){var e;return o()(this,i),(e=r.call(this))._shadow=e.attachShadow({mode:"open"}),e._shadow.innerHTML="\n            <style>\n            :host{\n                display: inline-flex;\n                flex-wrap: nowrap;\n                justify-content: space-between;\n                border-radius: 3px;\n                border: 1px solid black;\n            }\n\n            #content{\n                margin: 0px;\n                padding: 0px;\n            }\n\n            #input{\n                flex-grow: 4;\n            /*    outline: none;*/\n                border: 0px solid;\n            }\n\n            #input:focus{\n                outline: none;\n            }\n\n            #eraseable{\n                flex-grow: 1;\n                color: red;\n                cursor: pointer;\n                padding: 2px 5px;\n            }\n\n            #eraseable:hover{\n                background-color: red;\n                color: white;\n            }\n            </style>\n            <div id=content>\n                <slot name=input><input type=text id=input></slot>\n                <slot name=icons><span id=eraseable>&times;</span></slot>\n            </div>",e._shadow.querySelector("#eraseable").onclick=function(t){e.value="",e._shadow.querySelector("#input").focus()},e}return s()(i,[{key:"eraseable",get:function(){return this._shadow.querySelector("#eraseable")}},{key:"value",set:function(e){this._shadow.querySelector("#input").value=e},get:function(){return this._shadow.querySelector("#input").value}}]),i}(_()(HTMLElement))),customElements.define("input-ipv4",function(e){l()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=f()(t);if(n){var i=f()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return d()(this,e)});function i(){var e;o()(this,i);var t=(e=r.call(this)).attachShadow({mode:"open"});return t.innerHTML='\n            <style>\n            :host{\n                display: inline;\n            }\n\n            #input-ipv4{\n                width: 17ch;\n                padding: var(--input-ipv4-padding, auto);\n                margin: var(--input-ipv4-margin, auto);\n                border: var(--input-ipv4-border, auto);\n                width: var(--input-ipv4-width, auto);\n                outline: var(--input-ipv4-outline, auto);\n                background-color: var(--input-ipv4-bg, auto);\n            }\n\n            #input-ipv4.invalid{\n                outline: 2px solid red;\n            }\n            </style>\n            <input id=input-ipv4 list=ipv4-list type="text" size=9>\n            <datalist id=ipv4-list></datalist>',e._input_el=t.querySelector("#input-ipv4"),e._list_el=t.querySelector("#ipv4-list"),e._list=[],e._input_el.addEventListener("keydown",(function(t){return e.format_ipv4(t)}),!1),e._input_el.addEventListener("focusin",(function(t){return e.set_invalid(!1)}),!1),e._input_el.addEventListener("focusout",(function(t){return e.set_invalid(!e.is_valid())}),!1),e.hasAttribute("placeholder")&&(e.placeholder=e.getAttribute("placeholder")),e.hasAttribute("size")&&(e._input_el.size=e.getAttribute("size")),e.hasAttribute("disabled")&&e.disabled(Boolean(e.getAttribute(disabled))),e}return s()(i,[{key:"add",value:function(e){return!this._list.find((function(t){return e==t}))&&(this._list.push(e),this._render_list(),!0)}},{key:"remove",value:function(e){this._list=this._list.filter((function(t){return t!=e})),this._render_list()}},{key:"focus",value:function(){this._input_el.focus()}},{key:"clear",value:function(){this._list=[],this._render_list()}},{key:"format_ipv4",value:function(e){e instanceof KeyboardEvent&&((e.key.length>1||/[^0-9\.]/.test(e.key))&&"Backspace"!=e.key&&"Delete"!=e.key&&e.preventDefault(),"Backspace"!=e.key&&"Delete"!=e.key&&(this.value=this._input_el.value))}},{key:"is_valid",value:function(){return/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(this._input_el.value)}},{key:"set_invalid",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e?this._input_el.classList.add("invalid"):this._input_el.classList.remove("invalid")}},{key:"_render_list",value:function(){var e=this;this._list_el.innerHTML="",this._list.forEach((function(t){var n=document.createElement("option");n.value=t,e._list_el.appendChild(n)}))}},{key:"value",set:function(e){var t=e.match(/25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?\.?/g);this._input_el.value=t?t.slice(0,4).join(".").replace(/\.+/g,".").replace(/(([\d]+\.){3}[\d]+).*/,"$1"):""},get:function(){return this._input_el.value}},{key:"placeholder",set:function(e){this._input_el.placeholder=e}},{key:"disabled",set:function(e){this._input_el.disabled=e},get:function(){return this._input_el.disabled}}]),i}(_()(HTMLElement)));var x=n(9713),S=n.n(x);function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){S()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var T={show_optional:!1,button_title:"More options"},A=function(e){l()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=f()(t);if(n){var i=f()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return d()(this,e)});function i(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o()(this,i),e=r.call(this);var n=R(R({},T),t);return e._shadowRoot=e.attachShadow({mode:"open"}),e._shadowRoot.innerHTML="\n    <style>\n        :host\n        {\n            display: inline-flex;\n            flex-direction: row;\n            align-items: stretch;\n            justify-content: stretch;\n            background-color: bisque;\n            border-radius: 6px\n        }\n\n        .op-field\n        {\n            display: inline-flex;\n            flex-direction: row;\n            flex-wrap: wrap;\n            margin: var(--select-option-op-field-margin, 1px);\n        }\n\n        .option\n        {\n            display: inline-flex;\n            flex-direction: column;\n            margin: var(--select-option-option-margin, 1px)\n        }\n\n        .field\n        {\n            text-align: center;\n            padding: 1px;\n        }\n\n        .label\n        {\n            background: var(--select-option-op-label-bg, inherit);\n            border-top-left-radius: 4px;\n            border-top-right-radius: 4px;\n            font-weight: bold;\n        }\n\n        .value\n        {\n            background: var(--select-option-op-value-bg, inherit);\n            border-bottom-left-radius: 4px;\n            border-bottom-right-radius: 4px;\n        }\n\n        #optional-button\n        {\n            cursor: pointer;\n            padding: 3px 5px;\n            /*border-radius: 6px;*/\n            border-top-right-radius: 6px;\n            border-bottom-right-radius: 6px;\n            margin: 0px 1px;\n            align-self: stretch;\n            display: flex;\n            flex-direction: column;\n            align-items: stretch;\n            justify-content: center;\n\n        }\n\n        #optional-button[data-show=true]:after\n        {\n            content: var(--select-option-icon-show, '❰');\n        }\n\n        #optional-button[data-show=false]:after\n        {\n            content: var(--select-option-icon-not-show, '❱');\n        }\n\n        #optional-button:hover\n        {\n            background: var(--select-option-hover-bg, inherit);\n            filter: brightness(0.9);\n        }\n    </style>\n    <slot name=before class=op-field></slot>\n    <div id=options class=op-field></div>\n    <div id=optional-button class=op-field title='".concat(n.button_title,"'></div>\n    <slot class=op-field></slot>\n"),e.show_optional(n.show_optional),e.has_optional(!1),e._shadowRoot.querySelector("#optional-button").onclick=function(t){e._has_optional&&e.show_optional(!e._show_optional)},e}return s()(i,[{key:"add_select",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];console.assert("string"==typeof e&&Array.isArray(t),"Wrong arguments");var r=document.createElement("div");r.classList.add("option"),r.innerHTML="<div class='field label'>".concat(e,"</div>\n                        <div class='field value'>\n                            <select class=select></select>\n                        </div>");var i=r.querySelector(".select");return t.forEach((function(e){if("string"==typeof e||"number"==typeof e)e={value:e,name:e};else{if(!("value"in e))return;"name"in e||(e.name=e.value)}var t=document.createElement("option");t.textContent=e.name,t.value=e.value,"default"in e&&!0===e.default&&(t.selected=!0),i.appendChild(t)})),this._shadowRoot.querySelector("#options").appendChild(r),n&&(r.dataset.optional=!0,this.has_optional(!0),this.show_optional(this._show_optional)),i}},{key:"show_optional",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null!==t&&(this._show_optional=Boolean(t),this._shadowRoot.querySelector("#options").querySelectorAll(".option").forEach((function(t){"optional"in t.dataset&&(t.style.display=e._show_optional?"flex":"none")})),this._shadowRoot.querySelector("#optional-button").dataset.show=this._show_optional),this._show_optional}},{key:"has_optional",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null!==e&&(this._has_optional=Boolean(e),this._shadowRoot.querySelector("#optional-button").style.display=this._has_optional?"flex":"none"),this._has_optional}},{key:"values",value:function(){var e=this._shadowRoot.querySelectorAll(".label"),t=this._shadowRoot.querySelectorAll(".select"),n={};return e.forEach((function(e,r){n[e.textContent]=t[r].selectedOptions[0].value})),n}},{key:"names",value:function(){var e=this._shadowRoot.querySelectorAll(".label"),t=this._shadowRoot.querySelectorAll(".select"),n={};return e.forEach((function(e,r){n[e.textContent]=t[r].selectedOptions[0].textContent})),n}}]),i}(_()(HTMLElement));customElements.define("input-option",A);var D=n(319),C=n.n(D);function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){S()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var M={show_optional:!1,button_title:"More options"},P=function(e){l()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=f()(t);if(n){var i=f()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return d()(this,e)});function i(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o()(this,i),e=r.call(this);var n=I(I({},M),t);return e._shadowRoot=e.attachShadow({mode:"open"}),e._shadowRoot.innerHTML="\n    <style>\n        :host\n        {\n            display: inline-flex;\n            flex-direction: row;\n            align-items: stretch;\n            justify-content: stretch;\n            background-color: bisque;\n            border-radius: 6px;\n        }\n\n        .op-field\n        {\n            display: inline-flex;\n            flex-direction: row;\n            flex-wrap: wrap;\n            margin: var(--select-option-op-field-margin, 1px);\n        }\n\n        #optional-button\n        {\n            cursor: pointer;\n            padding: 3px 5px;\n            /*border-radius: 6px;*/\n            border-top-right-radius: 6px;\n            border-bottom-right-radius: 6px;\n            margin: 0px 1px;\n            align-self: stretch;\n            display: flex;\n            flex-direction: column;\n            align-items: stretch;\n            justify-content: center;\n\n        }\n\n        #optional-button[data-show=true]:after\n        {\n            content: var(--select-option-icon-show, '❰');\n        }\n\n        #optional-button[data-show=false]:after\n        {\n            content: var(--select-option-icon-not-show, '❱');\n        }\n\n        #optional-button:hover\n        {\n            background: var(--select-option-hover-bg, inherit);\n            filter: brightness(0.9);\n        }\n    </style>\n    <div id=options class=op-field>\n        <slot></slot>\n    </div>\n    <div id=optional-button class=op-field title='".concat(n.button_title,"'></div>\n"),e._options=e._shadowRoot.querySelector("#options").querySelector("slot"),e._button=e._shadowRoot.querySelector("#optional-button"),e._show_optional=n.show_optional,e.has_optional(!1),e._button.onclick=function(t){e._has_optional&&e.show_optional(!e._show_optional)},e}return s()(i,[{key:"connectedCallback",value:function(){var e=this;C()(this._options.assignedElements()).forEach((function(t){t.hasAttribute("optional")&&e.has_optional(!0)})),this.show_optional(this._show_optional)}},{key:"add",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.appendChild(e),this._set_optional(e,t)}},{key:"_set_optional",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];t?(e.setAttribute("optional",""),this.has_optional(!0)):e.removeAttribute("optional"),n&&this.show_optional(this._show_optional)}},{key:"show_optional",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null!==t&&(this._show_optional=Boolean(t),C()(this._options.assignedElements()).forEach((function(t){t.style.display=!t.hasAttribute("optional")||e._show_optional?"flex":"none"})),this._button.dataset.show=this._show_optional),this._show_optional}},{key:"has_optional",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null!==e&&(this._has_optional=Boolean(e),this._button.style.display=this._has_optional?"flex":"none"),this._has_optional}}]),i}(_()(HTMLElement));window.customElements.define("optional-container",P);var L=n(1506),q=n.n(L);!function(){var e=document.createElement("template");e.innerHTML="\n<style>\n    :host{\n        display: inline-block;\n        margin: 0px;\n        padding: 5px;\n        overflow: auto;\n        height: 100%;\n        width: 100%;\n        min-with: 100px;\n        cursor: text;\n        border: 1px solid black;\n        border-radius: 6px;\n        background-color: white;\n    }\n\n    :host(:focus-within)\n    {\n        outline: 2px solid black;\n    }\n\n    :host([disabled])\n    {\n        background-color: lightgrey;\n        cursor: not-allowed;\n    }\n\n    #content{\n        padding: 0px;\n        margin: 0px;\n        outline: none;\n    }\n\n    #placeholder\n    {\n        color: lightgray;\n        padding: 0px;\n        margin: 0px;\n    }\n</style>\n<div id=content contentEditable=true></div>\n<div id=placeholder></div>",customElements.define("input-resize",function(t){l()(a,t);var n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=f()(n);if(r){var i=f()(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return d()(this,e)});function a(){var t;return o()(this,a),(t=i.call(this))._shadowRoot=t.attachShadow({mode:"open"}),t._shadowRoot.appendChild(e.content.cloneNode(!0)),t.tabIndex=0,t._edit=t._shadowRoot.querySelector("#content"),t._placeholder=t._shadowRoot.querySelector("#placeholder"),t._disabled=!1,t.addEventListener("click",t.focus.bind(q()(t)),!1),t.addEventListener("dblclick",t.select_all.bind(q()(t)),!1),t._edit.addEventListener("click",(function(e){e.stopPropagation()}),!1),t.addEventListener("focus",(function(e){t.focus()}),!1),t._edit.addEventListener("blur",(function(e){t.blur()}),!1),t}return s()(a,[{key:"connectedCallback",value:function(){this.hasAttribute("placeholder")&&(this.placeholder=this.getAttribute("placeholder")),this.hasAttribute("disabled")&&(this.disabled=!0)}},{key:"_set_placeholder",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.value||e)return this._edit.style.display="block",void(this._placeholder.style.display="none");this._edit.style.display="none",this._placeholder.style.display="block"}},{key:"focus",value:function(){this._set_placeholder(!0);var e=window.getSelection();if(this._edit.lastChild){var t=document.createRange();t.setEnd(this._edit.lastChild,this._edit.lastChild.length),t.collapse(!1),e.removeAllRanges(),e.addRange(t)}else e.collapse(this._edit)}},{key:"blur",value:function(){this._set_placeholder()}},{key:"select_all",value:function(){var e=document.createRange(),t=window.getSelection();e.selectNodeContents(this._edit),t.removeAllRanges(),t.addRange(e)}},{key:"clear",value:function(){this.value=""}},{key:"placeholder",set:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this._placeholder.textContent=e,this._set_placeholder()}},{key:"disabled",set:function(e){Boolean(e)?(this._edit.contentEditable=!1,this._disabled=!0,this.setAttribute("disabled","")):(this._edit.contentEditable=!0,this._disabled=!1,this.removeAttribute("disabled"))},get:function(){return this._disabled}},{key:"value",set:function(e){this._edit.textContent=e,this._set_placeholder()},get:function(){return this._edit.textContent}}]),a}(_()(HTMLElement)))}();var j=n(9118),U=n(5797),H=n(7203);!function(){var e=document.createElement("template");e.innerHTML="\n<style>\n    :host\n    {\n        display: inline-flex;\n        flex-direction: column;\n    }\n\n    #custom-container\n    {\n        display: flex;\n        flex-direction: column;\n        flex-wrap: wrap;\n    }\n\n    #error-item\n    {\n        display: inline-block;\n        box-sizing: border-box;\n        background-color: red;\n        color: white;\n        padding: 1px, 3px;\n    }\n\n    .custom-item\n    {\n        background-color: yellow;\n        padding: 4px;\n        display: inline-flex;\n        flex-direction: row;\n    }\n\n    .value\n    {\n        display: inline-block;\n        filter: invert(1);\n        /* text-shadow: -1px 0 black, 0 1px black, 1px 0 black, 0 -1px black; */\n    }\n\n    .custom-item-opt\n    {\n        display: flex;\n        flex-direction: row;\n    }\n\n    .custom-input\n    {\n        width: 100%;\n    }\n\n    .custom-close\n    {\n        background-color: white;\n        color: red;\n        padding: 2px 5px;\n        cursor: pointer;\n        border-radius: 3px;\n        display: flex;\n        align-items: center;\n    }\n\n    .custom-close:hover\n    {\n        background-color: red;\n        color: white;\n        box-sizing: content-box;\n    }\n</style>\n\n<div id=custom-container></div>\n<div>\n    <button id=add-custom>+</button>\n    <button id=calculate>calculate</button>\n    <span id=error-item>Error</span>\n    <slot></slot>\n</div>";var t=document.createElement("template");t.innerHTML="\n<div class=custom-item>\n    <div class=custom-item-opt-out>\n        <div class=custom-item-opt>\n            <select class=custom-select></select>\n            <input class=custom-input placeholder=value>\n        </div>\n        <div class=value></div>\n    </div>\n    <span class=custom-close>&times;</span>\n</div>",Object.keys(U.Nm).forEach((function(e){var n=document.createElement("option");n.textContent=U.Nm[e].name,n.value=U.Nm[e].value,t.content.querySelector(".custom-select").appendChild(n)})),customElements.define("custom-protocol",function(n){l()(c,n);var r,i,a=(r=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=f()(r);if(i){var n=f()(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return d()(this,e)});function c(){var t;o()(this,c);var n=(t=a.call(this)).attachShadow({mode:"open"});return n.appendChild(e.content.cloneNode(!0)),t._add_btn=n.querySelector("#add-custom"),t._custom_contaienr=n.querySelector("#custom-container"),t._calculate=n.querySelector("#calculate"),t._error_item_el=n.querySelector("#error-item"),t._byte_array=new j.O,t._add_btn.addEventListener("click",t.add.bind(q()(t))),t._calculate.addEventListener("click",(function(e){t.dispatchEvent(new CustomEvent("calculate",{detail:t.calculate(!0)}))})),t.error_item(!0),t}return s()(c,[{key:"connectedCallback",value:function(){this.hasAttribute("add-btn")&&this.show_add("false"!==this.getAttribute("add-btn")),this.hasAttribute("calculate-btn")&&this.show_calculate("false"!==this.getAttribute("calculate-btn"))}},{key:"show_add",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._add_btn.style.display=e?"inline-block":"none"}},{key:"show_calculate",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._calculate.style.display=e?"inline-block":"none"}},{key:"add",value:function(){var e=this,n=t.content.firstElementChild.cloneNode(!0),r=(0,H.E)();n.style.backgroundColor=r,n.style.color=r,this._custom_contaienr.appendChild(n),n.querySelector(".custom-close").onclick=function(e){n.parentNode.removeChild(n)};var i=n.querySelector(".custom-input"),o=n.querySelector(".custom-select"),a=n.querySelector(".value"),s=function(t){if(null!==!i.value){switch(t.key){case"Escape":i.value=""}var n=o.selectedOptions[0].value;if(n)try{e._byte_array.from(i.value,n),a.textContent=e._byte_array.to(U.Nm.hex.value)}catch(e){a.textContent=e.message}else console.error("No data selected")}};i.addEventListener("keyup",s),o.addEventListener("change",s),i.focus()}},{key:"error_item",value:function(e){this._error_item_el.style.display=e?"none":"inline-block"}},{key:"calculate",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n={data:[],status:!0,items:[]};return this._custom_contaienr.querySelectorAll(".custom-item").forEach((function(t){var r,i=t.querySelector(".custom-select"),o=t.querySelector(".custom-input");try{e._byte_array.from(o.value,i.value),r=e._byte_array.raw(),n.data=n.data.concat(r)}catch(e){r={code:e.code,message:e.message,arg:e.arg},n.status=!1}n.items.push({selected:i.value,input:o.value,data:r,bg:t.style.backgroundColor})})),t&&this.error_item(n.status),n}}]),c}(_()(HTMLElement)))}(),function(){var e=document.createElement("template");e.innerHTML="\n<style>\n    :host{\n        display: inline-flex;\n        margin: 0px;\n        border-radius: 6px;\n        background-color: red;\n        color: white;\n        align-items:center;\n        justify-content: space-between;\n    }\n\n    #message{\n        padding: var(--closeable-padding, 2px);\n    }\n\n    #close\n    {\n        align-self:stretch;\n        display: flex;\n        align-items:center;\n        padding: 2px 5px;\n        cursor: pointer;\n        border-top-right-radius: 5px;\n        border-bottom-right-radius: 5px;\n    }\n\n    #close:hover\n    {\n        background-color: var(--closeable-bg-hover, white);\n        color: var(--closeable-color-hover, red);\n    }\n\n    #close:after\n    {\n        content: var(--closeable-icon, '×');\n    }\n</style>\n<div id=message></div><div id=close></div>",customElements.define("closeable-status",function(t){l()(a,t);var n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=f()(n);if(r){var i=f()(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return d()(this,e)});function a(){var t;o()(this,a);var n=(t=i.call(this)).attachShadow({mode:"open"});return n.appendChild(e.content.cloneNode(!0)),t._message=n.querySelector("#message"),t._behaviour=t.close.bind(q()(t)),n.querySelector("#close").addEventListener("click",(function(e){t._exec_cb()})),t}return s()(a,[{key:"connectedCallback",value:function(){this.hasAttribute("behaviour")&&(this.behaviour=this.getAttribute("behaviour")),this.hasAttribute("value")?this.value=this.getAttribute("value"):this.value="",this.hasAttribute("show")&&(this.show=this.getAttribute("show"))}},{key:"hide",value:function(){this.show=!1}},{key:"close",value:function(){this.outerHTML=""}},{key:"_exec_cb",value:function(){switch(this._behaviour){case"close":this.close();break;case"hidden":this.show=!1;break;default:this._behaviour()}}},{key:"behaviour",set:function(e){"close"!==e&&"hidden"!==e&&"function"!=typeof e||(this._behaviour=e)},get:function(){return this._behaviour}},{key:"value",set:function(e){this._value=e,this._message.innerHTML=e,this.show=!!e},get:function(){return this._valeu}},{key:"show",set:function(e){this._show=Boolean(e),this.style.display=this._show?"inline-flex":"none"},get:function(){return this._show}}]),a}(_()(HTMLElement)))}(),function(){var e={DOCKED:Symbol("docked"),UNDOCKED:Symbol("undocked"),MAXIMIZED:Symbol("maximized")},t=document.createElement("template");t.innerHTML="\n<style>\n    :host{\n        position: relative;\n        margin: 0px;\n        padding: 0px;\n        overflow: auto;\n        contain: strict;\n    }\n\n    .icons{\n        display: flex;\n        position: absolute;\n        right: 5px;\n        top: 0px;\n        cursor: pointer;\n        align-items: center;\n        padding: 0px;\n        margin: 0px;\n    }\n\n    .close{\n        font-size: 25px;\n    }\n\n    .close:after{\n        content: '×';\n    }\n\n    .maximize:after{\n        content: '□';\n    }\n\n    .minimize:after{\n        content: '_';\n    }\n\n    .undock:after{\n        content: '⬚';\n    }\n\n    .icon{\n        padding: 0px;\n        margin: 0px;\n        z-index: 5;\n    }\n\n    .icon:hover\n    {\n        font-weight: bold;\n        transform: translateY(1px);\n    }\n</style>\n\n<div class=icons>\n<slot name=icon></slot>\n    <span class='undock icon' title=undock></span>\n    <span class='minimize icon' title=minimize></span>\n    <span class='maximize icon' title=maximize></span>\n    <span class='close icon' title=close></span>\n</div>\n<slot></slot>",customElements.define("w-container",function(n){l()(c,n);var r,i,a=(r=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=f()(r);if(i){var n=f()(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return d()(this,e)});function c(){var n;return o()(this,c),(n=a.call(this))._shadowRoot=n.attachShadow({mode:"open"}),n._shadowRoot.appendChild(t.content.cloneNode(!0)),n.name=n._check_attr("name",""),n._status=e.DOCKED,n._is_closeable=n._check_attr("closeable",!0),n._is_maximizable=n._check_attr("maximizable",!0),n._is_undockable=n._check_attr("undockable",!1),n._icons={minimize:n._shadowRoot.querySelector(".minimize"),maximize:n._shadowRoot.querySelector(".maximize"),close:n._shadowRoot.querySelector(".close"),undock:n._shadowRoot.querySelector(".undock")},n._is_closeable?n._set_enable(n._icons.close,"close"):n._set_disable(n._icons.close),n._is_maximizable?(n._set_enable(n._icons.maximize,"maximize"),n._set_enable(n._icons.minimize,"minimize")):(n._set_disable(n._icons.maximize),n._set_disable(n._icons.minimize)),n._is_undockable?n._set_enable(n._icons.undock,"undock"):n._set_disable(n._icons.undock),n.status(),n}return s()(c,[{key:"status",value:function(){if(this._is_maximizable)switch(this._status){case e.DOCKED:this._icons.minimize.style.display="none",this._icons.maximize.style.display="inline";break;case e.MAXIMIZED:this._icons.minimize.style.display="inline",this._icons.maximize.style.display="none"}}},{key:"_check_attr",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.hasAttribute(e)?"false"!==this.getAttribute(e)&&t:t}},{key:"set_maximize",value:function(){this._status=e.MAXIMIZED,this.status()}},{key:"set_minimize",value:function(){this._status=e.DOCKED,this.status()}},{key:"_set_enable",value:function(e,t){var n=this;e.onclick=function(e){n.dispatchEvent(new Event(t))},e.style.display="inline"}},{key:"_set_disable",value:function(e){e.style.display="none"}},{key:"name",set:function(e){this._name=e},get:function(){return this._name}}]),c}(_()(HTMLElement)))}(),function(){var e=document.createElement("template");e.innerHTML='\n<style>\n    :host{\n        display: inline-block;\n    }\n\n    :host([selected]) select\n    {\n        filter: brightness(0.5);\n    }\n\n    #select-box {\n        position: relative;\n    }\n\n    #select-box select \n    { \n        font-weight: bold;\n    }\n\n    #over-select {\n        position: absolute;\n        left: 0;\n        right: 0;\n        top: 0;\n        bottom: 0;\n    }\n\n    #checkboxes {\n        position: absolute;\n        background: white;\n        display: none;\n        border: 1px #dadada solid;\n        padding: 4px;\n        max-height: 100px;\n        overflow: auto;\n        z-index: 2;\n    }\n\n    #checkboxes label {\n        display: block;\n    }\n\n    #checkboxes label:hover {\n        background-color: #1e90ff;\n    }\n</style>\n\n<div id="select-box">\n    <select>\n        <option>Label</option>\n    </select>\n        <div id="over-select"></div>\n    </div>\n</div>\n<div id="checkboxes"></div>\n',customElements.define("select-checkbox",function(t){l()(a,t);var n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=f()(n);if(r){var i=f()(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return d()(this,e)});function a(){var t;o()(this,a);var n=(t=i.call(this)).attachShadow({mode:"open"});return n.appendChild(e.content.cloneNode(!0)),t._expanded=!1,t._checkboxes=n.getElementById("checkboxes"),t._label=n.querySelector("select option"),n.querySelector("#select-box").addEventListener("click",(function(e){t.toggle_view(),e.stopPropagation()})),t._checkboxes.addEventListener("click",(function(e){e.stopPropagation()})),t._checkboxes.addEventListener("change",(function(e){t.dispatchEvent(new CustomEvent("change",{detail:e}))})),window.addEventListener("click",(function(e){1==t._expanded&&t.hide()})),t}return s()(a,[{key:"connectedCallback",value:function(){this.hasAttribute("label")&&(this.label=this.getAttribute("label"))}},{key:"add_checkbox",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=document.createElement("label");return r.innerHTML="<input type=checkbox value=".concat(e," ").concat(n?"checked":"",">").concat(t),this._checkboxes.appendChild(r),r}},{key:"value",value:function(e){return this._checkboxes.querySelector("input[value=".concat(e,"]"))}},{key:"values",value:function(){return this._checkboxes.querySelectorAll("input[type=checkbox]")}},{key:"checked",value:function(){return this._checkboxes.querySelectorAll("input[type=checkbox]:checked")}},{key:"toggle_view",value:function(){this._expanded?this.hide():this.show()}},{key:"hide",value:function(){this._checkboxes.style.display="none",this._expanded=!1}},{key:"show",value:function(){this._checkboxes.style.display="block",this._expanded=!0}},{key:"label",set:function(e){this._label.textContent=e}}]),a}(_()(HTMLElement)))}();var z=n(5334),G=n(6002),V={MAIN:{name:"main",long_name:"Main",options:{container:!1,color:"#ffffee",paint_types:[G.bt.CONFIG_RECEIVED,G.bt.CONFIG_SEND]}},ECHO:{name:"echo",long_name:"Echo",options:{container:!1,color:"#fc0",paint_types:[G.bt.RECEIVED,G.bt.SENT]}},SERIAL:{name:"serial",long_name:"Serial",options:{color:"#ccbbbb"}},MONITOR:{name:"monitor",long_name:"Monitor",options:{color:"#00ffff"}},TCP_SERVER:{name:"tcp_server",long_name:"TCP Server",options:{color:"#eeccbb"}},TCP_CLIENT:{name:"tcp_client",long_name:"TCP Client",options:{color:"#aacc33"}},WEBUSB:{name:"webusb",long_name:"WebUSB",options:{color:"#aa0000"}},WEBSERIAL:{name:"webserial",long_name:"WebSerial",options:{color:"#bbbb00"}},WEBSOCKET_CLIENT:{name:"websocket_client",long_name:"WebSocket Client",options:{color:"#00cccc"}},GEOLOCATION:{name:"geolocation",long_name:"Geolocation",options:{color:"#bbccbb"}},ORIENTATION:{name:"orientation",long_name:"Orientation & Motion",options:{color:"#ccaaaa"}},WEBBLUETOOTH:{name:"webbluetooth",long_name:"WebBluetooth",options:{color:"#88aa00"}}};Object.freeze(V),function(){var e=document.createElement("template");e.innerHTML="\n<style>\n    :host\n    {\n        padding: 5px;\n        display: inline-flex;\n        flex-direction: column;\n        align-items: strech;\n    }\n\n    label{\n        font-weight: bold;\n    }\n\n    #payload\n    {\n        min-height: 100px;\n    }\n\n    .input\n    {\n        width: 100%;\n        box-sizing: border-box;\n        padding: 3px;\n    }\n\n    .flex-item\n    {\n        width: 100%;\n        margin-bottom: 3px;\n    }\n\n</style>\n<label class=flex-item>App: <input class=input id=app list=app-list></label>\n<datalist id=app-list></datalist>\n<label class=flex-item>Type: <select  class=input id=type></select></label>\n<label class=flex-item>Control Type: <select  class=input id=ctype></select>\n<div class=flex-item>\n    <div>Data:</div>\n    <textarea id=payload class=input></textarea>\n</div>",function(){var t=e.content.querySelector("#type"),n=e.content.querySelector("#ctype"),r=e.content.querySelector("#app-list");Object.values(V).forEach((function(e){var t=document.createElement("option");t.value=e.name,t.textContent=e.name,r.appendChild(t)})),Object.values(z.DI).forEach((function(e){var n=document.createElement("option");n.value=e.value,n.textContent=e.name,t.appendChild(n)})),Object.values(z.$M).forEach((function(e){var t=document.createElement("option");t.value=e.value,t.textContent=e.name,n.appendChild(t)}))}(),customElements.define("json-message",function(t){l()(a,t);var n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=f()(n);if(r){var i=f()(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return d()(this,e)});function a(){var t;o()(this,a);var n=(t=i.call(this)).attachShadow({mode:"open"});return n.appendChild(e.content.cloneNode(!0)),t._type=n.querySelector("#type"),t._ctype=n.querySelector("#ctype"),t._app=n.querySelector("#app"),t._app_list=n.querySelector("#app_list"),t._payload=n.querySelector("#payload"),t._ctype.disabled=!0,t._type.addEventListener("change",(function(e){t._ctype.disabled=t._type.selectedOptions[0].value===z.DI.data.value})),t}return s()(a,[{key:"connectedCallback",value:function(){}},{key:"message",value:function(){return z.bj.create(this.app,this.type,this.ctype,this.payload)}},{key:"type",get:function(){return this._type.selectedOptions[0].value}},{key:"ctype",get:function(){return this._ctype.selectedOptions[0].value}},{key:"app",get:function(){return this._app.value}},{key:"payload",get:function(){var e=this._payload.value;try{return JSON.parse(e)}catch(t){return e}}}]),a}(_()(HTMLElement)))}();var F=n(9018);function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){S()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Y(e){var t=0,n=0;return e||(e=window.event),e.pageX||e.pageY?(t=e.pageX,n=e.pageY):(e.clientX||e.clientY)&&(t=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,n=e.clientY+document.body.scrollTop+document.documentElement.scrollTop),{x:t,y:n}}function $(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=W(W({},{borderX:0,borderY:0}),n),i=Y(e),o=i.x,a=i.y,s=t.offsetWidth+r.borderX,c=t.offsetHeight+r.borderY,l=window.innerWidth,u=window.innerHeight;t.style.left=l-o<s?l-s+"px":o+"px",t.style.top=u-a<c?u-c+"px":a+"px"}function Z(e,t){var n=e.srcElement||e.target;if(n==t)return n;for(;n=n.parentNode;)if(n==t)return n;return!1}!function(){var e=document.createElement("template");e.innerHTML="\n<style>\n    :host\n    {\n        display: inline-flex;\n        flex-direction: row;\n        border-radius: 5px;\n        overflow: hidden;\n        border: 1px solid black;\n    }\n\n    #types\n    {\n        display: inline-flex;\n        flex-direction: column;\n    }\n\n    #types button\n    {\n        font-weight: bold;\n        padding: 10px;\n        border-style: outset;\n        cursor: pointer;\n        outline: none;\n        flex-grow: 1;\n    }\n\n    #types button:hover\n    {\n        filter: brightness(95%);\n    }\n\n    #types button[data-pressed='true']\n    {\n        border-style: inset;\n        filter: brightness(0.8);\n    }\n\n    #content\n    {\n        display: flex;\n        font-family: monospace;\n        overflow-y: auto;\n        flex-grow: 1;\n        white-space: pre-wrap;\n        overflow-wrap: anywhere;\n        padding: 10px;\n    }\n    \n</style>\n<div id=types></div>\n<div id=\"content\"></div>\n",customElements.define("convert-container",function(t){l()(a,t);var n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=f()(n);if(r){var i=f()(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return d()(this,e)});function a(){var t;o()(this,a);var n=(t=i.call(this)).attachShadow({mode:"open"});return n.appendChild(e.content.cloneNode(!0)),t._data_container=n.querySelector("#content"),t._types_container=n.querySelector("#types"),t._byte_array=new j.O,t._type=U.Nm.text.value,t._types_container.addEventListener("click",(function(e){var n=(0,F.I)(e);t.select(n[0].value)})),t}return s()(a,[{key:"connectedCallback",value:function(){var e=this;if(this.hasAttribute("types"))try{var t=JSON.parse(this.getAttribute("types"));Array.isArray(t)||(t=[t]),t.forEach((function(t){return e.add_type(t)}))}catch(e){console.error(e)}this.hasAttribute("select")&&this.select(this.getAttribute("select")),this.hasAttribute("value")&&this.value(this.getAttribute("value"))}},{key:"select",value:function(e){var t=this;this._types_container.querySelectorAll("button").forEach((function(n){n.dataset.pressed=n.value===e?"true":"false";try{t._data_container.textContent=t._byte_array.to(e),t._type=e}catch(e){console.error(e)}}))}},{key:"add_type",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(e in U.Nm)if(this._types_container.querySelector("[value=".concat(e,"]")))t&&this.select(e);else{var r=document.createElement("button");r.value=e,r.textContent=null===n?U.Nm[e].name:n,this._types_container.appendChild(r),t&&this.select(e)}}},{key:"value",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{null==t&&(t=this._type),this._byte_array.from(e,t),this.add_type(t,!0),this._data_container.textContent=this._byte_array.to(t)}catch(e){console.error(e)}return this._value}}]),a}(_()(HTMLElement)))}(),function(){var e=document.createElement("template");e.innerHTML="\n<style>\n    :host\n    {\n        display: none;\n        position: absolute;\n        z-index: 10;\n    }\n\n    :host([show=true])\n    {\n        display: block;\n    }\n\n</style>\n<slot></slot>\n",customElements.define("context-menu",function(t){l()(a,t);var n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=f()(n);if(r){var i=f()(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return d()(this,e)});function a(){var t;return o()(this,a),(t=i.call(this)).attachShadow({mode:"open"}).appendChild(e.content.cloneNode(!0)),t._show=!1,window.addEventListener("resize",(function(e){t.hide()})),t.addEventListener("click",(function(e){t.dispatchEvent(new CustomEvent("select",{detail:e})),t.hide(),e.stopPropagation()})),t}return s()(a,[{key:"connectedCallback",value:function(){this.hasAttribute("show")?this.show("true"==this.getAttribute("show")):this.show(!1)}},{key:"set",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];$(e,this),this.show(t)}},{key:"show",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e?(this._show=!0,this.setAttribute("show","true")):(this._show=!1,this.setAttribute("show","false"))}},{key:"hide",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.show(!Boolean(e))}},{key:"showing",get:function(){return this._show}}]),a}(_()(HTMLElement)))}();var K={plain:{value:"plain",name:"Plain"},secure:{value:"secure",name:"Secure"}},J=function(e){l()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=f()(t);if(n){var i=f()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return d()(this,e)});function i(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K;return o()(this,i),(e=r.call(this)).shadow_root=e.attachShadow({mode:"open"}),e.shadow_root.innerHTML="\n                <style>\n                :host{\n                    display: inline-flex;\n                    align-items: center;\n                    border-style: solid;\n                    border-width: 1px;\n                    border-radius: 5px;\n                    position: relative;\n                }\n\n                #protocol-select{\n                    border-radius: 5px;\n                    background-color: var(--input-socket-ipv4-bg, antiquewhite);\n                }\n\n                #protocol-select:focus-within{\n                    outline: 1px solid lightgrey;\n                }\n\n                #ip-addr{\n                    margin: 1px;\n                    border-radius: 5px;\n                    --input-ipv4-padding: 0px 0px;\n                    --input-ipv4-margin: 0px;\n                    --input-ipv4-border: transparent 0px;\n                    --input-ipv4-width: 15ch;\n                    --input-ipv4-outline: none;\n                    --input-ipv4-bg: var(--input-socket-ipv4-bg, antiquewhite);\n                    background-color: var(--input-socket-ipv4-bg, antiquewhite);\n                }\n\n                #ip-addr:focus-within{\n                    outline: 1px solid lightgrey;\n                }\n\n                #port{\n                    width: 8ch;\n                    border-color: transparent;\n                    margin: 2px;\n                    border-radius: 5px;\n                    background-color: var(--input-socket-ipv4-bg, antiquewhite);\n                }\n\n                #port:focus-within{\n                    outline: 1px solid lightgrey;\n                }\n\n                .field{\n                    padding: 5px 0px;\n                }\n\n                #list-container{\n                    position: absolute;\n                    padding: 5px 2px;\n                    border-radius: 5px;\n                    top: 33px;\n                    background-color: lightgray;\n                    width: 100%;\n                }\n\n                #list{\n                    list-style-type: none;\n                }\n\n                .list-op{\n                    cursor: pointer;\n                    display: flex;\n                    justify-content: space-between;\n                    align-items: center;\n                }\n\n                .list-op:hover{\n                    background-color: beige;\n                }\n\n                .field-op-content\n                {\n                    flex-grow: 4;\n                }\n\n                .field-op-close{\n                    background-color: transparent;\n                    color: red;\n                    padding: 1px 5px;\n                    border-radius: 15px;\n                }\n\n                .field-op-close:after{\n                    content: 'D7';\n                }\n\n                .field-op-close:hover{\n                    background-color: red;\n                    color: white;\n                }\n                </style>\n                <select id=protocol-select class='field field-protocol'>\n                    <slot name=protocol></slot>\n                </select>\n                <div class='field field-protocol'>://</div>\n                <input-ipv4 id=ip-addr class=field></input-ipv4>\n                <div class=field>:</div>\n                <input id=port type=number min=0 max=65535 class=field>\n                <div id=list-container></div>\n                <slot></slot>\n            ",e._select=e.shadow_root.querySelector("#protocol-select"),e._addr=e.shadow_root.querySelector("#ip-addr"),e._port=e.shadow_root.querySelector("#port"),e._list_el=e.shadow_root.querySelector("#list-container"),e.render(t),e.hasAttribute("ip")&&e.ip(e.getAttribute("ip")),e.hasAttribute("port")&&e.port(e.getAttribute("port")),e.hasAttribute("protocol")&&e.protocol(e.getAttribute("protocol")),e.hasAttribute("addr-disabled")&&e.ip_disabled(e.getAttribute("addr-disabled")),e._list=[],e.addEventListener("mouseover",e.show_list.bind(q()(e)),!1),e.addEventListener("mouseout",e.hide_list.bind(q()(e)),!1),e.hide_list(),e}return s()(i,[{key:"is_valid",value:function(){return this._addr.is_valid()&&this._port.value>0&&this._port.value<=65535}},{key:"show_list",value:function(e){this._list.length&&(this._list_el.style.display="block")}},{key:"hide_list",value:function(e){this._list_el.style.display="none"}},{key:"add",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e=null==t&&null==n&&null==r?{protocol:this.protocol(),ip:this.ip(),port:this.port()}:{protocol:t,ip:n,port:r};var i=this._list.find((function(t){return t.protocol==e.protocol&&t.ip==e.ip&&t.port==e.port}));i||(this._list.push(e),this._render_list(),this.dispatchEvent(new CustomEvent("added",{detail:e})))}},{key:"remove",value:function(e,t,n){this._list=this._list.filter((function(r){return!(r.protocol==e&&r.ip==t&&r.port==n)})),this._render_list(),this.dispatchEvent(new CustomEvent("removed",{detail:{protocol:e,ip:t,port:n}}))}},{key:"clear",value:function(){this._list=[],this._render_list(),this.dispatchEvent(new Event("clear"))}},{key:"render",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t?(this._select.innerHTML="",Object.values(t).forEach((function(t){var n=document.createElement("option");n.value=t.value,n.textContent=t.name,e._select.appendChild(n)}))):this.shadow_root.querySelectorAll(".field-protocol").forEach((function(e){return e.style.display="none"}))}},{key:"ip",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null!=e&&(this._addr.value=e),this._addr.value}},{key:"ip_disabled",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null!==e&&(this._addr.disabled=Boolean(e)),this._addr.disabled}},{key:"port",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null!=e&&(this._port.value=e),this._port.value}},{key:"protocol",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null!=t&&this._select.querySelectorAll("option").forEach((function(n,r){n.value==t&&(e._select.selectedIndex=r)})),-1==this._select.selectedIndex?null:this._select.options[this._select.selectedIndex].value}},{key:"_render_list",value:function(){var e=this;if(this._list_el.innerHTML="",this._list.length){var t=document.createElement("lu");t.setAttribute("id","list"),this._list.forEach((function(n){var r=document.createElement("li");r.setAttribute("class","list-op");var i=document.createElement("div");i.value=JSON.stringify(n),i.textContent="".concat(n.protocol,"://").concat(n.ip,":").concat(n.port),i.setAttribute("class","field-op-content"),i.onclick=function(t){e.protocol(n.protocol),e.ip(n.ip),e.port(n.port),e.dispatchEvent(new CustomEvent("selected",{detail:n})),e.hide_list()},r.appendChild(i);var o=document.createElement("div");o.setAttribute("class","field-op-close"),o.onclick=function(t){e.remove(n.protocol,n.ip,n.port)},r.appendChild(o),t.appendChild(r)})),this._list_el.appendChild(t)}else this.hide_list()}}]),i}(_()(HTMLElement));customElements.define("input-socket-ipv4",J);var X={plain:{value:"plain",name:"Plain"},secure:{value:"secure",name:"Secure"}},Q=function(e){l()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=f()(t);if(n){var i=f()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return d()(this,e)});function i(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X;return o()(this,i),(e=r.call(this)).shadow_root=e.attachShadow({mode:"open"}),e.shadow_root.innerHTML="\n                <style>\n                :host{\n                    display: inline-flex;\n                    align-items: center;\n                    border-style: solid;\n                    border-width: 1px;\n                    border-radius: 5px;\n                    position: relative;\n                }\n\n                #protocol-select{\n                    border-radius: 5px;\n                    background-color: antiquewhite;\n                }\n\n                #protocol-select:focus-within{\n                    outline: 1px solid lightgrey;\n                }\n\n                #domain-addr{\n                    margin: 1px;\n                    border-radius: 5px;\n                    margin: 0px;\n                    border: transparent 0px;\n                    width: 15ch;\n                    outline: none;\n                    background-color: antiquewhite;\n                }\n\n                #domain-addr:focus-within{\n                    outline: 1px solid lightgrey;\n                }\n\n                #port{\n                    width: 8ch;\n                    border-color: transparent;\n                    margin: 2px;\n                    border-radius: 5px;\n                    background-color: antiquewhite;\n                }\n\n                #port:focus-within{\n                    outline: 1px solid lightgrey;\n                }\n\n                .field{\n                    padding: 5px 2px;\n                }\n\n                #list-container{\n                    position: absolute;\n                    padding: 5px 2px;\n                    border-radius: 5px;\n                    top: 33px;\n                    background-color: lightgray;\n                    width: 100%;\n                }\n\n                #list{\n                    list-style-type: none;\n                }\n\n                .list-op{\n                    cursor: pointer;\n                    display: flex;\n                    justify-content: space-between;\n                    align-items: center;\n                }\n\n                .list-op:hover{\n                    background-color: beige;\n                }\n\n                .field-op-content\n                {\n                    flex-grow: 4;\n                }\n\n                .field-op-close{\n                    background-color: transparent;\n                    color: red;\n                    padding: 1px 5px;\n                    border-radius: 15px;\n                }\n\n                .field-op-close:after{\n                    content: 'D7';\n                }\n\n                .field-op-close:hover{\n                    background-color: red;\n                    color: white;\n                }\n                </style>\n                <select id=protocol-select class='field field-protocol'>\n                    <slot name=protocol></slot>\n                </select>\n                <div class='field field-protocol'>://</div>\n                <input id=domain-addr class=field></input>\n                <div class=field>:</div>\n                <input id=port type=number min=0 max=65535 class=field>\n                <div id=list-container></div>\n                <slot></slot>\n            ",e._select=e.shadow_root.querySelector("#protocol-select"),e._addr=e.shadow_root.querySelector("#domain-addr"),e._port=e.shadow_root.querySelector("#port"),e._list_el=e.shadow_root.querySelector("#list-container"),e.render(t),e.hasAttribute("addr")&&e.addr(e.getAttribute("addr")),e.hasAttribute("port")&&e.port(e.getAttribute("port")),e.hasAttribute("protocol")&&e.protocol(e.getAttribute("protocol")),e.hasAttribute("addr-disabled")&&e.addr_disabled(e.getAttribute("addr-disabled")),e._list=[],e.addEventListener("mouseover",e.show_list.bind(q()(e)),!1),e.addEventListener("mouseout",e.hide_list.bind(q()(e)),!1),e.hide_list(),e}return s()(i,[{key:"is_valid",value:function(){return this._addr.is_valid()&&this._port.value>0&&this._port.value<=65535}},{key:"show_list",value:function(e){this._list.length&&(this._list_el.style.display="block")}},{key:"hide_list",value:function(e){this._list_el.style.display="none"}},{key:"add",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e=null==t&&null==n&&null==r?{protocol:this.protocol(),ip:this.addr(),port:this.port()}:{protocol:t,ip:n,port:r};var i=this._list.find((function(t){return t.protocol==e.protocol&&t.ip==e.ip&&t.port==e.port}));i||(this._list.push(e),this._render_list(),this.dispatchEvent(new CustomEvent("added",{detail:e})))}},{key:"remove",value:function(e,t,n){this._list=this._list.filter((function(r){return!(r.protocol==e&&r.ip==t&&r.port==n)})),this._render_list(),this.dispatchEvent(new CustomEvent("removed",{detail:{protocol:e,ip:t,port:n}}))}},{key:"clear",value:function(){this._list=[],this._render_list(),this.dispatchEvent(new Event("clear"))}},{key:"render",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t?(this._select.innerHTML="",Object.values(t).forEach((function(t){var n=document.createElement("option");n.value=t.value,n.textContent=t.name,e._select.appendChild(n)}))):this.shadow_root.querySelectorAll(".field-protocol").forEach((function(e){return e.style.display="none"}))}},{key:"addr",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null!=e&&(this._addr.value=e),this._addr.value}},{key:"addr_disabled",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null!==e&&(this._addr.disabled=Boolean(e)),this._addr.disabled}},{key:"port",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null!=e&&(this._port.value=e),this._port.value}},{key:"protocol",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null!=t&&this._select.querySelectorAll("option").forEach((function(n,r){n.value==t&&(e._select.selectedIndex=r)})),-1==this._select.selectedIndex?null:this._select.options[this._select.selectedIndex].value}},{key:"_render_list",value:function(){var e=this;if(this._list_el.innerHTML="",this._list.length){var t=document.createElement("lu");t.setAttribute("id","list"),this._list.forEach((function(n){var r=document.createElement("li");r.setAttribute("class","list-op");var i=document.createElement("div");i.value=JSON.stringify(n),i.textContent="".concat(n.protocol,"://").concat(n.ip,":").concat(n.port),i.setAttribute("class","field-op-content"),i.onclick=function(t){e.protocol(n.protocol),e.addr(n.ip),e.port(n.port),e.dispatchEvent(new CustomEvent("selected",{detail:n})),e.hide_list()},r.appendChild(i);var o=document.createElement("div");o.setAttribute("class","field-op-close"),o.onclick=function(t){e.remove(n.protocol,n.ip,n.port)},r.appendChild(o),t.appendChild(r)})),this._list_el.appendChild(t)}else this.hide_list()}}]),i}(_()(HTMLElement));customElements.define("input-url",Q);var ee={0:0};Object.freeze(ee);var te={DATA:0,COMMAND:1};Object.freeze(te);var ne={ROUTE_TABLE:0,CONFIG:1,STATUS:2,FULL_CONFIG:3,REBOOT:4,WAIVE_ROOT:5};Object.freeze(ne);var re={0:0};Object.freeze(re);var ie={DATA:0,COMMAND:1};Object.freeze(ie);var oe={ROUTE_TABLE:0,CONFIG:1,STATUS:2,FULL_CONFIG:3,REBOOT:4};Object.freeze(oe);var ae=n(4399),se=n(1067);function ce(e,t){Object.keys(e).forEach((function(n){var r=document.createElement("option");r.value=e[n],r.textContent=n,t.appendChild(r)}))}customElements.define("esp32-br-input",function(e){l()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=f()(t);if(n){var i=f()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return d()(this,e)});function i(){var e;return o()(this,i),(e=r.call(this))._shadow=e.attachShadow({mode:"open"}),e._shadow.innerHTML="\n            <style>\n            :host{\n                background-color: orange;\n                border-radius: 3px;\n                display: inline-block;\n            }\n\n            #input-mesh-container{\n                display: inline-flex;\n                flex-wrap: wrap;\n            }\n\n            .flex-item{\n                padding: 5px 5px 0px 5px;\n                margin: 3px 3px;\n                text-align: center;\n                border-radius: 10px;\n            }\n\n            .header{\n                background-color: green;\n            }\n\n            .data{\n                background-color: yellow;\n            }\n\n            .command{\n                background-color: darkturquoise;\n            }\n\n            #button-submit{\n                display: block;\n            }\n\n            #br-message-error{\n                background: red;\n                color: white;\n                display: block;\n                border-radius: 3px;\n            }\n            </style>\n            <div id=input-mesh-container>\n                <div class='header flex-item' title='BR Version'>\n                    <select id=br-message-version class=header-field></select>\n                    <div id=output-br-version class=header-field></div> \n                </div>\n                <div class='header flex-item' title='Message type'>\n                   <select id=br-mesh-message-type class=header-field></select>\n                   <div id=output-type class=header-field></div> \n                </div>\n                <div class='header flex-item' title='Message size'>\n                    <div id=br-message-size-size class=header-field>Size</div>\n                    <div id=output-size class=header-field>0</div>\n                </div>\n                <div class='data flex-item' title='MAC address to'>\n                    <input-x id=br-mesh-data-addr-input>\n                        <input-mac slot=input id=br-mesh-data-addr class=data-field placeholder=\"MAC Address\"></input-mac>\n                    </input-x>\n                    <div id=output-addr class=data-field></div>\n                </div>\n                <div class='data flex-item' title='Node Version'>\n                    <select id=node-message-version class=data-field></select>\n                    <div id=output-node-version class=data-field></div> \n                </div>\n                <div class='data flex-item' title='Node message type'>\n                   <select id=node-mesh-message-type class=data-field></select>\n                   <div id=output-node-type class=data-field></div> \n                </div>\n                <div class='data flex-item' title='Node message size'>\n                    <div id=node-message-size-size class=data-field>Size</div>\n                    <div id=output-node-size class=data-field>0</div>\n                </div>\n                <div class='data data-command flex-item' title='Command to Node'>\n                    <select id=node-mesh-command-comm class=data-field></select>\n                    <div id=output-node-command class=data-field></div>\n                </div>\n                <div class='data flex-item' title='Message'>\n                    <input id=br-mesh-data-data class=data-field placeholder=\"Send data\">\n                    <div id=output-data class=data-field></div>\n                </div>\n                <div class='command flex-item' title='Command to BR'>\n                    <select id=br-mesh-command-comm class=command-field></select>\n                    <div id=output-command class=command-field></div>\n                </div>\n                <div class='command flex-item' title=\"Command argument\">\n                    <input id=br-mesh-command-arg class=command-field placeholder=\"Command argument\">\n                    <div id=output-comm-arg class=command-field></div>\n                </div>\n                <div class='button flex-item'>\n                    <button id=button-submit title=Send>&#x25B6;</button>\n                    <button id=button-copy title=Copy>&#x2398;</button>\n                </div>\n                <slot class=flex-item></slot>\n            </div>\n            <div id=br-message-error></div>",e._br_version=e._shadow.querySelector("#br-message-version"),e._message_type=e._shadow.querySelector("#br-mesh-message-type"),e._command_type=e._shadow.querySelector("#br-mesh-command-comm"),e._node_version=e._shadow.querySelector("#node-message-version"),e._node_message_type=e._shadow.querySelector("#node-mesh-message-type"),e._node_command_type=e._shadow.querySelector("#node-mesh-command-comm"),ce(ee,e._br_version),ce(te,e._message_type),ce(ne,e._command_type),ce(re,e._node_version),ce(ie,e._node_message_type),ce(oe,e._node_command_type),e._shadow.querySelector("#br-mesh-data-addr-input").eraseable.onclick=function(t){e._shadow.querySelector("#br-mesh-data-addr").value="",e._shadow.querySelector("#br-mesh-data-addr").focus()},e._set_message_type(e._message_type),e._message_type.onchange=function(t){e._set_message_type(t.target)},e._set_node_message_type(),e._node_message_type.onchange=function(t){e._set_node_message_type()},e._event_send_click=new Event("send_click"),e._shadow.querySelector("#button-submit").onclick=function(t){t.detail>1||(e.calculate_set_values(),e.dispatchEvent(e._event_send_click))},e._event_send_dbl_click=new Event("send_dbl_click"),e._shadow.querySelector("#button-submit").ondblclick=function(t){e.calculate_set_values(),e.dispatchEvent(e._event_send_dbl_click)},e._event_copy=new Event("copy"),e._shadow.querySelector("#button-copy").onclick=function(t){e.calculate_set_values(),(0,se.ZP)(e.value_str),e.dispatchEvent(e._event_copy)},e.error="",e.value=null,e.value_str="",e}return s()(i,[{key:"calculate_set_values",value:function(){var e=this._calculate();if(e){this.value=e;var t=new j.O;if(!t.raw(e))return;this.value_str=t.hex()}else this.value=null,this.value_str=""}},{key:"mac",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this._shadow.querySelector("#br-mesh-data-addr");return null!==e&&(t.value=e),t.value}},{key:"_select_data",value:function(e){this._shadow.querySelectorAll(".data").forEach((function(t){t.style.display=e?"block":"none"})),this._shadow.querySelectorAll(".command").forEach((function(t){t.style.display=e?"none":"block"})),e&&this._set_node_message_type()}},{key:"_select_node_data",value:function(e){this._shadow.querySelectorAll(".data-command").forEach((function(t){t.style.display=e?"none":"block"}))}},{key:"_set_output_header",value:function(e,t,n){var r=new j.O;r.from(e,U.Nm.uint8.value),this._shadow.querySelector("#output-br-version").textContent=r.hex(),r.from(t,U.Nm.uint8.value),this._shadow.querySelector("#output-type").textContent=r.hex(),this._shadow.querySelector("#br-message-size-size").textContent=n,r.from(n,U.Nm.uint16be.value),this._shadow.querySelector("#output-size").textContent=r.hex()}},{key:"_set_output_data",value:function(e,t,n,r,i,o){var a=new j.O;a.from(e,U.Nm.hex.value),this._shadow.querySelector("#output-addr").textContent=a.hex(),a.from(t,U.Nm.uint8.value),this._shadow.querySelector("#output-node-version").textContent=a.hex(),a.from(n,U.Nm.uint8.value),this._shadow.querySelector("#output-node-type").textContent=a.hex(),a.from(r,U.Nm.uint16be.value),this._shadow.querySelector("#output-node-size").textContent=a.hex(),a.from(i,U.Nm.uint8.value),this._shadow.querySelector("#output-node-command").textContent=a.hex(),a.from(o,U.Nm.text.value),this._shadow.querySelector("#output-data").textContent=a.hex()}},{key:"_set_output_command",value:function(e,t){var n=new j.O;n.from(e,U.Nm.uint8.value),this._shadow.querySelector("#output-command").textContent=n.hex(),t.length&&(n.from(t,U.Nm.text.value),this._shadow.querySelector("#output-comm-arg").textContent=n.hex())}},{key:"_set_message_type",value:function(){var e=this._message_type;switch(+(0,ae.Jc)(e).value){case te.DATA:this._select_data(!0);break;case te.COMMAND:this._select_data(!1);break;default:console.log("Error! Type message not defined")}}},{key:"_set_node_message_type",value:function(){var e=this._node_message_type;switch(+(0,ae.Jc)(e).value){case ie.DATA:this._select_node_data(!0);break;case ie.COMMAND:this._select_node_data(!1)}}},{key:"_error",value:function(e){this._shadow.querySelector("#br-message-error").textContent=e,this.error=e}},{key:"_data_output",value:function(){var e=new j.O,t={},n=(0,ae.Jc)(this._node_version).value,r=(0,ae.Jc)(this._node_command_type).value,i=this._shadow.querySelector("#br-mesh-data-addr"),o=(0,ae.Jc)(this._node_message_type).value,a=this._shadow.querySelector("#br-mesh-data-data");if(!i.is_valid())return this._error('"'.concat(i.value,'" is not a valid MAC addr')),!1;if(e.from(i.value.replace(/:/g,""),U.Nm.hex.value),t.addr=e.raw(),e.from(n,U.Nm.uint8.value),t.node_version=e.raw(),e.from(o,U.Nm.uint8.value),t.node_type=e.raw(),t.node_command=[],o==ie.COMMAND)e.from(r,U.Nm.uint8.value),t.node_command=e.raw();else if(0==a.value.length)return this._error("Data field is empty"),!1;e.from(a.value,U.Nm.text.value),t.data=e.raw();var s=[].concat(t.node_command,t.data),c=s.length;e.from(c,U.Nm.uint16be.value),t.node_size=e.raw();var l=[].concat(t.addr,t.node_version,t.node_type,t.node_size,s),u=l.length,d=(0,ae.Jc)(this._br_version).value;e.from(d,U.Nm.uint8.value);var h=e.raw();e.from(te.DATA,U.Nm.uint8.value);var f=e.raw();return e.from("".concat(u),U.Nm.uint16be.value),f=[].concat(h,f,e.raw(),l),i.add(i.value),this._set_output_header(d,te.DATA,u),this._set_output_data(i.value.replace(/:/g,""),n,o,c,r,a.value),this._error(""),f}},{key:"_command_output",value:function(){var e=new j.O,t=(0,ae.Jc)(this._shadow.querySelector("#br-mesh-command-comm")).value;e.from(t,U.Nm.uint8.value);var n=e.raw();e.from(te.COMMAND,U.Nm.uint8.value);var r=e.raw(),i=this._shadow.querySelector("#br-mesh-command-arg").value,o=[];i.length&&(e.from(i,U.Nm.text.value),o=e.raw());var a=(0,ae.Jc)(this._br_version).value;e.from(a,U.Nm.uint8.value);var s=e.raw(),c=n.length+o.length;e.from("".concat(c),U.Nm.uint16be.value);var l=e.raw();return r=[].concat(s,r,l,n,o),this._set_output_header(a,te.COMMAND,c),this._set_output_command(t,i),this._error(""),r}},{key:"_calculate",value:function(){switch(+(0,ae.Jc)(this._message_type).value){case te.DATA:return this._data_output();case te.COMMAND:return this._command_output();default:console.log("Error submit")}return!1}}]),i}(_()(HTMLElement)));var le,ue=n(7065),de=n(4766),he=n(5612),fe=(le={},S()(le,U.Nm.text.value,{value:U.Nm.text.value,name:U.Nm.text.name,default:!0}),S()(le,U.Nm.hex.value,{value:U.Nm.hex.value,name:U.Nm.hex.name,default:!1}),S()(le,U.Nm.binary.value,{value:U.Nm.binary.value,name:U.Nm.binary.name,default:!1}),le);Object.freeze(fe);var pe={SET_INPUT:Symbol("set_comm"),INSERT_INPUT:Symbol("insert_comm"),SEND_INPUT:Symbol("send_comm"),ENABLE:Symbol("enable"),CHANGE_TYPE:Symbol("change_type"),INSERT_KEY:Symbol("insert Key"),PASTE:Symbol("paste"),CHANGE_STATE:Symbol("change_state"),COMMAND_LIST:Symbol("command_list")};Object.freeze(pe);var _e=n(1646),ve=n(6810),me={UPDATE_TYPES:Symbol("update types"),UPDATE_STORAGE:Symbol("update storage")},ye={NONE:{value:"none",name:"none",arr:null,default:!0},NL:{value:"nl",name:"NL",title:"New line (0x0a)",arr:[10]},CR:{value:"cr",name:"CR",title:"Carriage return (0x0D)",arr:[13]},NLCR:{value:"crnl",name:"CR/NL",title:"Carriage return/New line (0x0d0a)",arr:[13,10]}},ge=function(){return{configure:{types:{time:{format:de.Cu.TIME.value,precision:de.Ec.MILISECONDS.value},escaped_string:!0,append:ye.NONE.arr},storage:{save:!1,filter:{type:[z.DI.data.value]}}},data:{state:{auto_roll:!0,type:_e.uw.NONE.value},filter:{},select:Object.assign([],ve.kg),custom_paint:{custom:[],default:Object.assign({},he.v),hover:Object.assign({},he._L)}},input:{state:{enter_send:!0,type:fe.text.value},commands_history:[]}}},be="current";var ke="\n<div class=types-config-section>\n    <h3>Types</h3>\n    <table>\n        <tr><th colspan=5>Append input</th></tr>\n        <tr id=configure-append-input></tr>\n        <tr>\n            <th>Text</th>\n            <td colspan=5>\n                <input type=checkbox id=espaced-string-check><label for=espaced-string-check>escaped strings</label>\n            </td>\n        </tr>\n\x3c!--        <tr>\n            <th>#</th>\n            <th>Padding</th>\n            <th>Aggregate</th>\n            <th>Separator</th>\n            <th>Default</th>\n        </tr>\n        <tr>\n            <th>Hexa</th>\n            <td><input id=padding-hex type=checkbox></td>\n            <td><input type=number style=width:4ch></td>\n            <td><input style=width:2ch value=' '></td>\n            <td><input type=radio name=default-bin-type></td>\n        </tr>\n        <tr>\n            <th>Binary</th>\n            <td><input id=padding-binary type=checkbox></td>\n            <td><input type=number style=width:4ch></td>\n            <td><input style=width:2ch value=' '></td>\n            <td><input type=radio name=default-bin-type></td>\n        </tr>   --\x3e\n    </table>\n</div>\n<div id=configure-app-time-opt class=types-config-section>\n    <h3>Time</h3>\n    <div class=configure-app-opt>\n        <label style='display:block'>Datetime output format:<label>\n        <select style='display:block' class=configure-app-opt-select id=configure-app-time-format size=".concat(Object.keys(de.Cu).length,"></select>\n    </div>\n    <div class=configure-app-opt>\n        <label style='display:block'>Time precision:<label>\n        <select style='display:block' class=configure-app-opt-select id=configure-app-time-precision  size=").concat(Object.keys(de.Ec).length,"></select>\n    </div>\n<div>"),we=function(e){l()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=f()(t);if(n){var i=f()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return d()(this,e)});function i(){var e;return o()(this,i),(e=r.call(this))._time_format=ge().configure.types.time.format,e._time_precision=ge().configure.types.time.precision,e._append_input=ge().configure.types.append,e._type_opts={escaped_string:ge().configure.types.escaped_string},e._container=null,e}return s()(i,[{key:"time",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e&&(this._time_format=e),t&&(this._time_precision=t),(e||t)&&this.render_time_options(),{format:this._time_format,precision:this._time_precision}}},{key:"render",value:function(e){this._container=e,this._container.innerHTML=ke,this._render_time(),this._render_types()}},{key:"state",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null!==e&&(this.time(e.time.format,e.time.precision),this._type_opts={escaped_string:e.escaped_string},this._append_input=e.append,this.render_options(),this.emit(me.UPDATE_TYPES,this.state())),{time:{precision:this._time_precision,format:this._time_format},escaped_string:this._type_opts.escaped_string,append:this._append_input}}},{key:"_render_time",value:function(){var e=this,t=this._container.querySelector("#configure-app-time-format"),n=this._container.querySelector("#configure-app-time-precision");Object.keys(de.Cu).forEach((function(e){t.innerHTML+="<option value=".concat(de.Cu[e].value,">").concat(de.Cu[e].name,"</option>")})),Object.keys(de.Ec).forEach((function(e){n.innerHTML+="<option value=".concat(de.Ec[e].value,">").concat(de.Ec[e].name,"</option>")})),this.render_time_options(),t.onchange=function(n){e._time_format=(0,ae.Jc)(t).value,e.emit(me.UPDATE_TYPES,e.state())},n.onchange=function(t){e._time_precision=(0,ae.Jc)(n).value,e.emit(me.UPDATE_TYPES,e.state())}}},{key:"_render_types",value:function(){var e=this,t=this._container.querySelector("#configure-append-input");Object.keys(ye).forEach((function(e){var n=document.createElement("td"),r=ye[e];n.title=r.title?r.title:"",n.innerHTML+="<label><input type=radio name=append-input-char value=".concat(e,">").concat(r.name,"</label>"),r.default&&(n.querySelector("input").checked=!0),t.appendChild(n)}));var n=document.createElement("td");n.title="Custom",n.innerHTML+="<label><input type=radio name=append-input-char value=custom>Custom:<input id=append-input-custom-text style=width:5ch></label>",t.appendChild(n);var r=n.querySelector("#append-input-custom-text");r.addEventListener("focus",(function(e){n.querySelector("input[type=radio]").checked=!0})),r.addEventListener("blur",(function(t){var n=new j.O;n.from(r.value,U.Nm.text.value),e._append_input=n.raw(),e.emit(me.UPDATE_TYPES,e.state())})),t.querySelectorAll("input[type=radio]").forEach((function(t){return t.addEventListener("change",(function(t){if(t.target.value in ye)e._append_input=ye[t.target.value].arr;else{var n=new j.O;n.from(r.value,U.Nm.text.value),e._append_input=n.raw()}e.emit(me.UPDATE_TYPES,e.state())}))}));var i=this._container.querySelector("#espaced-string-check");i.checked=this._type_opts.escaped_string,i.addEventListener("change",(function(t){e._type_opts.escaped_string=t.target.checked,e.emit(me.UPDATE_TYPES,e.state())}))}},{key:"render_time_options",value:function(){var e=this._container.querySelector("#configure-app-time-format"),t=this._container.querySelector("#configure-app-time-precision");(0,ae.f1)(e,this._time_format),(0,ae.f1)(t,this._time_precision)}},{key:"render_options",value:function(){var e=this._container.querySelector("#espaced-string-check"),t=this._container.querySelector("#configure-append-input");e.checked=this._type_opts.escaped_string;var n=JSON.stringify(this._append_input);if(!Object.keys(ye).some((function(e){return JSON.stringify(ye[e].arr)==n&&(t.querySelector('input[value="'.concat(e,'"]')).checked=!0,!0)}))){var r=new j.O;r.raw(this._append_input),t.querySelector("input[value=custom]").checked=!0,t.querySelector("#append-input-custom-text").value=r.to(U.Nm.text.value)}}},{key:"time_format",value:function(e){return de.uc.format(e,this._time_format,this._time_precision)}},{key:"input_append",get:function(){return this._append_input}},{key:"type_options",get:function(){return this._type_opts}}]),i}(ue.I),Ee=n(8977),xe=n(2130);function Se(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Oe=function(e){l()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=f()(t);if(n){var i=f()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return d()(this,e)});function i(e,t){var n;return o()(this,i),(n=r.call(this))._model=e,n._container=t,n._container.innerHTML="\n<select id=profile-select-app></select>\n<span id=profile-reload-app class=profile-app-icon-click></span>\n<drop-menu id=profile-select-rules class=profile-app-icon></drop-menu>\n<span id=profile-save-app class=profile-app-icon-click></span>\n<span id=profile-delete-app class=profile-app-icon-click></span>\n",n._select=t.querySelector("#profile-select-app"),n._reload=t.querySelector("#profile-reload-app"),n._save=t.querySelector("#profile-save-app"),n._delete=t.querySelector("#profile-delete-app"),n._parts_select=t.querySelector("#profile-select-rules"),n.render(),n._model.on(Re.ADD,(function(e){return n.add(e)})).on(Re.REMOVE,(function(e){return n.remove(e)})),n}return s()(i,[{key:"render",value:function(){var e=this,t=document.createElement("option");t.textContent="Profiles",t.value="current",t.setAttribute("class","profile-select-current profile-select-option"),this._select.appendChild(t);var n=document.createElement("option");n.textContent="New profile",n.value="new_profile",n.setAttribute("class","profile-select-new-profile profile-select-option"),this._select.appendChild(n);var r=document.createElement("option");r.textContent="Default",r.value="default",r.setAttribute("class","profile-select-default profile-select-option"),this._select.appendChild(r),this._model._profiles.forEach((function(t){e.add(t)})),this._select.onchange=function(t){e.select_profile(t)},this._reload.title="Reload profile",this._reload.onclick=function(t){e.load_profile(t)},this._save.title="Save profile",this._save.onclick=function(t){e.save_profile(t)},this._delete.title="Delete profile",this._delete.onclick=function(t){e.delete_profile(t)},this.render_rules()}},{key:"render_rules",value:function(){this._parts_select.innerHTML="<span slot=title></span><lu id=profile-list-rules></lu>";var e=this._parts_select.querySelector("#profile-list-rules");Object.keys(Te).forEach((function(t){var n=document.createElement("li"),r=document.createElement("input"),i=document.createElement("label");r.type="checkbox",r.setAttribute("id","profile-rule-".concat(Te[t].value)),r.setAttribute("class","profile-list-opt-rule"),r.value=Te[t].value,Te[t].default&&(r.checked=!0),i.setAttribute("for","profile-rule-".concat(Te[t].value)),i.textContent=Te[t].name,i.setAttribute("class","profile-list-opt-label"),n.appendChild(r),n.appendChild(i),e.appendChild(n)}))}},{key:"rules",value:function(){var e={};return this._parts_select.querySelectorAll(".profile-list-opt-rule").forEach((function(t){e[t.value]=t.checked})),e}},{key:"add",value:function(e){var t=document.createElement("option");t.textContent=e,t.value=e,t.classList.add("profile-select-option"),this._select.appendChild(t)}},{key:"remove",value:function(e){var t,n=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Se(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Se(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(this._select.children);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.value===e)return r.remove(),void this.emit(Re.REMOVE,e)}}catch(e){n.e(e)}finally{n.f()}}},{key:"profile_default",value:function(){this._select.selectedIndex=0}},{key:"load_profile",value:function(e){var t=this._select.children[this._select.selectedIndex].value;"current"!==t&&"new_profile"!==t&&"default"!==t&&this.emit(Re.LOAD,{name:t,rules:this.rules()})}},{key:"delete_profile",value:function(e){var t=this._select.children[this._select.selectedIndex].value;"current"!==t&&"new_profile"!==t&&"default"!==t&&this.remove(t)}},{key:"save_profile",value:function(e){var t=this._select.children[this._select.selectedIndex].value;"new_profile"===t&&"default"===t||this.emit(Re.SAVE,{name:t,rules:this.rules()})}},{key:"select_profile",value:function(e){var t=this._select.children[this._select.selectedIndex].value;"new_profile"!==t?"current"!==t&&"default"!==t?this.emit(Re.LOAD,{name:t,rules:this.rules()}):"default"===t&&(this.profile_default(),this.emit(Re.DEFAULT)):this.create_new_profile()}},{key:"create_new_profile",value:function(){var e=this,t=document.createElement("div");t.setAttribute("id","profile-new-profile-name");var n=document.createElement("input"),r=document.createElement("span"),i=document.createElement("div");t.appendChild(n),t.appendChild(r),t.appendChild(i),r.setAttribute("id","profile-new-profile-name-save"),i.setAttribute("id","profile-new-profile-name-error"),this._container.appendChild(t),n.setAttribute("id","profile-new-profile-name-input"),n.type="text",n.placeholder="new profile name",n.maxLength=10,n.focus(),n.onkeydown=function(e){"Enter"===e.key&&(t.dataset.check=!0,n.blur()),"Escape"===e.key&&(t.dataset.check=!1,n.blur())},r.onclick=function(e){t.dataset.check=!0},n.onblur=function(r){setTimeout((function(){"false"==t.dataset.check||void 0===t.dataset.check?(t.outerHTML="",e._select.selectedIndex=0):e.save_new_profile(n,i,t)||n.focus()}),100)}}},{key:"save_new_profile",value:function(e,t,n){return 0===e.value.length?(t.textContent="Empty profile name",!1):"current"===e.value.toLowerCase()||"new_profile"===e.value.toLowerCase()||"default"===e.value.toLowerCase()?(t.textContent='Invalid restricted profile name ("'.concat(e.value,'")'),!1):this._model._profiles.find((function(t){return t.toLowerCase()===e.value.toLowerCase()}))?(t.textContent='Profile already exist ("'.concat(e.value,'")'),!1):(this.emit(Re.ADD,e.value),this._select.selectedIndex=this._select.children.length-1,n.outerHTML="",!0)}}]),i}(ue.I);var Re={LOAD:"load_profile",SAVE:"save_profile",ADD:"add_profile",REMOVE:"remove_profile",DEFAULT:"default_profile"};Object.freeze(Re);var Te={input:{value:"input",name:"Input",default:!0},data:{value:"data",name:"Data",default:!0},types:{value:"types",name:"Type/Time format",default:!0},select:{value:"select",name:"Select",default:!0},filter:{value:"filter",name:"Filter",default:!0},custom_paint:{value:"custom_paint",name:"Custom Paint",default:!0},storage:{value:"storage",name:"Storage",default:!0},commands:{value:"commands",name:"Commands History",default:!0}};Object.freeze(Te);var Ae=function(e){l()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=f()(t);if(n){var i=f()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return d()(this,e)});function i(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return o()(this,i),(t=r.call(this))._profiles=n,t._view=new Oe(q()(t),e),t._view.on(Re.LOAD,(function(e){return t.emit(Re.LOAD,e)})).on(Re.SAVE,(function(e){return t.emit(Re.SAVE,e)})).on(Re.ADD,(function(e){return t.add(e)})).on(Re.REMOVE,(function(e){return t.remove(e)})).on(Re.DEFAULT,(function(){return t.emit(Re.DEFAULT,t.rules())})),t}return s()(i,[{key:"list",value:function(){return this._profiles}},{key:"rules",value:function(){return this._view.rules()}},{key:"profile_default",value:function(){this._view.profile_default(),this.emit(Re.DEFAULT,this.rules())}},{key:"add",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this._profiles.push(e),this.emit(Re.ADD,e),t&&this.emit(Re.SAVE,{name:e,rules:{}})}},{key:"remove",value:function(e){this._profiles=this._profiles.filter((function(t){return t!=e})),this.emit(Re.REMOVE,e)}}]),i}(ue.I),De=function(){function e(t,n,r){var i=this;if(o()(this,e),this._db=null,!indexedDB)return console.error("Storage IndexDB not supported"),null;var a=indexedDB.open(t,n);a.onerror=this._open_error.bind(this),a.onsuccess=this._open.bind(this),a.onblocked=this._blocked.bind(this),a.onupgradeneeded=function(e){i._onupgrade(e,r)},this._on_open=null}return s()(e,[{key:"on_open",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return this._on_open=se.WA.apply(void 0,[e].concat(n)),this}},{key:"add",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(this._db){var r=this._db.transaction(e,"readwrite");r.onerror=function(e){null!=n&&error_cb(e),e.stopImmediatePropagation()},r.objectStore(e).add(t)}}},{key:"save",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(this._db){var i=this._db.transaction(e,"readwrite").objectStore(e).put(t);i.onsuccess=function(e){null!==n&&n(e)},i.onerror=function(e){null!==r&&r(e)}}}},{key:"load",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(this._db){var i=this._db.transaction(e).objectStore(e).get(t);i.onsuccess=function(e){e.target.result&&n(e.target.result)},r&&(i.onerror=function(e){r(e)})}}},{key:"erase",value:function(e,t){this._db.transaction(e,"readwrite").objectStore(e).delete(t)}},{key:"clear",value:function(e){this._db.transaction(e,"readwrite").objectStore(e).clear()}},{key:"iterate",value:function(e,t,n,r){for(var i=arguments.length,o=new Array(i>4?i-4:0),a=4;a<i;a++)o[a-4]=arguments[a];this._db.transaction(e).objectStore(e).openCursor(t,n).onsuccess=function(e){var t=e.target.result;t&&r.apply(void 0,[t].concat(o))&&t.continue()}}},{key:"_open",value:function(e){var t=this;this._db=e.target.result,this._db.onerror=function(e){console.error("DB error",e.target.error.code,e.target.error.message)},this._db.onversionchange=function(e){t._db.close(),console.log("A new version of this page is ready. Please reload or close this tab!")},this._on_open&&this._on_open(e.target)}},{key:"_onupgrade",value:function(e,t){var n=this;console.assert(t instanceof Array,'Argument "scheme" must be of type Array'),this._db=e.target.result,t.forEach((function(e){n._db.createObjectStore(e.name,e.options)}))}},{key:"_blocked",value:function(e){console.log("Please close all other tabs with this site open!")}},{key:"_open_error",value:function(e){console.error("Error opening db",e.target.error.code,e.target.error.message,e)}}]),e}(),Ce={POST_MESSAGE:Symbol("post message"),STATUS_MESSAGE:Symbol("status message"),CONFIG_MESSAGE:Symbol("config message"),REGISTER_INPUTS:Symbol("register inputs"),CLOSE:Symbol("close"),SERVER_NAME_CHANGE:Symbol("server_name_change"),SET_AUTOCONNECT:Symbol("set autoconnect"),RECEIVED_MESSAGE:Symbol("received message"),APP_NOT_FOUND:Symbol("app not found"),ADD_APP:Symbol("new app added"),UPDATE_SESSION:Symbol("update session"),SAVE_CONNECTION:Symbol("save connection")};var Ne="local://127.0.0.1:0",Ie="local",Me=0,Pe=function(e){l()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=f()(t);if(n){var i=f()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return d()(this,e)});function i(){var e;return o()(this,i),(e=r.call(this))._session="-",e}return s()(i,[{key:"init",value:function(){this.load_connection(this.id(),this.addr(),{name:this.name(),session:this._session})}},{key:"id",value:function(){return 0}},{key:"addr",value:function(){return Ne}},{key:"full_addr",value:function(){return this.addr()}},{key:"name",value:function(){return Ie}},{key:"server_message_id",value:function(){return Me++}},{key:"server_user_id",value:function(){return 0}},{key:"user_id",value:function(){return 1}},{key:"_save_connection",value:function(){this.emit(Ce.SAVE_CONNECTION,{id:this.id(),addr:this.addr(),opts:{name:this.name(),session:this._session}})}},{key:"load_connection",value:function(e,t,n){this._session=Number.isInteger(n.session)?++n.session:0,this._save_connection()}},{key:"session",get:function(){return this._session}}]),i}(ue.I);var Le=[{name:"profile",options:{keyPath:"profile"}},{name:"connection",options:{keyPath:"addr"}},{name:"data",options:{autoIncrement:!0}}],qe=function(e){l()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=f()(t);if(n){var i=f()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return d()(this,e)});function i(e){var t;return o()(this,i),(t=r.call(this))._app=e,t._save_data_filter=null,t._save_data_check=null,t._clear_data_filter=null,t._container=null,t._storage_connections=null,t._connections={},t._storage_profiles=null,t._storage=new De("app_database",1,Le).on_open(t._init.bind(q()(t)),be),t._app.on(G.O7.CLOSE_SERVER,(function(e){return t._render_connection()})).on(G.O7.SERVER_CONNECTED,(function(e){return t._render_connection()})),t}return s()(i,[{key:"config",value:function(e){this._save_data_check.checked=e.save,this._save_data_filter.update(e.filter)}},{key:"clear_all",value:function(){this._app.data.clear(!0),this.clear_connections(),this.clear_profile()}},{key:"save_data",value:function(e){this._save_data_check.checked&&this._save_data_filter.filter(e.data)&&this._storage.save("data",e.data,this._save_data_handler.bind(this,e))}},{key:"clear_data",value:function(e){e?this._storage.erase("data",e):this._storage.clear("data")}},{key:"_save_data_handler",value:function(e,t){e.id=t.target.result}},{key:"_load_data",value:function(e){return this._app.data.prepend(e.value,e.primaryKey),!0}},{key:"save_profile",value:function(e,t){t.profile=e,this._storage.save("profile",t),this._render_profile()}},{key:"load_profile",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this._storage.load("profile",e,(function(e){t._app.configure().set_profile(e,n)}))}},{key:"erase_profile",value:function(e){this._storage.erase("profile",e),this._render_profile()}},{key:"clear_profile",value:function(){this._storage.clear("profile"),this._render_profile()}},{key:"_load_profiles",value:function(e,t){return"current"!=e.key&&t.add(e.key,!1),this._render_profile(),!0}},{key:"save_connection",value:function(e,t,n){var r={addr:t,id:e,options:n};this._storage.save("connection",r),this._connections[t]=r,this._render_connection(r)}},{key:"erase_connection",value:function(e){this._app.data.clear_filter((0,Ee.eC)(e.id),!0),this._set_autoconnect(e,!1),this._storage.erase("connection",e.addr),delete this._connections[e.addr],this._render_connection(e)}},{key:"clear_connections",value:function(){this._storage.iterate("connection",null,"next",this._erase_connection.bind(this))}},{key:"_erase_connection",value:function(e){return this.erase_connection(e.value),!0}},{key:"_load_connection",value:function(e){return this._app.add_connection(e.value.id,e.value.addr,e.value.options,e.value.options.autoconnect),this._connections[e.value.addr]={addr:e.value.addr,id:e.value.id,options:e.value.options},this._render_connection(this._connections[e.value.addr]),!0}},{key:"render",value:function(e){var t=this;this._container=e,this._container.innerHTML="\n<h4>Save Data</h3>\n<section class=storage-config-section>\n    <label><input type=checkbox id=storage-save-data-check>Save Data</label>;\n    <div id=storage-save-data></div>\n</section>\n<h4>Clear data</h4>\n<section class=storage-config-section>\n    <div id=storage-clear-data></div>\n    <hr>\n    <button id=storage-clear-button>Clear data</button><label><input id=storage-clear-check type=checkbox checked>Erase from storage</label>\n</section>\n<h4>Connections</h3>\n<section class=storage-config-section>\n    <table>\n        <tr><th>ID</th><th>Address</th><th>Name</th><th>Autoconnect</th><th>Session</th><th>Status</th><th>#</th></tr>\n        <tbody id=storage-connection></tbody>\n    </table>\n</section>\n<h4>Profiles</h3>\n<section class=storage-config-section>\n    <table id=storage-profiles>\n        <tr><th>Name</th><th>#</th></tr>\n        <tbody id=storage-profile></tbody>\n    </table>\n</section>\n<hr>\n<section class=storage-config-section>\n    <button id=storage-clear-all-button>Clear all data</button>\n</section>",this._save_data_check=this._container.querySelector("#storage-save-data-check"),this._save_data_check.checked=ge().configure.storage.save,this._save_data_filter=(0,Ee.B9)(this._container.querySelector("#storage-save-data"),null,ge().configure.storage.filter),this._app.on(xe.$l.RENDER_FILTER,(function(e){return t._save_data_filter.filter_options(e)})),this._save_data_check.addEventListener("change",(function(e){t.emit(me.UPDATE_STORAGE,{save:t._save_data_check.checked,filter:t._save_data_filter.get()})})),this._save_data_filter.on(xe.$l.RENDER_DATA,(function(e){t.emit(me.UPDATE_STORAGE,{save:t._save_data_check.checked,filter:t._save_data_filter.get()})})),this._clear_data_filter=(0,Ee.B9)(this._container.querySelector("#storage-clear-data")),this._app.on(xe.$l.RENDER_FILTER,(function(e){return t._clear_data_filter.filter_options(e)})),this._container.querySelector("#storage-clear-button").addEventListener("click",(function(e){t._app.data.clear_filter(t._clear_data_filter.get(),t._container.querySelector("#storage-clear-check").checked)})),this._container.querySelector("#storage-clear-all-button").addEventListener("click",this.clear_all.bind(this)),this._storage_connections=this._container.querySelector("#storage-connection"),this._storage_profiles=this._container.querySelector("#storage-profile")}},{key:"_init",value:function(e,t){this._storage.add("connection",{addr:Ne,id:0,options:{name:Ie,session:"-"}}),this.load_profile(t),this._storage.iterate("profile",null,"next",this._load_profiles.bind(this),this._app.configure().profiles),this._storage.iterate("data",null,"prev",this._load_data.bind(this)),this._storage.iterate("connection",null,"next",this._load_connection.bind(this))}},{key:"_render_profile",value:function(){var e=this,t=this._app.configure().profiles.list();this._storage_profiles.innerHTML="",t.length?t.forEach((function(t){var n=document.createElement("tr");n.innerHTML="<td>".concat(t,"</td><td class=close-storage-connection></td>"),n.classList.add("storage-conneciton"),n.querySelector(".close-storage-connection").addEventListener("click",(function(n){e._app.configure().profiles.remove(t)})),e._storage_profiles.appendChild(n)})):this._storage_profiles.innerHTML="<tr><td colspan=2 style='font-style:italic;'>No profiles saved</td></tr>"}},{key:"_render_connection",value:function(){var e=this;this._storage_connections.innerHTML="",Object.values(this._connections).length?Object.values(this._connections).forEach((function(t){var n=document.createElement("tr");n.classList.add("storage-conneciton"),0===t.id?n.innerHTML="<td>".concat(t.id,"</td>\n        <td>").concat(t.addr,"</td>\n        <td>").concat(t.options.name,"</td>\n        <td>-</td>\n        <td>").concat(t.options.session,"</td>\n        <td class=storage-conn-connected></td>\n        <td class=close-storage-connection></td>"):(n.innerHTML="\n        <td>".concat(t.id,"</td>\n        <td>").concat(t.addr,"</td>\n        <td>").concat(t.options.name,"</td>\n        <td><input class=storage-config-auto-connect type=checkbox ").concat(t.options.autoconnect?"checked":"","></td>\n        <td>").concat(t.options.session,"</td>\n        <td class=").concat(t.addr in e._app.servers?"storage-conn-connected":"storage-conn-disconnected","></td>\n        <td class=close-storage-connection title='Clear all data from server'></td>"),n.querySelector(".storage-config-auto-connect").addEventListener("change",e._autoconnect_cb.bind(e,t))),n.querySelector(".close-storage-connection").addEventListener("click",e.erase_connection.bind(e,t)),e._storage_connections.appendChild(n)})):this._storage_connections.innerHTML="<tr><td colspan=7 style='font-style:italic;'>No connections saved</td></tr>"}},{key:"_autoconnect_cb",value:function(e,t){this._set_autoconnect(e,t.target.checked)}},{key:"_set_autoconnect",value:function(e,t){0!=e.id&&(e.addr in this._app.servers?this._app.servers[e.addr].autoconnect(t):(e.options.autoconnect=t,this.save_connection(e.id,e.addr,e.options)))}},{key:"connections",get:function(){return this._connections}}]),i}(ue.I);var je=function(e){l()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=f()(t);if(n){var i=f()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return d()(this,e)});function i(e,t){var n,a;return o()(this,i),(n=r.call(this))._app=e,n._button=t.button,n._modal=("modal-template",(a=document.createElement("my-modal")).id="modal-template",document.body.appendChild(a),a),n._button.onclick=function(){n._modal.show=!0},n._types=new we,n._storage=new qe(n._app),n._profile_data=ge(),n._profiles=new Ae(t.profile),n._profiles.on(Re.SAVE,(function(e){return n.save_profile(e.name,n._profile_data,e.rules)})).on(Re.LOAD,(function(e){return n.load_profile(e.name,e.rules)})).on(Re.REMOVE,(function(e){return n.erase_profile(e)})).on(Re.DEFAULT,(function(e){return n.load_default_profile(e)})),n._app.on(_e.Mk.POST,(function(e){return n.save_data(e)})).on(_e.Mk.CLEAR,(function(e){return n.clear_data(e)})).on(_e.Mk.CHANGE_STATE,(function(e){n._profile_data.data.state=e,n.save_profile(be,n._profile_data,n._profiles.rules())})).on(xe.$l.RENDER_DATA,(function(e){n._profile_data.data.filter=e,n.save_profile(be,n._profile_data,n._profiles.rules())})).on(_e.Mk.SELECT,(function(e){n._profile_data.data.select=e,n.save_profile(be,n._profile_data,n._profiles.rules())})).on(_e.Mk.CUSTOM_PAINT,(function(e){n._profile_data.data.custom_paint=e,n.save_profile(be,n._profile_data,n._profiles.rules())})).on(pe.CHANGE_STATE,(function(e){n._profile_data.input.state=e,n.save_profile(be,n._profile_data,n._profiles.rules())})).on(pe.COMMAND_LIST,(function(e){n._profile_data.input.commands_history=e,n.save_profile(be,n._profile_data,n._profiles.rules())})),n._types.on(me.UPDATE_TYPES,(function(e){n._profile_data.configure.types=e,n.save_profile(be,n._profile_data,n._profiles.rules()),n.emit(me.UPDATE_TYPES,e)})),n._storage.on(me.UPDATE_STORAGE,(function(e){n._profile_data.configure.storage=e,n.save_profile(be,n._profile_data,n._profiles.rules())})),n.render(),n}return s()(i,[{key:"config_storage",value:function(e){this._storage.config(e)}},{key:"save_connection",value:function(e,t,n){this._storage.save_connection(e,t,n)}},{key:"erase_connection",value:function(e){this._storage.erase_connection(e)}},{key:"save_data",value:function(e){this._storage.save_data(e)}},{key:"clear_data",value:function(e){this._storage.clear_data(e)}},{key:"save_profile",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._storage.save_profile(e,t,n)}},{key:"load_profile",value:function(e,t){this._storage.load_profile(e,t)}},{key:"erase_profile",value:function(e){this._storage.erase_profile(e)}},{key:"set_profile",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;(null===t||t[Te.types.value])&&(this._profile_data.configure.types=e.configure.types),(null===t||t[Te.storage.value])&&(this._profile_data.configure.storage=e.configure.storage),(null===t||t[Te.data.value])&&(this._profile_data.data.state=e.data.state),(null===t||t[Te.select.value])&&(this._profile_data.data.select=e.data.select),(null===t||t[Te.filter.value])&&(this._profile_data.data.filter=e.data.filter),(null===t||t[Te.custom_paint.value])&&(this._profile_data.data.custom_paint=e.data.custom_paint),(null===t||t[Te.input.value])&&(this._profile_data.input.state=e.input.state),(null===t||t[Te.commands.value])&&(this._profile_data.input.commands=e.input.commands_history),this._app.load_profile(e,t)}},{key:"load_default_profile",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=ge();this.set_profile(t,e)}},{key:"render",value:function(){this._modal.innerHTML="\n    <div id=configure-app-container>\n        <h1 id=configure-app-title>Configure</h1>\n        <my-tabs id=configure-tabs background>\n            <button slot=title>Types/Time</button>\n            <section class=configure-section id=configure-app-type-section></section>\n            <button slot=title>Storage</button>\n            <section class=configure-section id=configure-app-storage-section></section>\n        </my-tabs>\n    </div>",this._types.render(this._modal.querySelector("#configure-app-type-section")),this._storage.render(this._modal.querySelector("#configure-app-storage-section"))}},{key:"time",get:function(){return this._types.time()}},{key:"types",get:function(){return this._types}},{key:"connections",get:function(){return this._storage.connections}},{key:"profiles",get:function(){return this._profiles}}]),i}(ue.I),Ue=n(1584),He="https://rnascunha.github.io/xerock",ze="https://github.com/rnascunha/xerock",Ge="https://github.com/rnascunha/xerock_web",Ve="\n<style>\n    #about-modal\n    {\n        --my-modal-content-width: fit-content;\n        --my-modal-content-height: fit-content;\n        --my-modal-content-bg: #fcfcfc;\n    }\n\n    #about-content\n    {\n        padding: 20px;\n        font-size: 1.3em;\n    }\n\n    h1\n    {\n        font-size: 2em;\n        font-weight: bold;\n        margin: 15px;\n    }\n\n    p\n    {\n        margin: 7px;\n        padding: 2px;\n    }\n\n    .about-title\n    {\n        font-weight: bold;\n        padding-bottom: 4px;\n    }\n\n    .about-link\n    {\n        padding: 5px;\n        border-radius: 5px;\n    }\n\n    .about-link:hover\n    {\n        background-color: #eee;\n    }\n\n    .about-copyright{ margin-top: 30px; }\n</style>\n\n<div id=about-content>\n    <h1>About Xerock</h1>\n    <p>\n        <div class=about-title>Website:</div>\n        <div><a class=about-link target=_blank href=".concat(He,">").concat(He,"</a></div>\n    </p>\n    <p>\n        <div class=about-title>Daemon Project:</div>\n        <div><a class=about-link target=_blank href=").concat(ze,">").concat(ze,"</a></div>\n    </p>\n    <p>\n        <div class=about-title>Interface project:</div>\n        <div><a class=about-link target=_blank href=").concat(Ge,">").concat(Ge,"</a></div>\n    </p>\n    <div class=about-copyright>Copyright © ").concat(2021," <a target=_blank href=").concat("https://github.com/rnascunha",">").concat("Rafael Cunha","</a></div> \n</div>\n");function Fe(e){e.addEventListener("click",(function(e){var t=document.createElement("my-modal");t.id="about-modal",t.addEventListener("close",(function(e){t.outerHTML=""})),t.innerHTML=Ve,t.show=!0,document.body.appendChild(t)}))}var Be=function(e){l()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=f()(t);if(n){var i=f()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return d()(this,e)});function i(e,t){var n,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return o()(this,i),(n=r.call(this))._model=e,n._view=t,n._context_menu=a.context_menu,Fe(a.about),t.on(G.O7.CONNECT_REQUEST,(function(e){return n.connect(e)})),n._configure=new je(q()(n),{button:a.configure,profile:a.profile}),a.configure_instance=n._configure,n._model.on(G.O7.CLOSE_SERVER,(function(e){return n.emit(G.O7.CLOSE_SERVER,e)})).on(G.O7.SERVER_CONNECTED,(function(e){return n.emit(G.O7.SERVER_CONNECTED,e)})).on(Ue.r.UPDATE_IDS,(function(e){return n.emit(Ue.r.UPDATE_IDS,e)})).on(Ue.r.CHECK_IDS,(function(e){return n.emit(Ue.r.CHECK_IDS,e)})).on(G.O7.RECEIVED_MESSAGE,(function(e){return n.emit(G.O7.RECEIVED_MESSAGE,e)})).on(_e.Mk.POST,(function(e){return n.emit(_e.Mk.POST,e)})).on(_e.Mk.CLEAR,(function(e){return n.emit(_e.Mk.CLEAR,e)})).on(_e.Mk.SELECT,(function(e){return n.emit(_e.Mk.SELECT,e)})).on(_e.Mk.CHANGE_STATE,(function(e){return n.emit(_e.Mk.CHANGE_STATE,e)})).on(_e.Mk.CUSTOM_PAINT,(function(e){return n.emit(_e.Mk.CUSTOM_PAINT,e)})).on(xe.$l.RENDER_DATA,(function(e){return n.emit(xe.$l.RENDER_DATA,e)})).on(xe.$l.RENDER_FILTER,(function(e){return n.emit(xe.$l.RENDER_FILTER,e)})).on(pe.CHANGE_STATE,(function(e){return n.emit(pe.CHANGE_STATE,e)})).on(pe.COMMAND_LIST,(function(e){return n.emit(pe.COMMAND_LIST,e)})).on(Ce.SAVE_CONNECTION,(function(e){return n.configure().save_connection(e.id,e.addr,e.opts)})),n._configure.on(me.UPDATE_TYPES,(function(e){return n.data.update_time(e.time)})),n._model.init(a),n}return s()(i,[{key:"connect",value:function(e){this._model.open(e.addr,e.port,e.proto,e.opt)}},{key:"register_app",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._model.register_app(e,t,n)}},{key:"register_local_app",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._model.register_local_app(e,t)}},{key:"register_command",value:function(e){this._model.register_command(e)}},{key:"register_script",value:function(e){this._model.register_script(e)}},{key:"register_view",value:function(e,t){return this.data.register_view(e,t)}},{key:"configure",value:function(){return this._configure}},{key:"load_profile",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;(null===t||t[Te.types.value])&&this.configure().types.state(e.configure.types),(null===t||t[Te.storage.value])&&this.configure().config_storage(e.configure.storage),(null===t||t[Te.data.value])&&this.data.view_state(e.data.state),(null===t||t[Te.select.value])&&this.data.select.select(e.data.select,!1),(null===t||t[Te.filter.value])&&this.data.filter.update(e.data.filter),(null===t||t[Te.custom_paint.value])&&this.data.config_custom_paint(e.data.custom_paint,!1),(null===t||t[Te.input.value])&&this.input.view_state(e.input.state),(null===t||t[Te.commands.value])&&this.input.history.list(e.input.commands_history)}},{key:"add_connection",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this._model.add_connection(e,t,n,r)}},{key:"is_connected",value:function(e){return this._model.is_connected(e)}},{key:"servers",get:function(){return this._model.servers}},{key:"data",get:function(){return this._model.data}},{key:"input",get:function(){return this._model.input}},{key:"context_menu",get:function(){return this._context_menu}}]),i}(ue.I),We=n(961),Ye=n(1996);var $e="arguments error",Ze="connecting",Ke="connected",Je="received message",Xe="close",Qe="error",et={1e3:"Normal Closure",1001:"Going Away",1002:"Protocol error",1003:"Unsupported Data",1005:"No Status Rcvd",1006:"Abnormal Closure",1007:"Invalid frame payload data",1008:"Policy Violation",1009:"Message Too Big",1010:"Mandatory Ext.",1011:"Internal Server Error",1015:"TLS handshake"},tt=function(e){l()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=f()(t);if(n){var i=f()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return d()(this,e)});function i(){var e;return o()(this,i),(e=r.call(this))._socket=null,e._addr=null,e._opt={},e}return s()(i,[{key:"open",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i={};if("localhost"==(e=e.trim())&&(e="127.0.0.1"),(0,We.uX)(e)||(0,We.Ch)(e)||(i.addr=e),(0,We.S0)(t)||(i.port=t),"ws"!=n&&"wss"!=n&&(i.protocol=n),(0,Ye.H)(i)){this._addr="".concat(n,"://").concat(e,":").concat(t);try{this._socket=new WebSocket(this._addr)}catch(e){return void this.emit(Qe,e)}this._opt=r,this._register_events(),this.emit(Ze,this)}else this.emit($e,i)}},{key:"addr",value:function(){return this._addr}},{key:"is_open",value:function(){return null!=this._socket}},{key:"options",value:function(){return this._opt}},{key:"close",value:function(){this._socket.close()}},{key:"send",value:function(e){this._socket.send(e)}},{key:"_register_events",value:function(){this._socket.onopen=this._on_open.bind(this),this._socket.onmessage=this._on_message.bind(this),this._socket.onclose=this._on_close.bind(this),this._socket.onerror=this._on_error.bind(this)}},{key:"_on_open",value:function(e){this._socket.binaryType="arraybuffer",this.emit(Ke,e)}},{key:"_on_message",value:function(e){this.emit(Je,e.data)}},{key:"_on_close",value:function(e){var t={ev:e,addr:this._addr,reason:e.reason,code:e.code,message:et.hasOwnProperty(e.code)?et["".concat(e.code)]:"Undefined"};this.emit(Xe,t),this._socket=null}},{key:"_on_error",value:function(e){this.emit(Qe,e),e.preventDefault()}}]),i}(ue.I);var nt=function(e){l()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=f()(t);if(n){var i=f()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return d()(this,e)});function i(e,t){var n,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return o()(this,i),(n=r.call(this))._id=e,n._ws=t,n._app_list={},a.forEach((function(e){return n.register_app(e.app,e.opt,e.app.app_name===V.MAIN.name)})),n._session="session"in n._ws.options()?++n._ws.options().session:0,n._name="",n._autoconnect=!1,n._num_users=-1,n._uid=-1,n._ws.on(Je,(function(e){return n._deliver_message(e)})).on(Qe,(function(e){return n.error(e)})).on(Xe,(function(e){return n._closed()})),n.on(Ce.CONFIG_MESSAGE,(function(e){e.forEach((function(e){return n._check_app_config(e)}))})),n}return s()(i,[{key:"init",value:function(){this.name(this._ws.options().name),this.autoconnect(this._ws.options().autoconnect)}},{key:"id",value:function(){return this._id}},{key:"addr",value:function(){return this._ws.addr()}},{key:"full_addr",value:function(){return this.addr()}},{key:"user_id",value:function(){return this._uid}},{key:"user_number",value:function(){return this._num_users}},{key:"add_session",value:function(){return++this._session,this._save_connection(),this.emit(Ce.UPDATE_SESSION,this.session),this._session}},{key:"name",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null!==e&&(e==this.addr()?this._name="":this._name=e,this.emit(Ce.SERVER_NAME_CHANGE,{id:this._id,name:this._name}),this.emit_all_apps(G.O7.SERVER_NAME_CHANGE,this._name),this._save_connection()),this._name}},{key:"autoconnect",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null!==e&&(this._autoconnect=Boolean(e),this.emit(Ce.SET_AUTOCONNECT,this._autoconnect),this._save_connection()),this._autoconnect}},{key:"_save_connection",value:function(){this.emit(Ce.SAVE_CONNECTION,{id:this.id(),addr:this.addr(),opts:{name:this.name(),autoconnect:this.autoconnect(),session:this.session}})}},{key:"_initiate_app",value:function(e){var t=this;e.app=new e.class(this,e.opt),e.app.on(G.O7.SEND_MESSAGE,(function(e){return t.send(e)})),e.app.on(G.O7.INPUT_REGISTER,(function(e){return t.register_input(e)})),e.app.on(G.O7.RECEIVED_MESSAGE,(function(e){return t.post_message(z.kc.received.value,e)})),this.emit(Ce.ADD_APP,{app:e.app,opt:e.opt}),(e.enableable||"main"===e.app_name)&&(e.app.enable(!0),e.enabled=!0)}},{key:"register_app",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];e.app_name in this._app_list?null===this._app_list[e.app_name].class&&(this._app_list[e.app_name].class=e,this._app_list[e.app_name].opt=t):this._app_list[e.app_name]={class:e,opt:t,app:null,enabled:!1,enableable:!1},n&&this._initiate_app(this._app_list[e.app_name])}},{key:"error",value:function(e){console.error("error",e)}},{key:"close",value:function(){this._ws.close()}},{key:"_closed",value:function(){this.emit(Ce.CLOSE,this)}},{key:"emit_all_apps",value:function(e,t){Object.values(this._app_list).forEach((function(n){null!==n.app&&n.app.emit(e,t)}))}},{key:"send",value:function(e){e.uid=this._uid,this._ws.send(JSON.stringify(e))}},{key:"register_input",value:function(e){this.emit(Ce.REGISTER_INPUTS,e)}},{key:"_deliver_message",value:function(e){var t=this;Promise.resolve().then((function(){var n=JSON.parse(e);n.hasOwnProperty("echoed")?t.post_message(G.O7.SENT,n):n.app in t._app_list&&null!=t._app_list[n.app].app?(t._app_list[n.app].app.on_message(n),t.emit(Ce.RECEIVED_MESSAGE,n)):t.emit(Ce.APP_NOT_FOUND,n)}))}},{key:"post_message",value:function(e,t){t.dir=e==z.kc.received.value?z.kc.received.value:z.kc.sent.value,t.sid=this.id(),t.saddr=this.addr(),t.sname=this.name(),t.session=this.session,this.emit(Ce.POST_MESSAGE,this._app_list[t.app].app.format_output(t))}},{key:"_check_app_config",value:function(e){if(e in this._app_list){var t=this._app_list[e];if(t.enableable=!0,null!==t.app)return void(t.enabled||(t.app.enable(!0),t.enabled=!0));null!==t.class&&null===t.app&&this._initiate_app(t)}else this._app_list[e]={class:null,opt:null,app:null,enabled:!1,enableable:!0}}},{key:"session",get:function(){return this._session}}]),i}(ue.I),rt=n(3649);var it=document.createElement("template");it.innerHTML="\n<my-retract-menu class=server-container>\n    <h3 slot=title class=title-container>\n        <span class=server-title-name></span>\n        <span class=server-title-options>\n            <input class=autoconnect-checkbox type=checkbox title=Autoconnect>\n            <span class=edit-name title='Edit name'>&#x270E;</span>\n            <span class=close title='Close connection'>&times;</span>\n        </span>\n    </h3>\n    <div class=container>\n        <div>\n            <span class=status>\n                <span class=server-id title='Server ID'>ID: </span><span class=server-id-value>-</span> | \n                <span class=users title='User ID / Total users connected'>&#x1F464;: </span>\n                <span class=user-id title='User ID'></span> / <span class=total-users title='Total users'></span> |\n                <span title='Server Session'>Session:</span><span class=server-session-value></span><span class=server-session-add></span>\n            </span>\n        </div>\n        <my-retract-menu id=app-container-list>\n            <h4 slot=title><hr title=Apps></h4>\n            <div class=container-apps></div>\n        </my-retract-menu>\n    </div>\n</my-retract-menu>";var ot=function(e){l()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=f()(t);if(n){var i=f()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return d()(this,e)});function i(e){var t;return o()(this,i),(t=r.call(this))._model=e,t._raw_container=null,t._container=null,t._model.on(Ce.STATUS_MESSAGE,(function(e){return t.status(e)})).on(Ce.CLOSE,(function(){return t.close()})).on(Ce.SERVER_NAME_CHANGE,(function(e){return t.server_name(e)})).on(Ce.SET_AUTOCONNECT,(function(e){return t.autoconnect(e)})).on(Ce.ADD_APP,(function(e){return t.add_app(e)})).on(Ce.UPDATE_SESSION,(function(e){return t.update_session(e)})),t}return s()(i,[{key:"render",value:function(e){var t=this;this._raw_container=e,this._container=e.attachShadow({mode:"open"});var n=document.createElement("style");n.innerHTML=rt.Z.toString(),this._container.appendChild(n),this._container.appendChild(it.content.cloneNode(!0)),this.server_name(),this._container.querySelector(".close").onclick=function(e){t.emit(Ce.CLOSE)};var r=this._container.querySelector(".autoconnect-checkbox");r.onclick=function(e){e.stopPropagation(),t.emit(Ce.SET_AUTOCONNECT,r.checked)},this.autoconnect(),this._container.querySelector(".server-session-add").onclick=function(e){t.emit(Ce.UPDATE_SESSION)},this.update_session(this._model.session),this._container.querySelector(".server-id-value").textContent=this._model.id(),this.edit_name(),this._container.querySelector(".server-container").show=!1}},{key:"edit_name",value:function(){var e=this;this._container.querySelector(".edit-name").onclick=function(t){t.stopPropagation();var n=e._container.querySelector(".server-title-name");n.contentEditable=!0,n.textContent=e._model.name(),n.focus(),n.onblur=function(t){n.contentEditable=!1,n.textContent||(n.textContent=e._model.addr()),e.emit(Ce.SERVER_NAME_CHANGE,n.textContent)}},this._container.querySelector(".server-title-name").title=this._model.addr()}},{key:"autoconnect",value:function(e){this._container.querySelector(".autoconnect-checkbox").checked=this._model.autoconnect()}},{key:"update_session",value:function(e){this._container.querySelector(".server-session-value").textContent=e}},{key:"server_name",value:function(e){var t=this._container.querySelector(".server-title-name");this._model.name()?t.innerHTML="<span>".concat(this._model.name()," </span>\n                                        <span style=font-size:12px>(").concat(this._model.addr(),")</span>"):t.textContent=this._model.addr()}},{key:"status",value:function(e){this._container.querySelector(".user-id").textContent=this._model.user_id()<0?"-":this._model.user_id(),this._container.querySelector(".total-users").textContent=this._model.user_number()<0?"-":this._model.user_number()}},{key:"config",value:function(e){var t=this._container.querySelector(".container-apps"),n=document.createElement("lu");e.forEach((function(e){var t=document.createElement("li");t.textContent=e,n.appendChild(t)})),t.appendChild(n)}},{key:"close",value:function(){this._raw_container&&(this._raw_container.outerHTML=""),this._raw_container=null,this._container=null}},{key:"add_app",value:function(e){if(!("container"in e.opt)||!1!==e.opt.container){var t=this._container.querySelector(".container-apps"),n=document.createElement("my-retract-menu");n.classList.add("app-container"),n.show=!1,n.innerHTML="<h4 slot=title>".concat(e.app.long_name(),"</h4>\n                            <div class=app></div>");var r=n.querySelector(".app");e.app.render(r.attachShadow({mode:"open"})),t.appendChild(n)}}}]),i}(ue.I);var at=function(e){l()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=f()(t);if(n){var i=f()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return d()(this,e)});function i(e,t,n){var a;return o()(this,i),(a=r.call(this))._model=new nt(e,t,n),a._view=new ot(a._model),a.on(G.O7.ADD_APP,(function(e){return a.register_app(e.app,e.opt)})),a._model.on(Ce.REGISTER_INPUTS,(function(e){return a.emit(Ce.REGISTER_INPUTS,e)})).on(Ce.CLOSE,(function(){return a.emit(Ce.CLOSE,q()(a))})).on(Ce.POST_MESSAGE,(function(e){return a.emit(Ce.POST_MESSAGE,e)})).on(Ce.RECEIVED_MESSAGE,(function(e){return a.emit(Ce.RECEIVED_MESSAGE,e)})).on(Ce.SERVER_NAME_CHANGE,(function(e){return a.emit(Ce.SERVER_NAME_CHANGE,e)})).on(Ce.SAVE_CONNECTION,(function(e){return a.emit(Ce.SAVE_CONNECTION,e)})),a._view.on(Ce.CLOSE,(function(){return a.close()})).on(Ce.SERVER_NAME_CHANGE,(function(e){return a.name(e)})).on(Ce.SET_AUTOCONNECT,(function(e){return a.autoconnect(e)})).on(Ce.UPDATE_SESSION,(function(){return a.add_session()})),a}return s()(i,[{key:"id",value:function(){return this._model.id()}},{key:"addr",value:function(){return this._model.addr()}},{key:"full_addr",value:function(){return this._model.full_addr()}},{key:"name",value:function(e){return this._model.name(e)}},{key:"autoconnect",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this._model.autoconnect(e)}},{key:"close",value:function(){this._model.close()}},{key:"add_session",value:function(){return this._model.add_session()}},{key:"register_app",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._model.register_app(e,t)}},{key:"render",value:function(e){this._view.render(e),this._model.init()}}]),i}(ue.I),st=n(4630),ct=n(4580);var lt=function(e){l()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=f()(t);if(n){var i=f()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return d()(this,e)});function i(e){var t;return o()(this,i),(t=r.call(this,V.MAIN.name,e))._server=e,t}return s()(i,[{key:"enable",value:function(){}},{key:"_format_control_config",value:function(e,t){e.data=[t.data.join(" ")]}},{key:"_format_control_status",value:function(e,t){"data"in t?(t.data.hasOwnProperty("nusers")&&e.data.push("nusers="+t.data.nusers),t.data.hasOwnProperty("uid")&&e.data.push("uid="+t.data.uid)):console.warn("[Main App] ill formated message",t)}},{key:"_control_config",value:function(e){this._server.emit(Ce.CONFIG_MESSAGE,e.data)}},{key:"_control_status",value:function(e){"data"in e?(e.data.hasOwnProperty("uid")&&(this._server._uid=e.data.uid),e.data.hasOwnProperty("nusers")&&(this._server._num_users=e.data.nusers),this._server.emit(Ce.STATUS_MESSAGE,{uid:this._uid,nusers:this._num_users})):console.warn("[Main App] ill formated message",e)}}]),i}(st.NU);function ut(e,t,n){console.assert("string"==typeof e&&"string"==typeof t);var r,i=Object.assign({},{backgroundColor:t,color:"#000000",fontWeight:"normal",fontStyle:"normal",fontSize:"14px",fontFamily:"monospace"});switch(n){case G.bt.CONFIG_RECEIVED:r={appf:[e],type:[z.DI.control.value],dir:[z.kc.received.value]},i.fontStyle="italic",i.fontWeight="bold";break;case G.bt.CONFIG_SEND:r={appf:[e],type:[z.DI.control.value],dir:[z.kc.sent.value]},i.fontStyle="italic";break;case G.bt.SENT:r={appf:[e],type:[z.DI.data.value],dir:[z.kc.sent.value]};break;default:r={appf:[e],type:[z.DI.data.value],dir:[z.kc.received.value]},i.fontWeight="bold"}return{style:i,filter:r}}var dt=n(7757),ht=n.n(dt),ft=n(8926),pt=n.n(ft),_t={UPDATE_INPUTS:Symbol("update_inputs"),RECEIVED_MESSAGE:Symbol("received message"),CHECK_IDS:Symbol("check_ids")};Object.freeze(_t);var vt={COMPLETED:"completed",ERROR:"error"};Object.freeze(vt);var mt={NO_INPUT:"No input defined",BUTTON_CANCEL:"button cancelled",SCRIPT_RUNNING:"Script already running",ID_REMOVED:"id removed",SERVER_DISCONNECT:"server disconnected",APP_UNREGISTERED:"app unregistered"};Object.freeze(mt);var yt=100;n(4880);var gt=function(){function e(){o()(this,e),this.reset()}return s()(e,[{key:"reset",value:function(){this._cancel=!1,this._reason=""}},{key:"is_cancelled",value:function(){return this._cancel}},{key:"cancel",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this._cancel=!0,this._reason=e}},{key:"reason",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e&&(this._reason=e),this._reason}}]),e}(),bt=function(e){l()(c,e);var t,n,r,i,a=(r=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=f()(r);if(i){var n=f()(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return d()(this,e)});function c(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return o()(this,c),(t=a.call(this))._name=e,t._description=n,t._token=new gt,t._id_monitor=[],t.on(_t.CHECK_IDS,(function(e){t._check_ids(e)})).on(_t.RECEIVED_MESSAGE,(function(e){})),t}return s()(c,[{key:"name",value:function(){return this._name}},{key:"description",value:function(){return this._description}},{key:"monitor_ids",value:function(e){Array.isArray(e)||(e=[e]),this._id_monitor=e}},{key:"clear_monitor_ids",value:function(){this._id_monitor=[]}},{key:"_check_ids",value:function(e){var t=this;this._id_monitor.forEach((function(n){n.server().addr()in e?n.app().name()in e[n.server().addr()]?e[n.server().addr()][n.app().name()].some((function(e){return n.compare_ids(e,!0)}))||t.cancel(mt.ID_REMOVED):t.cancel(mt.APP_UNREGISTERED):t.cancel(mt.SERVER_DISCONNECT)}))}},{key:"run",value:function(){console.error('Method "run" from "Script_Template" MUST be overrided!')}},{key:"reset",value:function(){this._token.reset()}},{key:"cancel",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this._token.cancel(e)}},{key:"token",value:function(){return this._token}},{key:"is_cancelled",value:function(){return this._token.is_cancelled()}},{key:"reason",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this._token.reason(e)}},{key:"script_busy_loop",value:(n=pt()(ht().mark((function e(){var t,n=arguments;return ht().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.length>0&&void 0!==n[0]?n[0]:yt;case 1:if(this.is_cancelled()){e.next=6;break}return e.next=4,(0,ae._v)(t);case 4:e.next=1;break;case 6:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"delay",value:(t=pt()(ht().mark((function e(t){var n,r,i;return ht().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Math.floor(t/yt),r=t%yt,i=0;case 2:if(!(i<n)){e.next=10;break}if(!this.is_cancelled()){e.next=5;break}return e.abrupt("return",!1);case 5:return e.next=7,(0,ae._v)(yt);case 7:i++,e.next=2;break;case 10:return e.next=12,(0,ae._v)(r);case 12:if(!this.is_cancelled()){e.next=14;break}return e.abrupt("return",!1);case 14:return e.abrupt("return",!0);case 15:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),c}(ue.I);var kt=function(e){l()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=f()(t);if(n){var i=f()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return d()(this,e)});function i(e){var t;return o()(this,i),(t=r.call(this))._script=e,t._running=!1,t._container=null,t._results=[],t.on(_t.CHECK_IDS,(function(t){return e.emit(_t.CHECK_IDS,t)})).on(_t.RECEIVED_MESSAGE,(function(n){t.is_running()&&e.emit(_t.RECEIVED_MESSAGE,n)})),t}return s()(i,[{key:"is_running",value:function(){return this._running}},{key:"cancel",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this._script.cancel(e)}},{key:"results",value:function(){return copy(this._results)}},{key:"enable",value:function(e){this._script.enable&&this._script.enable(e)}},{key:"run",value:function(){var e=this;if(this._set_status(!0)){this._error(""),this._script.reset();var t={};t.init=(0,z.Qb)(),this.enable(!0),new Promise(function(){var t=pt()(ht().mark((function t(n,r){return ht().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e._script.run();case 2:if(!t.sent){t.next=6;break}n(),t.next=7;break;case 6:r();case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()).then((function(){e._set_status(!1),t.status=vt.COMPLETED})).catch((function(){e._set_status(!1,"".concat(e._script.reason()?e._script.reason():"ERROR")),t.status=vt.ERROR,t.reason=e._script.reason()})).finally((function(){e.enable(!1),e._script.clear_monitor_ids(),t.end=(0,z.Qb)(),e._results.push(t)}))}}},{key:"element",value:function(e){var t=this;this._container=e;var n=document.createElement("my-retract-menu"),r=document.createElement("div");if(r.setAttribute("class","script-executor-name"),r.setAttribute("slot","title"),r.textContent=this._script.name(),n.appendChild(r),this._script.element){var i=document.createElement("div");i.attachShadow({mode:"open"}).appendChild(this._script.element()),n.appendChild(i)}var o=document.createElement("button");o.setAttribute("class","script-button"),o.onclick=function(e){t._running?t._script.cancel(mt.BUTTON_CANCEL):t.run()},n.appendChild(o);var a=document.createElement("div");a.setAttribute("class","script-error"),n.appendChild(a),this._container.appendChild(n),n.show=!1,this._set_button()}},{key:"_set_status",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return this._running&&e?(this._error(mt.SCRIPT_RUNNING),!1):(this._error(t),this._running=e,this._set_button(),!0)}},{key:"_error",value:function(e){this._container.querySelector(".script-error").textContent=e}},{key:"_set_button",value:function(){var e=this._container.querySelector(".script-button");this._running?(e.classList.add("script-button-cancel"),e.classList.remove("script-button-run"),e.textContent="cancel"):(e.classList.remove("script-button-cancel"),e.classList.add("script-button-run"),e.textContent="run")}}]),i}(ue.I);var wt=function(e){l()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=f()(t);if(n){var i=f()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return d()(this,e)});function i(){var e;return o()(this,i),(e=r.call(this))._script_list=[],e.on(_t.CHECK_IDS,(function(t){e._script_list.forEach((function(e){return e.emit(_t.CHECK_IDS,t)}))})).on(_t.RECEIVED_MESSAGE,(function(t){e._script_list.forEach((function(e){return e.emit(_t.RECEIVED_MESSAGE,t)}))})),e}return s()(i,[{key:"register",value:function(e){console.assert(e instanceof bt,'Arg "script" must be of type "Script_Template"');var t=new kt(e);this._script_list.push(t),this.emit("add_script",t)}},{key:"cancel_scripts",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this._script_list.forEach((function(t){t.is_running()&&t.cancel(e)}))}}]),i}(ue.I);var Et=function(e){l()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=f()(t);if(n){var i=f()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return d()(this,e)});function i(e,t){var n;return o()(this,i),(n=r.call(this))._model=e,n._container=t,n._model.on("add_script",(function(e){return n.add_script(e)})),n}return s()(i,[{key:"render",value:function(){this._container.innerHTML="<h3>Scripts</h3>\n                                <div id=script-executor-status></div>\n                                <div id=script-executor-error></div>\n                                <div id=script-executor-list-opt>\n                            </div>"}},{key:"add_script",value:function(e){var t=document.createElement("li");t.setAttribute("class","script-executor-container"),e.element(t),this._container.querySelector("#script-executor-list-opt").appendChild(t)}}]),i}(ue.I);var xt=function(e){l()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=f()(t);if(n){var i=f()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return d()(this,e)});function i(e){var t;return o()(this,i),(t=r.call(this))._model=new wt,t._view=new Et(t._model,e),t._view.render(),t.on(Ue.r.CHECK_IDS,(function(e){return t._model.emit(_t.CHECK_IDS,e)})).on(G.O7.RECEIVED_MESSAGE,(function(e){return t._model.emit(_t.RECEIVED_MESSAGE,e)})),t}return s()(i,[{key:"register",value:function(e){this._model.register(e)}},{key:"cancel_scripts",value:function(e){this._model.cancel_scripts(e)}}]),i}(ue.I);function St(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ot(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?St(Object(n),!0).forEach((function(t){S()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):St(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Rt=0,Tt=function(e){l()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=f()(t);if(n){var i=f()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return d()(this,e)});function i(e,t,n){var a,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return o()(this,i),(a=r.call(this))._app_list=[],a._local_app_list=[],a._server_list={},a._connecting_list={},a._options=Ot(Ot({},G.Om),s),a._data=n,a._input=e,a._input.on(pe.SEND_INPUT,a.send_input.bind(q()(a))).on(pe.CHANGE_STATE,(function(e){return a.emit(pe.CHANGE_STATE,e)})).on(pe.COMMAND_LIST,(function(e){return a.emit(pe.COMMAND_LIST,e)})),a._ids_manager=t,a._ids_manager.on(Ue.r.CHECK_IDS,(function(e){a.emit(Ue.r.CHECK_IDS,e),a._data.emit(Ue.r.CHECK_IDS,e),a._script.emit(Ue.r.CHECK_IDS,e),a._input.enable(!!a._ids_manager.has_ids())})),a._script=null,a._configure=null,a._local_server=null,a._data.on(Ue.r.PROPAGATE,(function(e){return a._ids_manager.propagate(e)})),a}return s()(i,[{key:"init",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.register_app(V.MAIN.name,lt,V.MAIN.options),this._configure=t.configure_instance,this._input.set_configure(this._configure),"script"in t&&(this._script=new xt(t.script)),this._data.on(_e.Mk.POST,(function(t){return e.emit(_e.Mk.POST,t)})).on(_e.Mk.CLEAR,(function(t){return e.emit(_e.Mk.CLEAR,t)})).on(xe.$l.RENDER_DATA,(function(t){return e.emit(xe.$l.RENDER_DATA,t)})).on(xe.$l.RENDER_FILTER,(function(t){return e.emit(xe.$l.RENDER_FILTER,t)})).on(_e.Mk.SELECT,(function(t){return e.emit(_e.Mk.SELECT,t)})).on(_e.Mk.CHANGE_STATE,(function(t){return e.emit(_e.Mk.CHANGE_STATE,t)})).on(_e.Mk.CUSTOM_PAINT,(function(t){return e.emit(_e.Mk.CUSTOM_PAINT,t)})),this._local_server=new Pe,this._local_server.on(Ce.SAVE_CONNECTION,(function(t){return e.emit(Ce.SAVE_CONNECTION,t)}))}},{key:"register_command",value:function(e){this._input.register(e)}},{key:"send_input",value:function(e){var t=this._ids_manager.selected();t?t.app().send(e.input,t,void 0,{data_type:e.type}):console.error("No ID selected")}},{key:"_check_connected",value:function(e,t,n,r){return"".concat(n,"://").concat(e,":").concat(t)in r}},{key:"open",value:function(e,t,n,r){var i=this;if(this._check_connected(e,t,n,this._server_list))this.emit($e,{reason:"Already connected"});else if(this._check_connected(e,t,n,this._connecting_list))this.emit($e,{reason:"Already trying to connect"});else{var o=new tt;o.on($e,(function(e){return i.emit($e,e)})).on(Ke,(function(e){return i.connected(o,e)})).on(Ze,(function(e){i._connecting_list[e.addr()]=e})).on(Xe,(function(e){delete i._server_list[e.addr],i.emit(G.O7.CLOSE_SERVER,e)})).on(Qe,(function(e){return i.emit(Qe,e)})),o.open(e,t,n,r)}}},{key:"connected",value:function(e,t){var n=this;delete this._connecting_list[e.addr()];var r=this.get_server_id(e.addr()),i=new at(r,e,this._app_list);i.on(Ce.REGISTER_INPUTS,(function(e){return n.register_input(e)})).on(Ce.CLOSE,(function(e){return n.close_server(e)})).on(Ce.POST_MESSAGE,(function(e){return n.post_message(e)})).on(Ce.RECEIVED_MESSAGE,(function(e){return n.emit(G.O7.RECEIVED_MESSAGE,e)})).on(Ce.SERVER_NAME_CHANGE,(function(e){return n.data.update_server_name(e.id,e.name)})).on(Ce.SAVE_CONNECTION,(function(e){return n.emit(Ce.SAVE_CONNECTION,e)})),this._server_list[i.addr()]=i,this.emit(G.O7.SERVER_CONNECTED,i),this.add_connection(r,e.addr(),e.options(),!1)}},{key:"close_server",value:function(e){delete this._server_list[e.addr()],this._ids_manager.clean(e)}},{key:"get_server_id",value:function(e){return e in this._configure.connections?this._configure.connections[e].id:++Rt}},{key:"add_connection",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(e!==this._local_server.id()){if(Rt=e>Rt?e:Rt,r){var i=t.split(/:\/\/|:/);this.open(i[1],i[2],i[0],n)}this.emit(G.O7.ADD_CONNECTION,{addr:t,options:n})}else this._local_server.load_connection(e,t,n)}},{key:"register_input",value:function(e){this._ids_manager.push_ids(e)}},{key:"register_script",value:function(e){console.assert(e instanceof bt,'Arg "script" must be of type Script_Template'),console.assert(null!==this._script,'"Script_Executor" was not initialized'),this._script.register(e)}},{key:"register_app",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t.app_name=e,this._check_app_options(e,n),this._app_list.push({app:t,opt:n}),this._emit_all_server_events(G.O7.ADD_APP,{app:t,opt:n})}},{key:"register_local_app",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e.support()){var r=new e(this._local_server,n);this._check_app_options(r.name(),n),this._local_app_list.push(r),r.on(G.O7.INPUT_REGISTER,(function(e){return t.register_input(e)})).on(G.O7.SEND_MESSAGE,(function(e){return t.post_message(e)})).on(G.O7.RECEIVED_MESSAGE,(function(e){Promise.resolve().then((function(){t.post_message(e),t.emit(G.O7.RECEIVED_MESSAGE,e)}))})),this.emit(G.O7.ADD_LOCAL_APP,{app:r,opt:n})}else console.warn("This browser doesn't support the ".concat(e.name," app."))}},{key:"_check_app_options",value:function(e,t){var n=this;this._options.app_custom_paint&&"color"in t&&function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.values(G.bt),r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;n.forEach((function(n){var i=ut(e,t,n);r&&r(i.style,i.filter)}))}(e,t.color,t.paint_types,(function(e,t){return n._data.add_custom_paint(e,t)}))}},{key:"_emit_all_server_events",value:function(e,t){Object.values(this._server_list).forEach((function(n){return n.emit(e,t)}))}},{key:"prepend_message",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this._data.prepend(e,t)}},{key:"post_message",value:function(e){this._script.emit(G.O7.RECEIVED_MESSAGE,e),this._data.post(e)}},{key:"clear_filter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._data.clear_filter(e,t)}},{key:"clear",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._data.clear(e)}},{key:"data",get:function(){return this._data}},{key:"servers",get:function(){return this._server_list}},{key:"input",get:function(){return this._input}}]),i}(ue.I),At=n(1925);var Dt=function(e){l()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=f()(t);if(n){var i=f()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return d()(this,e)});function i(e,t){var n;return o()(this,i),(n=r.call(this))._model=e,n._container=t,n._container.innerHTML="\n            <my-retract-menu>\n                <h3 class=title-app slot=title>Connect</h3>\n                <div id=server-conn-options></div>\n            </my-retract-menu>\n            <my-retract-menu>\n                <h3 class=title-app slot=title>Servers</h3>\n                <div id=server-info class=server-info></div>\n                <div id=server-conn-server-container class=server-conn-item></div>\n            </my-retract-menu>\n            <my-retract-menu>\n                <h3 class=title-app slot=title>Local</h3>\n                <div id=local-app-container class=server-conn-item></div>\n            </my-retract-menu>",e.on($e,(function(e){return n.connect_args_error(e)})).on(Qe,(function(e){return n.exception_error(e)})).on(G.O7.CLOSE_SERVER,(function(e){n.close_error(e),n.check_servers()})).on(G.O7.SERVER_CONNECTED,(function(e){return n.connected(e)})).on(G.O7.ADD_LOCAL_APP,(function(e){return n.add_local_app(e)})).on(G.O7.ADD_CONNECTION,(function(e){return n.add_connection(e.addr,e.options)})),n._options=t.querySelector("#server-conn-options"),n._servers=t.querySelector("#server-conn-server-container"),n.render(),n.check_servers(),n}return s()(i,[{key:"connect_args_error",value:function(e){var t="ERROR:";e.hasOwnProperty("protocol")&&(t+=" protocol[".concat(e.protocol,"]")),e.hasOwnProperty("addr")&&(t+=" addr[".concat(e.addr,"]")),e.hasOwnProperty("port")&&(t+=" port[".concat(e.port,"]")),e.hasOwnProperty("reason")&&(t+=e.reason),this.error(t)}},{key:"check_servers",value:function(){var e=this._container.querySelector("#server-info");0===Object.values(this._model._server_list).length?e.innerHTML="No servers connected":e.innerHTML=""}},{key:"close_error",value:function(e){1e3!==e.code?this.error("Close ".concat(e.addr,": [").concat(e.code,"] ").concat(e.message)):this.error()}},{key:"exception_error",value:function(e){this.error("[".concat(e.code,"] ").concat(e.name,": ").concat(e.message," <a target=_blank href=https://github.com/rnascunha/xerock_web#troubleshoot>link</a>"))}},{key:"render",value:function(){var e=this,t=document.createElement("div");t.setAttribute("class","server-conn-item");var n=document.createElement("input");n.setAttribute("placeholder","Set a server name"),n.setAttribute("list","server-conn-list"),n.setAttribute("class","server-conn-item"),n.addEventListener("input",(function(t){return e._check_datalist_op(t)})),t.appendChild(n);var r=document.createElement("datalist");r.setAttribute("id","server-conn-list");var i=new Q(G.$P);i.setAttribute("id","server-conn-args"),i.setAttribute("class","server-conn-item"),i.addr(G.ln),i.port(G.RF),i.protocol(G.$P.plain),this._error=document.createElement("closeable-status"),this._error.id="server-conn-error",this._error.behaviour="hidden";var o=document.createElement("div");o.setAttribute("class","server-conn-item");var a=document.createElement("button");a.textContent="Connect";var s=document.createElement("input");s.type="checkbox",s.setAttribute("id","server-conn-autoconnect"),a.onclick=function(t){e.emit(G.O7.CONNECT_REQUEST,{addr:i.addr(),port:i.port(),proto:i.protocol(),opt:{name:n.value,autoconnect:s.checked}})};var c=document.createElement("label");c.setAttribute("for","server-conn-autoconnect"),c.textContent="Auto-connect",o.appendChild(a),o.appendChild(s),o.appendChild(c),this._options.appendChild(t),this._options.appendChild(r),this._options.appendChild(i),this._options.appendChild(this._error),this._options.appendChild(o)}},{key:"error",value:function(e){e?this._error.value=e:this.clear_error()}},{key:"clear_error",value:function(){this._error.hide()}},{key:"connected",value:function(e){this.clear_error();var t=document.createElement("div");this._servers.appendChild(t),e.render(t),this.check_servers()}},{key:"add_connection",value:function(e,t){var n=document.createElement("option");n.value=t.name?t.name:e,n.textContent=e,n.dataset.opt=JSON.stringify({addr:e,name:t.name,autoconnect:t.autoconnect});var r=this._options.querySelector("#server-conn-list"),i=!0;r.querySelectorAll("option").forEach((function(e){e.textContent==n.textContent&&(e.value=n.value,i=!1)})),i&&r.appendChild(n)}},{key:"_check_datalist_op",value:function(e){var t=this;this._options.querySelector("#server-conn-list").querySelectorAll("option").forEach((function(n){if(n.value==e.target.value){var r=JSON.parse(n.dataset.opt),i=r.addr.split(/:\/\/|:/);t._options.querySelector("#server-conn-autoconnect").checked=r.autoconnect;var o=t._options.querySelector("#server-conn-args");o.addr(i[1]),o.port(i[2]),Object.values(G.$P).some((function(e){return e.value==i[0]&&(o.protocol(e.value),!0)}))}}))}},{key:"add_local_app",value:function(e){var t=this._container.querySelector("#local-app-container"),n=document.createElement("my-retract-menu");n.classList.add("local-app-container"),n.show=!1,n.innerHTML="<h4 slot=title>".concat(e.app.long_name(),"</h4>\n                            <div class=local-app></div>");var r=n.querySelector(".local-app");e.app.render(r.attachShadow({mode:"open"})),t.appendChild(n)}}]),i}(ue.I);var Ct=function(e){l()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=f()(t);if(n){var i=f()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return d()(this,e)});function i(e,t){var n;return o()(this,i),(n=r.call(this))._model=e,n._view=t,n._model.on(pe.SEND_INPUT,(function(e){return n.emit(pe.SEND_INPUT,e)})).on(pe.CHANGE_TYPE,(function(e){return n.emit(pe.CHANGE_STATE,e)})).on(pe.COMMAND_LIST,(function(e){return n.emit(pe.COMMAND_LIST,e)})),n._view.on(pe.CHANGE_STATE,(function(e){return n.emit(pe.CHANGE_STATE,e)})),n}return s()(i,[{key:"enable",value:function(e){this._model.enable(e)}},{key:"register",value:function(e){this._model.register(e)}},{key:"set_input",value:function(e,t){this._model.set_input(e,t)}},{key:"send_input",value:function(){this._model.send_input(data,type)}},{key:"set_configure",value:function(e){this._model.set_configure(e)}},{key:"view_state",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this._view.state(e)}},{key:"history",get:function(){return this._model.history}}]),i}(ue.I),Nt=function(){function e(t,n){var r=this;o()(this,e),this._model=t,this._container=n,this._model.on("render",(function(){return r.render()})).on("set index",(function(e){return r.set_index(e)})),this._container.addEventListener("click",(function(e){r._model.set(e.path[0].value)})),this._container.addEventListener("dblclick",(function(e){r._model.set(e.path[0].value,!0)})),this._container.addEventListener("keyup",(function(e){"ArrowDown"===e.key||"ArrowUp"===e.key?r._model.set(e.target.selectedIndex):"Enter"===e.key?r._model.set(e.target.selectedIndex,!0):"Delete"===e.key&&r._model.remove(e.target.selectedIndex)}))}return s()(e,[{key:"render",value:function(){var e=this;this._container.innerHTML="",this._model._recent_list.forEach((function(t,n){var r=document.createElement("option");r.value=n,r.textContent="(".concat(t.type,")|").concat(t.data),r.title="(".concat(t.type,")|").concat(t.data),e._container.appendChild(r),n==e._model._index&&(r.selected=!0),e._container.scrollTop=e._container.scrollHeight}))}},{key:"set_index",value:function(e){this._container.selectedIndex=e}}]),e}();var It=function(e){l()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=f()(t);if(n){var i=f()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return d()(this,e)});function i(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return o()(this,i),t=r.call(this),console.assert("number"==typeof n&&n>=0,"'max_comm' must be a interger and equal/greater then zero"),t._recent_list=[],t._max_comm=n,t._index=-1,t._view=new Nt(q()(t),e),t}return s()(i,[{key:"list",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null!==e&&(this._recent_list=e,this.emit("render")),this._recent_list}},{key:"remove",value:function(e){this._recent_list=this._recent_list.filter((function(t,n){return e!==n})),this.emit("render")}},{key:"add",value:function(e,t){var n=this,r={data:e,type:t};this._recent_list=this._recent_list.filter((function(e){return!n.compare(e,r)})),this._recent_list.push(r),this._max_comm&&this._recent_list.length>this._max_comm&&(this._recent_list=this._recent_list.slice(-this._max_comm,this._max_comm)),this._index=this._recent_list.length-1,this.emit("render")}},{key:"next",value:function(){if(0!==this._recent_list.length){++this._index==this._recent_list.length&&--this._index;var e=this._recent_list[this._index];return this.emit("set index",this._index),e}}},{key:"previous",value:function(){if(0!==this._recent_list.length){-1==--this._index&&(this._index=0);var e=this._recent_list[this._index];return this.emit("set index",this._index),e}}},{key:"set",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e>=0&&e<this._recent_list.length&&(this._index=e,this.emit("set index",this._index),t?this.emit(pe.SEND_INPUT,this._recent_list[e]):this.emit(pe.SET_INPUT,this._recent_list[e]))}},{key:"compare",value:function(e,t){return e.data==t.data&&e.type==t.type}}]),i}(ue.I),Mt=function(){function e(t,n){var r=this;o()(this,e),this._model=t,this._container=n,this._model.on("render",(function(){return r.render()}))}return s()(e,[{key:"render",value:function(){var e=this;this._container.innerHTML="<option class=command-disabled>Commands</option>";var t=this._model._list;if(0==t.length){var n=document.createElement("option");return n.setAttribute("class","command-call"),n.textContent="No command register",void this._container.appendChild(n)}t.forEach((function(t){var n=document.createElement("option");n.setAttribute("class","command-call"),n.textContent=t.name(),e._container.appendChild(n)})),this._container.onchange=function(e){if(0!==e.target.selectedIndex){var n=e.target.selectedOptions[0].textContent,r=t.find((function(t){return t.name()==e.target.selectedOptions[0].textContent}));if(r)if(e.target.selectedIndex=0,r.open())console.warn("Command window "+r.name()+" already opened");else{var i=document.createElement("my-draggable");i.innerHTML="<span slot=title>".concat(r.name(),"</span>");var o=document.createElement("div");o.attachShadow({mode:"open"}).appendChild(r.render()),i.appendChild(o),i.addEventListener("close",(function(e){r.open(!1)})),document.body.appendChild(i),r.open(!0)}else console.error("Command '".concat(n,"' not found"))}}}}]),e}();function Pt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return d()(this,n)}}var Lt=function(e){l()(n,e);var t=Pt(n);function n(e){var r;return o()(this,n),(r=t.call(this))._list=[],r._view=new Mt(q()(r),e),r}return s()(n,[{key:"register",value:function(e){var t=this;this._list.push(e),e.on(pe.SET_INPUT,(function(e){return t.emit(pe.SET_INPUT,e)})).on(pe.SEND_INPUT,(function(e){return t.emit(pe.SEND_INPUT,e)})),this.emit("render")}}]),n}(ue.I),qt=function(e){l()(n,e);var t=Pt(n);function n(e){var r;return o()(this,n),(r=t.call(this))._name=e,r._opened=!1,r}return s()(n,[{key:"name",value:function(){return this._name}},{key:"open",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null!=e&&(this._opened=!!e),this._opened}},{key:"render",value:function(){console.warn('Method "render" must be overrided');var e=document.createElement("div");return e.textContent='Method "render" must be overrided',e}}]),n}(ue.I);var jt=[" "],Ut=function(e){l()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=f()(t);if(n){var i=f()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return d()(this,e)});function i(){var e;return o()(this,i),(e=r.call(this))._history=null,e._commands=null,e._configure=null,e._byte_array=new j.O,e}return s()(i,[{key:"init",value:function(e,t){var n=this;e&&(this._history=new It(e),this._history.on(pe.SET_INPUT,(function(e){return n.set_input(e.data,e.type)})).on(pe.SEND_INPUT,(function(e){return n.send_input(e.data,e.type)}))),t&&(this._commands=new Lt(t),this._commands.on(pe.SET_INPUT,(function(e){return n.set_input(e.data,e.type)})).on(pe.SEND_INPUT,(function(e){return n.send_input(e.data,e.type)})))}},{key:"set_configure",value:function(e){this._configure=e}},{key:"enable",value:function(e){this.emit(pe.ENABLE,e)}},{key:"register",value:function(e){this._commands.register(e)}},{key:"set_type",value:function(e){this.emit(pe.CHANGE_TYPE,e)}},{key:"set_input",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.emit(pe.SET_INPUT,{data:e,type:t})}},{key:"insert",value:function(e){this.emit(pe.INSERT_INPUT,e)}},{key:"send_input",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(0!=e.length){try{this._byte_array.from(j.O.clear_invalid_char(e,t),t,this._configure.types.type_options),this._configure.types.input_append&&this._byte_array.raw(this._byte_array.raw().concat(this._configure.types.input_append))}catch(e){return void console.error(e.code,e.message,e.args)}0!=this._byte_array.size()&&(this._history.add(this._byte_array.to(t),t),this.emit(pe.COMMAND_LIST,this._history.list()),this.emit(pe.SEND_INPUT,{input:this._send_type(t),type:t}))}}},{key:"_send_type",value:function(e){return e===U.Nm.text.value&&this._byte_array.is_ascii_string()?this._byte_array.to(U.Nm.text.value):new Uint8Array(this._byte_array.raw())}},{key:"events",value:function(e,t){switch(e){case pe.CHANGE_TYPE:this._on_change_type(t.event,t.state,t.pre);break;case pe.INSERT_KEY:return this._on_insert_key(t.event,t.state);case pe.PASTE:return this._on_paste(t.event,t.state);case pe.SEND_INPUT:this._on_send_input(t)}}},{key:"_on_change_type",value:function(e,t,n){if(t.type!==n){this.emit(pe.CHANGE_TYPE,t);try{this._byte_array.from(t.value,n,{separator:void 0}),this.set_input(this._byte_array.to(t.type))}catch(e){console.error(e.code,e.message,e.args)}}}},{key:"_on_insert_key",value:function(e,t){switch(e.key){case"Enter":if(!t.enter_send)return!1;this.send_input(t.value,t.type);break;case"ArrowUp":var n=this._history.previous();n&&this.set_input(n.data,n.type);break;case"ArrowDown":var r=this._history.next();r&&this.set_input(r.data,r.type);break;case"Escape":this.set_input("");break;default:return this._on_char_key(e,t)}return!0}},{key:"_on_char_key",value:function(e,t){return!(e.altKey||e.ctrlKey||!j.O.is_ascii_char(e.key)||j.O.is_valid_char(e.key,t.type)||function(e){return null!=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:jt).find((function(t){return e==t}))}(e.key))}},{key:"_on_paste",value:function(e,t){var n=(e.clipboardData||window.clipboardData).getData("text");return this.insert(j.O.clear_invalid_char(n,t.type)),!0}},{key:"_on_send_input",value:function(e){this.send_input(e.value,e.type)}},{key:"history",get:function(){return this._history}}]),i}(ue.I);var Ht=function(e){l()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=f()(t);if(n){var i=f()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return d()(this,e)});function i(e,t){var n;return o()(this,i),(n=r.call(this))._model=e,n._container=t,n._container.innerHTML="\n        <div id=input-container>\n            <h1 id=input-title>Input</h1>\n            <textarea class=input-flex-item id=input-text-data placeholder='Type command' disabled title=Commands></textarea>\n            </input-resize>\n            <button class=input-flex-item id=send-button disabled title=Send></button>\n            <select class=input-flex-item id=input-commands-list size=2' title='Command list'></select>\n            <div class=input-flex-item id=input-options>\n                <select id=input-select-app class=input-option-item></select>\n                <div class=input-option-item>\n                    <select id=input-data-type></select>\n                    <label for=send-enter-box title='Enter to Send'>\n                        <input type=checkbox id=send-enter-box checked>Enter\n                    </label>\n                </div>\n                <select id=input-command class=input-option-item></select>\n            </div>\n        </div>",n._send_button=n._container.querySelector("#send-button"),n._data_input=n._container.querySelector("#input-text-data"),n._send_enter_check=n._container.querySelector("#send-enter-box"),n._send_enter_check.addEventListener("change",(function(e){return n.emit(pe.CHANGE_STATE,n.state())})),n._sel_message_type=n._container.querySelector("#input-data-type"),Object.values(fe).forEach((function(e){var t=document.createElement("option");t.value=e.value,t.textContent=e.name,"default"in e&&e.default&&(t.selected=!0,n._sel_message_type.dataset.pre=e.value),n._sel_message_type.appendChild(t)})),n._sel_message_type.addEventListener("change",(function(e){n._model.events(pe.CHANGE_TYPE,{event:e,state:n.state(),pre:n._sel_message_type.dataset.pre}),n._sel_message_type.dataset.pre=n._sel_message_type.selectedOptions[0].value,n._data_input.focus()})),n._data_input.addEventListener("keydown",(function(e){n._model.events(pe.INSERT_KEY,{event:e,state:n.state()})&&event.preventDefault()})),n._send_button.addEventListener("click",(function(e){return n._model.events(pe.SEND_INPUT,n.state())})),n._data_input.addEventListener("paste",(function(e){n._model.events(pe.PASTE,{event:e,state:n.state()}),event.preventDefault()})),n._model.on(pe.ENABLE,(function(e){return n.enable(e)})).on(pe.SET_INPUT,(function(e){return n.set(e.data,e.type)})).on(pe.SEND_INPUT,(function(){return n.send_input()})).on(pe.INSERT_INPUT,(function(e){return n.insert(e)})).on(pe.CHANGE_TYPE,(function(e){return n.set_type(e)})),n._model.init(n._container.querySelector("#input-commands-list"),n._container.querySelector("#input-command")),n}return s()(i,[{key:"enable",value:function(e){this._send_button.disabled=!e,this._data_input.disabled=!e,e&&this._data_input.focus()}},{key:"set",value:function(e,t){this._set_value(e),t&&this.set_type(t)}},{key:"send_input",value:function(){this._data_input.value="",this._data_input.focus()}},{key:"insert",value:function(e){var t=this._data_input.selectionStart;this._data_input.value=this._data_input.value.slice(0,this._data_input.selectionStart)+e+this._data_input.value.slice(this._data_input.selectionEnd),this._data_input.selectionEnd=t+e.length}},{key:"set_type",value:function(e){var t=this;e in fe&&this._sel_message_type.selectedOptions[0].value!=e&&this._sel_message_type.querySelectorAll("option").forEach((function(n){n.value==e&&(n.selected=!0,t._sel_message_type.dataset.pre=t._sel_message_type.selectedOptions[0].value)}))}},{key:"state",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null!==e&&("type"in e&&this.set_type(e.type),"value"in e&&this._set_value(e.value),"enter_send"in e&&(this._send_enter_check.checked=Boolean(e.enter_send))),{type:this._sel_message_type.selectedOptions[0].value,value:this._data_input.value,enter_send:this._send_enter_check.checked}}},{key:"_set_value",value:function(e){"string"==typeof e&&(this._data_input.value=e)}}]),i}(ue.I);function zt(e){var t=new Ut;return new Ct(t,new Ht(t,e))}var Gt=n(5198),Vt=n(9342),Ft=n(490);var Bt=function(e){l()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=f()(t);if(n){var i=f()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return d()(this,e)});function i(e,t){var n;return o()(this,i),(n=r.call(this))._model=e,n._view=t,n._model.on(_e.Mk.POST,(function(e){return n.emit(_e.Mk.POST,e)})).on(_e.Mk.CLEAR,(function(e){return n.emit(_e.Mk.CLEAR,e)})).on(xe.$l.RENDER_DATA,(function(e){return n.emit(xe.$l.RENDER_DATA,e)})).on(xe.$l.RENDER_FILTER,(function(e){n.emit(xe.$l.RENDER_FILTER,e),n.emit(xe.$l.RENDER_FILTER,n._view.emit(xe.$l.RENDER_FILTER,e))})).on(_e.Mk.SELECT,(function(e){return n.emit(_e.Mk.SELECT,e)})).on(Ue.r.PROPAGATE,(function(e){return n.emit(Ue.r.PROPAGATE,e)})),n._view.on(_e.Mk.RENDER,(function(e){return n._model.init(e)})).on(_e.Mk.CLEAR,(function(){return n.clear()})).on(_e.Mk.DELETE,(function(e){return n.remove(e)})).on(_e.Mk.CHANGE_STATE,(function(e){return n.emit(_e.Mk.CHANGE_STATE,e)})).on(_e.Mk.CUSTOM_PAINT,(function(e){return n.emit(_e.Mk.CUSTOM_PAINT,e)})).on(_e.Mk.MESSAGE_SELECT,(function(e){return n.message_select(e)})),n.on(Ue.r.CHECK_IDS,(function(e){return n._model.emit(Ue.r.CHECK_IDS,e)})),n._view.init(),n}return s()(i,[{key:"clear",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._model.clear(e)}},{key:"clear_filter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._model.clear_filter(e,t)}},{key:"prepend",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this._model.prepend(e,t)}},{key:"post",value:function(e){this._model.post(e)}},{key:"remove",value:function(e){this._model.remove(e)}},{key:"update_server_name",value:function(e,t){this._model.update_server_name(e,t)}},{key:"message_select",value:function(e){this._model.message_select(e)}},{key:"register_view",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._model.register_view(e,t,n)}},{key:"update_time",value:function(e){this._view.update_time(e)}},{key:"add_custom_paint",value:function(e,t){this._view.add_custom_paint(e,t)}},{key:"config_custom_paint",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this._view.config_custom_paint(e,t)}},{key:"view_state",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this._view.state(e)}},{key:"select",get:function(){return this._model.select}},{key:"filter",get:function(){return this._model.filter}}]),i}(ue.I);function Wt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new Vt.c(t);return new Bt(n,new Ft.X(n,e,t))}var Yt=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;o()(this,e),this._menu=null,this.init(),t&&this.make(t,n,r)}return s()(e,[{key:"init",value:function(){var e=this;this._menu||(this._menu=document.createElement("context-menu"),document.addEventListener("click",(function(t){e._menu.showing&&!Z(t,e._menu)&&(e._menu.hide(),e._menu.innerHTML="")})),document.addEventListener("contextmenu",(function(t){e._menu.showing&&!Z(t,e._menu)&&(e._menu.hide(),e._menu.innerHTML="")})),document.body.appendChild(this._menu))}},{key:"make",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._menu.innerHTML="",e&&this._menu.appendChild(e),t&&this.set(t,n)}},{key:"set",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this._menu.set(e,t)}},{key:"show",value:function(){this._menu.show()}},{key:"hide",value:function(){this._menu.innerHTML="",this._menu.hide()}},{key:"showing",get:function(){return this._menu.showing}}]),e}();function $t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Zt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$t(Object(n),!0).forEach((function(t){S()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$t(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Kt={NORMAL:Symbol("normal"),MAXIMIZED:Symbol("maximized")},Jt={grid:[["header","header","header"],["scripts","data","options"],["input","input","options"]],options:"block",scripts:"none",input:"block",state:Kt.NORMAL},Xt=document.createElement("template");Xt.innerHTML="\n<style>\n    #wrapper{\n        background: black;\n        height: 100%;\n        width: 100%;\n        display: grid;\n        grid-template-columns: 250px auto 300px;\n        grid-template-rows: 25px auto 90px;\n        grid-template-areas: \"header header header\"\n                            \"scripts data options\"\n                            \"input input options\";\n        grid-gap: 3px 3px;\n    }\n\n    #header{\n        background: red;\n        grid-area: header;\n        display: flex;\n        flex-direction: row;\n        justify-content: space-between;\n        align-items: center;\n        padding-left: 3px;\n        padding-right: 3px;\n    }\n\n    #title\n    {\n        margin-top: 4px;\n        font-family: \"Courier\", Times, serif;\n        font-size: 25px;\n        font-weigth: bold;\n    }\n\n    #title:after\n    {\n        content: var(--app-title, 'Xerock');\n    }\n\n    #profile\n    {\n        display: inline-flex;\n        border: 2px solid brown;\n        border-radius: 3px;\n        height: 80%;\n        margin: auto 2px;\n        align-items: center;\n    }\n\n    #data{\n        background: green;\n        grid-area: data;\n    }\n\n    #input{\n        background: yellow;\n        grid-area: input;\n    }\n\n    #options{\n        background: blue;\n        grid-area: options;\n    }\n\n    #scripts{\n        background: orange;\n        grid-area: scripts;\n    }\n\n    #views\n    {\n        display: inline-flex;\n        border: 2px solid brown;\n        border-radius: 3px;\n        height: 80%;\n        margin: auto 2px;\n        align-items: center;\n    }\n\n    .view-btn\n    {\n        padding: 2px;\n        height: 100%;\n        cursor: pointer;\n        margin: auto 2px;\n        color: black;\n        font-weight: bold;\n    }\n\n    .view-btn[data-active=false]\n    {\n        opacity: 0.2;\n    }\n\n    #scripts-btn:hover,\n    #input-btn:hover,\n    #options-btn:hover\n    {\n        transform: translateY(4px);\n    }\n\n    .view-btn:hover\n    {\n        opacity: 1;\n    }\n\n    .view-btn[data-active=false]:hover\n    {\n        opacity: 0.5;\n    }\n\n    #scripts-btn\n    {\n        transform: translateY(-1px);\n    }\n\n    #scripts-btn:after\n    {\n        content: '∑';  \n    }\n\n    #input-btn\n    {\n        transform: translateY(1px);\n    }\n\n    #input-btn:after\n    {\n        content: '∀';\n    }\n\n    #options-btn\n    {\n        transform: translateY(1px);\n    }\n\n    #options-btn:after\n    {\n        content: '☰';\n    }\n\n    #configure\n    {\n        display: inline-block;\n        font-size: 1.4em;\n        transform: translateY(2px);\n        cursor: pointer;\n    }\n\n    #configure:hover{\n        transform: translateY(4px);\n    }\n\n    #configure:after{\n        content: '⚙';\n    }\n\n    #about\n    {\n        display: inline-block;\n        font-size: 1.4em;\n        transform: translateY(2px);\n        cursor: pointer;\n    }\n\n    #about:hover{\n        transform: translateY(4px);\n    }\n\n    #about:after{\n        content: '©';\n    }\n</style>\n<div id=wrapper>\n    <div id=header>\n        <span id=profile></span>\n        <span id=title></span>\n        <span>\n            <select id=tools-menu></select>\n            <div id=views>\n                <span id=scripts-btn class=view-btn title='Scripts View'></span>\n                <span id=input-btn class=view-btn title='Input View'></span>\n                <span id=options-btn class=view-btn title='Apps View'></span>\n            </div>\n            <span id=configure title=Configure></span>\n            <span id=about title=About></span>\n        </span>\n    </div>\n    <w-container name=data closeable=false id=data>Data</w-container>\n    <w-container name=input maximizable=false id=input>Input</w-container>\n    <w-container name=options maximizable=false id=options>Options</w-container>\n    <w-container name=scripts maximizable=false id=scripts>Scripts</w-container>\n</div>";var Qt=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o()(this,e),this._container=t,this._container.appendChild(Xt.content.cloneNode(!0)),this._wrapper=this._container.querySelector("#wrapper"),this._data=this._container.querySelector("#data"),this._scripts=this._container.querySelector("#scripts"),this._input=this._container.querySelector("#input"),this._options=this._container.querySelector("#options"),this._scripts_btn=this._container.querySelector("#scripts-btn"),this._input_btn=this._container.querySelector("#input-btn"),this._options_btn=this._container.querySelector("#options-btn"),this._old_state=null,this._state=r.state,this.load_state(Zt(Zt({},Jt),r)),this._data.addEventListener("maximize",this._maximize.bind(this,this._data)),this._data.addEventListener("minimize",this._minimize.bind(this,this._data)),this._options.addEventListener("close",this._close_options.bind(this)),this._container.querySelector("#options-btn").addEventListener("click",(function(e){n._state!==Kt.MAXIMIZED&&n._close_options()})),this._input.addEventListener("close",this._close_input.bind(this)),this._container.querySelector("#input-btn").addEventListener("click",(function(e){n._state!==Kt.MAXIMIZED&&n._close_input()})),this._scripts.addEventListener("close",this._close_scripts.bind(this)),this._container.querySelector("#scripts-btn").addEventListener("click",(function(e){n._state!==Kt.MAXIMIZED&&n._close_scripts()}))}return s()(e,[{key:"containers",value:function(){return{header:this._container.querySelector("#header"),data:this._data,input:this._input,options:this._options,scripts:this._scripts}}},{key:"load_state",value:function(e){this._grid_state=e.grid,this._options.style.display=e.options,this._scripts.style.display=e.scripts,this._input.style.display=e.input,this._close_scripts(!1),this._set_close(this._scripts_btn,!this._is_show(this._scripts)),this._close_options(!1),this._set_close(this._options_btn,!this._is_show(this._options)),this._close_input(!1),this._set_close(this._input_btn,!this._is_show(this._input)),this._state=e.state,this._state===Kt.MAXIMIZED&&this._maximize(this._data)}},{key:"save_state",value:function(){return{grid:this._grid_state,options:this._options.style.display,scripts:this._scripts.style.display,input:this._input.style.display}}},{key:"_render",value:function(){this._wrapper.style.gridTemplateAreas=this._make_state(this._grid_state)}},{key:"_make_state",value:function(e){return e.reduce((function(e,t){return e+'"'+t.join(" ")+'" '}),"")}},{key:"_is_show",value:function(e){return"none"!==e.style.display}},{key:"_maximize",value:function(e){this._old_state=this.save_state(),this._grid_state=[["header","header","header"],["data","data","data"],["data","data","data"]],this._options.style.display="none",this._scripts.style.display="none",this._input.style.display="none",this._state=Kt.MAXIMIZED,e.set_maximize(),this._render()}},{key:"_minimize",value:function(e){this._grid_state=this._old_state.grid,this._options.style.display=this._old_state.options,this._scripts.style.display=this._old_state.scripts,this._input.style.display=this._old_state.input,this._state=Kt.NORMAL,e.set_minimize(),this._render()}},{key:"_close_options",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e&&this._is_show(this._options)||!e&&!this._is_show(this._options)?(this._options.style.display="none",this._grid_state[1][2]="data",this._grid_state[2][2]=this._is_show(input)?"input":"data",this._set_close(this._options_btn,!0)):(this._options.style.display="block",this._grid_state[1][2]="options",this._grid_state[2][2]="options",this._set_close(this._options_btn,!1)),this._render()}},{key:"_close_input",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e&&this._is_show(this._input)||!e&&!this._is_show(this._input)?(this._input.style.display="none",this._grid_state[2][1]="data",this._grid_state[2][0]=this._is_show(scripts)?"scripts":"data",this._is_show(this._options)||(this._grid_state[2][2]="data"),this._set_close(this._input_btn,!0)):(this._input.style.display="block",this._grid_state[2][1]="input",this._grid_state[2][0]="input",this._is_show(this._options)||(this._grid_state[2][2]="input"),this._set_close(this._input_btn,!1)),this._render()}},{key:"_close_scripts",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e&&this._is_show(this._scripts)||!e&&!this._is_show(this._scripts)?(this._scripts.style.display="none",this._grid_state[1][0]="data",this._is_show(this._input)||(this._grid_state[2][0]="data"),this._set_close(this._scripts_btn,!0)):(this._scripts.style.display="block",this._grid_state[1][0]="scripts",this._is_show(input)||(this._grid_state[2][0]="scripts"),this._set_close(this._scripts_btn,!1)),this._render()}},{key:"_set_close",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.dataset.active=!t}}]),e}();function en(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?en(Object(n),!0).forEach((function(t){S()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):en(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function nn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return d()(this,n)}}var rn=function(e){l()(n,e);var t=nn(n);function n(e){return o()(this,n),t.call(this,e.server().id(),e,e.server().id(),ct.m.One2One)}return s()(n,[{key:"name",value:function(){return"".concat(this._app.name(),":").concat(this._name)}},{key:"compare_message_id",value:function(e){return this.server().id()==e.sid}}]),n}(ct.y),on=function(e){l()(n,e);var t=nn(n);function n(e){var r;return o()(this,n),(r=t.call(this,V.ECHO.name,e))._app_id=e.id(),r._server_name=e.id(),r.on(G.O7.SERVER_NAME_CHANGE,(function(e){return r.server_name(e)})),r}return s()(n,[{key:"enable",value:function(e){e&&this.update_ids(new rn(this))}},{key:"send_data",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i="string"==typeof e?fe.text.value:fe.hex.value;return r.hasOwnProperty("data_type")&&(i=r.data_type),{type:i,data:e}}},{key:"message_info",value:function(e,t,n){switch(e){case G.bM.ID:case G.bM.FROM:return this._app_id;case G.bM.ID_STRING:case G.bM.FROM_STRING:return"".concat(this._app_id);case G.bM.DATA_OUTPUT:return[t.data.type,t.data.data];case G.bM.DATA_FIELD:return 1;case G.bM.IS_SAME_ID:case G.bM.IS_SAME_ID_EXACTLY:return!0}return null}},{key:"server_name",value:function(e){this._server_name=e,this.update_ids(new rn(this))}}]),n}(st.NU);function an(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return d()(this,n)}}var sn=function(e){l()(n,e);var t=an(n);function n(e,r){var i;return o()(this,n),(i=t.call(this))._model=e,i._view=r,i._model.on(G.O7.SEND_MESSAGE,(function(e){return i.emit(G.O7.SEND_MESSAGE,e)})).on(G.O7.INPUT_REGISTER,(function(e){return i.emit(G.O7.INPUT_REGISTER,e)})).on(G.O7.RECEIVED_MESSAGE,(function(e){return i.emit(G.O7.RECEIVED_MESSAGE,e)})),i}return s()(n,[{key:"name",value:function(){return this._model.name()}},{key:"long_name",value:function(){return this._model.long_name()}},{key:"on_message",value:function(e){this._model.on_message(e)}},{key:"format_output",value:function(e){return this._model.format_output(e)}},{key:"message_info",value:function(e,t,n){return this._model.message_info(e,t,n)}},{key:"send",value:function(e,t,n,r){this._model.send(e,t,n,r)}},{key:"render",value:function(e){this._view.render(e)}}]),n}(ue.I),cn=function(e){l()(n,e);var t=an(n);function n(e,r){return o()(this,n),t.call(this,e,r)}return s()(n,[{key:"enable",value:function(e){this._model.enable(e)}}]),n}(sn),ln=function(e){l()(n,e);var t=an(n);function n(e,r){return o()(this,n),t.call(this,e,r)}return s()(n,[{key:"support",value:function(){return this._model.support()}}]),n}(sn),un={STATUS:"serial status",OPEN:"serial port open",CLOSE:"serial port close",CONFIG:"serial config",ERROR:"serial error"};Object.freeze(un);var dn={50:{value:50,name:"50"},75:{value:75,name:"75"},110:{value:100,name:"110"},134:{value:134,name:"134"},150:{value:150,name:"150"},200:{value:200,name:"200"},300:{value:300,name:"300"},600:{value:600,name:"600"},1200:{value:1200,name:"1200"},1800:{value:1800,name:"1800"},2400:{value:2400,name:"2400"},4800:{value:4800,name:"4800"},9600:{value:9600,name:"9600"},19200:{value:19200,name:"19200"},38400:{value:38400,name:"38400"},57600:{value:57600,name:"57600"},115200:{value:115200,name:"115200",default:!0}};Object.freeze(dn);var hn={5:{value:5,name:"5"},6:{value:6,name:"6"},7:{value:7,name:"7"},8:{value:8,name:"8",default:!0}};Object.freeze(hn);var fn={none:{value:0,name:"None",short:"N",default:!0},odd:{value:1,name:"Odd",short:"O"},even:{value:2,name:"Even",short:"E"}};Object.freeze(fn);var pn={1:{value:0,name:"1",short:"1"},15:{value:1,name:"1.5",short:"1.5"},2:{value:2,name:"2",short:"2"}};Object.freeze(pn);var _n={none:{value:0,name:"None",short:"none"},hw:{value:2,name:"Hardware",short:"hw"},sw:{value:1,name:"Software",short:"sw"}};function vn(e,t){Object.keys(t).forEach((function(n){var r=document.createElement("option");r.value=t[n].value,r.textContent=t[n].name,t[n].hasOwnProperty("default")&&(r.selected=t[n].default),e.appendChild(r)}))}Object.freeze(_n);var mn=document.createElement("template");mn.innerHTML="\n<div id=options>\n    <div class=field>\n        <span class=label>Baudrate</span>\n        <input id=baudrate list=baudrates style=width:11ch>\n        <datalist id=baudrates></datalist>\n        \x3c!--<select id=baudrate></select>--\x3e\n    </div>\n    <div class=field>\n        <span class=label>Byte Size</span><select id=bytesize></select>\n    </div>\n    <div class=field>\n        <span class=label>Parity</span><select id=parity></select>\n    </div>\n    <div class=field>\n        <span class=label>Stopbit</span><select id=stopbit></select>\n    </div>\n    <div class=field>\n        <span class=label>Flow Control</span><select id=flowcontrol></select>\n    </div>\n    <div class='field flowcontrol-args'>\n        <span class=label>Start</span><input class=flowcontrol id=flowcontrol-start></input>\n    </div>\n    <div class='field flowcontrol-args'>\n        <span class=label>Stop</span><input class=flowcontrol id=flowcontrol-stop></input>\n    </div>\n</div>\n<closeable-status id=error behaviour=hidden></closeable-status>\n<button id=update-button>Update</button>\n<table id=table-ports>\n    <thead id=thead-ports>\n       <tr><th id=cell-port-name>Port</th><th id=conn-button-head>#</th></tr>\n    </thead>\n    <tbody id=tbody-ports>\n        <tr><td colspan=3 style=\"text-align: center\">No read</td></tr>\n    </tbody>\n</table>";var yn=function(e){l()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=f()(t);if(n){var i=f()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return d()(this,e)});function i(e,t){var n,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return o()(this,i),(n=r.call(this,e,t))._is_open=a,n._config=s,n}return s()(i,[{key:"is_open",value:function(){return this._is_open}},{key:"config",value:function(){return this._config}},{key:"short_notation",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.is_open()?gn(this.config(),e):null}},{key:"compare_message_id",value:function(e){return e.id===this.value()}}]),i}(ct.y);function gn(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n="".concat(e.baudrate,"/").concat(e.char_size),r=Object.values(fn).find((function(t){return t.value==e.parity}));n+=r?r.short:"-";var i=Object.values(pn).find((function(t){return t.value==e.stopbit}));if(n+=i?i.short:"-",t){var o=Object.values(_n).find((function(t){return t.value==e.flow_control}));n+=" "+(o?o.short:"-")}return n}var bn=function(e){l()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=f()(t);if(n){var i=f()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return d()(this,e)});function i(e){var t;return o()(this,i),(t=r.call(this,V.SERIAL.name,e,V.SERIAL.long_name))._serial_list=[],t}return s()(i,[{key:"list",value:function(){return Object.assign([],this._serial_list)}},{key:"enable",value:function(e){e&&this.serial_status()}},{key:"serial_status",value:function(){this.send_control(z.$M.status.value)}},{key:"open",value:function(e){this.send_control(z.$M.open.value,{port:e.port,baudrate:e.baudrate,char_size:e.char_size,parity:e.parity,stopbit:e.stopbit,flow_control:e.flow_control,fc_start:e.fc_start,fc_stop:e.fc_stop})}},{key:"close",value:function(e){this.send_control(z.$M.close.value,{port:e})}},{key:"send_data",value:function(e,t,n,r){return{port:t.value(),data:e}}},{key:"message_info",value:function(e,t,n){switch(e){case G.bM.ID:case G.bM.ID_STRING:case G.bM.FROM:case G.bM.FROM_STRING:return t.data.port;case G.bM.DATA_OUTPUT:return[t.data.data];case G.bM.DATA_FIELD:return 0}return null}},{key:"_control_status",value:function(e){var t=this;this._serial_list=[],e.data.ports.forEach((function(e){var n=new yn(e.port,t,e.open,e.config);t._serial_list.push(n)})),this._serial_list.sort((function(e,t){return e.name()>t.name()?1:e.name()<t.name()?-1:0})),this.update_ids(this._serial_list.filter((function(e){return e.is_open()}))),this.emit(un.STATUS,e.data.ports)}},{key:"_format_control_status",value:function(e,t){var n=[];t.hasOwnProperty("data")&&0!=t.data.ports.length&&t.data.ports.forEach((function(e){return n.push("".concat(e.port,"(").concat(e.open?gn(e.config,!1):"closed",")"))})),e.data=n}},{key:"_format_control_open",value:function(e,t){e.data=t.data.port+" "+gn(t.data)}},{key:"_format_control_close",value:function(e,t){e.data=[t.data.port]}}]),i}(st.NU),kn=n(2544);var wn=function(e){l()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=f()(t);if(n){var i=f()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return d()(this,e)});function i(e){var t;return o()(this,i),(t=r.call(this))._model=e,t._raw_container=null,t._container=null,e.on(un.STATUS,(function(e){return t.update(e)})).on(un.ERROR,(function(e){return t.error(e)})),t}return s()(i,[{key:"error",value:function(e){this._error.value=e}},{key:"render",value:function(e){var t=this;this._container=e;var n=document.createElement("style");n.innerHTML=kn.Z.toString(),this._container.appendChild(n),this._container.appendChild(mn.content.cloneNode(!0)),this._error=this._container.querySelector("#error"),this._el_tbody=this._container.querySelector("#tbody-ports"),this._el_baudrate=this._container.querySelector("#baudrate"),vn(this._container.querySelector("#baudrates"),dn),this._el_char_size=this._container.querySelector("#bytesize"),vn(this._el_char_size,hn),this._el_parity=this._container.querySelector("#parity"),vn(this._el_parity,fn),this._el_stopbit=this._container.querySelector("#stopbit"),vn(this._el_stopbit,pn),this._el_flow_control=this._container.querySelector("#flowcontrol"),vn(this._el_flow_control,_n),this._el_fc_start=this._container.querySelector("#flowcontrol-start"),this._el_fc_start.value=(0,We.LD)(17,!0),this._el_fc_stop=this._container.querySelector("#flowcontrol-stop"),this._el_fc_stop.value=(0,We.LD)(19,!0),this._container.querySelectorAll(".flowcontrol-args").forEach((function(e){return e.style.display="none"})),this._container.querySelector("#update-button").addEventListener("click",(function(e){t.emit(un.STATUS)}))}},{key:"update",value:function(e){var t=this,n=this._model.list();0!=n.length?(this._el_tbody.innerHTML="",n.forEach((function(e,n){var r=document.createElement("tr");r.setAttribute("class","table-port-line");var i=document.createElement("td");i.classList.add("table-port-name"),i.textContent=e.is_open()?"".concat(e.name()," (").concat(e.short_notation(!1),")"):e.name(),i.title=e.is_open()?"".concat(e.name(),"(").concat(e.short_notation(!0),")"):e.name(),r.appendChild(i),r.innerHTML+="<td class=conn-button data-value=".concat(e.is_open(),">").concat(e.is_open()?"&times;":"&#9658;","</td>"),t._el_tbody.appendChild(r),r.querySelector(".conn-button").addEventListener("click",(function(n){if("false"==n.target.dataset.value){var r=+t._el_baudrate.value;if(!("number"==typeof r&&r>0))return void t.error("Baudrate must be a postive number [".concat(r,"]"));var i={port:e.name(),baudrate:r,char_size:parseInt((0,ae.Jc)(t._el_char_size).value),parity:parseInt((0,ae.Jc)(t._el_parity).value),stopbit:parseInt((0,ae.Jc)(t._el_stopbit).value),flow_control:parseInt((0,ae.Jc)(t._el_flow_control).value),fc_start:parseInt(t._el_fc_start.value),fc_stop:parseInt(t._el_fc_stop.value)};t.emit(un.OPEN,i)}else t.emit(un.CLOSE,e.name())}))}))):this._el_tbody.innerHTML="<tr><td colspan=2 style='text-align: center'>No read</td></tr>"}}]),i}(ue.I);var En=function(e){l()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=f()(t);if(n){var i=f()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return d()(this,e)});function i(e){var t;o()(this,i);var n=new bn(e);return(t=r.call(this,n,new wn(n)))._view.on(un.OPEN,(function(e){return t.open(e)})).on(un.CLOSE,(function(e){return t.close(e)})).on(un.STATUS,(function(){return t.get_status()})),t}return s()(i,[{key:"open",value:function(e){this._model.open(e)}},{key:"close",value:function(e){this._model.close(e)}},{key:"get_status",value:function(){this._model.serial_status()}}]),i}(cn),xn="monitor error",Sn="send monitor",On="cancel monitor",Rn="cancel";var Tn=function(e){l()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=f()(t);if(n){var i=f()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return d()(this,e)});function i(e){var t;return o()(this,i),(t=r.call(this,V.MONITOR.name,e,V.MONITOR.long_name))._app_id=e.id(),t.on(Sn,(function(e){return t.monitor(e)})),t.on(On,(function(e){return t.cancel(e)})),t}return s()(i,[{key:"id",value:function(e){return this._app_id}},{key:"enable",value:function(e){}},{key:"monitor",value:function(e){if(e.hasOwnProperty("sample")){var t=parseInt(e.sample);if(!Number.isInteger(t)||t<1||t>60)this.emit(xn,"Sample time must be a value from 1 to 10");else{var n=e.cont;e.hasOwnProperty("cont")||(n=!1),this.send_control(z.$M.status.value,{type:"set",sample_time:t,cont:n})}}else this.emit(xn,"Sample time must be provided")}},{key:"cancel",value:function(){this.send_control(z.$M.status.value,{type:Rn})}},{key:"message_info",value:function(e,t,n){switch(e){case G.bM.ID:case G.bM.FROM:return this._app_id;case G.bM.ID_STRING:case G.bM.FROM_STRING:return"".concat(this._app_id);case G.bM.DATA_OUTPUT:return this._format_data_message(t.data)}return null}},{key:"_format_control_status",value:function(e,t){"set"==t.data.type?e.data=["sample_time="+t.data.sample_time,"cont="+t.data.cont]:e.data=[Rn]}},{key:"_format_data_message",value:function(e){return["threads=".concat(e.n_threads,"\ncpu time/%=").concat(Number(e.cpu_time).toFixed(2),"s/").concat(Number(e.cpup).toFixed(1),"%\noverall cpu time/%=").concat(Number(e.cpu_time_all).toFixed(2),"s/").concat(Number(e.cpup_all).toFixed(1),"%\nram memory/%/peak=").concat(Number(e.mem_kb),"kb/").concat(Number(e.memp).toFixed(1),"%/").concat(Number(e.peak_mem),"kb\nvirtual memory/peak=").concat(Number(e.vm_mem_kb),"kb/").concat(Number(e.peak_vm_mem),"kb\nuptime=").concat(this._format_uptime(e.up))]}},{key:"_format_uptime",value:function(e){var t=Math.floor(e/3600),n=Math.floor(e%3600/60),r=Math.floor(e%3600%60);return"".concat((0,se.Du)(t,2),":").concat((0,se.Du)(n,2),":").concat((0,se.Du)(r,2))}}]),i}(st.NU),An=n(1136);var Dn=document.createElement("template");Dn.innerHTML="\n<div id=container>\n    <label for=sample>Sample time: </label>\n    <input type=number name=sample id=sample min=".concat(1," max=").concat(60,' style="width:6ch" value=3>\n    <input type=checkbox name=continuo id=continuo>\n    <label for=continuo>continuous</label>\n    <div>\n        <button id=button-send>Send</button>\n        <button id=button-cancel>Cancel</button>\n    </div>\n    <div id=error><div>\n</div>');var Cn=function(e){l()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=f()(t);if(n){var i=f()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return d()(this,e)});function i(e){var t;return o()(this,i),(t=r.call(this))._container=null,t._model=e,e.on(xn,(function(e){return t.error(e)})),t}return s()(i,[{key:"render",value:function(e){var t=this;this._container=e;var n=document.createElement("style");n.innerHTML=An.Z.toString(),this._container.appendChild(n),this._container.appendChild(Dn.content.cloneNode(!0)),this._container.querySelector("#button-send").onclick=function(e){var n=t._container.querySelector("#sample").value,r=t._container.querySelector("#continuo").checked;t._model.emit(Sn,{sample:n,cont:r})},this._container.querySelector("#button-cancel").onclick=function(e){t._model.emit(On)}}},{key:"error",value:function(e){this._container.querySelector("#error").textContent=e}}]),i}(ue.I);var Nn=function(e){l()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=f()(t);if(n){var i=f()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return d()(this,e)});function i(e){o()(this,i);var t=new Tn(e);return r.call(this,t,new Cn(t))}return i}(cn);var In=function(e){l()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=f()(t);if(n){var i=f()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return d()(this,e)});function i(e,t,n){var a,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;o()(this,i);var c=e.id();return c.type=n,c.client=s?s.id_str():s,(a=r.call(this,c,t,e.id_str(),n))._server=e,a._client=s,a}return s()(i,[{key:"id",value:function(){return this._server.id()}},{key:"name",value:function(){var e="".concat(this._name);switch(this.type()){case ct.m.One2N:return e;case ct.m.One2All:return"".concat(e,":all");case ct.m.One2One:return"".concat(e,">").concat(this._client.name_id())}console.assert(!1,"Wrong TCP_Server_ID type defined")}},{key:"to_clients",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;switch(this.type()){case ct.m.One2N:return e?this._get_clients(e):this._server.selected_clients();case ct.m.One2All:return this._server.clients();case ct.m.One2One:return[this._client]}console.assert(!1,"Wrong TCP_Server_ID type defined")}},{key:"clients",value:function(){return this._server.clients()}},{key:"compare_ids",value:function(e){return e instanceof ct.y?!(this._server.addr()!=e._server.addr()||this._server.port()!=e._server.port()||this.type()!=e.type()||this.type()==ct.m.One2One&&(!e._client||this._client.id_str()!=e._client.id_str())):!(this._server.addr()!=e.addr||this._server.port()!=e.port||this.type()!=e.type||this.type()==ct.m.One2One&&(!e.client||this._client.id_str()!=e.client))}},{key:"_get_clients",value:function(e){Array.isArray(e)||(e=[e]);var t=[];return this._server.clients().forEach((function(n){e.forEach((function(e){n.is_equal(e.addr,e.port)&&t.push(n)}))})),t}},{key:"compare_message_id",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.id;if(this._server.is_equal(n.addr,n.port)){if(!t||this.type()==ct.m.One2N||this.type()==ct.m.One2All)return!0;var r=e.from;if(this._client.is_equal(r.addr,r.port))return!0}return!1}}]),i}(ct.y),Mn=function(){function e(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];o()(this,e),this._secure=t,this._addr=n,this._port=r,this._clients=i,this._name=""}return s()(e,[{key:"select_clients",value:function(e){var t=!!e;this._clients.forEach((function(e){return e.selected(t)}))}},{key:"is_all_clients_selected",value:function(){return 0!=this._clients.length&&this._clients.every((function(e){return 1==e.selected()}))}},{key:"selected_clients",value:function(){return this._clients.filter((function(e){return 1==e.selected()}))}},{key:"name",value:function(e){return e&&(this._name=e),this._name}},{key:"name_id",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return name.length>0?this.name():this.id_str(e)}},{key:"addr",value:function(){return this._addr}},{key:"port",value:function(){return this._port}},{key:"id",value:function(){return{addr:this.addr(),port:this.port()}}},{key:"id_str",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t="";return e&&(t="".concat(this._secure,"://")),"".concat(t).concat(this._addr,":").concat(this._port)}},{key:"full_id",value:function(){return this._name?"".concat(this._name,"(").concat(this.id(),")"):this.id_str()}},{key:"is_equal",value:function(e,t){return this._port==t&&(this._addr==e||"0.0.0.0"==this._addr)}},{key:"clients",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null!=e&&(this._clients=e),this._clients}}],[{key:"is_equal",value:function(e,t,n,r){return t==r&&(e==n||"0.0.0.0"==e||"0.0.0.0"==n)}}]),e}(),Pn=function(){function e(t,n){o()(this,e),this._addr=t,this._port=n,this._name="",this._selected=!1}return s()(e,[{key:"name",value:function(e){return e&&(this._name=e),this._name}},{key:"name_id",value:function(){return this._name.length>0?this.name():this.id_str()}},{key:"addr",value:function(){return this._addr}},{key:"port",value:function(){return this._port}},{key:"id",value:function(){return{addr:this.addr(),port:this.port()}}},{key:"id_str",value:function(){return"".concat(this._addr,":").concat(this._port)}},{key:"full_id",value:function(){return this._name?"".concat(this._name,"(").concat(this.id(),")"):this.id_str()}},{key:"is_equal",value:function(e,t){return this._port==t&&this._addr==e}},{key:"selected",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null!==e&&(this._selected=!!e),this._selected}}],[{key:"is_equal",value:function(e,t,n,r){return t==r&&e==n}}]),e}(),Ln={plain:{value:"plain",name:"Plain",selected:!0},ssl:{value:"ssl",name:"SSL",selected:!1}};Object.freeze(Ln);var qn={value:8089,min:1025,max:65536};Object.freeze(qn);var jn={SERVER_NOT_FOUND:{code:11,message:"Server not found"},CLIENT_NOT_SELECTED:{code:11,message:"No clients selected"},INVALID_ADDR:{code:20,message:"Invalid addr"},INVALID_PORT:{code:21,message:"Invalid port"},INVALID_SECURE:{code:22,message:"Invalid secure type"}};Object.freeze(jn);var Un={OPEN:"open socket",CLOSE:"close socket",STATUS:"status socket",CLOSE_CLIENT:"close client",ERROR:"error",SERVER_ERROR:"server error",UPDATE:"update server",KEEPALIVE:"keepalive config"};Object.freeze(Un);var Hn={keepalive:!1,idle:7200,interval:75,count:9};Object.freeze(Hn);var zn=function(e){l()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=f()(t);if(n){var i=f()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return d()(this,e)});function i(e){var t;return o()(this,i),(t=r.call(this,V.TCP_SERVER.name,e,V.TCP_SERVER.long_name))._list_servers=[],t._keepalive=Hn,t}return s()(i,[{key:"enable",value:function(e){e&&this._send_status()}},{key:"servers",value:function(){return(0,Ye.J)(this._list_servers)}},{key:"clients",value:function(e){var t=this._list_servers.find((function(t){return t.is_equal(e.addr,e.port)}));return!!t&&(0,Ye.J)(t.clients())}},{key:"keepalive",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null!==e&&(this._keepalive=e,this.emit(Un.KEEPALIVE,this._keepalive)),this._keepalive}},{key:"_send_status",value:function(){this.send_control(z.$M.status.value)}},{key:"send_status",value:function(){this._send_status()}},{key:"make_error",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t?{error:e,what:t}:{error:e}}},{key:"open",value:function(e){(0,We.Ch)(e.addr)?(e.port=+e.port,e.port<qn.min||e.port>qn.max?this.emit(Un.ERROR,this.make_error(jn.INVALID_PORT,e.port)):e.secure==Ln.plain.value||e.secure==Ln.ssl.value?(e.options=this.keepalive(),this.send_control(z.$M.open.value,e)):this.emit(Un.ERROR,this.make_error(jn.INVALID_SECURE,e.secure.value))):this.emit(Un.ERROR,this.make_error(jn.INVALID_ADDR,e.addr))}},{key:"close",value:function(e){this.send_control(z.$M.close.value,{addr:e.addr(),port:e.port()})}},{key:"close_client",value:function(e){this.send_control(z.$M.custom.value,e)}},{key:"send_data",value:function(e,t,n,r){var i=this._make_clients_list(t.to_clients(n));return i?{from:t.id(),to:i,data:e}:null}},{key:"_make_clients_list",value:function(e){if(!e.length)return this.emit(Un.ERROR,this.make_error(jn.CLIENT_NOT_SELECTED)),!1;var t=[];return e.forEach((function(e){return t.push({addr:e.addr(),port:e.port()})})),t}},{key:"message_info",value:function(e,t,n){switch(e){case G.bM.ID:case G.bM.ID_STRING:var r=t.data["echoed"in t?"from":"to"],i=this._search_id(r.addr,r.port);return i?e==G.bM.ID_STRING?i.id_str(!1):i.id():null;case G.bM.FROM:return t.data["echoed"in t?"to":"from"];case G.bM.FROM_STRING:var o=t.data["echoed"in t?"to":"from"],a="";return Array.isArray(o)||(o=[o]),o.forEach((function(e,t){0!=t&&(a+="\n"),a+="".concat(e.addr,":").concat(e.port)})),a;case G.bM.DATA_OUTPUT:return[t.data.data];case G.bM.DATA_FIELD:return 0}return null}},{key:"_search_id",value:function(e,t){return this._list_servers.find((function(n){return n.is_equal(e,t)}))}},{key:"_control_status",value:function(e){var t=this,n=this._list_servers;this._list_servers=[],e.data.list.forEach((function(e){var r=n.find((function(t){return t.is_equal(e.addr,e.port)})),i=[];r&&(i=r.clients());var o=[];e.clients.forEach((function(e){o.push(new Pn(e.addr,e.port))})),r?(r.clients(o),t._list_servers.push(r)):t._list_servers.push(new Mn(e.secure,e.addr,e.port,o)),o.forEach((function(e){i.forEach((function(t){t.is_equal(e.addr(),e.port())&&e.selected(t.selected())}))}))})),this._set_input_servers(),this.emit(Un.STATUS,this._list_servers)}},{key:"_control_error",value:function(e){this.emit(Un.SERVER_ERROR,e)}},{key:"_format_control_status",value:function(e,t){if(t.hasOwnProperty("data")&&t.data.hasOwnProperty("list")){var n="";t.data.list.forEach((function(e,t){0!=t&&(n+="\n"),n+="".concat(e.secure,"://").concat(e.addr,":").concat(e.port,"[").concat(e.clients.length,"]")})),e.data.push(n)}}},{key:"_format_control_open",value:function(e,t){var n=t.data;e.data.push("".concat(n.secure,"://").concat(n.addr,":").concat(n.port))}},{key:"_format_control_close",value:function(e,t){e.data.push("".concat(t.data.addr,":").concat(t.data.port))}},{key:"_format_control_custom",value:function(e,t){e.data.push("close client");var n=t.data.server,r=t.data.client;e.data.push("".concat(n.addr,":").concat(n.port)),e.data.push("".concat(r.addr,":").concat(r.port))}},{key:"_set_input_servers",value:function(){var e=this,t=[];this._list_servers.forEach((function(n){t.push(new In(n,e,ct.m.One2N)),t.push(new In(n,e,ct.m.One2All)),n.clients().forEach((function(r){t.push(new In(n,e,ct.m.One2One,r))}))})),this.update_ids(t)}}]),i}(st.NU),Gn=n(1276);var Vn=document.createElement("template");Vn.innerHTML="\n<div id=container>\n    <div id=opt-container>\n        <input-socket-ipv4 id=socket-opt ip=".concat("0.0.0.0"," port=").concat(qn.value," addr-disabled=true></input-socket-ipv4>\n        <span id=button-opt title='Socket options'>&#x2304;</span>\n    </div>\n    <div id=options-config>\n        <table>\n            <tr><th colspan=3><span>KeepAlive</span><input id=keepalive-check type=checkbox></th></tr>\n            <tr><th>Idle</th><th>Interval</th><th>Count</th></tr>\n            <tr>\n                <td><input type=number id=keepalive-idle \n                        title=Idle min=1 style=width:7ch>s</td>\n                <td><input type=number id=keepalive-intval \n                        title=Interval min=1 style=width:5ch>s</td>\n                <td><input type=number id=keepalive-count \n                        title=Count min=1 style=width:4ch></td>\n            </tr>\n        </table>\n    </div>\n    <div id=button-container>\n        <button id=button-open>Open</button>\n        <button id=button-update>Update</button>\n    </div>\n    <closeable-status id=error behaviour=hidden></closeable-status>\n    <div id=list>Sockets</div>\n    <ul id=body-list></ul>\n</div>");var Fn=function(e){l()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=f()(t);if(n){var i=f()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return d()(this,e)});function i(e){var t;return o()(this,i),(t=r.call(this))._model=e,t._container=null,t._error_el=null,t._model.on(Un.ERROR,(function(e){return t.error(e)})).on(Un.STATUS,(function(e){return t.add_servers(e)})).on(Un.SERVER_ERROR,(function(e){return t.server_error(e)})).on(Un.KEEPALIVE,(function(e){return t.keepalive(e)})),t}return s()(i,[{key:"error",value:function(e){this._error_el.value="[".concat(e.error.code,"] ").concat(e.error.message).concat(e.hasOwnProperty("what")?"="+e.what:"")}},{key:"server_error",value:function(e){this._error_el.value="[".concat(e.data.code,"] ").concat(e.data.message)}},{key:"_clear_error",value:function(){this._error_el.style.display="none"}},{key:"render",value:function(e){var t=this;this._container=e;var n=document.createElement("style");n.innerHTML=Gn.Z.toString(),this._container.appendChild(n),this._container.appendChild(Vn.content.cloneNode(!0)),this._error_el=this._container.querySelector("#error"),setTimeout((function(){var e=t._container.querySelector("#socket-opt");e.render(Ln),t._container.querySelector("#button-open").onclick=function(n){var r={secure:e.protocol(),addr:e.ip(),port:e.port()};t.emit(Un.OPEN,r)},t._container.querySelector("#button-update").onclick=function(e){t.emit(Un.UPDATE)};var n=t._container.querySelector("#options-config");n.style.display="none",t._container.querySelector("#button-opt").onclick=function(e){"none"===n.style.display?n.style.display="block":n.style.display="none"},t.keepalive(t._model.keepalive()),t._container.querySelector("#options-config").addEventListener("change",(function(e){t.keepalive()}))}),0)}},{key:"keepalive",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this._container.querySelector("#keepalive-check"),n=this._container.querySelector("#keepalive-idle"),r=this._container.querySelector("#keepalive-intval"),i=this._container.querySelector("#keepalive-count");null!==e?(t.checked=e.keepalive,n.value=e.idle,r.value=e.interval,i.value=e.count):this.emit(Un.KEEPALIVE,{keepalive:t.checked,idle:parseInt(n.value),interval:parseInt(r.value),count:parseInt(i.value)}),t.checked?(n.disabled=!1,r.disabled=!1,i.disabled=!1):(n.disabled=!0,r.disabled=!0,i.disabled=!0)}},{key:"add_servers",value:function(e){var t=this;this._clear_error();var n=this._container.querySelector("#body-list");n.innerHTML="",e.length?e.forEach((function(r){var i="<li class=item-list><table class=table-item>\n                            <thead>\n                                <tr class=line>\n                                    <th class=server-name><input class=check-input type=checkbox><span>".concat(r.full_id(),"</span></th>\n                                    <th class=close>&times;</th>\n                                </tr> \n                            </thead>\n                            <tbody class=clients-list></tbody>\n                        </table></li>"),o=(0,At.WW)(i);o.querySelector(".close").onclick=function(e){t.emit(Un.CLOSE,r)};var a=o.querySelector(".check-input");a.checked=r.is_all_clients_selected(),a.onclick=function(n){return r.select_clients(n.target.checked),t.add_servers(e)},n.appendChild(o);var s=o.querySelector(".clients-list");s.innerHTML="",r._clients.forEach((function(n){var i=document.createElement("tr");i.setAttribute("class","client-line");var o=document.createElement("td");o.setAttribute("class","client-name");var a=document.createElement("input");a.setAttribute("type","checkbox"),n.selected()&&(a.checked=!0),a.onclick=function(r){return n.selected(r.target.checked),t.add_servers(e)};var c=document.createElement("span");c.textContent="".concat(n.full_id()),o.appendChild(a),o.appendChild(c);var l=document.createElement("td");l.setAttribute("class","client-close"),l.innerHTML="&times;",i.appendChild(o),i.appendChild(l),s.appendChild(i),l.onclick=function(e){t.emit(Un.CLOSE_CLIENT,{server:{addr:r.addr(),port:r.port()},client:{addr:n.addr(),port:n.port()}})}}))})):n.innerHTML="<li class=no-server>No TCP servers listening</li>"}}]),i}(ue.I);var Bn=function(e){l()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=f()(t);if(n){var i=f()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return d()(this,e)});function i(e){var t;o()(this,i);var n=new zn(e);return(t=r.call(this,n,new Fn(n)))._view.on(Un.OPEN,(function(e){return t.open(e)})).on(Un.CLOSE,(function(e){return t.close(e)})).on(Un.CLOSE_CLIENT,(function(e){return t.close_client(e)})).on(Un.UPDATE,(function(){return t.update_server()})).on(Un.KEEPALIVE,(function(e){return t.keepalive(e)})),t}return s()(i,[{key:"open",value:function(e){this._model.open(e)}},{key:"update_server",value:function(){this._model.send_status()}},{key:"close",value:function(e){this._model.close(e)}},{key:"close_client",value:function(e){this._model.close_client(e)}},{key:"clients",value:function(e){return this._model.clients(e)}},{key:"keepalive",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this._model.keepalive(e)}}]),i}(cn);var Wn=function(e){l()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=f()(t);if(n){var i=f()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return d()(this,e)});function i(e,t,n,a){var s;return o()(this,i),(s=r.call(this,n,a,e+"://"+n.addr+":"+n.port+">"+t.addr+":"+t.port))._secure=e,s._local=n,s._remote=t,s}return s()(i,[{key:"make_value",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t="".concat(this._local.addr,":").concat(this._local.port);return e?"".concat(this._secure,"://").concat(t):t}},{key:"make_name",value:function(){}},{key:"compare",value:function(e,t,n){return this._secure===e&&this._local.addr===t.addr&&this._local.port===t.port&&this._remote.addr===n.addr&&this._remote.port===n.port}},{key:"compare_ids",value:function(e){return e instanceof ct.y?this._local.addr==e.local.addr&&this._local.port==e.local.port:this._local.addr===e.addr&&this._local.port===e.port}},{key:"compare_message_id",value:function(e){return this._local.addr==e.id.addr&&this._local.port==e.id.port}},{key:"secure",get:function(){return this._secure}},{key:"local",get:function(){return this._local}},{key:"remote",get:function(){return this._remote}}]),i}(ct.y),Yn={plain:{value:"plain",name:"Plain",selected:!0},ssl:{value:"ssl",name:"SSL",selected:!1}};Object.freeze(Yn);var $n={value:8089,min:1025,max:65535};Object.freeze($n);var Zn={NOT_FOUND:{code:11,message:"Client not found"},NOT_SELECTED:{code:11,message:"No clients selected"},INVALID_ADDR:{code:20,message:"Invalid addr"},INVALID_PORT:{code:21,message:"Invalid port"},INVALID_SECURE:{code:22,message:"Invalid secure type"}};Object.freeze(Zn);var Kn={OPEN:"open socket",CLOSE:"close socket",STATUS:"status socket",ERROR:"error",SERVER_ERROR:"server error",UPDATE:"update server",KEEPALIVE:"keepalive config"};Object.freeze(Kn);var Jn={keepalive:!1,idle:7200,interval:75,count:9};Object.freeze(Jn);var Xn=function(e){l()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=f()(t);if(n){var i=f()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return d()(this,e)});function i(e){var t;return o()(this,i),(t=r.call(this,V.TCP_CLIENT.name,e,V.TCP_CLIENT.long_name))._list={},t._keepalive=Jn,t}return s()(i,[{key:"enable",value:function(e){e&&this.send_status()}},{key:"list",value:function(){return Object.assign({},this._list)}},{key:"keepalive",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null!==e&&(this._keepalive=e,this.emit(Kn.KEEPALIVE,this._keepalive)),this._keepalive}},{key:"send_status",value:function(){this.send_control(z.$M.status.value)}},{key:"make_error",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t?{error:e,what:t}:{error:e}}},{key:"open",value:function(e){e.addr=e.addr.trim(),(0,We.Ch)(e.addr)||validate_domain_name(e.addr)?(e.port=+e.port,"number"!=typeof e.port||e.port<$n.min||e.port>$n.max?this.emit(Kn.ERROR,this.make_error(Zn.INVALID_PORT,e.port)):e.secure==Yn.plain.value||e.secure==Yn.ssl.value?(e.options=this.keepalive(),this.send_control(z.$M.open.value,e)):this.emit(Kn.ERROR,this.make_error(Zn.INVALID_SECURE,e.secure.value))):this.emit(Kn.ERROR,this.make_error(Zn.INVALID_ADDR,e.addr))}},{key:"close",value:function(e){this.send_control(z.$M.close.value,{addr:e.local.addr,port:e.local.port})}},{key:"send_data",value:function(e,t,n,r){return{local:{addr:t.local.addr,port:t.local.port},data:e}}},{key:"message_info",value:function(e,t,n){switch(e){case G.bM.ID:return t.data.local;case G.bM.ID_STRING:return"".concat(t.data.local.addr,":").concat(t.data.local.port);case G.bM.FROM:var r=this.get_id(t.data.local);return r?r.remote:null;case G.bM.FROM_STRING:var i=this.get_id({addr:t.data.local.addr,port:t.data.local.port});return i?"".concat(i.remote.addr,":").concat(i.remote.port):null;case G.bM.DATA_OUTPUT:return[t.data.data];case G.bM.DATA_FIELD:return 0}return null}},{key:"get_id",value:function(e){return this._list["".concat(e.addr,":").concat(e.port)]}},{key:"_control_status",value:function(e){var t=this,n=e.data;if(Array.isArray(n)){var r={};n.forEach((function(e){var n=t.get_id(e.local);n?r["".concat(n.local.addr,":").concat(n.local.port)]=n:r["".concat(e.local.addr,":").concat(e.local.port)]=new Wn(e.secure,e.remote,e.local,t)})),this.update_ids(Object.values(r)),this._list=r,this.emit(Kn.STATUS,this._list)}}},{key:"_control_error",value:function(e){this.emit(Kn.SERVER_ERROR,e)}},{key:"_control_close",value:function(e){}},{key:"_format_control_status",value:function(e,t){"data"in t&&Array.isArray(t.data)&&t.data.forEach((function(t){e.data.push("".concat(t.secure,"://").concat(t.local.addr,":").concat(t.local.port,">")+"".concat(t.remote.addr,":").concat(t.remote.port))}))}},{key:"_format_control_open",value:function(e,t){var n=t.data;e.data.push("".concat(n.secure,"://").concat(n.addr,":").concat(n.port,"(").concat(n.options.keepalive,"/").concat(n.options.idle,"/").concat(n.options.interval,"/").concat(n.options.count,")"))}},{key:"_format_control_close",value:function(e,t){e.data.push("".concat(t.data.addr,":").concat(t.data.port))}}]),i}(st.NU),Qn=n(1454);var er=document.createElement("template");er.innerHTML="\n<div id=container>\n    <div id=button-container>\n        <button id=button-open>Open</button>\n        <button id=button-update>Update</button>\n    </div>\n    <closeable-status id=error behaviour=hidden></closeable-status>\n    <table id=table-list>\n        <thead><tr id=header-list><th>Socket</th><th>#</th></tr></thead>\n        <tbody id=body-list></tbody>\n    </table>\n</div>";var tr=document.createElement("template");tr.innerHTML="\n<table id=keepalive>\n    <tr>\n        <th colspan=3><span>KeepAlive</span><input id=keepalive-check type=checkbox></th>\n    </tr>\n    <tr>\n        <th>Idle</th>\n        <th>Interval</th>\n        <th>Count</th>\n    </tr>\n    <tr>\n        <td><input type=number id=keepalive-idle title=Idle min=1 style=width:7ch>s</td>\n        <td><input type=number id=keepalive-intval title=Interval min=1 style=width:5ch>s</td>\n        <td><input type=number id=keepalive-count title=Count min=1 style=width:4ch></td>\n    </tr>\n</table>";var nr=function(e){l()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=f()(t);if(n){var i=f()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return d()(this,e)});function i(e){var t;return o()(this,i),(t=r.call(this))._model=e,t._container=null,t._error_el=null,t._model.on(Kn.ERROR,(function(e){return t.error(e)})).on(Kn.STATUS,(function(e){return t.add_clients(e)})).on(Kn.SERVER_ERROR,(function(e){return t.server_error(e)})).on(Kn.KEEPALIVE,(function(e){return t.keepalive(e)})),t}return s()(i,[{key:"error",value:function(e){this._error_el.value=e?"[".concat(e.error.code,"] ").concat(e.error.message).concat(e.hasOwnProperty("what")?"="+e.what:""):""}},{key:"server_error",value:function(e){this._error_el.value="[".concat(e.data.code,"] ").concat(e.data.message)}},{key:"_clear_error",value:function(){this._error_el.style.display="none"}},{key:"render",value:function(e){var t=this;this._container=e;var n=document.createElement("style");n.innerHTML=Qn.Z.toString(),this._container.appendChild(n);var r=document.createElement("optional-container");r.id="opt-container",this._container.appendChild(r),this._container.appendChild(er.content.cloneNode(!0));var i=document.createElement("input-socket-ipv4"),o=document.importNode(tr.content,!0),a=document.createElement("div");a.appendChild(o),o=a.querySelector("#keepalive"),i.id="socket-opt",i.ip("127.0.0.1"),i.port($n.value),r.add(i),r.add(o,!0),this._error_el=this._container.querySelector("#error"),i.render(Yn),this._container.querySelector("#button-open").onclick=function(e){var n={secure:i.protocol(),addr:i.ip(),port:i.port()};t.emit(Kn.OPEN,n)},this._container.querySelector("#button-update").onclick=function(e){t.emit(Kn.UPDATE)},o.addEventListener("change",(function(e){t.keepalive()})),this.keepalive(this._model.keepalive()),this._container.querySelector("#body-list").addEventListener("click",(function(e){var n=(0,F.I)(e);if("close"in n[0].dataset){var r=n[0].dataset.close.split(/:\/\/|:/);t.emit(Kn.CLOSE,{secure:r[0],local:{addr:r[1],port:+r[2]}})}}))}},{key:"keepalive",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this._container.querySelector("#keepalive-check"),n=this._container.querySelector("#keepalive-idle"),r=this._container.querySelector("#keepalive-intval"),i=this._container.querySelector("#keepalive-count");null!==e?(t.checked=e.keepalive,n.value=e.idle,r.value=e.interval,i.value=e.count):this.emit(Kn.KEEPALIVE,{keepalive:t.checked,idle:parseInt(n.value),interval:parseInt(r.value),count:parseInt(i.value)}),t.checked?(n.disabled=!1,r.disabled=!1,i.disabled=!1):(n.disabled=!0,r.disabled=!0,i.disabled=!0)}},{key:"add_clients",value:function(e){var t=this._container.querySelector("#body-list"),n=Object.values(e);this.error(""),0!=n.length?(t.innerHTML="",n.forEach((function(e){var n=document.createElement("tr"),r=document.createElement("td"),i=document.createElement("td");r.classList.add("line"),r.textContent="".concat(e.secure,"://").concat(e.local.addr,":").concat(e.local.port,">").concat(e.remote.addr,":").concat(e.remote.port),i.classList.add("close"),i.dataset.close="".concat(e.secure,"://").concat(e.local.addr,":").concat(e.local.port),n.appendChild(r),n.appendChild(i),t.appendChild(n)}))):t.innerHTML="<tr class=no-client><td colspan=2>No socket connected</td></tr>"}}]),i}(ue.I);var rr=function(e){l()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=f()(t);if(n){var i=f()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return d()(this,e)});function i(e){var t;o()(this,i);var n=new Xn(e);return(t=r.call(this,n,new nr(n)))._view.on(Kn.OPEN,(function(e){return t.open(e)})).on(Kn.CLOSE,(function(e){return t.close(e)})).on(Kn.UPDATE,(function(){return t.update()})).on(Kn.KEEPALIVE,(function(e){return t.keepalive(e)})),t}return s()(i,[{key:"open",value:function(e){this._model.open(e)}},{key:"close",value:function(e){this._model.close(e)}},{key:"update",value:function(){this._model.send_status()}},{key:"keepalive",value:function(e){this._model.keepalive(e)}}]),i}(cn),ir={REQUEST:Symbol("request"),GET:Symbol("get"),ADD_DEVICE:Symbol("add device"),ERROR:Symbol("error"),OPEN:Symbol("open"),CLOSE:Symbol("close")};function or(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ar(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?or(Object(n),!0).forEach((function(t){S()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):or(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var sr=function(){function e(t,n){o()(this,e),console.assert(t instanceof USBDevice,'"usb_device" must be of type USBDevice'),this._device=t,this._name=n}return s()(e,[{key:"name",value:function(){return this._name}},{key:"device",value:function(){return this._device}}],[{key:"support",value:function(e){return console.assert(e instanceof USBDevice,'"dev" must be of type USBDevice'),!0}},{key:"get_options",value:function(e){console.assert(e instanceof USBDevice,'"dev" must be of type USBDevice');var t=[];return e.configurations.forEach((function(e){var n={value:e.configurationValue,interfaces:[]};e.interfaces.forEach((function(e){var t={value:e.interfaceNumber,endpoint_in:null,endpoint_out:null};e.alternates[0].endpoints.some((function(e){if("in"==e.direction)return t.endpoint_in={value:e.endpointNumber,size:e.packetSize},!0})),e.alternates[0].endpoints.some((function(e){if("out"==e.direction)return t.endpoint_out={value:e.endpointNumber,size:e.packetSize},!0})),n.interfaces.push(t)})),t.push(n)})),t}},{key:"default_option",value:function(t){console.assert(t instanceof USBDevice,'"dev" must be of type USBDevice');var n=e.get_options(t);return{configuration:n[0].value,interface:n[0].interfaces[0].value,ep_in:n[0].interfaces[0].endpoint_in,ep_out:n[0].interfaces[0].endpoint_out}}}]),e}(),cr=function(e){l()(c,e);var t,n,r,i,a=(r=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=f()(r);if(i){var n=f()(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return d()(this,e)});function c(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};o()(this,c),n=a.call(this,e,t);var i=ar(ar({},sr.default_option(e)),r);return n._config=i.configuration,n._interface=i.interface,n._ep_in=i.ep_in,n._ep_out=i.ep_out,n._flow_control={dtr:!1,rts:!1,break:!1},n}return s()(c,[{key:"open",value:function(e){console.warn('"init" method must me overriden. It must return a promise')}},{key:"line_state",value:function(e,t){if(this._flow_control.dtr=e,this._flow_control.rts=t,this.device().opened)return this._set_line_state()}},{key:"break",value:function(e){if(this._flow_control.break=e,this.device().opened)return this._set_break()}},{key:"_set_line_state",value:function(){console.warn('"_set_line_state" method must be overriden')}},{key:"_set_break",value:function(){console.warn('"_set_break" method must be overriden')}},{key:"signals",value:function(){return this._flow_control}},{key:"read",value:(n=pt()(ht().mark((function e(){var t;return ht().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.device().opened){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,this.device().transferIn(this._ep_in.value,this._ep_in.size);case 4:return t=e.sent,e.abrupt("return",new Uint8Array(t.data.buffer));case 6:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"write",value:(t=pt()(ht().mark((function e(t){return ht().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.device().opened){e.next=2;break}return e.abrupt("return",null);case 2:"string"==typeof t&&(t=(new TextEncoder).encode(t));case 3:return t.slice(0,this._ep_out.size),e.next=6,this.device().transferOut(this._ep_out.value,t);case 6:t=t.slice(this._ep_out.size);case 7:if(t.length){e.next=3;break}case 8:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),c}(sr);var lr=function(e){l()(c,e);var t,n,r,i,a=(r=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=f()(r);if(i){var n=f()(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return d()(this,e)});function c(e,t){var n;return o()(this,c),(n=a.call(this,"".concat(e.vendorId,":").concat(e.productId,":").concat(e.serialNumber,":").concat(e.deviceClass,":").concat(e.deviceProtocol),t,e.productName))._device=e,n._driver=null,n._is_open=!1,n._opts={},n}return s()(c,[{key:"device",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e&&(console.assert(e instanceof USBDevice,"'dev' must be of type USBDevice"),this._device=e),this._device}},{key:"driver",value:function(){return this._driver}},{key:"open",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return console.assert(e instanceof sr,'"driver" must be of type USB_Driver'),this._driver=e,this.device().open().then((function(){return e.init(n)})).then((function(){new Promise((function(e){t._is_open=!0,t._opts=n}))}))}},{key:"is_open",value:function(){return this._is_open}},{key:"close",value:function(){return this._is_open=!1,this._opts={},this._driver=null,this.device().close()}},{key:"read",value:(n=pt()(ht().mark((function e(){return ht().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.driver().read();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"write",value:(t=pt()(ht().mark((function e(t){return ht().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.driver().write(t);case 2:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"signals",value:function(){return null===this.driver()?null:this.driver().signals()}},{key:"line_state",value:function(e,t){this.driver().line_state(e,t)}},{key:"break",value:function(e){null!==this.driver()&&this.driver().break(e)}}]),c}(ct.y);var ur=function(e){l()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=f()(t);if(n){var i=f()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return d()(this,e)});function i(e,t){var n;return o()(this,i),(n=r.call(this,V.WEBUSB.name,e,V.WEBUSB.long_name))._devices=[],n._drivers=[],"drivers"in t&&t.drivers.forEach((function(e){return n.register_driver(e.name,e.driver)})),i.support()&&n.update(),n}return s()(i,[{key:"devices",value:function(){return this._devices}},{key:"device",value:function(e){return this._devices.find((function(t){return t.value()==e}))}},{key:"drivers",value:function(){return this._drivers}},{key:"driver",value:function(e){var t=this._drivers.find((function(t){return t.name===e}));return t?t.driver:null}},{key:"register_driver",value:function(e,t){return console.assert(sr.isPrototypeOf(t),'"driver" must be of type USB_Driver'),console.assert(!this._drivers.find((function(t){return t.name===e})),'Driver name "'.concat(e,'" already registered')),this._drivers.push({name:e,driver:t}),this}},{key:"send_data",value:function(e,t,n,r){return t.write(e),{port:t.name(),data:e}}},{key:"status",value:function(){var e=[];this._devices.forEach((function(t){e.push({port:t.name(),open:t.is_open()})})),this.control(z.$M.status.value,e)}},{key:"open",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};console.assert(e instanceof lr,'"dev" must be of instance WebUSB_ID'),console.assert(sr.isPrototypeOf(t),'"driver" must be of type USB_Driver'),e.device().opened?this.close(e):e.open(new t(e.device()),r).then((function(){n.emit(ir.OPEN,e),n.emit(ir.ERROR,""),n.status(),n.update_ids(n.devices().filter((function(e){return e.is_open()}))),function t(){e.read().then((function(r){n.received_data({port:e.name(),data:r}),t()})).catch((function(t){t.code!=DOMException.ABORT_ERR?(n.emit(ir.ERROR,t),n.close(e)):n.emit(ir.ERROR,"")}))}()})).catch((function(t){n.close(e),n.emit(ir.ERROR,t)}))}},{key:"close",value:function(e){var t=this;console.assert(e instanceof lr,'"dev" must be of instance WebUSB_ID'),e.close().finally((function(){t.update_ids(t.devices().filter((function(e){return e.is_open()}))),t.update()}))}},{key:"request",value:function(e){var t=this;navigator.usb.requestDevice({filters:[e]}).then((function(e){})).catch((function(e){t.emit(ir.ERROR,e)})).finally((function(){return t.update()}))}},{key:"update",value:function(){var e=this;navigator.usb.getDevices().then((function(t){e.add(t)})).finally((function(){e.status()}))}},{key:"add",value:function(e){var t=this;Array.isArray(e)||(e=[e]);var n=this._devices;this._devices=[],e.forEach((function(e){var r=new lr(e,t),i=n.find((function(e){return e.is_equal(r)}));i&&i.device(e),t._devices.push(i||r)})),this.emit(ir.ADD_DEVICE,this._devices)}},{key:"message_info",value:function(e,t,n){switch(e){case G.bM.ID:case G.bM.FROM:return t.data.port;case G.bM.ID_STRING:case G.bM.FROM_STRING:return"".concat(t.data.port);case G.bM.DATA_OUTPUT:return[t.data.data];case G.bM.DATA_FIELD:return 0}return null}},{key:"_format_control_status",value:function(e,t){t.data.forEach((function(t){e.data.push("".concat(t.port,"(").concat(t.open?"opened":"closed",")"))}))}}],[{key:"support",value:function(){return"usb"in navigator}}]),i}(st.wm),dr=n(7701);var hr=[{value:"vendorId",label:"VendorID",title:"Vendor ID"},{value:"productId",label:"ProductID",title:"Product ID"},{value:"serialNumber",label:"Serial",title:"Serial Number"}],fr=document.createElement("template");fr.innerHTML="\n<div id=request-options></div>\n<button id=request>Request</button>\n<button id=update>Update</button>\n<closeable-status id=error behaviour=hidden></closeable-status>\n<table>\n    <tr id=header-line><th id=device-name>Devices</th><th id=device-op>#</th></tr>\n    <tbody id=device-container></tbody>\n</table>\n";var pr=function(e){l()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=f()(t);if(n){var i=f()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return d()(this,e)});function i(e){var t;return o()(this,i),(t=r.call(this))._model=e,t._container=null,t._model.on(ir.ERROR,(function(e){return t.error(e)})).on(ir.ADD_DEVICE,(function(e){return t.render_devices()})).on(ir.OPEN,(function(e){return t.render_devices()})),t}return s()(i,[{key:"render",value:function(e){var t=this;this._container=e;var n=document.createElement("style");n.innerHTML=dr.Z.toString(),this._container.appendChild(n),this._container.appendChild(fr.content.cloneNode(!0));var r=this._container.querySelector("#request-options");r.innerHTML="",hr.forEach((function(e){r.innerHTML+="<div class=request-opt title='".concat(e.title,"'>\n                                <div class=request-label>").concat(e.label,"</div>\n                                <input id=").concat(e.value," class=request-input></input>\n                            </div>")})),this._container.querySelector("#request").onclick=function(e){t.request_devices()},this._container.querySelector("#update").onclick=function(e){t.emit(ir.GET)},this.render_devices()}},{key:"request_devices",value:function(){var e={};this._container.querySelectorAll(".request-input").forEach((function(t){var n=parseInt(t.value.trim());n?(e[t.id]=n,t.classList.remove("input-error")):t.classList.add("input-error")})),Object.keys(e).length>0&&this.emit(ir.REQUEST,e)}},{key:"render_devices",value:function(){var e=this;if(this._container){var t=this._container.querySelector("#device-container");0!=this._model.devices().length?(t.innerHTML="",this._model.devices().forEach((function(n){var r=n.device(),i=document.createElement("tr");i.innerHTML="<td class=device-name title='".concat(e._title(r),"'>\n                                <span>").concat(r.productName,"</span>\n                                \x3c!--<button class='signal dtr'>DTR</button>\n                                <button class='signal rts'>RTS</button>\n                                <button class='signal brk'>BRK</button>--\x3e\n                            </td>\n                              <td class=device-op data-opened=").concat(r.opened,">\n                                ").concat(r.opened?"&times;":"<drop-menu class=drivers><span slot=title>&#9658;</span></drop-menu>","\n                            </td>");var o=e._model.drivers();if(0===o.length)drivers_el.disabled=!0,drivers_el.title="No driver installed";else if(r.opened){var a=i.querySelector(".device-op");a.title=n.driver().name(),a.onclick=function(t){e.emit(ir.CLOSE,n)}}else{var s=i.querySelector(".drivers");s.title="",s.disabled=!1;var c=document.createElement("lu");c.classList.add("driver-list"),o.forEach((function(t){var r=document.createElement("li");r.textContent="".concat(t.name),r.classList.add("driver-op"),r.onclick=function(r){e.emit(ir.OPEN,{id:n,driver:t.driver,opts:{}})},c.appendChild(r)})),s.appendChild(c)}i.querySelector(".device-name").onclick=function(e){console.log("usb",r)},t.appendChild(i)}))):t.innerHTML="<tr><td colspan=2 class=device-name>No device detected</td></tr>"}}},{key:"error",value:function(e){this._container.querySelector("#error").value=e}},{key:"_title",value:function(e){return(e.productName?"".concat(e.productName,"\n"):"")+(e.manufacturerName?"Manufacturer: ".concat(e.manufacturerName,"\n"):"")+(e.serialNumber?"Serial: ".concat(e.serialNumber,"\n"):"")+"Vendor:Product(ID): ".concat(Number(e.vendorId).toString(16),":").concat(Number(e.productId).toString(16),"\nUSB Ver: ").concat(e.usbVersionMajor,".").concat(e.usbVersionMinor,".").concat(e.usbVersionSubminor,"\nDev Ver: ").concat(e.deviceVersionMajor,".").concat(e.deviceVersionMinor,".").concat(e.deviceVersionSubminor,"\nClass/Sub/Protocol: ").concat(e.deviceClass,"/").concat(e.deviceSubclass,"/").concat(e.deviceProtocol)}}]),i}(ue.I);var _r=function(e){l()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=f()(t);if(n){var i=f()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return d()(this,e)});function i(e,t){var n;o()(this,i);var a=new ur(e,t);return(n=r.call(this,a,new pr(a)))._view.on(ir.REQUEST,(function(e){return n.request(e)})).on(ir.GET,(function(){return n.update()})).on(ir.OPEN,(function(e){return n.open(e.id,e.driver,e.opts)})).on(ir.CLOSE,(function(e){return n.close(e)})),n}return s()(i,[{key:"request",value:function(e){this._model.request(e)}},{key:"open",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._model.open(e,t,n)}},{key:"close",value:function(e){this._model.close(e)}},{key:"update",value:function(){this._model.update()}},{key:"register_driver",value:function(e,t){return this._model.register_driver(e,t)}}],[{key:"support",value:function(){return ur.support()}}]),i}(ln),vr={REQUEST:Symbol("request"),GET:Symbol("get"),ADD_DEVICE:Symbol("add device"),ERROR:Symbol("error"),OPEN:Symbol("open"),CLOSE:Symbol("close")},mr={50:{value:50,name:"50"},75:{value:75,name:"75"},110:{value:100,name:"110"},134:{value:134,name:"134"},150:{value:150,name:"150"},200:{value:200,name:"200"},300:{value:300,name:"300"},600:{value:600,name:"600"},1200:{value:1200,name:"1200"},1800:{value:1800,name:"1800"},2400:{value:2400,name:"2400"},4800:{value:4800,name:"4800"},9600:{value:9600,name:"9600"},19200:{value:19200,name:"19200"},38400:{value:38400,name:"38400"},57600:{value:57600,name:"57600"},115200:{value:115200,name:"115200",default:!0}},yr={7:{value:7,name:"7"},8:{value:8,name:"8",default:!0}},gr={none:{value:"none",name:"none",default:!0},even:{value:"even",name:"even"},odd:{value:"odd",name:"odd"}},br={none:{value:1,name:"1",default:!0},hardware:{value:2,name:"2"}},kr={none:{value:"none",name:"none",default:!0},hardware:{value:"hardware",name:"hardware"}},wr={baudRate:115200,dataBits:8,parity:"none",stopBits:2,flowControl:"none"};function Er(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="".concat(e.baudRate," ").concat(e.dataBits).concat(e.parity[0].toUpperCase()).concat(e.stopBits);return t?n+" ".concat(e.flowControl):n}function xr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Sr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xr(Object(n),!0).forEach((function(t){S()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Or=0,Rr=function(e){l()(p,e);var t,n,r,i,a,c,u,h=(c=p,u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=f()(c);if(u){var n=f()(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return d()(this,e)});function p(e,t){var n;return o()(this,p),(n=h.call(this,([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(e){return(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)})),t,"".concat("Port").concat(++Or)))._device=e,n._is_open=!1,n._opts={},n._reader=null,n._signals={dataTerminalReady:!1,requestToSend:!1,break:!1},n}return s()(p,[{key:"device",value:function(){return this._device}},{key:"is_open",value:function(){return this._is_open}},{key:"serial_options",value:function(){return Object.assign({},this._opts)}},{key:"open",value:(a=pt()(ht().mark((function e(t){var n;return ht().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Sr(Sr({},wr),t),e.next=3,this.device().open(t);case 3:return e.next=5,this.signals({dataTerminalReady:!1});case 5:return e.next=7,new Promise((function(e){return setTimeout(e,100)}));case 7:return e.next=9,this.signals({dataTerminalReady:!0});case 9:this._is_open=!0,this._opts=n,this._reader=this.device().readable.getReader();case 12:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"close",value:(i=pt()(ht().mark((function e(){return ht().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._is_open=!1,this._opts={},e.next=4,this._reader.cancel();case 4:return this._reader&&this._reader.releaseLock(),this._reader=null,e.abrupt("return",this.device().close());case 7:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"read",value:(r=pt()(ht().mark((function e(){var t,n;return ht().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.device().readable){e.next=2;break}throw new DOMException("Readable error",DOMException.NetworkError);case 2:return e.next=4,this._reader.read();case 4:if(t=e.sent,n=t.value,!t.done){e.next=9;break}return e.abrupt("return",null);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"write",value:(n=pt()(ht().mark((function e(t){var n;return ht().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.device().writable.getWriter(),e.next=3,n.write(t);case 3:n.releaseLock();case 4:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"signals",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null!==e?(this._signals=Sr(Sr({},this._signals),e),this.device().setSignals(e)):Object.assign({},this._signals)}},{key:"keep_read",value:(t=pt()(ht().mark((function e(){var t,n;return ht().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.device().readable){e.next=23;break}e.prev=1;case 2:return e.next=5,this._reader.read();case 5:if(t=e.sent,n=t.value,!t.done){e.next=11;break}return this._reader.releaseLock(),e.abrupt("break",14);case 11:n&&console.log("readed",(new TextDecoder).decode(n)),e.next=2;break;case 14:e.next=21;break;case 16:if(e.prev=16,e.t0=e.catch(1),e.t0.code!==DOMException.NETWORK_ERR){e.next=20;break}throw e.t0;case 20:console.dir(e.t0);case 21:e.next=0;break;case 23:case"end":return e.stop()}}),e,this,[[1,16]])}))),function(){return t.apply(this,arguments)})},{key:"compare_ids",value:function(e){return e instanceof ct.y?this.device()==e.device():JSON.stringify(this.value())==JSON.stringify(e)}}]),p}(ct.y);var Tr=function(e){l()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=f()(t);if(n){var i=f()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return d()(this,e)});function i(e){var t;return o()(this,i),(t=r.call(this,V.WEBSERIAL.name,e,V.WEBSERIAL.long_name))._devices=[],i.support()&&(t.update(),navigator.serial.addEventListener("connect",(function(e){return t.update()})),navigator.serial.addEventListener("disconnect",(function(e){return t.update()}))),t}return s()(i,[{key:"devices",value:function(){return this._devices}},{key:"device",value:function(e){return this._devices.find((function(t){return t.value()==e}))}},{key:"send_data",value:function(e,t,n,r){return"string"==typeof e&&(e=(new TextEncoder).encode(e)),t.write(e),{port:t.name(),data:e}}},{key:"status",value:function(){var e=[];this._devices.forEach((function(t){e.push({port:t.name(),open:t.is_open()})})),this.control(z.$M.status.value,e)}},{key:"open",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};console.assert(e instanceof Rr,'"id" must be of instance WebSerial_ID'),e.is_open()?this.close(e):e.open(n).then((function(){t.emit(vr.OPEN,e),t.emit(vr.ERROR,""),t.update_ids(t.devices().filter((function(e){return e.is_open()}))),t.status(),function n(){e.read().then((function(r){r&&(t.received_data({port:e.name(),data:r}),n())})).catch((function(n){n.code!=DOMException.ABORT_ERR?(t.emit(vr.ERROR,n),t.close(e)):t.emit(vr.ERROR,"")}))}()})).catch((function(n){t.emit(vr.ERROR,n),t.close(e)}))}},{key:"close",value:function(e){var t=this;console.assert(e instanceof Rr,'"dev" must be of instance WebSerial_ID'),e.close().finally((function(){t.update_ids(t.devices().filter((function(e){return e.is_open()}))),t.update()}))}},{key:"request",value:function(e){var t=this,n=e?{filters:[e]}:{};navigator.serial.requestPort(n).then((function(e){})).catch((function(e){t.emit(vr.ERROR,e)})).finally((function(){return t.update()}))}},{key:"update",value:function(){var e=this;navigator.serial.getPorts().then((function(t){e.add(t)})).finally((function(){e.status()}))}},{key:"add",value:function(e){var t=this;Array.isArray(e)||(e=[e]);var n=this._devices;this._devices=[],e.forEach((function(e){var r=n.find((function(t){return t.device()===e}));r=r||new Rr(e,t),t._devices.push(r)})),this.emit(vr.ADD_DEVICE,this._devices)}},{key:"message_info",value:function(e,t,n){switch(e){case G.bM.ID:case G.bM.FROM:return t.data.port;case G.bM.ID_STRING:case G.bM.FROM_STRING:return"".concat(t.data.port);case G.bM.DATA_OUTPUT:return[t.data.data];case G.bM.DATA_FIELD:return 0}return null}},{key:"_format_control_status",value:function(e,t){t.data.forEach((function(t){e.data.push("".concat(t.port,"(").concat(t.open?"opened":"closed",")"))}))}}],[{key:"support",value:function(){return"serial"in navigator}}]),i}(st.wm),Ar=n(1964);var Dr=[{value:"usbVendorId",label:"VendorID",title:"Vendor ID"},{value:"usbProductId",label:"ProductID",title:"Product ID"}],Cr=document.createElement("template");Cr.innerHTML="\n<div id=request-container>\n    <div id=request-options></div>\n    <div>\n        <button id=request class='button-request'>Request</button>\n        <button id=update class='button-request'>Update</button>\n    </div>\n</div>\n<input-option></input-option>\n<closeable-status id=error behaviour=hidden></closeable-status>\n<table>\n    <tr id=header-line><th id=device-name>Devices</th><th id=device-op>#</th></tr>\n    <tbody id=device-container></tbody>\n</table>";var Nr=function(e){l()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=f()(t);if(n){var i=f()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return d()(this,e)});function i(e){var t;return o()(this,i),(t=r.call(this))._model=e,t._container=null,t._model.on(vr.ERROR,(function(e){return t.error(e)})).on(vr.ADD_DEVICE,(function(e){return t.render_devices()})).on(vr.OPEN,(function(e){return t.render_devices()})),t}return s()(i,[{key:"render",value:function(e){var t=this;this._container=e;var n=document.createElement("style");n.innerHTML=Ar.Z.toString(),this._container.appendChild(n),this._container.appendChild(Cr.content.cloneNode(!0)),setTimeout((function(){var e=t._container.querySelector("#request-options");e.innerHTML="",Dr.forEach((function(t){e.innerHTML+="<div class=request-opt title='".concat(t.title,"'>\n                                    <div class=request-label>").concat(t.label,"</div>\n                                    <input id=").concat(t.value," class=request-input></input>\n                                </div>")}));var n=t._container.querySelector("input-option");n.add_select("Baudrate",Object.values(mr)),n.add_select("Databits",Object.values(yr)),n.add_select("Parity",Object.values(gr)),n.add_select("Stopbits",Object.values(br)),n.add_select("Flowcontrol",Object.values(kr),!0),t._container.querySelector("#request").onclick=function(e){t.request_devices()},t._container.querySelector("#update").onclick=function(e){t.emit(vr.GET)},t.render_devices()}),0)}},{key:"request_devices",value:function(){var e={};this._container.querySelectorAll(".request-input").forEach((function(t){var n=parseInt(t.value.trim());n?(e[t.id]=n,t.classList.remove("input-error")):t.classList.add("input-error")})),this.emit(vr.REQUEST,Object.keys(e).length>0?e:null)}},{key:"render_devices",value:function(){var e=this;if(this._container){var t=this._container.querySelector("#device-container");0!=this._model.devices().length?(t.innerHTML="",this._model.devices().forEach((function(n){var r=document.createElement("tr");function i(e,t,n){e.signals()[n]?t.classList.add("pressed"):t.classList.remove("pressed"),t.onclick=function(t){t.stopPropagation();var r=t.target;if(e.signals()[n]){var i={};i[n]=!1,e.signals(i),r.classList.remove("pressed")}else{var o={};o[n]=!0,e.signals(o),r.classList.add("pressed")}}}n.is_open()?r.innerHTML="\n<td class=device-name title='".concat(e._title(n),"'>\n    <span>").concat(n.name(),"(").concat(Er(n.serial_options(),!1),")</span>\n    <span class=signals-out>\n        <button class='signal dtr'>DTR</button>\n        <button class='signal rts'>RTS</button>\n        <button class='signal break'>BRK</button>\n    </span>\n</td>\n<td colspan=2 class=device-op data-opened=").concat(n.is_open(),">&times;</td>"):r.innerHTML="\n<td class=device-name title='".concat(e._title(n),"'>\n    <span>").concat(n.name(),"</span>\n</td>\n <td class=device-op data-opened=").concat(n.is_open(),">&#9658;</td>"),n.is_open()&&(i(n,r.querySelector(".dtr"),"dataTerminalReady"),i(n,r.querySelector(".rts"),"requestToSend"),i(n,r.querySelector(".break"),"break")),r.querySelector(".device-name").onclick=function(e){n.is_open()?n.device().getSignals().then((function(e){console.log("serial",n.device(),n.device().getInfo(),e)})):console.log("serial",n.device(),n.device().getInfo())},r.querySelector(".device-op").onclick=function(t){var r=e._container.querySelector("input-option").values();e.emit(vr.OPEN,{id:n,opts:{baudRate:parseInt(r.Baudrate),dataBits:parseInt(r.Databits),parity:r.Parity,stopBits:parseInt(r.Stopbits),flowControl:r.Flowcontrol}})},t.appendChild(r)}))):t.innerHTML="<tr><td colspan=2 class=device-name>No device detected</td></tr>"}}},{key:"error",value:function(e){this._container.querySelector("#error").value=e}},{key:"_title",value:function(e){return"".concat(e.name(),"\nValue: ").concat(e.value(),"\nOptions: ").concat(e.is_open()?Er(e.serial_options(),!0):"-")}}]),i}(ue.I);var Ir=function(e){l()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=f()(t);if(n){var i=f()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return d()(this,e)});function i(e){var t;o()(this,i);var n=new Tr(e);return(t=r.call(this,n,new Nr(n)))._view.on(vr.REQUEST,(function(e){return t.request(e)})).on(vr.GET,(function(){return t.update()})).on(vr.OPEN,(function(e){return t.open(e.id,e.opts)})).on(vr.CLOSE,(function(e){return t.close(e)})),t}return s()(i,[{key:"request",value:function(e){this._model.request(e)}},{key:"open",value:function(e,t){this._model.open(e,t)}},{key:"close",value:function(e){this._model.close(e)}},{key:"update",value:function(){this._model.update()}}],[{key:"support",value:function(){return Tr.support()}}]),i}(ln),Mr={ERROR:Symbol("error"),OPEN:Symbol("open"),CLOSE:Symbol("close"),ADD:Symbol("add")},Pr={plain:{value:"ws",name:"ws"},secure:{value:"wss",name:"wss"}};var Lr={1e3:"Normal Closure",1001:"Going Away",1002:"Protocol error",1003:"Unsupported Data",1005:"No Status Rcvd",1006:"Abnormal Closure",1007:"Invalid frame payload data",1008:"Policy Violation",1009:"Message Too Big",1010:"Mandatory Ext.",1011:"Internal Server Error",1015:"TLS handshake"},qr=function(e){l()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=f()(t);if(n){var i=f()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return d()(this,e)});function i(e,t){var n;o()(this,i);var a="".concat(e.secure,"://").concat(e.addr,":").concat(e.port);return(n=r.call(this,e,t,a))._addr=a,n._is_open=!1,n._socket=new WebSocket(n._addr),n._register_events(),n}return s()(i,[{key:"is_open",value:function(){return this._is_open}},{key:"addr",value:function(){return this._addr}},{key:"_register_events",value:function(){this._socket.onopen=this._on_open.bind(this),this._socket.onmessage=this._on_message.bind(this),this._socket.onclose=this._on_close.bind(this),this._socket.onerror=this._on_error.bind(this)}},{key:"close",value:function(){this._socket.close()}},{key:"send_socket",value:function(e){this._socket.send(e)}},{key:"_on_open",value:function(e){this._socket.binaryType="arraybuffer",this._is_open=!0,this.app().opened(this)}},{key:"_on_message",value:function(e){this.app().received_data({addr:this.addr(),data:e.data})}},{key:"_on_close",value:function(e){this.app().closed(this,{addr:this._addr,reason:e.reason,code:e.code,message:e.code in Lr?Lr["".concat(e.code)]:"Undefined"})}},{key:"_on_error",value:function(e){this.is_open()?this.app().socket_error(this,"socket"):this.app().socket_error(this,"connect")}}]),i}(ct.y);var jr=function(e){l()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=f()(t);if(n){var i=f()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return d()(this,e)});function i(e){var t;return o()(this,i),(t=r.call(this,V.WEBSOCKET_CLIENT.name,e,V.WEBSOCKET_CLIENT.long_name))._sockets=[],t}return s()(i,[{key:"sockets",value:function(){return this._sockets}},{key:"send_data",value:function(e,t,n,r){return t.send_socket(e),{addr:t.addr(),data:e}}},{key:"open",value:function(e,t,n){var r={};if(e=e.trim(),(0,We.uX)(e)||(0,We.Ch)(e)||(r.addr=e),(0,We.S0)(t)||(r.port=t),"ws"!=n&&"wss"!=n&&(r.secure=n),!(0,Ye.H)(r))return this.emit(Mr.ERROR,function(e){var t="ERROR:";return Object.keys(e).forEach((function(n){t+=" ".concat(n,"=").concat(e[n])})),t}(r)),!1;var i="".concat(n,"://").concat(e,":").concat(t);return this._sockets.some((function(e){return e.addr()===i}))?(this.emit(Mr.ERROR,"".concat(i," already connected")),!1):(this.send_control(z.$M.open.value,i),new qr({addr:e,port:t,secure:n},this),!0)}},{key:"close",value:function(e){this.send_control(z.$M.close.value,e.addr()),e.close()}},{key:"opened",value:function(e){this._sockets.push(e),this.update_ids(this.sockets()),this.emit(Mr.ERROR,""),this.emit(Mr.ADD,e)}},{key:"closed",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.control(z.$M.close.value,e.addr()),this._sockets=this._sockets.filter((function(t){return t!=e})),this.update_ids(this.sockets()),t&&1e3!=t.code&&this.emit(Mr.ERROR,"".concat(e.addr(),": ").concat(t.message)),this.emit(Mr.CLOSE)}},{key:"socket_error",value:function(e,t){this.control(z.$M.error.value,"".concat(e.addr(),": ").concat(t))}},{key:"message_info",value:function(e,t,n){switch(e){case G.bM.ID:return t.data.addr;case G.bM.FROM:return this.server().addr();case G.bM.ID_STRING:return"".concat(t.data.addr);case G.bM.FROM_STRING:return this.server().name();case G.bM.DATA_OUTPUT:return[t.data.data];case G.bM.DATA_FIELD:return 0}return null}},{key:"_format_control_close",value:function(e,t){e.data=[(t.dir===z.kc.received.value?"closed ":"request ")+t.data]}},{key:"_format_control_open",value:function(e,t){e.data=[t.data]}},{key:"_format_control_error",value:function(e,t){e.data=[t.data]}}],[{key:"support",value:function(){return"WebSocket"in window}}]),i}(st.wm),Ur=n(7618);var Hr=document.createElement("template");Hr.innerHTML="\n<div id=container></div>\n<closeable-status behaviour=hidden id=error></closeable-status>\n<table>\n    <tr id=header-line><th id=socket-name>Socket</th><th id=socket-close>#</th></tr>\n    <tbody id=socket-container></tbody>\n</table>\n";var zr=function(e){l()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=f()(t);if(n){var i=f()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return d()(this,e)});function i(e){var t;return o()(this,i),(t=r.call(this))._model=e,t._container=null,t._model.on(Mr.ERROR,(function(e){return t.error(e)})).on(Mr.ADD,(function(e){return t.add_sockets()})).on(Mr.CLOSE,(function(e){return t.add_sockets()})).on(Mr.OPEN,(function(e){return t.render_devices()})),t}return s()(i,[{key:"render",value:function(e){var t=this;this._container=e;var n=document.createElement("style");n.innerHTML=Ur.Z.toString(),this._container.appendChild(n),this._container.appendChild(Hr.content.cloneNode(!0));var r=new Q(Pr);r.addr("127.0.0.1"),r.port(80),r.innerHTML="<span id=connect-button></span>",this._container.querySelector("#container").appendChild(r),this._container.querySelector("#connect-button").onclick=function(e){t.emit(Mr.OPEN,{secure:r.protocol(),addr:r.addr(),port:r.port()})},this.add_sockets()}},{key:"add_sockets",value:function(){var e=this,t=this._container.querySelector("#socket-container");0==this._model.sockets().length?t.innerHTML="<tr><td colspan=2 class=socket-name>No sockets connected</td></tr>":(t.innerHTML="",this._model.sockets().forEach((function(n){var r=document.createElement("tr");r.innerHTML="<td class=socket-name>".concat(n.addr(),"</td><td class=socket-op></td>"),r.querySelector(".socket-op").onclick=function(t){e.emit(Mr.CLOSE,n)},r.querySelector(".socket-name").onclick=function(e){console.log(n)},t.appendChild(r)})))}},{key:"error",value:function(e){this._container.querySelector("#error").value=e}}]),i}(ue.I);var Gr=function(e){l()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=f()(t);if(n){var i=f()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return d()(this,e)});function i(e){var t;o()(this,i);var n=new jr(e);return(t=r.call(this,n,new zr(n)))._view.on(Mr.OPEN,(function(e){return t.open(e.addr,e.port,e.secure)})).on(Mr.CLOSE,(function(e){return t.close(e)})),t}return s()(i,[{key:"open",value:function(e,t,n){return this._model.open(e,t,n)}},{key:"close",value:function(e){this._model.close(e)}},{key:"update",value:function(){this._model.update()}}],[{key:"support",value:function(){return jr.support()}}]),i}(ln),Vr={GET_LOCATION:Symbol("get location"),WATCH:Symbol("watch location"),ERROR:Symbol("error")};var Fr=[{value:"enableHighAccuracy",name:"hi_acc"},{value:"maximumAge",name:"max_age"},{value:"timeout",name:"timeout"}],Br=[{value:"accuracy",name:"acc"},{value:"altitude",name:"alt"},{value:"altitudeAccuracy",name:"alt_acc"},{value:"heading",name:"head"},{value:"speed",name:"speed"}],Wr=function(e){l()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=f()(t);if(n){var i=f()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return d()(this,e)});function i(e){var t;return o()(this,i),(t=r.call(this,V.GEOLOCATION.name,e,V.GEOLOCATION.long_name))._watch=null,t}return s()(i,[{key:"watching",value:function(){return null!==this._watch}},{key:"location",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.watching())return!1;this.post_data(e,this.server().id(),!1);var r=function(e){t.post_data(e,t.server().id(),!0)},i=function(e){t.emit(Vr.ERROR,e.message)};return n?(this._watch=navigator.geolocation.watchPosition(r,i,e),this.emit(Vr.WATCH,this.watching()),this.send_control(z.$M.status.value,{watching:!0})):navigator.geolocation.getCurrentPosition(r,i,e),!0}},{key:"clear_watch",value:function(){this.watching()&&(navigator.geolocation.clearWatch(this._watch),this._watch=null,this.send_control(z.$M.status.value,{watching:"canceled"}),this.emit(Vr.WATCH,this.watching()))}},{key:"message_info",value:function(e,t,n){switch(e){case G.bM.ID:case G.bM.FROM:return this.server().id();case G.bM.ID_STRING:case G.bM.FROM_STRING:return"".concat(this.server().id());case G.bM.DATA_OUTPUT:return this._format_output(t)}return null}},{key:"_format_output",value:function(e){var t=e.data;if(e.dir===z.kc.sent.value){var n="options:";return Fr.forEach((function(e){e.value in t&&(n+=" ".concat(e.name,"=").concat(t[e.value]))})),[n]}var r="".concat(t.timestamp," [").concat(t.coords.latitude,", ").concat(t.coords.longitude,"]");return Br.forEach((function(e){null!==t.coords[e.value]&&(r+=" ".concat(e.name,"=").concat(t.coords[e.value]))})),[r]}},{key:"_format_control_status",value:function(e,t){e.data=["watching: ".concat(t.data.watching)]}}],[{key:"support",value:function(){return"geolocation"in navigator}}]),i}(st.wm),Yr=n(387);var $r=document.createElement("template");$r.innerHTML="\n<div id=op-container>\n    <button id=button-geo></button>\n    <div>\n        <div class=option>\n            <input type=checkbox id=high-accuracy-check>\n            <label for=high-accuracy-check>High Accuracy</label>\n        </div>\n        <input type=number class='input-number option' id=max-age-input title='Maximum Age' placeholder='Maximum Age (seconds)'>\n        <input type=number class='input-number option' id=timeout-input title='Timeout' placeholder='Timeout (seconds)'>\n    </div>\n</div>\n<input type=checkbox id=watch-position-check>\n<label for=watch-position-check>Watch position</label>\n<closeable-status id=error behaviour=hidden></closeable-status>";var Zr=function(e){l()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=f()(t);if(n){var i=f()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return d()(this,e)});function i(e){var t;return o()(this,i),(t=r.call(this))._model=e,t._container=null,t._model.on(Vr.ERROR,(function(e){return t.error(e)})).on(Vr.WATCH,(function(e){return t.watch(e)})),t}return s()(i,[{key:"render",value:function(e){var t=this;this._container=e;var n=document.createElement("style");n.innerHTML=Yr.Z.toString(),this._container.appendChild(n),this._container.appendChild($r.content.cloneNode(!0)),this._container.querySelector("#button-geo").onclick=function(e){if(t._model.watching())t.emit(Vr.WATCH,!1);else{var n={},r=t._container.querySelector("#high-accuracy-check").checked,i=t._container.querySelector("#max-age-input").value,o=t._container.querySelector("#timeout-input").value,a=t._container.querySelector("#watch-position-check").checked;n.enableHighAccuracy=r,i&&(n.maximumAge=1e3*i),o&&(n.timeout=1e3*o),t.emit(Vr.GET_LOCATION,{opt:n,watch:a})}}}},{key:"watch",value:function(e){var t=this._container.querySelector("#button-geo");e?t.classList.add("pressed"):t.classList.remove("pressed")}},{key:"error",value:function(e){this._container.querySelector("#error").value=e}}]),i}(ue.I);var Kr=function(e){l()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=f()(t);if(n){var i=f()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return d()(this,e)});function i(e){var t;o()(this,i);var n=new Wr(e);return(t=r.call(this,n,new Zr(n)))._view.on(Vr.GET_LOCATION,(function(e){return t.location(e.opt,e.watch)})).on(Vr.WATCH,(function(){return t.clear_watch()})),t}return s()(i,[{key:"location",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._model.location(e,t)}},{key:"clear_watch",value:function(){this._model.clear_watch()}}],[{key:"support",value:function(){return Wr.support()}}]),i}(ln),Jr={GET_ORIENTATION:Symbol("get location"),WATCH:Symbol("watch location"),ERROR:Symbol("error"),INSTALL_LISTENERS:Symbol("install")};var Xr=[{value:"orientation",name:"ori"},{value:"motion",name:"motion"}],Qr=function(e){l()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=f()(t);if(n){var i=f()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return d()(this,e)});function i(e){var t;return o()(this,i),(t=r.call(this,V.ORIENTATION.name,e,V.ORIENTATION.long_name))._watch=!1,t._orientation=null,t._motion=null,t._pending={ori:!1,mot:!1},t._motion_handler=null,t._orientation_handler=null,t}return s()(i,[{key:"install_listeners",value:function(){"DeviceMotionEvent"in window&&(this._motion_handler=this._motion_data.bind(this),window.addEventListener("devicemotion",this._motion_handler,!1)),"DeviceOrientationEvent"in window&&(this._orientation_handler=this._orientation_data.bind(this),window.addEventListener("deviceorientation",this._orientation_handler,!1))}},{key:"uninstall_listeners",value:function(){this._motion_handler&&window.removeEventListener("devicemotion",this._motion_handler),this._orientation_handler&&window.removeEventListener("deviceorientation",this._orientation_handler),this._orientation_handler=null,this._motion_handler=null,this.clear_watch()}},{key:"installed",value:function(){return!(null===this._orientation_handler&&null===this._motion_handler)}},{key:"_orientation_data",value:function(e){this._orientation={euler:{alpha:e.alpha,beta:e.beta,gamma:e.gamma}}}},{key:"_motion_data",value:function(e){this._motion={acceleration:{x:e.acceleration.x,y:e.acceleration.y,z:e.acceleration.z},accelerationIncludingGravity:{x:e.accelerationIncludingGravity.x,y:e.accelerationIncludingGravity.y,z:e.accelerationIncludingGravity.z},rotationRate:{alpha:e.rotationRate.alpha,beta:e.rotationRate.beta,gamma:e.rotationRate.gamma}}}},{key:"watching",value:function(){return!1!==this._watch}},{key:"orientation",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!this.watching()&&(this.post_data(e,this.server().id(),!1),n&&(this._watch={status:"install",opts:e,interval:n},this.emit(Jr.WATCH,this._watch),this.send_control(z.$M.status.value,this._watch),this._watch.handler=setInterval((function(){return t._post_data(t._watch.opts)}),this._watch.interval)),this._post_data(e),!0)}},{key:"_post_data",value:function(e){var t={};e.orientation&&this._orientation&&(t.orientation=this._orientation),e.motion&&this._motion&&(t.motion=this._motion),this.post_data(t,this.server().id())}},{key:"clear_watch",value:function(){this.watching()&&(clearInterval(this._watch.handler),this._watch=!1,this.send_control(z.$M.status.value,{status:"canceled"}),this.emit(Jr.WATCH,this.watching()))}},{key:"message_info",value:function(e,t,n){switch(e){case G.bM.ID:case G.bM.FROM:return this.server().id();case G.bM.ID_STRING:case G.bM.FROM_STRING:return"".concat(this.server().id());case G.bM.DATA_OUTPUT:return this._format_output(t)}return null}},{key:"_format_output",value:function(e){var t=e.data;if(e.dir===z.kc.sent.value){var n="options:";return Xr.forEach((function(e){e.value in t&&(n+=" ".concat(e.name,"=").concat(t[e.value]))})),[n]}var r=[];if("motion"in t){var i=t.motion,o="motion:";if("acceleration"in i){var a=i.acceleration;(a.x||a.y||a.z)&&(o+=" acc=".concat(a.x?a.x:"",",").concat(a.y?a.y:"",",").concat(a.z?a.z:""))}if("accelerationIncludingGravity"in i){var s=i.accelerationIncludingGravity;(s.x||s.y||s.z)&&(o+=" acc_grav=".concat(s.x?s.x:"",",").concat(s.y?s.y:"",",").concat(s.z?s.z:""))}if("rotationRate"in i){var c=i.rotationRate;(c.alpha||c.beta||c.gamma)&&(o+=" rot=".concat(c.alpha?c.alpha:"",",").concat(c.beta?c.beta:"",",").concat(c.gamma?c.gamma:""))}r.push(o)}if("orientation"in t){var l=t.orientation,u="ori:";if("euler"in l){var d=l.euler;(d.alpha||d.beta||d.gamma)&&(u+=" euler=".concat(d.alpha?d.alpha:"",",").concat(d.beta?d.beta:"",",").concat(d.gamma?d.gamma:""))}r.push(u)}return r}},{key:"_format_control_status",value:function(e,t){var n;"install"===t.data.status?(n=t.data.opts.orientation&&t.data.opts.motion?"orientation,motion":t.data.opts.orientation?"orientation":"motion",e.data=["watching: [".concat(n,"] / interval: ").concat(t.data.interval,"ms")]):e.data=["watching: cancelled"]}}],[{key:"support",value:function(){return i.support_orientation()||i.support_motion()}},{key:"support_orientation",value:function(){return"DeviceOrientationEvent"in window}},{key:"support_motion",value:function(){return"DeviceMotionEvent"in window}}]),i}(st.wm),ei=n(9296);var ti=document.createElement("template");ti.innerHTML="\n<div id=op-container>\n    <div id=in-op-container>\n        <button id=button-ori></button>\n        <div class=option>\n            <input type=checkbox id=orientation-check checked>\n            <label for=orientation-check>Orientation</label><br>\n            <input type=checkbox id=motion-check checked>\n            <label for=motion-check>Motion</label>\n        </div>\n    </div>\n    <button id=install-listeners></button>\n</div>\n<input type=checkbox id=watch-position-check>\n<label for=watch-position-check>Watch position</label>\n<input type=number value=1000 min=1 id=watch-interval title='Watch Interval (ms)' placeholder='Watch interval'>ms\n<closeable-status id=error behaviour=hidden></closeable-status>";var ni=function(e){l()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=f()(t);if(n){var i=f()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return d()(this,e)});function i(e){var t;return o()(this,i),(t=r.call(this))._model=e,t._container=null,t._model.on(Jr.ERROR,(function(e){return t.error(e)})).on(Jr.WATCH,(function(e){return t.watch(e)})),t}return s()(i,[{key:"render",value:function(e){var t=this;this._container=e;var n=document.createElement("style");n.innerHTML=ei.Z.toString(),this._container.appendChild(n),this._container.appendChild(ti.content.cloneNode(!0));var r=this._container.querySelector("#orientation-check"),i=this._container.querySelector("#motion-check"),o=this._container.querySelector("#watch-position-check"),a=this._container.querySelector("#watch-interval"),s=this._container.querySelector("#install-listeners"),c=this._container.querySelector("#button-ori");this.set_install(),s.onclick=function(e){t.emit(Jr.INSTALL_LISTENERS),t.set_install()},Qr.support_orientation()||(r.checked=!1,r.disabled=!0),Qr.support_motion()||(i.checked=!1,i.disabled=!0),a.disabled=!o.checked,o.onchange=function(e){a.disabled=!o.checked},c.onclick=function(e){t._model.installed()?t._model.watching()?t.emit(Jr.WATCH,!1):r.checked||i.checked?(t.error(""),t.emit(Jr.GET_ORIENTATION,{opt:{orientation:r.checked,motion:i.checked},watch:!!o.checked&&(a.value&&a.value>0?a.value:0)})):t.error("At least one option need to be selected"):t.error("Listeners not installed")}}},{key:"set_install",value:function(){var e=this._container.querySelector("#install-listeners"),t=this._container.querySelector("#button-ori");this._model.installed()?(e.dataset.installed=!0,t.disabled=!1):(e.dataset.installed=!1,t.disabled=!0)}},{key:"watch",value:function(e){var t=this._container.querySelector("#button-ori");e?t.classList.add("pressed"):t.classList.remove("pressed")}},{key:"error",value:function(e){this._container.querySelector("#error").value=e}}]),i}(ue.I);var ri=function(e){l()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=f()(t);if(n){var i=f()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return d()(this,e)});function i(e){var t;o()(this,i);var n=new Qr(e);return(t=r.call(this,n,new ni(n)))._view.on(Jr.GET_ORIENTATION,(function(e){return t.orientation(e.opt,e.watch)})).on(Jr.WATCH,(function(){return t.clear_watch()})).on(Jr.INSTALL_LISTENERS,(function(){t.installed()?t.uninstall_listeners():t.install_listeners()})),t}return s()(i,[{key:"orientation",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._model.orientation(e,t)}},{key:"clear_watch",value:function(){this._model.clear_watch()}},{key:"installed",value:function(){return this._model.installed()}},{key:"install_listeners",value:function(){this._model.install_listeners()}},{key:"uninstall_listeners",value:function(){this._model.uninstall_listeners()}}],[{key:"support",value:function(){return Qr.support()}}]),i}(ln);var ii=function(e){l()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=f()(t);if(n){var i=f()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return d()(this,e)});function i(){return o()(this,i),r.call(this,"ESP32 BR")}return s()(i,[{key:"render",value:function(){var e=this,t=document.createElement("esp32-br-input");return t.addEventListener("send_click",(function(t){t.detail>1||e.emit(pe.SET_INPUT,{data:t.target.value_str,type:fe.hex.value})})),t.addEventListener("send_dbl_click",(function(t){e.emit(pe.SEND_INPUT,{data:t.target.value_str,type:fe.hex.value})})),t}}]),i}(qt);var oi=function(e){l()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=f()(t);if(n){var i=f()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return d()(this,e)});function i(){return o()(this,i),r.call(this,"EByte Radio")}return s()(i,[{key:"render",value:function(){var e=this,t=document.createElement("lu");return t.setAttribute("id","ebyte-input-list"),t.innerHTML="<style>\n                            #ebyte-input-list{ list-style-type: none;}\n                            .ebyte-input-item{ padding: 5px; margin-bottom: 4px; cursor: pointer; background-color: cadetblue; }\n                            .ebyte-input-item:hover{ background-color: yellow; }\n                        </style>\n                        <li class=ebyte-input-item data-value=C1C1C1>[C1C1C1] Reading operating parameters</li>\n                        <li class=ebyte-input-item data-value=C3C3C3>[C3C3C3] Reading version number</li>\n                        <li class=ebyte-input-item data-value=C4C4C4>[C4C4C4] Reset device</li>",t.querySelectorAll(".ebyte-input-item").forEach((function(t){t.addEventListener("click",(function(t){t.detail>1||e.emit(pe.SET_INPUT,{data:t.target.dataset.value,type:fe.hex.value})})),t.addEventListener("dblclick",(function(t){e.emit(pe.SEND_INPUT,{data:t.target.dataset.value,type:fe.hex.value})}))})),t}}]),i}(qt);var ai=function(e){l()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=f()(t);if(n){var i=f()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return d()(this,e)});function i(){return o()(this,i),r.call(this,"Custom Input")}return s()(i,[{key:"render",value:function(){var e=this,t=document.createElement("div");t.innerHTML='\n<style>\n    #container\n    {\n        min-height: 100px;\n        max-height: 300px;\n        min-width: 300px;\n        overflow: auto;\n    }\n\n    #button-container\n    {\n        width: 100%;\n        display: flex;\n        flex-direction: row;\n    }\n\n    .flex-btn\n    {\n        cursor: pointer;\n        margin: 0px;\n        flex-basis: 1;\n        padding: 5px;\n        font-size: 25px;\n    }\n\n    #send-btn\n    {\n        flex-grow: 4;\n    }\n\n    #error\n    {\n        background-color: red;\n        color: white;\n        margin: 0px;\n        padding: 2px;\n    }\n</style>\n<custom-protocol id=container add-btn=false calculate-btn=false></custom-protocol>\n<div id=error>Invalid field value</div>\n<div id=button-container>\n    <button class=flex-btn id=add-btn title="Add field">+</button>\n    <button class=flex-btn id=copy-btn title="Copy">&#x2398;</button>\n    <button class=flex-btn id=send-btn title=Send>&#x25B6;</button>\n</div>\n';var n=t.querySelector("#container"),r=t.querySelector("#send-btn"),i=t.querySelector("#error"),o=function(e){i.style.display=e?"block":"none"},a=function(){var e=n.calculate(!1);if(o(!e.status),e.status){var t=new j.O;return t.raw(e.data),t.hex()}return null};return o(!1),n.add(),t.querySelector("#add-btn").addEventListener("click",n.add.bind(n)),t.querySelector("#copy-btn").addEventListener("click",(function(e){var t=a();t&&(0,se.ZP)(t)})),r.addEventListener("click",(function(t){var n=a();n&&e.emit(pe.SET_INPUT,{data:n,type:fe.hex.value})})),r.addEventListener("dblclick",(function(t){var n=a();n&&e.emit(pe.SEND_INPUT,{data:n,type:fe.hex.value})})),t}}]),i}(qt);var si=function(e){l()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=f()(t);if(n){var i=f()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return d()(this,e)});function i(){return o()(this,i),r.call(this,"JSON Message")}return s()(i,[{key:"render",value:function(){var e=this,t=document.createElement("div");t.id="container",t.innerHTML='\n<style>\n    #container\n    {\n        background-color: bisque;\n    }\n\n    #button-container\n    {\n        width: 100%;\n        display: flex;\n        flex-direction: row;\n    }\n\n    .flex-btn\n    {\n        cursor: pointer;\n        margin: 0px;\n        flex-basis: 1;\n        padding: 5px;\n        font-size: 25px;\n    }\n\n    #send-btn\n    {\n        flex-grow: 4;\n    }\n</style>\n<json-message id=message></json-message>\n<div id=button-container>\n    <button class=flex-btn id=copy-btn title="Copy">&#x2398;</button>\n    <button class=flex-btn id=send-btn title=Send>&#x25B6;</button>\n</div>';var n=t.querySelector("#send-btn"),r=t.querySelector("#message");return t.querySelector("#copy-btn").addEventListener("click",(function(e){(0,se.ZP)(JSON.stringify(r.message()))})),n.addEventListener("click",(function(t){e.emit(pe.SET_INPUT,{data:JSON.stringify(r.message()),type:fe.text.value})})),n.addEventListener("dblclick",(function(t){e.emit(pe.SEND_INPUT,{data:JSON.stringify(r.message()),type:fe.text.value})})),t}}]),i}(qt),ci=n(8995),li=n(1755),ui=n(2320),di=n(2617),hi=(n(271),n(4850));var fi="\n<style>\n    html,body\n    {\n        width: 100%;\n        height: 100%;\n        padding: 0;\n        margin: 0;\n        background-color: brown;\n    }\n\n    #container\n    {\n        display: flex;\n        flex-direction: column;\n        height: 100%;\n        width: 100%;\n        justify-content: stretch;\n    }\n\n    #header\n    {\n        background-color: red;\n        display:flex;\n        flex-direction: row;\n        justify-content: space-between;\n        padding: 2px 4px;\n        margin-bottom: 2px;\n        align-items: center;\n    }\n\n    #theme:after\n    {\n        content: '◐';\n    }\n    \n    .header-end\n    {\n        display: inline-block;\n        padding: 3px 6px;\n        border-radius: 4px;\n        cursor: pointer;\n        font-weight: bold;\n    }\n\n    .header-end:hover\n    {\n        transform: translateY(4px);\n    }\n    \n    #terminal\n    {\n        flex-grow: 1;\n        height: 100%;\n        width: 100%;\n        align-self: stretch;\n        background-color: black;\n    }\n\n    #title\n    {\n        font-family: \"Courier\", Times, serif;\n        font-size: 23px;\n        margin-top: 2px;\n    }\n\n    #title:after\n    {\n        content: 'View::Terminal';\n    }\n    \n    #id{ width: 150px; }\n    .no-id-avaliable{ display: none; }\n\n    #selected-id\n    { \n        font-weight: bold; \n        padding: 2px;\n        border-radius: 4px;\n        max-width: 33%;\n        overflow: hidden;\n        text-overflow: ellipsis;\n    }\n\n    #selected-id:hover\n    {\n        background-color: brown;\n    }\n\n    #select-container\n    {\n        padding: 30px;\n        border: 2px solid black;\n        border-radius: 10px;\n    }\n\n    #select-container h3\n    {\n        margin: 0px 0px 5px 0px;\n        text-align: center;\n    }\n\n    #select-container select,\n    #select-container button\n    {\n        padding: 10px;\n    }\n\n    my-modal\n    {\n        --my-modal-content-width: fit-content;\n        --my-modal-content-height: fit-content;\n    }\n\n    #status\n    {\n        padding: 5px;\n        font-weight: bold;\n    }\n\n    #buffer-container\n    {\n        display: flex;\n        padding: 5px;\n        background-color: yellow;\n    }\n\n    #label-buffer\n    {\n        font-weight: bold;\n    }\n\n    #buffer\n    {\n        background-color: inherit;\n        outline: none;\n        border: 0px;\n        border-bottom: 0px solid black;\n        flex-grow: 1;\n        font-family: monospace;\n    }\n\n    .error\n    {\n        background-color: red;\n        color: white;\n    }\n\n    .warning\n    {\n        background-color: rgb(200, 200, 50);\n    }\n\n    .ok\n    {\n        background-color: green;\n    }\n\n    #terminal-options\n    {\n        background-color: blue;\n        padding: 5px;\n        color: white;\n    }\n\n    .option-item\n    {\n        cursor: pointer\n    }\n\n    ".concat(hi.Z.toString(),"\n</style>\n\n<div id=container>\n    <div id=header>\n        <div id=selected-id></div>\n        <span id=title></span>\n        <div>\n            <div id=theme class=header-end title='Dark/Light theme'></div>\n            <div id=open-selector class=header-end>Open</div>\n        </div>\n    </div>\n    <div id=terminal></div>\n    <div id=buffer-container>\n        <label id=label-buffer for=buffer>Input: </label>\n        <input id=buffer placeholder='Send Data'>\n    </div>\n    <div id=status>Status info</div>\n    <div id=terminal-options>\n        <label class=option-item><input id=show-send-message type=checkbox>Show send message</label>\n        <label class=option-item title=\"Convert '\\n' to '\\r\\n'\"><input id=convert-eol type=checkbox>Convert EOL</label>\n    </div>\n</div>"),pi={CONNECTED:Symbol("connected"),DISCONNECTED:Symbol("disconnected")},_i={ERROR:{color:"1;31m"},WARNING:{color:"103m"},OK:{color:"32m"},NONE:{color:null}},vi={dark:{background:"#000",foreground:"#fff",selection:"#888",cursor:"#fff"},light:{background:"#fff",foreground:"#000",selection:"#111",cursor:"#000"}},mi=function(e){l()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=f()(t);if(n){var i=f()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return d()(this,e)});function i(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o()(this,i),(t=r.call(this,e,n))._terminal=new ui.Terminal({cursorBlink:!0,termName:"Terminal View"}),t._fit_addon=new di.FitAddon,t._terminal.loadAddon(t._fit_addon),t._input_id=null,t._id=null,t._status=pi.DISCONNECTED,t._modal=null,t._status_message=null,t._show_send=null,t._buffer_message=null,t._buffer="",t._theme="dark",t}return s()(i,[{key:"render",value:function(e){var t=this;e.innerHTML=fi;var n=e.querySelector("#terminal");this._terminal.open(n),setTimeout((function(){return t._fit_addon.fit()}),0),this._terminal.setOption("cursorBlink",!0),this._terminal.focus(),this._terminal.write("Welcome to [1;3;31mTerminal View[0m $\r\n\r\n"),"input"in this.options&&!this.options.input&&(e.querySelector("#buffer-container").style.display="none"),this._show_send=e.querySelector("#show-send-message"),this._status_message=e.querySelector("#status"),this._buffer_message=e.querySelector("#buffer"),this._modal=document.createElement("my-modal"),this._modal.innerHTML="\n<div id=select-container>\n    <h3>Select ID</h3>\n    <div>\n        <select id=id></select>\n        <button id=select-id-button>Select</button>\n    </div>\n</div>",this._modal.show=!0,e.appendChild(this._modal);var r=this._modal.querySelector("#id");this._input_id=new Gt.X(r,{include_only_type:ct.m.One2One}),e.querySelector("#open-selector").addEventListener("click",(function(e){t._modal.show=!0})),e.querySelector("#buffer").addEventListener("keyup",(function(e){t.send(e.target.value,e.key,e.target)})),this._modal.querySelector("#select-id-button").addEventListener("click",(function(n){var r=t._input_id.selected();if(r){if(t._status=pi.CONNECTED,!t._id||!t._id.is_equal(r)){t._id=r,t.status_message("Connected ".concat(t._id.name()),"OK");var i=e.querySelector("#selected-id");i.textContent=t._id.full_name(),i.title=t._id.full_name(),t.emit(li.xB.SELECT_ID,{view:t,id:t._id})}t._modal.show=!1}})),e.querySelector("#convert-eol").addEventListener("change",(function(e){return t._terminal.setOption("convertEol",e.target.checked)})),this.on(Ue.r.CHECK_IDS,(function(e){return t._check_input(e)})).on(G.O7.RECEIVED_MESSAGE,(function(e){return t._on_message(e)})),this.emit(Ue.r.PROPAGATE,this._input_id),this.window().addEventListener("resize",(function(e){return t._fit_addon.fit()})),e.querySelector("#theme").addEventListener("click",(function(e){t._theme="dark"===t._theme?"light":"dark",t._terminal.setOption("theme",vi[t._theme]),n.style.backgroundColor="dark"===t._theme?"#000":"#fff"}))}},{key:"_on_message",value:function(e){if(this._status===pi.CONNECTED&&this._id.filter_message(e,!0,{type:[z.DI.data.value]})){var t=(0,z.T5)(e);if(!t)return;e.dir==z.kc.sent.value?this.post_send(t):this._terminal.write(t)}}},{key:"_check_input",value:function(e){if(this._id){var t=this._id.is_at_list(e);this._status===pi.CONNECTED?(-1===t?this.status_message("Server DISCONNECTED","ERROR"):-2===t?this.status_message("App Unregistered","ERROR"):-3===t&&this.status_message("ID Removed","ERROR"),t<0&&(this._status=pi.DISCONNECTED)):t instanceof ct.y&&(this._id=t,this.status_message("Reconnected ".concat(this._id.name()),"OK"),this._status=pi.CONNECTED)}this._input_id.check_ids(e)}},{key:"send",value:function(e,t,n){"Enter"===t&&e.length&&(this._status===pi.CONNECTED?(this._id.send(new Uint8Array(j.O.parse(e,U.Nm.text.value))),n.value=""):this._set_status_bar("Not connected","WARNING"))}},{key:"post_send",value:function(e){this._show_send.checked&&(e instanceof Uint8Array&&(e=new TextDecoder("utf-8").decode(e)),this._terminal.write("\r\n[44m"+e+"[0m\r\n"))}},{key:"status_message",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"NONE";switch(n){case"ERROR":case"WARNING":case"OK":t="["+_i[n].color;break;default:t=""}this._terminal.write("\r\n"+t+e+"[0m\r\n\r\n"),this._set_status_bar(e,n)}},{key:"_set_status_bar",value:function(e,t){switch(t){case"ERROR":this._status_message.classList.remove("ok","warning"),this._status_message.classList.add("error");break;case"WARNING":this._status_message.classList.remove("ok","error"),this._status_message.classList.add("warning");break;case"OK":this._status_message.classList.remove("warning","error"),this._status_message.classList.add("ok");break;default:this._status_message.classList.remove("ok","error","warning")}this._status_message.textContent=e}}]),i}(ci.U),yi=n(6251),gi=n(9709);function bi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ki(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bi(Object(n),!0).forEach((function(t){S()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var wi={break_line:"break-new-line",views:[]},Ei={type:U.Nm.text.value};function xi(e){return Array.isArray(e)?e:"string"==typeof e?j.O.parse(e,U.Nm.text.value):e instanceof Uint8Array?Array.from(e):null}var Si=document.createElement("template");Si.innerHTML="\n    <div class=view>\n        <div class=view-options>\n            <select class=output-type title='Output Type'>\n                <option value=text>Text</option>\n                <option value=hex>Hexa</option>\n                <option value=binary>Binary</option>\n            </select>\n            <div class=close>&times;</div>\n        </div>\n        <pre class=view-data></pre>\n    </div>\n";var Oi=function(){function e(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};o()(this,e);var a=ki(ki({},Ei),i);this._id=t,this._manager=n,this._element=document.importNode(Si.content,!0).querySelector(".view"),this._element.dataset.id=t,this._data=this._element.querySelector(".view-data"),this.type=a.type;var s=this._element.querySelector(".output-type");s.addEventListener("change",(function(e){r._type=e.target.selectedOptions[0].value,n.add_all_messages(r)})),s.value=this._type}return s()(e,[{key:"remove",value:function(){this._element.parentNode.removeChild(this._element),this._manager=null}},{key:"add_message",value:function(e){var t=this;e.forEach((function(e){return t._data.appendChild(e)}))}},{key:"clear",value:function(){this._data.innerHTML=""}},{key:"id",get:function(){return this._id}},{key:"element",get:function(){return this._element}},{key:"type",get:function(){return this._type},set:function(e){this._element.querySelector(".output-type").value=e,this._type=e}}]),e}(),Ri=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o()(this,e),this._view_id=0,this._container=t,this._options=ki(ki({},wi),r),this._views=[],this._messages=[],this._container.addEventListener("click",(function(e){var t=(0,F.I)(e)[0];if(t.classList.contains("close")){for(;!("id"in t.dataset);)t=t.parentNode;n.close_view(t.dataset.id)}})),this._style=document.createElement("style"),this._container.prepend(this._style),this.break_line(this._options.break_line),this._options.views.forEach((function(e){return n.add_view(e)}))}return s()(e,[{key:"add_view",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new Oi(this._view_id++,this,e);this._container.appendChild(t.element),this._views.push(t),this.add_all_messages(t)}},{key:"close_view",value:function(e){this._views=this._views.filter((function(t){return t.id!=e||(t.remove(),!1)}))}},{key:"add_message",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e=xi(e),this._messages.push({data:e,received:n}),this._views.forEach((function(r){r.add_message(t.create_message(e,r.type,n))}))}},{key:"add_status",value:function(e){e.textContent="\n"+e.textContent+"\n",this._messages.push(e),this._views.forEach((function(t){return t.add_message([e.cloneNode(!0)])}))}},{key:"add_all_messages",value:function(e){var t=this;e.clear(),this._messages.forEach((function(n){n instanceof HTMLElement?e.add_message([n]):e.add_message(t.create_message(n.data,e.type,n.received))}))}},{key:"create_message",value:function(e,t,n){var r=[];if(!n){var i=document.createElement("span");i.textContent="\n",r.push(i)}if(e.forEach((function(e,i){var o=document.createElement("span");switch(o.classList.add("char","char"+e.toString(16)),n||o.classList.add("sent"),t){case U.Nm.text.value:o.textContent=function(e){return gi.a.is_ascii_int(e)?String.fromCharCode(e):"\\x"+yi.lR._set_data_opt(yi.lR.to_hex_string(e),{pad_size:2,pad_char:"0"})}(e);break;case U.Nm.hex.value:o.textContent=function(e){return e.toString(16).padStart(2,"0")}(e)+(i%2?" ":"");break;case U.Nm.binary.value:o.textContent=function(e){return e.toString(2).padStart(8,"0")}(e)+" "}r.push(o)})),!n){var o=document.createElement("span");o.textContent="\n",r.push(o)}var a=document.createElement("span");return a.classList.add("message"),r.push(a),r}},{key:"clear",value:function(){this._messages=[],this._views.forEach((function(e){return e.clear()}))}},{key:"break_line",value:function(e,t){switch(e){case"break-new-line":this._style.innerHTML=".chara:after{ content: '\\000a'; }";break;case"break-fixed-char":this._style.innerHTML=".view-data .char:nth-of-type(".concat(t,"n):after{ content: '\\000a'; }");break;case"break-message":this._style.innerHTML=".message:after{ content: '\\000a'; }"}}}]),e}(),Ti=n(8588),Ai=document.createElement("template");Ai.innerHTML="\n<style>\n    ".concat(Ti.Z.toString(),"\n</style>\n<div id=container>\n    <div id=header>\n        <div id=selected-id></div>\n        <div id=title></div>\n        <div id=open-selector>Open</div>\n    </div>\n    <div id=content>\n        <div id=options>\n            <fieldset id=break-line-container>\n                <legend>Break line</legend>\n                <label><input type=radio name=break-line id=break-new-line checked>New line (0x0a)</label>\n                <label><input type=radio name=break-line id=break-fixed-char>Fixed characters</label>\n                <label><input type=number min=1 value=10 style='width:5ch' id=fixed-char-number disabled></label>\n                <label><input type=radio name=break-line id=break-message>Message</label>\n            </fieldset>\n            <button id=add title='Add new view' class=option></button>\n            <button id=clear title='Clear all data' class=option>Clear</button>\n            <label class=option><input type=checkbox id=scroll checked>Auto-scroll</label>\n        </div>\n        <div id=data></div> \n    </div>\n    <div id=status>Status</div>\n</div>\n");var Di={views:[{type:U.Nm.text.value},{type:U.Nm.hex.value}]},Ci={CONNECTED:Symbol("connected"),DISCONNECTED:Symbol("disconnected")},Ni=(Symbol("error"),Symbol("warning"),Symbol("ok"),Symbol("null"),function(e){l()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=f()(t);if(n){var i=f()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return d()(this,e)});function i(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o()(this,i),(t=r.call(this,e,n))._id=null,t._status=Ci.DISCONNECTED,t._data=null,t._status_message=null,t._modal=null,t._data_content=null,t._clear=null,t._scroll=null,t}return s()(i,[{key:"render",value:function(e){var t=this;e.appendChild(Ai.content.cloneNode(!0)),this._data=new Ri(e.querySelector("#data"),Di),this._status_message=e.querySelector("#status"),this._data_content=e.querySelector("#data"),e.querySelector("#add").addEventListener("click",(function(e){t._data.add_view()})),e.querySelectorAll("[name=break-line]").forEach((function(n){n.addEventListener("click",(function(n){var r=e.querySelector("#fixed-char-number");r.disabled="break-fixed-char"!=n.target.id,t._data.break_line(n.target.id,r.value)}))})),this._modal=document.createElement("my-modal"),this._modal.innerHTML="\n<div id=select-container>\n    <h3>Select ID</h3>\n    <div>\n        <select id=id></select>\n        <button id=select-id-button>Select</button>\n    </div>\n</div>",this._modal.show=!0,e.appendChild(this._modal);var n=this._modal.querySelector("#id");this._input_id=new Gt.X(n,{include_only_type:ct.m.One2One}),e.querySelector("#open-selector").addEventListener("click",(function(e){t._modal.show=!0})),e.querySelector("#clear").addEventListener("click",(function(e){t._data.clear()})),this._scroll=e.querySelector("#scroll"),this._modal.querySelector("#select-id-button").addEventListener("click",(function(n){var r=t._input_id.selected();if(r){if(t._status=Ci.CONNECTED,!t._id||!t._id.is_equal(r)){t._id=r,t.status("Connected ".concat(t._id.name()),"OK");var i=e.querySelector("#selected-id");i.textContent=t._id.full_name(),i.title=t._id.full_name(),t.emit(li.xB.SELECT_ID,{view:t,id:t._id})}t._modal.show=!1}})),this.on(Ue.r.CHECK_IDS,(function(e){return t._check_input(e)})).on(G.O7.RECEIVED_MESSAGE,(function(e){return t._on_message(e)})),this.emit(Ue.r.PROPAGATE,this._input_id),this.status("Select ID")}},{key:"_check_input",value:function(e){if(this._id){var t=this._id.is_at_list(e);this._status===Ci.CONNECTED?(-1===t?this.status("Server DISCONNECTED","ERROR"):-2===t?this.status("App Unregistered","ERROR"):-3===t&&this.status("ID Removed","ERROR"),t<0&&(this._status=Ci.DISCONNECTED)):t instanceof ct.y&&(this._id=t,this.status("Reconnected ".concat(this._id.name()),"OK"),this._status=Ci.CONNECTED)}this._input_id.check_ids(e)}},{key:"_on_message",value:function(e){if(this._status===Ci.CONNECTED&&this._id.filter_message(e,!0,{type:[z.DI.data.value]})){var t=(0,z.T5)(e);if(!t)return;this._data.add_message(t,e.dir==z.kc.received.value),this.auto_scroll()}}},{key:"status",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"NONE",n=document.createElement("span");switch(n.textContent=e,n.classList.add("message-status"),t){case"ERROR":n.classList.add("error"),this._status_message.classList.remove("ok","warning","none"),this._status_message.classList.add("error");break;case"WARNING":n.classList.add("warning"),this._status_message.classList.remove("ok","error","none"),this._status_message.classList.add("warning");break;case"OK":n.classList.add("ok"),this._status_message.classList.remove("warning","error","none"),this._status_message.classList.add("ok");break;default:this._status_message.classList.remove("ok","error","warning"),this._status_message.classList.add("none")}this._status_message.textContent=e,this._data.add_status(n),this.auto_scroll()}},{key:"auto_scroll",value:function(){this._scroll.checked&&(this._data_content.scrollTop=this._data_content.scrollHeight)}}]),i}(ci.U)),Ii=n(285);var Mi=function(e){l()(a,e);var t,n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=f()(n);if(r){var i=f()(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return d()(this,e)});function a(e){var t;return o()(this,a),(t=i.call(this,e))._el=t._create_element(),t._id_input=new Gt.X(t._el.querySelector("#select-app-id")),t._test_num=0,t.on(_t.CHECK_IDS,(function(e){return t._id_input.check_ids(e)})),t}return s()(a,[{key:"element",value:function(){return this._el}},{key:"enable",value:function(e){this._el.querySelector("#select-app-id").disabled=Boolean(e),this._el.querySelector("#num-msg").disabled=Boolean(e),this._el.querySelector("#msg").disabled=Boolean(e),this._el.querySelector("#inteval").disabled=Boolean(e)}},{key:"run",value:function(){var e=this._id_input.selected();if(!e)return this.cancel(mt.NO_INPUT),!1;var t=this._el.querySelector("#num-msg").value,n="[".concat(this._test_num++,"] ").concat(this._el.querySelector("#msg").value),r=this._el.querySelector("#inteval").value;return this.monitor_ids(e),this._run_script(e,t,r,n)}},{key:"_create_element",value:function(e){var t=document.createElement("div");return t.innerHTML="<style>".concat(Ii.Z.toString(),"</style>\n                        <label for=select-app-id class=script-label>ID:</label>\n                        <select id=select-app-id class=script-input-id-select></select><br>\n                    <label for=num-msg class=script-label>N. msgs:</label>\n                    <input type=number id=num-msg min=1 value=").concat(5,' style="width:7ch"><br>\n                    <label for=msg class=script-label>Data:</label>\n                    <input id=msg value="message data " style=\'width:150px;\'><br>\n                    <label for=inteval class=script-label>Interval(ms):</label>\n                    <input type=number id=inteval style="width:7ch" min=500 value=1000>'),t}},{key:"_run_script",value:(t=pt()(ht().mark((function e(t,n,r,i){var o;return ht().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=0;case 1:if(!(o<n)){e.next=10;break}return e.next=4,this.delay(r);case 4:if(!this.is_cancelled()){e.next=6;break}return e.abrupt("return",!1);case 6:t.send(i+o,void 0,{data_type:fe.text.value});case 7:o++,e.next=1;break;case 10:return e.abrupt("return",!0);case 11:case"end":return e.stop()}}),e,this)}))),function(e,n,r,i){return t.apply(this,arguments)})}]),a}(bt);var Pi=function(e){l()(a,e);var t,n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=f()(n);if(r){var i=f()(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return d()(this,e)});function a(e){var t;return o()(this,a),(t=i.call(this,e))._compare_el=null,t._el=t._create_element(),t._input_id=new Gt.X(t._el.querySelector("#app-id"),{exclude_app:V.ECHO.name}),t._id=null,t.on(_t.CHECK_IDS,(function(e){return t._input_id.check_ids(e)})),t.on(_t.RECEIVED_MESSAGE,(function(e){return t._on_message(e)})),t}return s()(a,[{key:"element",value:function(){return this._el}},{key:"enable",value:function(e){this._el.querySelector("#app-id").disabled=Boolean(e),this._compare_el.disabled=Boolean(e)}},{key:"run",value:function(){return this._id=this._input_id.selected(),this._id?(this.monitor_ids(this._id),this._run_script()):(this.cancel(mt.NO_INPUT),!1)}},{key:"_create_element",value:function(){var e=document.createElement("div");return e.innerHTML="<style>".concat(Ii.Z.toString(),"</style>\n                        <label for=app-id class=script-label>ID:</label>\n                        <select id=app-id class=script-input-id-select></select><br>\n                        <input type=checkbox id=compare-type checked>\n                        <label for=compare-type class=script-label>ID match exactly"),this._compare_el=e.querySelector("#compare-type"),e}},{key:"_on_message",value:function(e){this._id.filter_message(e,this._compare_el.checked,{dir:[z.kc.received.value],type:[z.DI.data.value]})&&this._id.send((0,z.T5)(e),e.from)}},{key:"_run_script",value:(t=pt()(ht().mark((function e(){return ht().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.script_busy_loop();case 2:return e.abrupt("return",this.reason()==mt.BUTTON_CANCEL);case 3:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),a}(bt);var Li=function(e){l()(a,e);var t,n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=f()(n);if(r){var i=f()(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return d()(this,e)});function a(e){var t;return o()(this,a),(t=i.call(this,e))._el=t._create_element(),t._input_id1=new Gt.X(t._el.querySelector("#app-id1")),t._input_id2=new Gt.X(t._el.querySelector("#app-id2")),t._id1=null,t._id2=null,t.on(_t.CHECK_IDS,(function(e){t._input_id1.check_ids(e),t._input_id2.check_ids(e)})),t.on(_t.RECEIVED_MESSAGE,(function(e){return t._on_message(e)})),t._compare_exactly=t._el.querySelector("#compare-type"),t}return s()(a,[{key:"element",value:function(){return this._el}},{key:"enable",value:function(e){this._el.querySelector("#app-id1").disabled=Boolean(e),this._el.querySelector("#app-id2").disabled=Boolean(e),this._el.querySelector("#compare-type").disabled=Boolean(e)}},{key:"run",value:function(){return this._id1=this._input_id1.selected(),this._id1?(this._id2=this._input_id2.selected(),this._id2?this._id1.is_equal(this._id2)?(this.cancel("same input"),!1):(this.monitor_ids([this._id1,this._id2]),this._run_script()):(this.cancel(mt.NO_INPUT),!1)):(this.cancel(mt.NO_INPUT),!1)}},{key:"_create_element",value:function(){var e=document.createElement("div");return e.innerHTML="<style>".concat(Ii.Z.toString(),"</style>\n                        <label for=app-id1 class=script-label>ID1:</label>\n                        <select id=app-id1 class=script-input-id-select></select><br>\n                        <label for=app-id2 class=script-label>ID2:</label>\n                        <select id=app-id2 class=script-input-id-select></select><br>\n                        <input type=checkbox id=compare-type checked>\n                        <label for=compare-type class=script-label>ID match exactly"),e}},{key:"_on_message",value:function(e){this._id1.filter_message(e,this._compare_exactly.checked,{dir:[z.kc.received.value],type:[z.DI.data.value]})&&this._id2.send((0,z.T5)(e),e.from),this._id2.filter_message(e,this._compare_exactly.checked,{dir:[z.kc.received.value],type:[z.DI.data.value]})&&this._id1.send((0,z.T5)(e),e.from)}},{key:"_run_script",value:(t=pt()(ht().mark((function e(){return ht().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.script_busy_loop();case 2:return e.abrupt("return",this.reason()==mt.BUTTON_CANCEL);case 3:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),a}(bt),qi="br_version",ji="from",Ui="br_size",Hi="node_version",zi="node_size",Gi="layer",Vi="parent",Fi="mac_ap",Bi="mesh_id",Wi="children",Yi="ch_config",$i="ch_conn",Zi="is_root",Ki="rssi",Ji="info",Xi="render_devices",Qi="render_net",eo="render_messages",to="render_br_clients",no="render_routers",ro="enable",io="error",oo="send_message",ao=oe.REBOOT+1;function so(e,t){if(t.mac()==e)return t;var n=null;return t.children().some((function(t){if(n=so(e,t))return!0})),n}function co(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t.push(e),e.children().forEach((function(e){co(e,t)})),t}var lo=function(){function e(){o()(this,e),this._wifi_router_list=new uo,this._net_list=new fo,this._device_list=new vo}return s()(e,[{key:"add",value:function(e,t){var n=this.add_device(e.from,e),r=null;if(e.mesh_id&&(r=this.add_net(e.mesh_id,this.device())),!r&&n.id()&&(r=this.net(n.id())),r){var i=null;if(n.layer()&&(1==n.layer()?i=r.add_border_router(n,t.addr,t.port):r.remove_border_router(n)),i&&n.parent()){var o=this.add_wifi_router(n.parent());o.add_child(i.device()),i.router(o)}r.unconnected(!0)}}},{key:"net",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null===e?this._net_list.list():this._net_list.get(e)}},{key:"add_net",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return this._net_list.add(e,t,n)}},{key:"br_by_mac",value:function(e){return this._net_list.br_by_mac(e)}},{key:"check_border_router",value:function(e){this._net_list.check_border_router(e)}},{key:"device",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null===e?this._device_list.list():this._device_list.get(e)}},{key:"add_device",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._device_list.add(e,t)}},{key:"wifi_router",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null===e?this._wifi_router_list.list():this._wifi_router_list.get(e)}},{key:"add_wifi_router",value:function(e){return this._wifi_router_list.add(e)}},{key:"unconnected_devices",value:function(){var e=this,t=[];return this.device().forEach((function(n){e.wifi_router().forEach((function(e){so(n.mac(),e)||t.find((function(e){return e.mac()==n.mac()}))||t.push(n)}))})),t}}]),e}(),uo=function(){function e(){o()(this,e),this._list={}}return s()(e,[{key:"list",value:function(){return Object.values(this._list)}},{key:"get",value:function(e){return this._list[e]}},{key:"add",value:function(e){var t=e instanceof ho?e.mac():e,n=this.get(t);return n||(n=new ho(t),this._list[t]=n),n}},{key:"remove",value:function(e){delete this._list[e]}}]),e}(),ho=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o()(this,e),this._mac=t,this._name="",this._children=n}return s()(e,[{key:"mac",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null!==e&&(this._mac=e),this._mac}},{key:"name",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null!==e&&(this._name=e),this._name}))},{key:"full_name",value:function(){return this.name()?"".concat(this.name()," (").concat(this.mac(),")"):this.mac()}},{key:"add_child",value:function(e){console.assert(e instanceof mo,'Child must be "Mesh_Device" type'),this._children[e.mac()]=e,e.parent(this)}},{key:"remove_child",value:function(e){console.assert(e instanceof mo,'Child must be "Mesh_Device" type'),delete this._children[e.mac()]}},{key:"children",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null!=e&&(this._children=e),Object.values(this._children)}}]),e}(),fo=function(){function e(){o()(this,e),this._list={}}return s()(e,[{key:"list",value:function(){return Object.values(this._list)}},{key:"get",value:function(e){return this._list[e]}},{key:"add",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this._list[e];return n||(n=new _o(e),this._list[e]=n),t&&n.add(t),n}},{key:"check_border_router",value:function(e){var t=this;Object.keys(this._list).forEach((function(n){return t._list[n].check_border_router(e)}))}},{key:"br_by_mac",value:function(e){var t=null;return this.list().forEach((function(n){n.border_router().forEach((function(n){so(e,n.device())&&(t=n)}))})),t}}]),e}(),po=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;o()(this,e),this._ip=t,this._port=n,this._device=r,this._router=null}return s()(e,[{key:"device",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null!==e&&(this._device=e),this._device}},{key:"router",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null!==e&&(this._router=e),this._router}},{key:"ip",value:function(){return this._ip}},{key:"port",value:function(){return this._port}},{key:"to",value:function(){return{addr:this._ip,port:this._port}}},{key:"is_same",value:function(e,t){return e instanceof mo?e.mac()==this._device.mac():e==this._ip&&t==this._port}}]),e}(),_o=function(){function e(t){o()(this,e),this._id=t,this._devices={},this._name="",this._brs=[],this._unconnected=[]}return s()(e,[{key:"name",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null!==e&&(this._name=e),this._name}))},{key:"id",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null!==e&&(this._id=e),this._id}},{key:"full_name",value:function(){return name?"".concat(this.name()," (").concat(this.id(),")"):this.id()}},{key:"devices",value:function(){return Object.values(this._devices)}},{key:"add_border_router",value:function(e,t,n){var r=this._brs.find((function(e){return e.is_same(t,n)}));return r||(r=new po(t,n,e),this._brs.push(r)),r}},{key:"remove_border_router",value:function(e){var t=this._brs.find((function(t){return t.device().mac()==e.mac()}));t&&(t.router()&&t.router().remove_child(e),this._brs=this._brs.filter((function(t){return t.device().mac()!=e.mac()})))}},{key:"border_router",value:function(){return this._brs}},{key:"check_border_router",value:function(e){var t=[];this._brs.forEach((function(n){e.find((function(e){return n.is_same(e.addr(),e.port())}))?t.push(n):n.router()&&n.router().remove_child(n.device())})),this._brs=t,this.unconnected(!0)}},{key:"number_devices",value:function(){return Object.keys(this._devices).length}},{key:"last_layer",value:function(){var e=0;return Object.values(this._devices).forEach((function(t){return e=t.layer()>e?t.layer():e})),e}},{key:"add",value:function(e){var t=this;this._devices={},e.forEach((function(e){e.id()==t.id()&&(t._devices[e.mac()]=e)}))}},{key:"device_by_mac",value:function(e){return Object.values(this._devices).find((function(t){return t.mac()==e}))}},{key:"device_by_mac_ap",value:function(e){return Object.values(this._devices).find((function(t){return null!==t.mac_ap()&&t.mac_ap()==e}))}},{key:"unconnected",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e&&(this._unconnected=this.unconnected_devices()),this._unconnected}},{key:"unconnected_devices",value:function(){var e=[];this.border_router().forEach((function(t){t.router()&&co(t.router(),e)}));var t=[];return this.devices().forEach((function(n){e.find((function(e){return e.mac()==n.mac()}))||t.push(n)})),t}}]),e}(),vo=function(){function e(){o()(this,e),this._list={}}return s()(e,[{key:"list",value:function(){return Object.values(this._list)}},{key:"add",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=this._list[e];return r||(r=new mo(e),this._list[e]=r),t&&(t.hasOwnProperty(Hi)&&r.version(t.node_version),t.hasOwnProperty(Gi)&&r.layer(t.layer),t.hasOwnProperty(Bi)&&r.id(t.mesh_id),t.hasOwnProperty(Zi)&&r.is_root(t.is_root>0),t.hasOwnProperty(Fi)&&r.mac_ap(t.mac_ap),t.hasOwnProperty(Yi)&&r.ch_config(t.ch_config),t.hasOwnProperty($i)&&r.ch_conn(t.ch_conn),t.hasOwnProperty(Vi)&&this._update_parent(r,t.parent),t.hasOwnProperty(Ki)&&r.rssi(t.rssi),t.hasOwnProperty(Wi)&&this._update_children(r,t.children)),n&&r.updated(Date.now()),r}},{key:"get",value:function(e){return this._list[e]}},{key:"device_by_mac_ap",value:function(e){return this.list().find((function(t){return t.mac_ap()==e}))}},{key:"_update_parent",value:function(e,t){var n=e.parent();if(n)if(n instanceof mo){if(n.mac_ap()==t)return void n.add_child(e);n.remove_child(e)}else if(n instanceof ho){if(n.mac()==t)return;n.remove_child(e)}var r=this.device_by_mac_ap(t);r?(r.add_child(e),e.parent(r)):e.parent(t)}},{key:"_update_children",value:function(e,t){var n=this;e.children_table({}),t.forEach((function(t){if(t!=e.mac()){var r={is_root:!1};e.id()&&(r.mesh_id=e.id());var i=n.add(t,r,!1),o=i.parent();e.add_children_table(i),o?"string"==typeof o&&n._update_parent(i,o):(i.parent(e),e.add_child(i))}})),e.children().forEach((function(n){t.find((function(e){return e==n.mac()}))||e.remove_child(n)}))}}]),e}(),mo=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];o()(this,e),this._mac=t,this._mac_ap=null,this._parent=n,this._children=r,this._layer=null,this._rssi_parent=null,this._is_root=null,this._name="",this._net_id=null,this._version=null,this._ch_config=null,this._ch_conn=null,this._children_table={},this._n_rssi_parent={},this._updated=0,this._sended=0}return s()(e,[{key:"version",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null!=e&&(this._version=e),this._version}},{key:"id",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e&&(this._net_id=e),this._net_id}},{key:"name",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null!==e&&(this._name=e),this._name}))},{key:"mac",value:function(){return this._mac}},{key:"mac_ap",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null!==e&&(this._mac_ap=e),this._mac_ap}},{key:"layer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null!==e&&(this._layer=e),this._layer}},{key:"is_root",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null!==e&&(this._is_root=e),this._is_root}},{key:"parent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e&&(this._parent=e),this._parent}},{key:"parent_string",value:function(){return this._parent instanceof e||this._parent instanceof ho?this._parent.mac():this._parent}},{key:"children",value:function(){return this._children}},{key:"add_child",value:function(e){this._children.find((function(t){return t.mac()==e.mac()}))||this._children.push(e)}},{key:"remove_child",value:function(e){this._children=this._children.filter((function(t){return t.mac()!=e.mac()}))}},{key:"children_table",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null!==e&&(this._children_table=e),Object.values(this._children_table)}},{key:"add_children_table",value:function(t){console.assert(t instanceof e,"'child' must be of type 'Mesh_Device'"),this._children_table[t.mac()]=t}},{key:"remove_children_table",value:function(t){console.assert(t instanceof e,"'child' must be of type 'Mesh_Device'"),delete this._children_table[t.mac()]}},{key:"rssi",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(null!==e){if(this.parent()){var t=this.parent_string();this._n_rssi_parent.hasOwnProperty(t)?(this._n_rssi_parent[t].push({rssi:e,time:new Date}),this._n_rssi_parent[t]=this._n_rssi_parent[t].slice(-20)):this._n_rssi_parent[t]=[{rssi:e,time:new Date}]}this._rssi_parent?(this._rssi_parent.push(e),this._rssi_parent=this._rssi_parent.slice(-20)):this._rssi_parent=[e]}return this._rssi_parent?this._rssi_parent[this._rssi_parent.length-1]:this._rssi_parent}},{key:"rssi_arr",value:function(){return this._rssi_parent}},{key:"rssi_object",value:function(){return this._n_rssi_parent}},{key:"ch_config",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null!==e&&(this._ch_config=e),this._ch_config}},{key:"ch_conn",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null!==e&&(this._ch_conn=e),this._ch_conn}},{key:"data_is_incomplete",value:function(){return null===this.version()||null===this.id()||null===this.mac_ap()||null===this.rssi()||null===this.layer()||null===this.parent()}},{key:"updated",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null!==e&&(this._updated=e),this._updated}},{key:"sended",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null!==e&&(this._sended=e),this._sended}}]),e}();function yo(e,t){let n;if(void 0===t)for(const t of e)null!=t&&(n<t||void 0===n&&t>=t)&&(n=t);else{let r=-1;for(let i of e)null!=(i=t(i,++r,e))&&(n<i||void 0===n&&i>=i)&&(n=i)}return n}function go(e,t){let n;if(void 0===t)for(const t of e)null!=t&&(n>t||void 0===n&&t>=t)&&(n=t);else{let r=-1;for(let i of e)null!=(i=t(i,++r,e))&&(n>i||void 0===n&&i>=i)&&(n=i)}return n}var bo=Array.prototype.slice;function ko(e){return e}var wo=1e-6;function Eo(e){return"translate("+(e+.5)+",0)"}function xo(e){return"translate(0,"+(e+.5)+")"}function So(e){return t=>+e(t)}function Oo(e){var t=Math.max(0,e.bandwidth()-1)/2;return e.round()&&(t=Math.round(t)),function(n){return+e(n)+t}}function Ro(){return!this.__axis}function To(e,t){var n=[],r=null,i=null,o=6,a=6,s=3,c=1===e||4===e?-1:1,l=4===e||2===e?"x":"y",u=1===e||3===e?Eo:xo;function d(d){var h=null==r?t.ticks?t.ticks.apply(t,n):t.domain():r,f=null==i?t.tickFormat?t.tickFormat.apply(t,n):ko:i,p=Math.max(o,0)+s,_=t.range(),v=+_[0]+.5,m=+_[_.length-1]+.5,y=(t.bandwidth?Oo:So)(t.copy()),g=d.selection?d.selection():d,b=g.selectAll(".domain").data([null]),k=g.selectAll(".tick").data(h,t).order(),w=k.exit(),E=k.enter().append("g").attr("class","tick"),x=k.select("line"),S=k.select("text");b=b.merge(b.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),k=k.merge(E),x=x.merge(E.append("line").attr("stroke","currentColor").attr(l+"2",c*o)),S=S.merge(E.append("text").attr("fill","currentColor").attr(l,c*p).attr("dy",1===e?"0em":3===e?"0.71em":"0.32em")),d!==g&&(b=b.transition(d),k=k.transition(d),x=x.transition(d),S=S.transition(d),w=w.transition(d).attr("opacity",wo).attr("transform",(function(e){return isFinite(e=y(e))?u(e):this.getAttribute("transform")})),E.attr("opacity",wo).attr("transform",(function(e){var t=this.parentNode.__axis;return u(t&&isFinite(t=t(e))?t:y(e))}))),w.remove(),b.attr("d",4===e||2==e?a?"M"+c*a+","+v+"H0.5V"+m+"H"+c*a:"M0.5,"+v+"V"+m:a?"M"+v+","+c*a+"V0.5H"+m+"V"+c*a:"M"+v+",0.5H"+m),k.attr("opacity",1).attr("transform",(function(e){return u(y(e))})),x.attr(l+"2",c*o),S.attr(l,c*p).text(f),g.filter(Ro).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",2===e?"start":4===e?"end":"middle"),g.each((function(){this.__axis=y}))}return d.scale=function(e){return arguments.length?(t=e,d):t},d.ticks=function(){return n=bo.call(arguments),d},d.tickArguments=function(e){return arguments.length?(n=null==e?[]:bo.call(e),d):n.slice()},d.tickValues=function(e){return arguments.length?(r=null==e?null:bo.call(e),d):r&&r.slice()},d.tickFormat=function(e){return arguments.length?(i=e,d):i},d.tickSize=function(e){return arguments.length?(o=a=+e,d):o},d.tickSizeInner=function(e){return arguments.length?(o=+e,d):o},d.tickSizeOuter=function(e){return arguments.length?(a=+e,d):a},d.tickPadding=function(e){return arguments.length?(s=+e,d):s},d}function Ao(e){return To(1,e)}function Do(e){return To(4,e)}function Co(){}function No(e){return null==e?Co:function(){return this.querySelector(e)}}function Io(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function Mo(){return[]}function Po(e){return null==e?Mo:function(){return this.querySelectorAll(e)}}function Lo(e){return function(){return this.matches(e)}}function qo(e){return function(t){return t.matches(e)}}var jo=Array.prototype.find;function Uo(){return this.firstElementChild}var Ho=Array.prototype.filter;function zo(){return this.children}function Go(e){return new Array(e.length)}function Vo(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function Fo(e){return function(){return e}}function Bo(e,t,n,r,i,o){for(var a,s=0,c=t.length,l=o.length;s<l;++s)(a=t[s])?(a.__data__=o[s],r[s]=a):n[s]=new Vo(e,o[s]);for(;s<c;++s)(a=t[s])&&(i[s]=a)}function Wo(e,t,n,r,i,o,a){var s,c,l,u=new Map,d=t.length,h=o.length,f=new Array(d);for(s=0;s<d;++s)(c=t[s])&&(f[s]=l=a.call(c,c.__data__,s,t)+"",u.has(l)?i[s]=c:u.set(l,c));for(s=0;s<h;++s)l=a.call(e,o[s],s,o)+"",(c=u.get(l))?(r[s]=c,c.__data__=o[s],u.delete(l)):n[s]=new Vo(e,o[s]);for(s=0;s<d;++s)(c=t[s])&&u.get(f[s])===c&&(i[s]=c)}function Yo(e){return e.__data__}function $o(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}Vo.prototype={constructor:Vo,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var Zo="http://www.w3.org/1999/xhtml";const Ko={svg:"http://www.w3.org/2000/svg",xhtml:Zo,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Jo(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),Ko.hasOwnProperty(t)?{space:Ko[t],local:e}:e}function Xo(e){return function(){this.removeAttribute(e)}}function Qo(e){return function(){this.removeAttributeNS(e.space,e.local)}}function ea(e,t){return function(){this.setAttribute(e,t)}}function ta(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function na(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function ra(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function ia(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function oa(e){return function(){this.style.removeProperty(e)}}function aa(e,t,n){return function(){this.style.setProperty(e,t,n)}}function sa(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function ca(e,t){return e.style.getPropertyValue(t)||ia(e).getComputedStyle(e,null).getPropertyValue(t)}function la(e){return function(){delete this[e]}}function ua(e,t){return function(){this[e]=t}}function da(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function ha(e){return e.trim().split(/^|\s+/)}function fa(e){return e.classList||new pa(e)}function pa(e){this._node=e,this._names=ha(e.getAttribute("class")||"")}function _a(e,t){for(var n=fa(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function va(e,t){for(var n=fa(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function ma(e){return function(){_a(this,e)}}function ya(e){return function(){va(this,e)}}function ga(e,t){return function(){(t.apply(this,arguments)?_a:va)(this,e)}}function ba(){this.textContent=""}function ka(e){return function(){this.textContent=e}}function wa(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function Ea(){this.innerHTML=""}function xa(e){return function(){this.innerHTML=e}}function Sa(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function Oa(){this.nextSibling&&this.parentNode.appendChild(this)}function Ra(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Ta(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Zo&&t.documentElement.namespaceURI===Zo?t.createElement(e):t.createElementNS(n,e)}}function Aa(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Da(e){var t=Jo(e);return(t.local?Aa:Ta)(t)}function Ca(){return null}function Na(){var e=this.parentNode;e&&e.removeChild(this)}function Ia(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Ma(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Pa(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}function La(e){return function(){var t=this.__on;if(t){for(var n,r=0,i=-1,o=t.length;r<o;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?t.length=i:delete this.__on}}}function qa(e,t,n){return function(){var r,i=this.__on,o=function(e){return function(t){e.call(this,t,this.__data__)}}(t);if(i)for(var a=0,s=i.length;a<s;++a)if((r=i[a]).type===e.type&&r.name===e.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),void(r.value=t);this.addEventListener(e.type,o,n),r={type:e.type,name:e.name,value:t,listener:o,options:n},i?i.push(r):this.__on=[r]}}function ja(e,t,n){var r=ia(e),i=r.CustomEvent;"function"==typeof i?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Ua(e,t){return function(){return ja(this,e,t)}}function Ha(e,t){return function(){return ja(this,e,t.apply(this,arguments))}}pa.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var za=[null];function Ga(e,t){this._groups=e,this._parents=t}function Va(){return new Ga([[document.documentElement]],za)}Ga.prototype=Va.prototype={constructor:Ga,select:function(e){"function"!=typeof e&&(e=No(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,a,s=t[i],c=s.length,l=r[i]=new Array(c),u=0;u<c;++u)(o=s[u])&&(a=e.call(o,o.__data__,u,s))&&("__data__"in o&&(a.__data__=o.__data__),l[u]=a);return new Ga(r,this._parents)},selectAll:function(e){e="function"==typeof e?function(e){return function(){var t=e.apply(this,arguments);return null==t?[]:Io(t)}}(e):Po(e);for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var a,s=t[o],c=s.length,l=0;l<c;++l)(a=s[l])&&(r.push(e.call(a,a.__data__,l,s)),i.push(a));return new Ga(r,i)},selectChild:function(e){return this.select(null==e?Uo:function(e){return function(){return jo.call(this.children,e)}}("function"==typeof e?e:qo(e)))},selectChildren:function(e){return this.selectAll(null==e?zo:function(e){return function(){return Ho.call(this.children,e)}}("function"==typeof e?e:qo(e)))},filter:function(e){"function"!=typeof e&&(e=Lo(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,a=t[i],s=a.length,c=r[i]=[],l=0;l<s;++l)(o=a[l])&&e.call(o,o.__data__,l,a)&&c.push(o);return new Ga(r,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,Yo);var n=t?Wo:Bo,r=this._parents,i=this._groups;"function"!=typeof e&&(e=Fo(e));for(var o=i.length,a=new Array(o),s=new Array(o),c=new Array(o),l=0;l<o;++l){var u=r[l],d=i[l],h=d.length,f=Io(e.call(u,u&&u.__data__,l,r)),p=f.length,_=s[l]=new Array(p),v=a[l]=new Array(p),m=c[l]=new Array(h);n(u,d,_,v,m,f,t);for(var y,g,b=0,k=0;b<p;++b)if(y=_[b]){for(b>=k&&(k=b+1);!(g=v[k])&&++k<p;);y._next=g||null}}return(a=new Ga(a,r))._enter=s,a._exit=c,a},enter:function(){return new Ga(this._enter||this._groups.map(Go),this._parents)},exit:function(){return new Ga(this._exit||this._groups.map(Go),this._parents)},join:function(e,t,n){var r=this.enter(),i=this,o=this.exit();return r="function"==typeof e?e(r):r.append(e+""),null!=t&&(i=t(i)),null==n?o.remove():n(o),r&&i?r.merge(i).order():i},merge:function(e){if(!(e instanceof Ga))throw new Error("invalid merge");for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var c,l=t[s],u=n[s],d=l.length,h=a[s]=new Array(d),f=0;f<d;++f)(c=l[f]||u[f])&&(h[f]=c);for(;s<r;++s)a[s]=t[s];return new Ga(a,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,i=e[t],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=$o);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a,s=n[o],c=s.length,l=i[o]=new Array(c),u=0;u<c;++u)(a=s[u])&&(l[u]=a);l.sort(t)}return new Ga(i,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},size:function(){let e=0;for(const t of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i,o=t[n],a=0,s=o.length;a<s;++a)(i=o[a])&&e.call(i,i.__data__,a,o);return this},attr:function(e,t){var n=Jo(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?Qo:Xo:"function"==typeof t?n.local?ra:na:n.local?ta:ea)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?oa:"function"==typeof t?sa:aa)(e,t,null==n?"":n)):ca(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?la:"function"==typeof t?da:ua)(e,t)):this.node()[e]},classed:function(e,t){var n=ha(e+"");if(arguments.length<2){for(var r=fa(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof t?ga:t?ma:ya)(n,t))},text:function(e){return arguments.length?this.each(null==e?ba:("function"==typeof e?wa:ka)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?Ea:("function"==typeof e?Sa:xa)(e)):this.node().innerHTML},raise:function(){return this.each(Oa)},lower:function(){return this.each(Ra)},append:function(e){var t="function"==typeof e?e:Da(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var n="function"==typeof e?e:Da(e),r=null==t?Ca:"function"==typeof t?t:No(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(Na)},clone:function(e){return this.select(e?Ma:Ia)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,i,o=Pa(e+""),a=o.length;if(!(arguments.length<2)){for(s=t?qa:La,r=0;r<a;++r)this.each(s(o[r],t,n));return this}var s=this.node().__on;if(s)for(var c,l=0,u=s.length;l<u;++l)for(r=0,c=s[l];r<a;++r)if((i=o[r]).type===c.type&&i.name===c.name)return c.value},dispatch:function(e,t){return this.each(("function"==typeof t?Ha:Ua)(e,t))},[Symbol.iterator]:function*(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r,i=e[t],o=0,a=i.length;o<a;++o)(r=i[o])&&(yield r)}};const Fa=Va;var Ba={value:()=>{}};function Wa(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw new Error("illegal type: "+e);r[e]=[]}return new Ya(r)}function Ya(e){this._=e}function $a(e,t){return e.trim().split(/^|\s+/).map((function(e){var n="",r=e.indexOf(".");if(r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}}))}function Za(e,t){for(var n,r=0,i=e.length;r<i;++r)if((n=e[r]).name===t)return n.value}function Ka(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Ba,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}Ya.prototype=Wa.prototype={constructor:Ya,on:function(e,t){var n,r=this._,i=$a(e+"",r),o=-1,a=i.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++o<a;)if(n=(e=i[o]).type)r[n]=Ka(r[n],e.name,t);else if(null==t)for(n in r)r[n]=Ka(r[n],e.name,null);return this}for(;++o<a;)if((n=(e=i[o]).type)&&(n=Za(r[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Ya(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=0,n=(r=this._[e]).length;o<n;++o)r[o].value.apply(t,i)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};const Ja=Wa;var Xa,Qa,es=0,ts=0,ns=0,rs=0,is=0,os=0,as="object"==typeof performance&&performance.now?performance:Date,ss="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function cs(){return is||(ss(ls),is=as.now()+os)}function ls(){is=0}function us(){this._call=this._time=this._next=null}function ds(e,t,n){var r=new us;return r.restart(e,t,n),r}function hs(){is=(rs=as.now())+os,es=ts=0;try{!function(){cs(),++es;for(var e,t=Xa;t;)(e=is-t._time)>=0&&t._call.call(null,e),t=t._next;--es}()}finally{es=0,function(){for(var e,t,n=Xa,r=1/0;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:Xa=t);Qa=e,ps(r)}(),is=0}}function fs(){var e=as.now(),t=e-rs;t>1e3&&(os-=t,rs=e)}function ps(e){es||(ts&&(ts=clearTimeout(ts)),e-is>24?(e<1/0&&(ts=setTimeout(hs,e-as.now()-os)),ns&&(ns=clearInterval(ns))):(ns||(rs=as.now(),ns=setInterval(fs,1e3)),es=1,ss(hs)))}function _s(e,t,n){var r=new us;return t=null==t?0:+t,r.restart((n=>{r.stop(),e(n+t)}),t,n),r}us.prototype=ds.prototype={constructor:us,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?cs():+n)+(null==t?0:+t),this._next||Qa===this||(Qa?Qa._next=this:Xa=this,Qa=this),this._call=e,this._time=n,ps()},stop:function(){this._call&&(this._call=null,this._time=1/0,ps())}};var vs=Ja("start","end","cancel","interrupt"),ms=[];function ys(e,t,n,r,i,o){var a=e.__transition;if(a){if(n in a)return}else e.__transition={};!function(e,t,n){var r,i=e.__transition;function o(c){var l,u,d,h;if(1!==n.state)return s();for(l in i)if((h=i[l]).name===n.name){if(3===h.state)return _s(o);4===h.state?(h.state=6,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete i[l]):+l<t&&(h.state=6,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete i[l])}if(_s((function(){3===n.state&&(n.state=4,n.timer.restart(a,n.delay,n.time),a(c))})),n.state=2,n.on.call("start",e,e.__data__,n.index,n.group),2===n.state){for(n.state=3,r=new Array(d=n.tween.length),l=0,u=-1;l<d;++l)(h=n.tween[l].value.call(e,e.__data__,n.index,n.group))&&(r[++u]=h);r.length=u+1}}function a(t){for(var i=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(s),n.state=5,1),o=-1,a=r.length;++o<a;)r[o].call(e,i);5===n.state&&(n.on.call("end",e,e.__data__,n.index,n.group),s())}function s(){for(var r in n.state=6,n.timer.stop(),delete i[t],i)return;delete e.__transition}i[t]=n,n.timer=ds((function(e){n.state=1,n.timer.restart(o,n.delay,n.time),n.delay<=e&&o(e-n.delay)}),0,n.time)}(e,n,{name:t,index:r,group:i,on:vs,tween:ms,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:0})}function gs(e,t){var n=ks(e,t);if(n.state>0)throw new Error("too late; already scheduled");return n}function bs(e,t){var n=ks(e,t);if(n.state>3)throw new Error("too late; already running");return n}function ks(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function ws(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Es,xs=180/Math.PI,Ss={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Os(e,t,n,r,i,o){var a,s,c;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(c=e*n+t*r)&&(n-=e*c,r-=t*c),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,c/=s),e*r<t*n&&(e=-e,t=-t,c=-c,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*xs,skewX:Math.atan(c)*xs,scaleX:a,scaleY:s}}function Rs(e,t,n,r){function i(e){return e.length?e.pop()+" ":""}return function(o,a){var s=[],c=[];return o=e(o),a=e(a),function(e,r,i,o,a,s){if(e!==i||r!==o){var c=a.push("translate(",null,t,null,n);s.push({i:c-4,x:ws(e,i)},{i:c-2,x:ws(r,o)})}else(i||o)&&a.push("translate("+i+t+o+n)}(o.translateX,o.translateY,a.translateX,a.translateY,s,c),function(e,t,n,o){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:ws(e,t)})):t&&n.push(i(n)+"rotate("+t+r)}(o.rotate,a.rotate,s,c),function(e,t,n,o){e!==t?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:ws(e,t)}):t&&n.push(i(n)+"skewX("+t+r)}(o.skewX,a.skewX,s,c),function(e,t,n,r,o,a){if(e!==n||t!==r){var s=o.push(i(o)+"scale(",null,",",null,")");a.push({i:s-4,x:ws(e,n)},{i:s-2,x:ws(t,r)})}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")")}(o.scaleX,o.scaleY,a.scaleX,a.scaleY,s,c),o=a=null,function(e){for(var t,n=-1,r=c.length;++n<r;)s[(t=c[n]).i]=t.x(e);return s.join("")}}}var Ts=Rs((function(e){const t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Ss:Os(t.a,t.b,t.c,t.d,t.e,t.f)}),"px, ","px)","deg)"),As=Rs((function(e){return null==e?Ss:(Es||(Es=document.createElementNS("http://www.w3.org/2000/svg","g")),Es.setAttribute("transform",e),(e=Es.transform.baseVal.consolidate())?Os((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):Ss)}),", ",")",")");function Ds(e,t){var n,r;return function(){var i=bs(this,e),o=i.tween;if(o!==n)for(var a=0,s=(r=n=o).length;a<s;++a)if(r[a].name===t){(r=r.slice()).splice(a,1);break}i.tween=r}}function Cs(e,t,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var o=bs(this,e),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:t,value:n},c=0,l=i.length;c<l;++c)if(i[c].name===t){i[c]=s;break}c===l&&i.push(s)}o.tween=i}}function Ns(e,t,n){var r=e._id;return e.each((function(){var e=bs(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)})),function(e){return ks(e,r).value[t]}}function Is(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Ms(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Ps(){}var Ls=.7,qs=1/Ls,js="\\s*([+-]?\\d+)\\s*",Us="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Hs="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",zs=/^#([0-9a-f]{3,8})$/,Gs=new RegExp("^rgb\\("+[js,js,js]+"\\)$"),Vs=new RegExp("^rgb\\("+[Hs,Hs,Hs]+"\\)$"),Fs=new RegExp("^rgba\\("+[js,js,js,Us]+"\\)$"),Bs=new RegExp("^rgba\\("+[Hs,Hs,Hs,Us]+"\\)$"),Ws=new RegExp("^hsl\\("+[Us,Hs,Hs]+"\\)$"),Ys=new RegExp("^hsla\\("+[Us,Hs,Hs,Us]+"\\)$"),$s={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Zs(){return this.rgb().formatHex()}function Ks(){return this.rgb().formatRgb()}function Js(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=zs.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?Xs(t):3===n?new nc(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?Qs(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?Qs(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=Gs.exec(e))?new nc(t[1],t[2],t[3],1):(t=Vs.exec(e))?new nc(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=Fs.exec(e))?Qs(t[1],t[2],t[3],t[4]):(t=Bs.exec(e))?Qs(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=Ws.exec(e))?ac(t[1],t[2]/100,t[3]/100,1):(t=Ys.exec(e))?ac(t[1],t[2]/100,t[3]/100,t[4]):$s.hasOwnProperty(e)?Xs($s[e]):"transparent"===e?new nc(NaN,NaN,NaN,0):null}function Xs(e){return new nc(e>>16&255,e>>8&255,255&e,1)}function Qs(e,t,n,r){return r<=0&&(e=t=n=NaN),new nc(e,t,n,r)}function ec(e){return e instanceof Ps||(e=Js(e)),e?new nc((e=e.rgb()).r,e.g,e.b,e.opacity):new nc}function tc(e,t,n,r){return 1===arguments.length?ec(e):new nc(e,t,n,null==r?1:r)}function nc(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function rc(){return"#"+oc(this.r)+oc(this.g)+oc(this.b)}function ic(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function oc(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function ac(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new cc(e,t,n,r)}function sc(e){if(e instanceof cc)return new cc(e.h,e.s,e.l,e.opacity);if(e instanceof Ps||(e=Js(e)),!e)return new cc;if(e instanceof cc)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),a=NaN,s=o-i,c=(o+i)/2;return s?(a=t===o?(n-r)/s+6*(n<r):n===o?(r-t)/s+2:(t-n)/s+4,s/=c<.5?o+i:2-o-i,a*=60):s=c>0&&c<1?0:a,new cc(a,s,c,e.opacity)}function cc(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function lc(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function uc(e,t,n,r,i){var o=e*e,a=o*e;return((1-3*e+3*o-a)*t+(4-6*o+3*a)*n+(1+3*e+3*o-3*a)*r+a*i)/6}Is(Ps,Js,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:Zs,formatHex:Zs,formatHsl:function(){return sc(this).formatHsl()},formatRgb:Ks,toString:Ks}),Is(nc,tc,Ms(Ps,{brighter:function(e){return e=null==e?qs:Math.pow(qs,e),new nc(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?Ls:Math.pow(Ls,e),new nc(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rc,formatHex:rc,formatRgb:ic,toString:ic})),Is(cc,(function(e,t,n,r){return 1===arguments.length?sc(e):new cc(e,t,n,null==r?1:r)}),Ms(Ps,{brighter:function(e){return e=null==e?qs:Math.pow(qs,e),new cc(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?Ls:Math.pow(Ls,e),new cc(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new nc(lc(e>=240?e-240:e+120,i,r),lc(e,i,r),lc(e<120?e+240:e-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));const dc=e=>()=>e;function hc(e,t){var n=t-e;return n?function(e,t){return function(n){return e+n*t}}(e,n):dc(isNaN(e)?t:e)}const fc=function e(t){var n=function(e){return 1==(e=+e)?hc:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):dc(isNaN(t)?n:t)}}(t);function r(e,t){var r=n((e=tc(e)).r,(t=tc(t)).r),i=n(e.g,t.g),o=n(e.b,t.b),a=hc(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=i(t),e.b=o(t),e.opacity=a(t),e+""}}return r.gamma=e,r}(1);function pc(e){return function(t){var n,r,i=t.length,o=new Array(i),a=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=tc(t[n]),o[n]=r.r||0,a[n]=r.g||0,s[n]=r.b||0;return o=e(o),a=e(a),s=e(s),r.opacity=1,function(e){return r.r=o(e),r.g=a(e),r.b=s(e),r+""}}}pc((function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],o=e[r+1],a=r>0?e[r-1]:2*i-o,s=r<t-1?e[r+2]:2*o-i;return uc((n-r/t)*t,a,i,o,s)}})),pc((function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],o=e[r%t],a=e[(r+1)%t],s=e[(r+2)%t];return uc((n-r/t)*t,i,o,a,s)}}));var _c=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,vc=new RegExp(_c.source,"g");function mc(e,t){var n,r,i,o=_c.lastIndex=vc.lastIndex=0,a=-1,s=[],c=[];for(e+="",t+="";(n=_c.exec(e))&&(r=vc.exec(t));)(i=r.index)>o&&(i=t.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,c.push({i:a,x:ws(n,r)})),o=vc.lastIndex;return o<t.length&&(i=t.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?c[0]?function(e){return function(t){return e(t)+""}}(c[0].x):function(e){return function(){return e}}(t):(t=c.length,function(e){for(var n,r=0;r<t;++r)s[(n=c[r]).i]=n.x(e);return s.join("")})}function yc(e,t){var n;return("number"==typeof t?ws:t instanceof Js?fc:(n=Js(t))?(t=n,fc):mc)(e,t)}function gc(e){return function(){this.removeAttribute(e)}}function bc(e){return function(){this.removeAttributeNS(e.space,e.local)}}function kc(e,t,n){var r,i,o=n+"";return function(){var a=this.getAttribute(e);return a===o?null:a===r?i:i=t(r=a,n)}}function wc(e,t,n){var r,i,o=n+"";return function(){var a=this.getAttributeNS(e.space,e.local);return a===o?null:a===r?i:i=t(r=a,n)}}function Ec(e,t,n){var r,i,o;return function(){var a,s,c=n(this);if(null!=c)return(a=this.getAttribute(e))===(s=c+"")?null:a===r&&s===i?o:(i=s,o=t(r=a,c));this.removeAttribute(e)}}function xc(e,t,n){var r,i,o;return function(){var a,s,c=n(this);if(null!=c)return(a=this.getAttributeNS(e.space,e.local))===(s=c+"")?null:a===r&&s===i?o:(i=s,o=t(r=a,c));this.removeAttributeNS(e.space,e.local)}}function Sc(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Oc(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Rc(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&Oc(e,i)),n}return i._value=t,i}function Tc(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&Sc(e,i)),n}return i._value=t,i}function Ac(e,t){return function(){gs(this,e).delay=+t.apply(this,arguments)}}function Dc(e,t){return t=+t,function(){gs(this,e).delay=t}}function Cc(e,t){return function(){bs(this,e).duration=+t.apply(this,arguments)}}function Nc(e,t){return t=+t,function(){bs(this,e).duration=t}}function Ic(e,t){if("function"!=typeof t)throw new Error;return function(){bs(this,e).ease=t}}function Mc(e,t,n){var r,i,o=function(e){return(e+"").trim().split(/^|\s+/).every((function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e}))}(t)?gs:bs;return function(){var a=o(this,e),s=a.on;s!==r&&(i=(r=s).copy()).on(t,n),a.on=i}}var Pc=Fa.prototype.constructor;function Lc(e){return function(){this.style.removeProperty(e)}}function qc(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function jc(e,t,n){var r,i;function o(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&qc(e,o,n)),r}return o._value=t,o}function Uc(e){return function(t){this.textContent=e.call(this,t)}}function Hc(e){var t,n;function r(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&Uc(r)),t}return r._value=e,r}var zc=0;function Gc(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Vc(){return++zc}var Fc=Fa.prototype;Gc.prototype=function(e){return Fa().transition(e)}.prototype={constructor:Gc,select:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=No(e));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var s,c,l=r[a],u=l.length,d=o[a]=new Array(u),h=0;h<u;++h)(s=l[h])&&(c=e.call(s,s.__data__,h,l))&&("__data__"in s&&(c.__data__=s.__data__),d[h]=c,ys(d[h],t,n,h,d,ks(s,n)));return new Gc(o,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=Po(e));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var c,l=r[s],u=l.length,d=0;d<u;++d)if(c=l[d]){for(var h,f=e.call(c,c.__data__,d,l),p=ks(c,n),_=0,v=f.length;_<v;++_)(h=f[_])&&ys(h,t,n,_,f,p);o.push(f),a.push(c)}return new Gc(o,a,t,n)},filter:function(e){"function"!=typeof e&&(e=Lo(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,a=t[i],s=a.length,c=r[i]=[],l=0;l<s;++l)(o=a[l])&&e.call(o,o.__data__,l,a)&&c.push(o);return new Gc(r,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var c,l=t[s],u=n[s],d=l.length,h=a[s]=new Array(d),f=0;f<d;++f)(c=l[f]||u[f])&&(h[f]=c);for(;s<r;++s)a[s]=t[s];return new Gc(a,this._parents,this._name,this._id)},selection:function(){return new Pc(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=Vc(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],c=s.length,l=0;l<c;++l)if(a=s[l]){var u=ks(a,t);ys(a,e,n,l,s,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Gc(r,this._parents,e,n)},call:Fc.call,nodes:Fc.nodes,node:Fc.node,size:Fc.size,empty:Fc.empty,each:Fc.each,on:function(e,t){var n=this._id;return arguments.length<2?ks(this.node(),n).on.on(e):this.each(Mc(n,e,t))},attr:function(e,t){var n=Jo(e),r="transform"===n?As:yc;return this.attrTween(e,"function"==typeof t?(n.local?xc:Ec)(n,r,Ns(this,"attr."+e,t)):null==t?(n.local?bc:gc)(n):(n.local?wc:kc)(n,r,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;var r=Jo(e);return this.tween(n,(r.local?Rc:Tc)(r,t))},style:function(e,t,n){var r="transform"==(e+="")?Ts:yc;return null==t?this.styleTween(e,function(e,t){var n,r,i;return function(){var o=ca(this,e),a=(this.style.removeProperty(e),ca(this,e));return o===a?null:o===n&&a===r?i:i=t(n=o,r=a)}}(e,r)).on("end.style."+e,Lc(e)):"function"==typeof t?this.styleTween(e,function(e,t,n){var r,i,o;return function(){var a=ca(this,e),s=n(this),c=s+"";return null==s&&(this.style.removeProperty(e),c=s=ca(this,e)),a===c?null:a===r&&c===i?o:(i=c,o=t(r=a,s))}}(e,r,Ns(this,"style."+e,t))).each(function(e,t){var n,r,i,o,a="style."+t,s="end."+a;return function(){var c=bs(this,e),l=c.on,u=null==c.value[a]?o||(o=Lc(t)):void 0;l===n&&i===u||(r=(n=l).copy()).on(s,i=u),c.on=r}}(this._id,e)):this.styleTween(e,function(e,t,n){var r,i,o=n+"";return function(){var a=ca(this,e);return a===o?null:a===r?i:i=t(r=a,n)}}(e,r,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!=typeof t)throw new Error;return this.tween(r,jc(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"==typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(Ns(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;return this.tween(t,Hc(e))},remove:function(){return this.on("end.remove",function(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}(this._id))},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r,i=ks(this.node(),n).tween,o=0,a=i.length;o<a;++o)if((r=i[o]).name===e)return r.value;return null}return this.each((null==t?Ds:Cs)(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?Ac:Dc)(t,e)):ks(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?Cc:Nc)(t,e)):ks(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(Ic(t,e)):ks(this.node(),t).ease},easeVarying:function(e){if("function"!=typeof e)throw new Error;return this.each(function(e,t){return function(){var n=t.apply(this,arguments);if("function"!=typeof n)throw new Error;bs(this,e).ease=n}}(this._id,e))},end:function(){var e,t,n=this,r=n._id,i=n.size();return new Promise((function(o,a){var s={value:a},c={value:function(){0==--i&&o()}};n.each((function(){var n=bs(this,r),i=n.on;i!==e&&((t=(e=i).copy())._.cancel.push(s),t._.interrupt.push(s),t._.end.push(c)),n.on=t})),0===i&&o()}))},[Symbol.iterator]:Fc[Symbol.iterator]};var Bc={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function Wc(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}Fa.prototype.interrupt=function(e){return this.each((function(){!function(e,t){var n,r,i,o=e.__transition,a=!0;if(o){for(i in t=null==t?null:t+"",o)(n=o[i]).name===t?(r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete o[i]):a=!1;a&&delete e.__transition}}(this,e)}))},Fa.prototype.transition=function(e){var t,n;e instanceof Gc?(t=e._id,e=e._name):(t=Vc(),(n=Bc).time=cs(),e=null==e?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],c=s.length,l=0;l<c;++l)(a=s[l])&&ys(a,e,t,l,s,n||Wc(a,t));return new Gc(r,this._parents,e,t)};const{abs:Yc,max:$c,min:Zc}=Math;function Kc(e){return{type:e}}function Jc(e){var t=0,n=e.children,r=n&&n.length;if(r)for(;--r>=0;)t+=n[r].value;else t=1;e.value=t}function Xc(e,t){e instanceof Map?(e=[void 0,e],void 0===t&&(t=el)):void 0===t&&(t=Qc);for(var n,r,i,o,a,s=new rl(e),c=[s];n=c.pop();)if((i=t(n.data))&&(a=(i=Array.from(i)).length))for(n.children=i,o=a-1;o>=0;--o)c.push(r=i[o]=new rl(i[o])),r.parent=n,r.depth=n.depth+1;return s.eachBefore(nl)}function Qc(e){return e.children}function el(e){return Array.isArray(e)?e[1]:null}function tl(e){void 0!==e.data.value&&(e.value=e.data.value),e.data=e.data.data}function nl(e){var t=0;do{e.height=t}while((e=e.parent)&&e.height<++t)}function rl(e){this.data=e,this.depth=this.height=0,this.parent=null}function il(e,t){return e.parent===t.parent?1:2}function ol(e){var t=e.children;return t?t[0]:e.t}function al(e){var t=e.children;return t?t[t.length-1]:e.t}function sl(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function cl(e,t,n){return e.a.parent===t.parent?e.a:n}function ll(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}["w","e"].map(Kc),["n","s"].map(Kc),["n","w","e","s","nw","ne","sw","se"].map(Kc),rl.prototype=Xc.prototype={constructor:rl,count:function(){return this.eachAfter(Jc)},each:function(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this},eachAfter:function(e,t){for(var n,r,i,o=this,a=[o],s=[],c=-1;o=a.pop();)if(s.push(o),n=o.children)for(r=0,i=n.length;r<i;++r)a.push(n[r]);for(;o=s.pop();)e.call(t,o,++c,this);return this},eachBefore:function(e,t){for(var n,r,i=this,o=[i],a=-1;i=o.pop();)if(e.call(t,i,++a,this),n=i.children)for(r=n.length-1;r>=0;--r)o.push(n[r]);return this},find:function(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r},sum:function(e){return this.eachAfter((function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n}))},sort:function(e){return this.eachBefore((function(t){t.children&&t.children.sort(e)}))},path:function(e){for(var t=this,n=function(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r},ancestors:function(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t},descendants:function(){return Array.from(this)},leaves:function(){var e=[];return this.eachBefore((function(t){t.children||e.push(t)})),e},links:function(){var e=this,t=[];return e.each((function(n){n!==e&&t.push({source:n.parent,target:n})})),t},copy:function(){return Xc(this).eachBefore(tl)},[Symbol.iterator]:function*(){var e,t,n,r,i=this,o=[i];do{for(e=o.reverse(),o=[];i=e.pop();)if(yield i,t=i.children)for(n=0,r=t.length;n<r;++n)o.push(t[n])}while(o.length)}},ll.prototype=Object.create(rl.prototype);var ul=Math.sqrt(50),dl=Math.sqrt(10),hl=Math.sqrt(2);function fl(e,t,n){var r=(t-e)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=ul?10:o>=dl?5:o>=hl?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=ul?10:o>=dl?5:o>=hl?2:1)}function pl(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=ul?i*=10:o>=dl?i*=5:o>=hl&&(i*=2),t<e?-i:i}function _l(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function vl(e){let t=e,n=e;function r(e,t,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){const o=r+i>>>1;n(e[o],t)<0?r=o+1:i=o}return r}return 1===e.length&&(t=(t,n)=>e(t)-n,n=function(e){return(t,n)=>_l(e(t),n)}(e)),{left:r,center:function(e,n,i,o){null==i&&(i=0),null==o&&(o=e.length);const a=r(e,n,i,o-1);return a>i&&t(e[a-1],n)>-t(e[a],n)?a-1:a},right:function(e,t,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){const o=r+i>>>1;n(e[o],t)>0?i=o:r=o+1}return r}}}const ml=vl(_l),yl=ml.right,gl=(ml.left,vl((function(e){return null===e?NaN:+e})).center,yl);function bl(e,t){var n,r=t?t.length:0,i=e?Math.min(r,e.length):0,o=new Array(i),a=new Array(r);for(n=0;n<i;++n)o[n]=xl(e[n],t[n]);for(;n<r;++n)a[n]=t[n];return function(e){for(n=0;n<i;++n)a[n]=o[n](e);return a}}function kl(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function wl(e,t){var n,r={},i={};for(n in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)n in e?r[n]=xl(e[n],t[n]):i[n]=t[n];return function(e){for(n in r)i[n]=r[n](e);return i}}function El(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,i=t.slice();return function(o){for(n=0;n<r;++n)i[n]=e[n]*(1-o)+t[n]*o;return i}}function xl(e,t){var n,r,i=typeof t;return null==t||"boolean"===i?dc(t):("number"===i?ws:"string"===i?(n=Js(t))?(t=n,fc):mc:t instanceof Js?fc:t instanceof Date?kl:(r=t,!ArrayBuffer.isView(r)||r instanceof DataView?Array.isArray(t)?bl:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?wl:ws:El))(e,t)}function Sl(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function Ol(e){return+e}var Rl=[0,1];function Tl(e){return e}function Al(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:(n=isNaN(t)?NaN:.5,function(){return n});var n}function Dl(e,t,n){var r=e[0],i=e[1],o=t[0],a=t[1];return i<r?(r=Al(i,r),o=n(a,o)):(r=Al(r,i),o=n(o,a)),function(e){return o(r(e))}}function Cl(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),a=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<r;)i[a]=Al(e[a],e[a+1]),o[a]=n(t[a],t[a+1]);return function(t){var n=gl(e,t,1,r)-1;return o[n](i[n](t))}}function Nl(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Il(){return function(){var e,t,n,r,i,o,a=Rl,s=Rl,c=xl,l=Tl;function u(){var e,t,n,c=Math.min(a.length,s.length);return l!==Tl&&(e=a[0],t=a[c-1],e>t&&(n=e,e=t,t=n),l=function(n){return Math.max(e,Math.min(t,n))}),r=c>2?Cl:Dl,i=o=null,d}function d(t){return isNaN(t=+t)?n:(i||(i=r(a.map(e),s,c)))(e(l(t)))}return d.invert=function(n){return l(t((o||(o=r(s,a.map(e),ws)))(n)))},d.domain=function(e){return arguments.length?(a=Array.from(e,Ol),u()):a.slice()},d.range=function(e){return arguments.length?(s=Array.from(e),u()):s.slice()},d.rangeRound=function(e){return s=Array.from(e),c=Sl,u()},d.clamp=function(e){return arguments.length?(l=!!e||Tl,u()):l!==Tl},d.interpolate=function(e){return arguments.length?(c=e,u()):c},d.unknown=function(e){return arguments.length?(n=e,d):n},function(n,r){return e=n,t=r,u()}}()(Tl,Tl)}function Ml(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}var Pl,Ll,ql,jl,Ul=n(6196),Hl=n(3085);function zl(e){var t=e.domain;return e.ticks=function(e){var n=t();return function(e,t,n){var r,i,o,a,s=-1;if(n=+n,(e=+e)==(t=+t)&&n>0)return[e];if((r=t<e)&&(i=e,e=t,t=i),0===(a=fl(e,t,n))||!isFinite(a))return[];if(a>0)for(e=Math.ceil(e/a),t=Math.floor(t/a),o=new Array(i=Math.ceil(t-e+1));++s<i;)o[s]=(e+s)*a;else for(a=-a,e=Math.ceil(e*a),t=Math.floor(t*a),o=new Array(i=Math.ceil(t-e+1));++s<i;)o[s]=(e+s)/a;return r&&o.reverse(),o}(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var r=t();return function(e,t,n,r){var i,o=pl(e,t,n);switch((r=(0,Ul.Z)(null==r?",f":r)).type){case"s":var a=Math.max(Math.abs(e),Math.abs(t));return null!=r.precision||isNaN(i=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor((0,Hl.Z)(t)/3)))-(0,Hl.Z)(Math.abs(e)))}(o,a))||(r.precision=i),ql(r,a);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,(0,Hl.Z)(t)-(0,Hl.Z)(e))+1}(o,Math.max(Math.abs(e),Math.abs(t))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=function(e){return Math.max(0,-(0,Hl.Z)(Math.abs(e)))}(o))||(r.precision=i-2*("%"===r.type))}return Ll(r)}(r[0],r[r.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var r,i,o=t(),a=0,s=o.length-1,c=o[a],l=o[s],u=10;for(l<c&&(i=c,c=l,l=i,i=a,a=s,s=i);u-- >0;){if((i=fl(c,l,n))===r)return o[a]=c,o[s]=l,t(o);if(i>0)c=Math.floor(c/i)*i,l=Math.ceil(l/i)*i;else{if(!(i<0))break;c=Math.ceil(c*i)/i,l=Math.floor(l*i)/i}r=i}return e},e}function Gl(){var e=Il();return e.copy=function(){return Nl(e,Gl())},Ml.apply(e,arguments),zl(e)}jl={thousands:",",grouping:[3],currency:["$",""]},Pl=(0,n(4463).Z)(jl),Ll=Pl.format,ql=Pl.formatPrefix;var Vl=n(2209),Fl=n(1829),Bl=(0,Fl.Z)((function(e){e.setDate(1),e.setHours(0,0,0,0)}),(function(e,t){e.setMonth(e.getMonth()+t)}),(function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())}),(function(e){return e.getMonth()}));const Wl=Bl;Bl.range;var Yl=n(2776),$l=n(9478),Zl=n(1222),Kl=(0,Fl.Z)((function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*Zl.Ym-e.getMinutes()*Zl.yB)}),(function(e,t){e.setTime(+e+t*Zl.Y2)}),(function(e,t){return(t-e)/Zl.Y2}),(function(e){return e.getHours()}));const Jl=Kl;Kl.range;var Xl=(0,Fl.Z)((function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*Zl.Ym)}),(function(e,t){e.setTime(+e+t*Zl.yB)}),(function(e,t){return(t-e)/Zl.yB}),(function(e){return e.getMinutes()}));const Ql=Xl;Xl.range;var eu=(0,Fl.Z)((function(e){e.setTime(e-e.getMilliseconds())}),(function(e,t){e.setTime(+e+t*Zl.Ym)}),(function(e,t){return(t-e)/Zl.Ym}),(function(e){return e.getUTCSeconds()}));const tu=eu;eu.range;var nu=(0,Fl.Z)((function(){}),(function(e,t){e.setTime(+e+t)}),(function(e,t){return t-e}));nu.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?(0,Fl.Z)((function(t){t.setTime(Math.floor(t/e)*e)}),(function(t,n){t.setTime(+t+n*e)}),(function(t,n){return(n-t)/e})):nu:null};const ru=nu;nu.range;var iu=n(317),ou=31536e6;function au(e){return new Date(e)}function su(e){return e instanceof Date?+e:+new Date(+e)}function cu(e,t,n,r,i,o,a,s,c){var l=Il(),u=l.invert,d=l.domain,h=c(".%L"),f=c(":%S"),p=c("%I:%M"),_=c("%I %p"),v=c("%a %d"),m=c("%b %d"),y=c("%B"),g=c("%Y"),b=[[a,1,1e3],[a,5,5e3],[a,15,15e3],[a,30,3e4],[o,1,6e4],[o,5,3e5],[o,15,9e5],[o,30,18e5],[i,1,36e5],[i,3,108e5],[i,6,216e5],[i,12,432e5],[r,1,864e5],[r,2,1728e5],[n,1,6048e5],[t,1,2592e6],[t,3,7776e6],[e,1,ou]];function k(s){return(a(s)<s?h:o(s)<s?f:i(s)<s?p:r(s)<s?_:t(s)<s?n(s)<s?v:m:e(s)<s?y:g)(s)}function w(t,n,r){if(null==t&&(t=10),"number"==typeof t){var i,o=Math.abs(r-n)/t,a=vl((function(e){return e[2]})).right(b,o);return a===b.length?(i=pl(n/ou,r/ou,t),t=e):a?(i=(a=b[o/b[a-1][2]<b[a][2]/o?a-1:a])[1],t=a[0]):(i=Math.max(pl(n,r,t),1),t=s),t.every(i)}return t}return l.invert=function(e){return new Date(u(e))},l.domain=function(e){return arguments.length?d(Array.from(e,su)):d().map(au)},l.ticks=function(e){var t,n=d(),r=n[0],i=n[n.length-1],o=i<r;return o&&(t=r,r=i,i=t),t=(t=w(e,r,i))?t.range(r,i+1):[],o?t.reverse():t},l.tickFormat=function(e,t){return null==t?k:c(t)},l.nice=function(e){var t=d();return(e=w(e,t[0],t[t.length-1]))?d(function(e,t){var n,r=0,i=(e=e.slice()).length-1,o=e[r],a=e[i];return a<o&&(n=r,r=i,i=n,n=o,o=a,a=n),e[r]=t.floor(o),e[i]=t.ceil(a),e}(t,e)):l},l.copy=function(){return Nl(l,cu(e,t,n,r,i,o,a,s,c))},l}function lu(){return Ml.apply(cu(Vl.Z,Wl,Yl.OM,$l.Z,Jl,Ql,tu,ru,iu.i$).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function uu(e){return"string"==typeof e?new Ga([[document.querySelector(e)]],[document.documentElement]):new Ga([[e]],za)}function du(e){return uu(Da(e).call(document.documentElement))}const hu=Math.PI,fu=2*hu,pu=1e-6,_u=fu-pu;function vu(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function mu(){return new vu}vu.prototype=mu.prototype={constructor:vu,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,r){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(e,t,n,r,i,o){this._+="C"+ +e+","+ +t+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(e,t,n,r,i){e=+e,t=+t,n=+n,r=+r,i=+i;var o=this._x1,a=this._y1,s=n-e,c=r-t,l=o-e,u=a-t,d=l*l+u*u;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(d>pu)if(Math.abs(u*s-c*l)>pu&&i){var h=n-o,f=r-a,p=s*s+c*c,_=h*h+f*f,v=Math.sqrt(p),m=Math.sqrt(d),y=i*Math.tan((hu-Math.acos((p+d-_)/(2*v*m)))/2),g=y/m,b=y/v;Math.abs(g-1)>pu&&(this._+="L"+(e+g*l)+","+(t+g*u)),this._+="A"+i+","+i+",0,0,"+ +(u*h>l*f)+","+(this._x1=e+b*s)+","+(this._y1=t+b*c)}else this._+="L"+(this._x1=e)+","+(this._y1=t)},arc:function(e,t,n,r,i,o){e=+e,t=+t,o=!!o;var a=(n=+n)*Math.cos(r),s=n*Math.sin(r),c=e+a,l=t+s,u=1^o,d=o?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+c+","+l:(Math.abs(this._x1-c)>pu||Math.abs(this._y1-l)>pu)&&(this._+="L"+c+","+l),n&&(d<0&&(d=d%fu+fu),d>_u?this._+="A"+n+","+n+",0,1,"+u+","+(e-a)+","+(t-s)+"A"+n+","+n+",0,1,"+u+","+(this._x1=c)+","+(this._y1=l):d>pu&&(this._+="A"+n+","+n+",0,"+ +(d>=hu)+","+u+","+(this._x1=e+n*Math.cos(i))+","+(this._y1=t+n*Math.sin(i))))},rect:function(e,t,n,r){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};const yu=mu;var gu=Array.prototype.slice;function bu(e){return function(){return e}}function ku(e){this._context=e}function wu(e){return new ku(e)}function Eu(e){return e[0]}function xu(e){return e[1]}function Su(e,t){var n=bu(!0),r=null,i=wu,o=null;function a(a){var s,c,l,u=(a=function(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}(a)).length,d=!1;for(null==r&&(o=i(l=yu())),s=0;s<=u;++s)!(s<u&&n(c=a[s],s,a))===d&&((d=!d)?o.lineStart():o.lineEnd()),d&&o.point(+e(c,s,a),+t(c,s,a));if(l)return o=null,l+""||null}return e="function"==typeof e?e:void 0===e?Eu:bu(e),t="function"==typeof t?t:void 0===t?xu:bu(t),a.x=function(t){return arguments.length?(e="function"==typeof t?t:bu(+t),a):e},a.y=function(e){return arguments.length?(t="function"==typeof e?e:bu(+e),a):t},a.defined=function(e){return arguments.length?(n="function"==typeof e?e:bu(!!e),a):n},a.curve=function(e){return arguments.length?(i=e,null!=r&&(o=i(r)),a):i},a.context=function(e){return arguments.length?(null==e?r=o=null:o=i(r=e),a):r},a}function Ou(e){return e.source}function Ru(e){return e.target}function Tu(e,t,n,r,i){e.moveTo(t,n),e.bezierCurveTo(t=(t+r)/2,n,t,i,r,i)}function Au(e){return e<0?-1:1}function Du(e,t,n){var r=e._x1-e._x0,i=t-e._x1,o=(e._y1-e._y0)/(r||i<0&&-0),a=(n-e._y1)/(i||r<0&&-0),s=(o*i+a*r)/(r+i);return(Au(o)+Au(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function Cu(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function Nu(e,t,n){var r=e._x0,i=e._y0,o=e._x1,a=e._y1,s=(o-r)/3;e._context.bezierCurveTo(r+s,i+s*t,o-s,a-s*n,o,a)}function Iu(e){this._context=e}function Mu(e){this._context=e}function Pu(e){return new Iu(e)}function Lu(e,t,n){this.k=e,this.x=t,this.y=n}ku.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}},Iu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Nu(this,this._t0,Cu(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Nu(this,Cu(this,n=Du(this,e,t)),n);break;default:Nu(this,this._t0,n=Du(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},(function(e){this._context=new Mu(e)}.prototype=Object.create(Iu.prototype)).point=function(e,t){Iu.prototype.point.call(this,t,e)},Mu.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,o){this._context.bezierCurveTo(t,e,r,n,o,i)}},Lu.prototype={constructor:Lu,scale:function(e){return 1===e?this:new Lu(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new Lu(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},new Lu(1,0,0),Lu.prototype;var qu=1.05,ju=.95;function Uu(e){return(Ql(e)<e?iu.i$("%H:%M:%S"):iu.i$("%H:%M"))(e)}function Hu(e,t,n){if(e.children){var r=(e.children.length-1)/2;t[0]=-r+n-.5,t[1]=r+n+.5,e.children.forEach((function(e,i){var o=Hu(e,Object.assign([],t),n+r-i);t[0]=o[0]<t[0]?o[0]:t[0],t[1]=o[1]>t[1]?o[1]:t[1]}))}return t}function zu(e){var t=Hu(e,[-.5,.5],0);return Math.round(t[1]-t[0])}function Gu(e,t,n){var r=140*t.height,i=40*zu(t);t=function(){var e=il,t=1,n=1,r=null;function i(i){var c=function(e){for(var t,n,r,i,o,a=new ll(e,0),s=[a];t=s.pop();)if(r=t._.children)for(t.children=new Array(o=r.length),i=o-1;i>=0;--i)s.push(n=t.children[i]=new ll(r[i],i)),n.parent=t;return(a.parent=new ll(null,0)).children=[a],a}(i);if(c.eachAfter(o),c.parent.m=-c.z,c.eachBefore(a),r)i.eachBefore(s);else{var l=i,u=i,d=i;i.eachBefore((function(e){e.x<l.x&&(l=e),e.x>u.x&&(u=e),e.depth>d.depth&&(d=e)}));var h=l===u?1:e(l,u)/2,f=h-l.x,p=t/(u.x+h+f),_=n/(d.depth||1);i.eachBefore((function(e){e.x=(e.x+f)*p,e.y=e.depth*_}))}return i}function o(t){var n=t.children,r=t.parent.children,i=t.i?r[t.i-1]:null;if(n){!function(e){for(var t,n=0,r=0,i=e.children,o=i.length;--o>=0;)(t=i[o]).z+=n,t.m+=n,n+=t.s+(r+=t.c)}(t);var o=(n[0].z+n[n.length-1].z)/2;i?(t.z=i.z+e(t._,i._),t.m=t.z-o):t.z=o}else i&&(t.z=i.z+e(t._,i._));t.parent.A=function(t,n,r){if(n){for(var i,o=t,a=t,s=n,c=o.parent.children[0],l=o.m,u=a.m,d=s.m,h=c.m;s=al(s),o=ol(o),s&&o;)c=ol(c),(a=al(a)).a=t,(i=s.z+d-o.z-l+e(s._,o._))>0&&(sl(cl(s,t,r),t,i),l+=i,u+=i),d+=s.m,l+=o.m,h+=c.m,u+=a.m;s&&!al(a)&&(a.t=s,a.m+=d-u),o&&!ol(c)&&(c.t=o,c.m+=l-h,r=t)}return r}(t,i,t.parent.A||r[0])}function a(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function s(e){e.x*=t,e.y=e.depth*n}return i.separation=function(t){return arguments.length?(e=t,i):e},i.size=function(e){return arguments.length?(r=!1,t=+e[0],n=+e[1],i):r?null:[t,n]},i.nodeSize=function(e){return arguments.length?(r=!0,t=+e[0],n=+e[1],i):r?[t,n]:null},i}().size([i,r])(t);var o=du("svg");o.attr("width",r+60+60).attr("height",i+5+15);var a=o.append("g").attr("transform","translate(60,5)"),s=function(e){var t=Ou,n=Ru,r=Eu,i=xu,o=null;function a(){var a,s=gu.call(arguments),c=t.apply(this,s),l=n.apply(this,s);if(o||(o=a=yu()),e(o,+r.apply(this,(s[0]=c,s)),+i.apply(this,s),+r.apply(this,(s[0]=l,s)),+i.apply(this,s)),a)return o=null,a+""||null}return a.source=function(e){return arguments.length?(t=e,a):t},a.target=function(e){return arguments.length?(n=e,a):n},a.x=function(e){return arguments.length?(r="function"==typeof e?e:bu(+e),a):r},a.y=function(e){return arguments.length?(i="function"==typeof e?e:bu(+e),a):i},a.context=function(e){return arguments.length?(o=null==e?null:e,a):o},a}(Tu).x((function(e){return e.y})).y((function(e){return e.x})),c=(a.selectAll(".link").data(t.links()).join("path").attr("class","link").attr("id",(function(e){return"textPath"+e.target.data.mac()})).attr("d",s),a.selectAll(".node").data(t.descendants()).join("g").attr("class",(function(e){return"node"+(e.children?" node--internal":" node--leaf")+(e.data instanceof ho?" node--router":1==e.data.layer()?" node--br":"")})).attr("transform",(function(e){return"translate("+e.y+","+e.x+")"})));return c.append("circle").attr("class","esp32-mesh-node-circle").attr("r",10).on("click",(function(t,n){var r=n.data;if(r instanceof mo){var i=r.mac().replace(/:/g,""),o=e.querySelector("#esp32-mesh-dev-net-"+i);o&&o.dispatchEvent(new Event("click"))}})).append("title").text((function(e){return e.data.mac()+(e.data instanceof ho?" (Router)":1==e.data.layer()?" (BR)":"")})),c.append("text").attr("dy",".35em").attr("y",20).style("text-anchor","middle").text((function(e){return e.data.mac()})),a.selectAll(".link-rssi").data(t.links()).join("text").attr("x",(function(e){return"".concat((e.target.y-e.source.y)/2)})).attr("dy","5px").append("textPath").attr("xlink:href",(function(e){return"#textPath"+e.target.data.mac()})).style("text-anchor","middle").text((function(e){return e.target.data.rssi()})),o.node()}var Vu=n(2731);var Fu=function(e){l()(a,e);var t,n,i=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=f()(t);if(n){var i=f()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return d()(this,e)});function a(e){var t;return o()(this,a),(t=i.call(this))._el=t._create_element(),t._modal=null,t._model=e,t._model.on(Xi,(function(e){return t.render_devices(e)})).on(Qi,(function(e){return t.render_net(e)})).on(eo,(function(e){return t.render_messages(e.data,e.from,e.input,e.message)})).on(to,(function(){return t.render_br_clients()})).on(ro,(function(e){return t.enable(e)})).on(io,(function(e){return t.error(e)})).on(no,(function(){return t.render_router()})),t}return s()(a,[{key:"enable",value:function(e){this._el.querySelector("#esp32-mesh-id").disabled=Boolean(e),this._el.querySelector("#esp32-mesh-compare-type").disabled=Boolean(e),this._el.querySelector("#esp32-mesh-open-window").disabled=Boolean(!e),e?this._create_modal():this._modal.outerHTML=""}},{key:"element",value:function(){return this._el}},{key:"render_devices",value:function(){var e=this,t=this._modal.querySelector("#esp32-mesh-device-body");t.innerHTML="",this._model._system.device().forEach((function(n){var r=document.createElement("tr");r.innerHTML="<td class=esp32-mesh-mac-device>".concat(n.mac(),"</td>\n                                <td>").concat(n.name(),"</td>\n                                <td>").concat(n.layer(),"</td>\n                                <td>").concat(n.parent_string(),"</td>\n                                <td>").concat(n.id(),"</td>\n                                <td>").concat(n.version(),"</td>\n                                <td>").concat(n.ch_config(),"</td>\n                                <td>").concat(n.ch_conn(),"</td>\n                                <td>").concat(n.rssi(),"</td>\n                                <td>").concat(n.mac_ap(),"</td>\n                                <td>").concat(n.is_root(),"</td>");var i=document.createElement("td");Object.keys(oe).forEach((function(t){var r=document.createElement("button");r.textContent=t.slice(0,2),r.onclick=function(r){e._model._send_node_command(n.mac(),oe[t],null!==n.version()?n.version():0)},r.title=t,i.appendChild(r)})),r.appendChild(i),t.appendChild(r)})),t.querySelectorAll(".esp32-mesh-mac-device").forEach((function(t){t.onclick=function(n){e._modal.querySelector("#esp32-mesh-comm-input").mac(t.textContent)}}))}},{key:"render_net",value:function(){var e=this;function t(e,t){var n=document.createElement("td");return n.rowSpan=t,n.textContent=e,n}var n=this._modal.querySelector("#esp32-mesh-net-list-body");n.innerHTML="",this._model._system.net().forEach((function(r){var i=document.createElement("tr"),o=r.border_router().length;i.appendChild(t(r.id(),o)),i.appendChild(t(r.name(),o)),i.appendChild(t(r.number_devices(),o)),i.appendChild(t(r.last_layer(),o)),r.border_router().forEach((function(t,r){var o=0==r?i:document.createElement("tr"),a=document.createElement("td");a.textContent="".concat(t.ip(),":").concat(t.port()),o.appendChild(a);var s=document.createElement("td");s.textContent=t.device()?t.device().mac():null,o.appendChild(s);var c=document.createElement("td");Object.keys(ne).forEach((function(n){var r=document.createElement("button");r.textContent=n.slice(0,2),r.onclick=function(r){e._model._send_br_command(t.to(),ne[n])},r.title=n,c.appendChild(r)})),o.appendChild(c),n.appendChild(o)}))}));var r=this._modal.querySelector("#esp32-mesh-content-tabs");this._model._system.net().forEach((function(e){var t=!1;if(r.querySelectorAll(".esp32-mesh-net-tab").forEach((function(n){n.dataset.net!=e.id()||(t=!0)})),!t){var n=document.createElement("button");n.setAttribute("slot","title"),n.setAttribute("class","esp32-mesh-net-tab"),n.textContent=e.id(),r.appendChild(n);var i=document.createElement("section");i.setAttribute("class","esp32-mesh-content-panel esp32-mesh-net-tab esp32-mesh-net-tab-content"),i.setAttribute("data-net",""+e.id()),r.appendChild(i)}})),r.reprocess(),this._draw_net()}},{key:"render_messages",value:function(e,t,n,i){var o=e.data,a=document.createElement("tr"),s=this._format_data_field(e.data);if(a.innerHTML="<td>".concat(de.uc.format(i.time,r.app.configure().time_format,r.app.configure().time_precision),"</td>\n                            <td>>></td>\n                            <td>").concat(o.br_version,"</td>\n                            <td>").concat(o.from,"</td>\n                            <td>").concat(o.br_size,"</td>\n                            <td>").concat(o.node_version,"</td>\n                            <td>").concat(o.message_type_name,"</td>\n                            <td>").concat(o.node_size,"</td>\n                            <td>").concat(s,"</td>"),this._modal.querySelector("#esp32-mesh-messages-body").appendChild(a),this._modal.querySelector("#esp32-mesh-auto-scroll-messages").checked){var c=this._modal.querySelector("#esp32-mesh-table-messages-container");c.scrollTop=c.scrollHeight}}},{key:"render_br_clients",value:function(){var e=this._modal.querySelector("#esp32-mesh-comm-clients-select"),t=(0,ae.Jc)(e);e.innerHTML="",this._model._br_clients.forEach((function(n){var r=document.createElement("option");r.value=JSON.stringify({addr:n.addr(),port:n.port()}),r.textContent="".concat(n.addr(),":").concat(n.port()),t&&t.value==r.value&&(r.selected=!0),e.appendChild(r)}));var n=0==this._model._br_clients.length;this._modal.querySelectorAll(".esp32-mesh-comm-br-raw-op").forEach((function(e){e.disabled=n}))}},{key:"render_router",value:function(){var e=this._modal.querySelector("#esp32-mesh-router-table-tbody");e.innerHTML="",this._model._system.wifi_router().forEach((function(t){e.innerHTML+="<tr><td>".concat(t.mac(),"</td><td>").concat(t.name(),"</td></tr>")}))}},{key:"error",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this._modal.querySelector("#esp32-mesh-comm-error").textContent=e}},{key:"_draw_net",value:function(){var e=this;this._modal.querySelectorAll(".esp32-mesh-net-tab-content").forEach((function(t){var n=e._model._system.net(t.dataset.net);n?(e._draw_tree_net(n,t),e._draw_devices_net(n,t)):t.textContent="Mesh net ".concat(t.dataset.net," not found")}))}},{key:"_draw_tree_net",value:function(e,t){var n=t.querySelector(".esp32-mesh-net-tree-content");n||((n=document.createElement("div")).setAttribute("class","esp32-mesh-net-tree-content"),t.appendChild(n)),n.innerHTML="";var r=[];e.border_router().forEach((function(e){var i=e.router()?e.router():e.device(),o=!0;if(i instanceof ho&&(r.find((function(e){return e.mac()==i.mac()}))?o=!1:r.push(i)),o){var a=Xc(i,(function(e){return e.children().length?e.children():void 0}));n.appendChild(Gu(t,a))}}))}},{key:"_draw_devices_net",value:function(e,t){var n=this,r=t.querySelector(".esp32-mesh-net-dev-content");if(!r){(r=document.createElement("div")).setAttribute("class","esp32-mesh-net-dev-content");var i=document.createElement("div");i.setAttribute("class","esp32-mesh-net-dev-list"),r.appendChild(i);var o=document.createElement("div");o.setAttribute("class","esp32-mesh-net-dev-info"),r.appendChild(o),t.appendChild(r)}var a=r.querySelector(".esp32-mesh-net-dev-list"),s=r.querySelector(".esp32-mesh-net-dev-info"),c="esp32-mesh-dev-net-";e.devices().forEach((function(t,i){var o=t.mac().replace(/:/g,""),l=r.querySelector("#"+c+o);if(!l){(l=document.createElement("div")).setAttribute("id",c+o),l.setAttribute("class","esp32-mesh-dev-net-title");var u=document.createElement("span");u.textContent=t.mac(),l.appendChild(u);var d=document.createElement("span");Object.keys(oe).forEach((function(e){var r=document.createElement("button");r.textContent=e.slice(0,2),r.addEventListener("click",(function(r){n._model._send_node_command(t.mac(),oe[e],null!==t.version()?t.version():0)}),!1),r.title=e,d.appendChild(r)})),l.onclick=function(e){a.querySelectorAll(".esp32-mesh-dev-net-title").forEach((function(e){e.classList.remove("esp32-mesh-dev-net-title-selected")})),l.classList.add("esp32-mesh-dev-net-title-selected"),s.dataset.dev!=t.mac()&&function(e,t){t.innerHTML="",t.dataset.dev=e.mac();var n=document.createElement("div");n.setAttribute("class","esp32-mesh-dev-info"),["Version","Name","Layer","Parent","Channel","RSSI","MAC_AP","Is_root","Children","Children_Table"].forEach((function(e){var t=document.createElement("div");t.setAttribute("class","esp32-mesh-dev-info-line");var r=document.createElement("span");r.setAttribute("class","esp32-mesh-dev-info-head"),r.textContent=e,t.appendChild(r);var i=document.createElement("span");i.setAttribute("class","esp32-mesh-dev-info-content esp32-mesh-dev-info-content-".concat(e)),"Channel"==e&&(i.title="Configure/Connected"),t.appendChild(i),n.appendChild(t)})),t.appendChild(n)}(t,s),n._update_dev_net_data(s,t)},n._update_dev_net_data(s,t),l.appendChild(d),a.appendChild(l)}e.unconnected().find((function(e){return e.mac()==t.mac()}))?l.classList.add("esp32-mesh-dev-net-title-unconnected"):l.classList.remove("esp32-mesh-dev-net-title-unconnected"),n._update_dev_net_data(s,t)}))}},{key:"_update_dev_net_data",value:function(e,t){e&&e.dataset.dev==t.mac()&&(e.querySelector(".esp32-mesh-dev-info-content-Version").textContent=t.version(),e.querySelector(".esp32-mesh-dev-info-content-Name").textContent=t.name(),e.querySelector(".esp32-mesh-dev-info-content-Layer").textContent=t.layer(),e.querySelector(".esp32-mesh-dev-info-content-Parent").textContent=t.parent_string(),e.querySelector(".esp32-mesh-dev-info-content-Channel").textContent="".concat(t.ch_config(),"/").concat(t.ch_conn()),e.querySelector(".esp32-mesh-dev-info-content-MAC_AP").textContent=t.mac_ap(),e.querySelector(".esp32-mesh-dev-info-content-Is_root").textContent=t.is_root(),e.querySelector(".esp32-mesh-dev-info-content-RSSI").textContent=t.rssi_arr()?t.rssi_arr().slice(-5):t.rssi_arr(),e.querySelector(".esp32-mesh-dev-info-content-RSSI").title=t.rssi_arr(),e.querySelector(".esp32-mesh-dev-info-content-Children").textContent=t.children().reduce((function(e,n,r){var i=e+n.mac();return r!=t.children().length-1&&(i+=", "),i}),""),e.querySelector(".esp32-mesh-dev-info-content-Children_Table").textContent=t.children_table().reduce((function(e,n,r){var i=e+n.mac();return r!=t.children_table().length-1&&(i+=", "),i}),""),t.rssi_arr()&&t.rssi_arr().length)&&(e.querySelector("#esp32-rssi-graph"+t.mac().replace(/:/g,""))||e.appendChild(function(e){var t=e.rssi_arr().slice(-20).length,n=Gl().domain([0,t-1]).range([0,390]),r=Gl().domain([yo(e.rssi_arr())*qu,go(e.rssi_arr())*ju]).range([180,0]),i=(Su().x((function(e,t){return n(t)})).y((function(e){return r(e)})).curve(Pu),du("svg").attr("id","esp32-rssi-graph"+e.mac().replace(/:/g,""))),o=i.attr("width",450).attr("class","esp32-rssi-graph").attr("height",220).append("g").attr("transform","translate(40,20)");return o.append("g").attr("class","x axis").call(Ao(n)),o.append("g").attr("class","y axis").call(Do(r)),i.node()}(t)),function(e,t){var n=e.rssi_arr().slice(-20),r=n.length,i=uu("#esp32-rssi-graph"+e.mac().replace(/:/g,"")).select("g"),o=Gl().domain([0,r-1]).range([0,390]),a=Gl().domain([yo(e.rssi_arr())*qu,go(e.rssi_arr())*ju]).range([180,0]),s=Su().x((function(e,t){return o(t)})).y((function(e){return a(e)})).curve(Pu);i.select("path").datum(n).attr("class","line").transition().attr("d",s).transition().delay(1e3),i.selectAll(".dot").data(n).join("circle").attr("class","dot").on("mouseover",(function(e,t){var n=i.selectAll(".dot").nodes().indexOf(this);i.append("svg:text").attr("id","t"+t+"-"+n).attr("x",(function(){return o(n)})).attr("y",(function(){return a(t)-5})).text((function(){return t}))})).on("mouseout",(function(e,t){uu("#t"+t+"-"+i.selectAll(".dot").nodes().indexOf(this)).remove()})).transition().attr("cx",(function(e,t){return o(t)})).attr("cy",(function(e){return a(e)})).attr("r",5),i.select(".x.axis").transition().call(Ao(o)),i.select(".y.axis").transition().call(Do(a))}(t),this._make_parent_rssi_graph(e,t))}},{key:"_make_parent_rssi_graph",value:function(e,t){var n=e.querySelector(".esp32-mesh-dev-rssi-parent-select");n||((n=document.createElement("my-tabs")).setAttribute("class","esp32-mesh-dev-rssi-parent-select"),e.appendChild(n)),Object.keys(t.rssi_object()).forEach((function(e,r){if(t.rssi_object()[e]&&t.rssi_object()[e].length>0){var i=e.replace(/:/g,""),o=t.mac().replace(/:/g,""),a=n.querySelector("#esp32-mesh-dev-parent-rssi-info"+i+"-"+o);if(!a){var s=document.createElement("button");s.textContent=e,s.setAttribute("slot","title"),s.setAttribute("class","esp32-mesh-dev-rssi-parent-title"),n.appendChild(s),(a=document.createElement("section")).setAttribute("data-parent",e),a.setAttribute("id","esp32-mesh-dev-parent-rssi-info"+i+"-"+o),n.appendChild(a),e==t.parent_string()&&(n.selected=r),a.appendChild(function(e,t){var n=e.rssi_object()[t].slice(-20),r=t.replace(/:/g,""),i=(n.length,lu().domain([go(e.rssi_object()[t],(function(e){return e.time})),yo(e.rssi_object()[t],(function(e){return e.time}))]).range([0,390]).nice()),o=Gl().domain([yo(e.rssi_object()[t],(function(e){return e.rssi}))*qu,go(e.rssi_object()[t],(function(e){return e.rssi}))*ju]).range([180,0]),a=(Su().x((function(e){return i(e.time)})).y((function(e){return o(e.rssi)})).curve(Pu),du("svg").attr("id","esp32-rssi-graph-"+e.mac().replace(/:/g,"")+"-"+r)),s=a.attr("width",450).attr("class","esp32-rssi-graph").attr("height",220).append("g").attr("transform","translate(40,20)");return s.append("g").attr("class","x axis").call(Ao(i).ticks(5).tickFormat(Uu)),s.append("g").attr("class","y axis").call(Do(o)),a.node()}(t,e))}!function(e,t,n){var r=e.rssi_object()[t].slice(-20),i=t.replace(/:/g,""),o=(r.length,uu("#esp32-rssi-graph-"+e.mac().replace(/:/g,"")+"-"+i).select("g")),a=lu().domain([go(e.rssi_object()[t],(function(e){return e.time})),yo(e.rssi_object()[t],(function(e){return e.time}))]).range([0,390]).nice(),s=Gl().domain([yo(e.rssi_object()[t],(function(e){return e.rssi}))*qu,go(e.rssi_object()[t],(function(e){return e.rssi}))*ju]).range([180,0]),c=Su().x((function(e){return a(e.time)})).y((function(e){return s(e.rssi)})).curve(Pu);o.select("path").datum(r).attr("class","line").transition().attr("d",c).transition().delay(1e3),o.selectAll(".dot").data(r).join("circle").attr("class","dot").on("mouseover",(function(e,t,n){o.append("svg:text").attr("id","t"+i+t.rssi+"-"+n).attr("x",(function(){return a(t.time)})).attr("y",(function(){return s(t.rssi)-8})).attr("text-anchor","middle").text((function(){return"".concat(t.rssi,"(").concat(Uu(t.time),")")}))})).on("mouseout",(function(e,t,n){uu("#t"+i+t.rssi+"-"+n).remove()})).transition().attr("cx",(function(e){return a(e.time)})).attr("cy",(function(e){return s(e.rssi)})).attr("r",5),o.select(".x.axis").transition().call(Ao(a).ticks(5).tickFormat(Uu)),o.select(".y.axis").transition().call(Do(s))}(t,e)}})),n.reprocess()}},{key:"auto_message",value:function(){return this._el.querySelector("#esp32-mesh-auto-send-message").checked}},{key:"_create_element",value:function(e){var t=this,n=document.createElement("div");return n.innerHTML="<style>".concat(Ii.Z.toString(),"</style>\n                        <label for=esp32-mesh-id class=script-label>ID:</label>\n                        <select id=esp32-mesh-id class=script-input-id-select></select><br>\n                        <input type=checkbox id=esp32-mesh-compare-type checked>\n                        <label for=esp32-mesh-compare-type class=script-label>ID match exactly</label><br>\n                        <input type=checkbox id=esp32-mesh-auto-send-message checked>\n                        <label for=esp32-mesh-auto-send-message class=script-label>Auto-send messages</label><br>\n                        <button id=esp32-mesh-open-window disabled=true>Open window</button><br>"),n.querySelector("#esp32-mesh-open-window").onclick=function(e){t._open_window(e)},n}},{key:"_create_modal",value:function(){var e=this;this._modal=document.createElement("my-modal"),this._modal.setAttribute("id","esp32-mesh-modal"),this._modal.innerHTML="<style>".concat(Vu.Z.toString(),"</style>\n                    <div id=esp32-mesh-modal-container>\n                        <h3 id=esp32-mesh-modal-title>ESP32 Mesh</h3>\n                            <div id=esp32-mesh-content>\n                                <my-tabs id=esp32-mesh-content-tabs>\n                                    <button slot=title>Overview</button>\n                                    <section class=esp32-mesh-content-panel>\n                                        <table class=esp32-mesh-script-table>\n                                            <tr><th>Router MAC</th><th>Name</th></tr>\n                                            <tbody id=esp32-mesh-router-table-tbody>\n                                                <tr><td colspan=20>No router info</td></tr>\n                                            </tbody>\n                                        </table>\n                                        <table class=esp32-mesh-script-table>\n                                            <tr>\n                                                <th>NET ID</th>\n                                                <th>Name</th>\n                                                <th>Num devs</th>\n                                                <th>Layers</th>\n                                                <th>Addr</th>\n                                                <th>Device</th>\n                                                <th>Comm</th>\n                                            </tr>\n                                            <tbody id=esp32-mesh-net-list-body><tr><td colspan=20>No NET ID</td></tr></tbody>\n                                        </table>\n                                        <div><b>Device List</b></div>\n                                        <table class=esp32-mesh-script-table>\n                                            <tr>\n                                                <th>MAC</th>\n                                                <th>Name</th>\n                                                <th>Layer</th>\n                                                <th>Parent</th>\n                                                <th>Mesh ID</th>\n                                                <th>Version</th>\n                                                <th>Ch config</th>\n                                                <th>Ch conn</th>\n                                                <th>RSSI</th>\n                                                <th>MAC AP</th>\n                                                <th>Is root</th>\n                                                <th>Comm</th>\n                                            </tr>\n                                            <tbody id=esp32-mesh-device-body><tr><td colspan=20>No device listed</td></tr><tbody>\n                                        </table>\n                                    </section>\n                                <button slot=title>Messages</button>\n                                <section class=esp32-mesh-content-panel>    \n                                    <button id=esp32-mesh-clear-messages>Clear</button>\n                                    <input type=checkbox id=esp32-mesh-auto-scroll-messages checked>\n                                    <label for=esp32-mesh-auto-scroll-messages>Auto-scroll</label>\n                                    <div id=esp32-mesh-table-messages-container>\n                                        <table id=esp32-mesh-messages-table class=esp32-mesh-script-table>\n                                            <thead id=esp32-mesh-messages-head>\n                                                <tr><th colspan=2>#</th><th colspan=3>BR</th><th colspan=4>Node</th></tr>\n                                                <tr>\n                                                    <th>Time</th><th>Dir</th>\n                                                    <th>Ver</th><th>Addr</th><th>Size</th>\n                                                    <th>Ver</th><th>Type</th><th>Size</th><th>Data</th>\n                                                </tr>\n                                            </thead>\n                                            <tbody id=esp32-mesh-messages-body><tbody>\n                                        </table>\n                                    </div>\n                                </section>\n                                </my-tabs>\n                            </div>\n                            <div id=esp32-mesh-comm-error></div>\n                            <esp32-br-input id=esp32-mesh-comm-input>\n                                <div id=esp32-mesh-comm-input-br-container>\n                                    <select id=esp32-mesh-comm-clients-select></select>\n                                    <div>BR Comm</div>\n                                    <div id=esp32-mesh-comm-br-raw></div>\n                                </div>\n                            </esp32-br-input>\n                        </div>"),this._modal.querySelector("#esp32-mesh-comm-input").addEventListener("send_click",(function(t){var n=e._get_client_selected();n?e.emit(oo,{data:new Uint8Array(t.target.value),to:n}):e.error("Error selecting BR")})),this._modal.querySelector("#esp32-mesh-clear-messages").onclick=function(t){e._modal.querySelector("#esp32-mesh-messages-body").innerHTML=""},this._set_br_commands(),document.body.appendChild(this._modal)}},{key:"selected_id",value:function(){return(0,ae.Jc)(this._el.querySelector("#esp32-mesh-id"))}},{key:"compare_types_check",value:function(){return this._el.querySelector("#esp32-mesh-compare-type").checked}},{key:"_open_window",value:function(e){this._modal.show=!0}},{key:"_format_command_route_table",value:function(e){var t="ROUTE_TABLE layer:".concat(e.layer," parent:").concat(e.parent," children:[");return e.children.forEach((function(n,r){t+=n,r!=e.children.length-1&&(t+=", ")})),t+"]"}},{key:"_format_command_config",value:function(e){return"CONFIG id:".concat(e.mesh_id," mac_ap:").concat(e.mac_ap," is_root:").concat(e.is_root," ch_config:").concat(e.ch_config," ch_conn:").concat(e.ch_conn)}},{key:"_format_command_status",value:function(e){return"STATUS rssi:".concat(e.rssi)}},{key:"_format_command_full_config",value:function(e){var t="FULL_CONFIG id:".concat(e.mesh_id," mac_ap:").concat(e.mac_ap," is_root:").concat(e.is_root," ch_config:").concat(e.ch_config," ch_conn:").concat(e.ch_conn," rssi:").concat(e.rssi," layer:").concat(e.layer," parent:").concat(e.parent," children:[");return e.children.forEach((function(n,r){t+=n,r!=e.children.length-1&&(t+=", ")})),t+"]"}},{key:"_format_command_info",value:function(e){return"".concat(e.command_type_name," ").concat(e.info)}},{key:"_format_command",value:function(e){switch(+e.command_type){case oe.ROUTE_TABLE:return this._format_command_route_table(e);case oe.CONFIG:return this._format_command_config(e);case oe.STATUS:return this._format_command_status(e);case oe.FULL_CONFIG:return this._format_command_full_config(e);case ao:return this._format_command_info(e);default:console.warn("Node command not defined ["+ +e.command_type+"]")}return""}},{key:"_format_data",value:function(e){return e.data}},{key:"_format_data_field",value:function(e){switch(+e.message_type){case ie.DATA:return this._format_data(e);case ie.COMMAND:return this._format_command(e)}return""}},{key:"_get_client_selected",value:function(){var e=(0,ae.Jc)(this._modal.querySelector("#esp32-mesh-comm-clients-select"));return!!e&&JSON.parse(e.value)}},{key:"_set_br_commands",value:function(){var e=this,t=this._modal.querySelector("#esp32-mesh-comm-br-raw");Object.keys(ne).forEach((function(n){var r=document.createElement("button");r.setAttribute("class","esp32-mesh-comm-br-raw-op"),r.textContent=n.slice(0,2),r.onclick=function(t){var r=e._get_client_selected();r&&e._model._send_br_command(r,ne[n])},r.title=n,t.appendChild(r)}))}}]),a}(ue.I),Bu=n(8),Wu=n.n(Bu),Yu=function(){function e(){o()(this,e)}return s()(e,null,[{key:"split",value:function(e,t){if(!(e instanceof Array&&(t instanceof Array||t instanceof Uint8Array)))return{error:!0,message_err:'"data_struct" must be a array'};var n={error:!1},r=[];if(e.forEach((function(e){if("object"==Wu()(e)){if(!e.hasOwnProperty("data_type"))return void(n={error:!0,message_err:"Invalid data_struct"});e.hasOwnProperty("size")||(e.size=1),r.push(e)}else r.push({data_type:e,size:1})})),1==n.error)return n;var i=0;if(r.forEach((function(e){i+=j.O.num_bytes(e.data_type)*e.size})),i>t.length)return{error:!0,message_err:"Data size too small"};var o=new j.O,a=[];return r.forEach((function(e){o.raw(t.slice(0,j.O.num_bytes(e.data_type)*e.size)).length?(a.push(o.raw()),t=t.slice(j.O.num_bytes(e.data_type)*e.size)):n={error:!0,message_err:"Invalid data"}})),1==n.error?n:{data:a,rest:t,data_struct:r,error:!1}}},{key:"make",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=e.split(t,n);if(1==i.error)return i;var o=r,a=new j.O,s={error:!1};return i.data_struct.forEach((function(e,t){var n=t,r={};e.hasOwnProperty("name")&&(n=e.name),e.hasOwnProperty("opt")&&(r=e.opt),a.raw(i.data[t]),o[n]=a.to(e.data_type,r)})),1==s.error?s:{data:o,rest:i.rest,error:!1}}}]),e}();function $u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";e.error=!0,e.message_err=t}var Zu=function(){function e(){o()(this,e)}return s()(e,null,[{key:"parser",value:function(e){var t=Yu.make([{data_type:U.Nm.uint8.value,name:qi}],e);if(1==t.error)return t;switch(+t.data.br_version){case 0:return Ku.parser(t);default:$u(t,"Wrong BR version ["+t.br_version+"]")}return t.error=!0,[t]}},{key:"make_message",value:function(t,n){switch(n){case ne.CONFIG:return e.config(t);case ne.STATUS:return e.status(t);case ne.ROUTE_TABLE:return e.route_table(t);case ne.FULL_CONFIG:return e.full_config(t);case ne.REBOOT:return e.reboot(t);case ne.WAIVE_ROOT:return e.waive_root(t)}}},{key:"route_table",value:function(e){return Ku.route_table()}},{key:"config",value:function(e){return Ku.config()}},{key:"status",value:function(e){return Ku.status()}},{key:"full_config",value:function(e){return Ku.full_config()}},{key:"reboot",value:function(e){return Ku.reboot()}},{key:"waive_root",value:function(e){return Ku.waive_root()}}]),e}(),Ku=function(){function e(){o()(this,e)}return s()(e,null,[{key:"parser",value:function(e){var t,n=[];e:for(;;){if(1==(t=Yu.make([{data_type:U.Nm.hex.value,name:ji,size:6,opt:{aggregate:1,sep:":"}},{data_type:U.Nm.uint16be.value,name:Ui},{data_type:U.Nm.uint8.value,name:Hi}],e.rest,e.data)).error){n.push(t);break}if(+t.data.br_size>t.rest.length+1){t.error=!0,t.message_err="Payload too small",console.error(t),n.push(t);break}var r=void 0;switch(+t.data.node_version){case 0:r=Xu.parser(t);break;default:$u(t,"Wrong node version ["+t.data.node_version+"]");break e}if(n.push(r),1==r.error)break;if(0==r.rest.length)break;e={data:{br_version:e.data.br_version},rest:r.rest.slice(1)}}return n}},{key:"route_table",value:function(){return[0,1,1,0,0]}},{key:"config",value:function(){return[0,1,1,0,1]}},{key:"status",value:function(){return[0,1,1,0,2]}},{key:"full_config",value:function(){return[0,1,1,0,3]}},{key:"reboot",value:function(){return[0,1,1,0,4]}},{key:"waive_root",value:function(){return[0,1,1,0,5]}}]),e}(),Ju=function(){function e(){o()(this,e)}return s()(e,null,[{key:"make_message",value:function(t,n,r){switch(n){case oe.CONFIG:return e.config(t,r);case oe.STATUS:return e.status(t,r);case oe.ROUTE_TABLE:return e.route_table(t,r);case oe.FULL_CONFIG:return e.full_config(t,r);case oe.REBOOT:return e.reboot(t,r)}}},{key:"_to_data_array",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=new j.O;return r.from("".concat(t).concat(e).concat(n).replace(/[^0-9a-fA-F]/g,""),U.Nm.hex.value),r.raw()}},{key:"config",value:function(e,t){return Xu.config(t)}},{key:"status",value:function(e,t){return Xu.status(t)}},{key:"full_config",value:function(e,t){return Xu.full_config(t)}},{key:"route_table",value:function(e,t){return Xu.route_table(t)}},{key:"reboot",value:function(e,t){return Xu.reboot(t)}}]),e}(),Xu=function(){function e(){o()(this,e)}return s()(e,null,[{key:"parser",value:function(t){var n=Yu.make([{data_type:U.Nm.uint8.value,name:"message_type"},{data_type:U.Nm.uint16be.value,name:zi}],t.rest,t.data);if(1==n.error)return n;switch(+n.data.message_type){case ie.DATA:return n.data.message_type_name="DATA",e._parse_node_data(n);case ie.COMMAND:return n.data.message_type_name="COMMAND",e._parse_node_command(n);default:$u(n,"Message type node defined ["+n.data.message_type+"]")}return n}},{key:"config",value:function(e){return Ju._to_data_array(e,"0000 0b00","0001 0100 01")}},{key:"status",value:function(e){return Ju._to_data_array(e,"0000 0b00","0001 0100 02")}},{key:"full_config",value:function(e){return Ju._to_data_array(e,"0000 0b00","0001 0100 03")}},{key:"route_table",value:function(e){return Ju._to_data_array(e,"0000 0b00","0001 0100 00")}},{key:"reboot",value:function(e){return Ju._to_data_array(e,"0000 0b00","0001 0100 04")}},{key:"_parse_router_table",value:function(e){var t=Yu.make([{data_type:U.Nm.uint8.value,name:Gi},{data_type:U.Nm.hex.value,name:Vi,size:6,opt:{aggregate:1,sep:":"}}],e.rest,e.data);if((+t.data.node_size-8)%6!=0)return $u(t,"Message command router_table size error ["+e.data.node_size+"]"),t;var n=(+t.data.node_size-8)/6,r=new j.O;t.data.children=[];for(var i=0;i<n;i++)r.raw(t.rest.slice(0,6)),t.data.children.push(r.hex({aggregate:1,sep:":"})),t.rest=t.rest.slice(6);return t}},{key:"_parse_config",value:function(e){var t=Yu.make([{data_type:U.Nm.hex.value,name:Fi,size:6,opt:{aggregate:1,sep:":"}},{data_type:U.Nm.hex.value,name:Bi,size:6,opt:{aggregate:1,sep:":"}},{data_type:U.Nm.uint8.value,name:Zi},{data_type:U.Nm.uint8.value,name:"channel"}],e.rest,e.data);return 1==t.error||(t.data.ch_conn=(240&t.data.channel)>>4,t.data.ch_config=15&t.data.channel),t}},{key:"_parse_status",value:function(e){return Yu.make([{data_type:U.Nm.int8.value,name:Ki}],e.rest,e.data)}},{key:"_parse_full_config",value:function(e){var t=Yu.make([{data_type:U.Nm.hex.value,name:Fi,size:6,opt:{aggregate:1,sep:":"}},{data_type:U.Nm.hex.value,name:Bi,size:6,opt:{aggregate:1,sep:":"}},{data_type:U.Nm.uint8.value,name:Zi},{data_type:U.Nm.uint8.value,name:"channel"},{data_type:U.Nm.int8.value,name:Ki},{data_type:U.Nm.uint8.value,name:Gi},{data_type:U.Nm.hex.value,name:Vi,size:6,opt:{aggregate:1,sep:":"}}],e.rest,e.data);if(1==t.error)return t;if(t.data.ch_conn=(240&t.data.channel)>>4,t.data.ch_config=15&t.data.channel,(+t.data.node_size-23)%6!=0)return $u(t,"Message command router_table size error ["+e.data.node_size+"]"),t;var n=(+t.data.node_size-23)/6,r=new j.O;t.data.children=[];for(var i=0;i<n;i++)r.raw(t.rest.slice(0,6)),t.data.children.push(r.hex({aggregate:1,sep:":"})),t.rest=t.rest.slice(6);return e.rest=t.rest,e}},{key:"_parse_info",value:function(e){return Yu.make([{data_type:U.Nm.text.value,name:Ji,size:e.data.node_size}],e.rest,e.data)}},{key:"_parse_node_command",value:function(t){var n=Yu.make([{data_type:U.Nm.uint8.value,name:"command_type"}],t.rest,t.data);if(1==n.error)return n;switch(+n.data.command_type){case oe.ROUTE_TABLE:return n.data.command_type_name="ROUTE_TABLE",e._parse_router_table(n);case oe.CONFIG:return n.data.command_type_name="CONFIG",e._parse_config(n);case oe.STATUS:return n.data.command_type_name="STATUS",e._parse_status(n);case oe.FULL_CONFIG:return n.data.command_type_name="FULL_CONFIG",e._parse_full_config(n);case ao:return n.data.command_type_name="INFO",e._parse_info(n);default:$u(n,"Command message type node defined ["+n.data.command_type+"]")}return n}},{key:"_parse_node_data",value:function(e){return Yu.make([{data_type:U.Nm.hex.value,name:"data",size:e.rest.length}],e.rest,e.data)}}]),e}();var Qu=function(e){l()(c,e);var t,n,r,i,a=(r=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=f()(r);if(i){var n=f()(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return d()(this,e)});function c(e){var t;return o()(this,c),(t=a.call(this,e))._view=new Fu(q()(t)),t._view.on(oo,(function(e){return t.send(e.data,e.to)})),t._input_id=new Gt.X(t._view.element().querySelector("#esp32-mesh-id"),{include_only_app:"tcp_server"}),t.on(_t.CHECK_IDS,(function(e){t._input_id.check_ids(e),t._update_id(e),t._set_clients_list()})),t.on(_t.RECEIVED_MESSAGE,(function(e){return t._on_message(e)})),t._test_num=0,t._br_clients=[],t.id=null,t._system=new lo,t.last_send={},t}return s()(c,[{key:"element",value:function(){return this._view.element()}},{key:"enable",value:function(e){this.id=null,this.emit(ro,e)}},{key:"run",value:function(){return this.id=this._input_id.selected(),this.id?(this.monitor_ids(this.id),this._set_clients_list(),this._run_script()):(this.cancel(mt.NO_INPUT),!1)}},{key:"_run_script",value:(n=pt()(ht().mark((function e(){return ht().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.is_cancelled()){e.next=7;break}return e.next=3,this._check_devices_data();case 3:return e.next=5,this.delay(6e4);case 5:e.next=0;break;case 7:return e.abrupt("return","button cancelled"==this.reason());case 8:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"auto_message",value:function(){return this._view.auto_message()}},{key:"_on_message",value:function(e){var t=this;if(this.id.filter_message(e,this._view.compare_types_check(),{dir:[z.kc.received.value],type:[z.DI.data.value]})){var n=e.from,r=(0,z.T5)(e);this._mesh_data_handler(n,r,e).forEach((function(i){i.error||(t._process_data(i,n),t.emit(eo,{data:i,from:n,input:r,message:e}))})),this.emit(Xi),this.emit(Qi),this.emit(no)}}},{key:"_process_data",value:function(e,t){this._system.add(e.data,t),this._check_devices_data()}},{key:"_mesh_data_handler",value:function(e,t,n){this.emit(io,"");var r=Zu.parser(t);return r.error&&this.emit(io,r.message_err),r}},{key:"_send_br_command",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.send(new Uint8Array(Zu.make_message(n,t)),e)}},{key:"_send_node_command",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=this._system.br_by_mac(e);r?this.send(new Uint8Array(Ju.make_message(n,t,e)),r.to()):this.emit(io,"BR not found")}},{key:"send",value:function(e,t){if(this.id&&!this.is_cancelled()){var n=JSON.stringify(t);return this.last_send[n]&&this.last_send[n].time+50<=Date.now()&&delete this.last_send[n],this.last_send[n]?this.last_send[n].count++<2?(this.id.send(e,t,{data_type:fe.hex.value}),void(this.last_send[n].time=Date.now())):void setTimeout(this.send.bind(this),50,e,t):(this.id.send(e,t,{data_type:fe.hex.value}),void(this.last_send[n]={time:Date.now(),count:1}))}}},{key:"_update_id",value:function(e){if(this.id&&!this.is_cancelled()){var t=this.id.is_at_list(e);t instanceof ct.y&&(this.id=t)}}},{key:"_set_clients_list",value:function(){var e=this;this.id&&!this.is_cancelled()&&(this._br_clients=this.id.clients(),this.emit(to),this.auto_message()&&this._br_clients.forEach((function(t){e._send_br_command({addr:t.addr(),port:t.port()},ne.FULL_CONFIG,0)})),this._system.check_border_router(this._br_clients),this.emit(Qi))}},{key:"_check_devices_data",value:(t=pt()(ht().mark((function e(){var t,n=this;return ht().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auto_message()){e.next=2;break}return e.abrupt("return");case 2:t=36e5,this._system.device().forEach((function(e){Date.now()-e.updated()>t&&Date.now()-e.sended()>t&&(e.sended(Date.now()),n._send_node_command(e.mac(),oe.FULL_CONFIG,0))}));case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),c}(bt);function ed(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function td(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ed(Object(n),!0).forEach((function(t){S()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ed(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var nd={baudrate:115200,databits:8,stopbit:1,parity:"none"},rd={5:{value:5,name:"5"},6:{value:6,name:"6"},7:{value:7,name:"7"},8:{value:8,name:"8",default:!0},16:{value:16,name:"16"}},id={none:{value:0,name:"none",default:!0},odd:{value:1,name:"odd"},even:{value:2,name:"even"},mark:{value:3,name:"mark"},space:{value:4,name:"space"}},od={1:{value:0,name:"1"},2:{value:2,name:"2"}};function ad(e,t,n){return e in t?t[e].value:(console.warn("Value ".concat(e," not support. Using default value ").concat(t[n].name),t),t[n].value)}var sd=function(e){l()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=f()(t);if(n){var i=f()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return d()(this,e)});function i(e){return o()(this,i),r.call(this,e,"USB_CDC_ACM")}return s()(i,[{key:"init",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=td(td({},nd),t);return this.device().selectConfiguration(this._config).then((function(){return e.device().claimInterface(e._interface)})).then((function(){var t=new ArrayBuffer(7),r=new DataView(t);return r.setUint32(0,n.baudrate,!0),r.setUint8(4,ad(n.stopbit,od,nd.stopbit)),r.setUint8(5,ad(n.parity,id,nd.parity)),r.setUint8(6,ad(n.databits,rd,nd.databits)),e.device().controlTransferOut({requestType:"class",recipient:"interface",request:32,value:0,index:e._interface},t)})).then((function(){return e.line_state(e.signals().dtr,e.signals().rts)})).then((function(){return e.break(e.signals().break)}))}},{key:"_set_line_state",value:function(){return this.device().controlTransferOut({requestType:"class",recipient:"interface",request:34,value:(this._flow_control.dtr?1:0)|(this._flow_control.rts?2:0),index:this._interface})}},{key:"_set_break",value:function(){return this.device().controlTransferOut({requestType:"class",recipient:"interface",request:35,value:this._flow_control.brk?65535:0,index:this._interface})}}]),i}(cr);function cd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ld(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cd(Object(n),!0).forEach((function(t){S()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ud={baudrate:9600,databits:8,stopbit:1,parity:"none"},dd={5:{value:5,name:"5"},6:{value:6,name:"6"},7:{value:7,name:"7"},8:{value:8,name:"8",default:!0}},hd={none:{value:0,name:"none",default:!0},odd:{value:1,name:"odd"},even:{value:2,name:"even"},mark:{value:3,name:"mark"},space:{value:4,name:"space"}},fd={1:{value:0,name:"1"},2:{value:2,name:"2"}};function pd(e,t,n){return e in t?t[e].value:(console.warn("Value ".concat(e," not support. Using default value ").concat(t[n].name),t),t[n].value)}var _d=function(e){l()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=f()(t);if(n){var i=f()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return d()(this,e)});function i(e,t){return o()(this,i),r.call(this,e,"CP210x")}return s()(i,[{key:"init",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=ld(ld({},ud),t);return this.device().selectConfiguration(this._config).then((function(){return e.device().claimInterface(e._interface)})).then((function(){return e.device().controlTransferOut({requestType:"vendor",recipient:"device",request:0,index:e._interface,value:1})})).then((function(){return e.line_state(e.signals().dtr,e.signals().rts)})).then((function(){return e.break(e.signals().break)})).then((function(){return e.device().controlTransferOut({requestType:"vendor",recipient:"device",request:3,index:e._interface,value:pd(n.stopbit,fd,ud.stopbit)|pd(n.parity,hd,ud.parity)<<4|pd(n.databits,dd,ud.databits)<<8})})).then((function(){return e.device().controlTransferOut({requestType:"vendor",recipient:"device",request:1,index:e._interface,value:3686400/n.baudrate})}))}},{key:"_set_line_state",value:function(e,t){return this.device().controlTransferOut({requestType:"vendor",recipient:"device",request:7,index:this._interface,value:768|e?1:0|t?2:0})}},{key:"_set_break",value:function(e){return this.device().controlTransferOut({requestType:"vendor",recipient:"device",request:5,value:e?1:0,index:this._interface})}}]),i}(cr),vd="menubar=no,status=no,toolbar=no",md=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";o()(this,e),this._name=t,this._link=n,this._options=vd,"string"==typeof r&&r&&(this._options+=","+r)}return s()(e,[{key:"open",value:function(){window.open(this.link,"_blank","")}},{key:"name",get:function(){return this._name}},{key:"link",get:function(){return this._link}}]),e}(),yd=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];o()(this,e),this._container=t,this._tools=n,this.render()}return s()(e,[{key:"register",value:function(e){console.assert(e instanceof md,"Not a tool class"),this._tools.find((function(t){return t.name===e.name}))?console.warn("Tool ".concat(e.name," already registered")):(this._tools.push(e),this.render_new_tool(e))}},{key:"render",value:function(){var e=this;this._container.title="Tools",this._container.innerHTML="<option>&#x1f6e0;</option>",this._container.onchange=function(t){e._tools.find((function(t){return t.name===e._container.selectedOptions[0].value})).open(),e._container.selectedIndex=0}}},{key:"render_new_tool",value:function(e){var t=document.createElement("option");t.textContent=e.name,t.value=e.name,this._container.append(t)}}]),e}();var gd=function(e){l()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=f()(t);if(n){var i=f()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return d()(this,e)});function i(){return o()(this,i),r.call(this,"Data Converter","./tools/data_converter.html","height=500")}return i}(md);var bd=function(e){l()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=f()(t);if(n){var i=f()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return d()(this,e)});function i(){return o()(this,i),r.call(this,"Filter Tester","./tools/filter_tester.html","height=500")}return i}(md);var kd=function(e){l()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=f()(t);if(n){var i=f()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return d()(this,e)});function i(){return o()(this,i),r.call(this,"Data Viewer","./tools/data_viewer.html","height=500")}return i}(md);function wd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ed(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wd(Object(n),!0).forEach((function(t){S()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}"serviceWorker"in navigator&&window.addEventListener("load",(function(){navigator.serviceWorker.register("".concat("","service-worker.js")).then((function(e){})).catch((function(e){console.error("SW registration failed: ",e)}))}));var xd=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new Qt(e),r=new Yt,i=new Tt(zt(e.querySelector("#input")),new Gt.X(e.querySelector("#input-select-app")),Wt(e.querySelector("#data"),tn(tn({},{context_menu:r}),t)),t),o=new Dt(i,e.querySelector("#options"));return new Be(i,o,{win_manager:n,script:e.querySelector("#scripts"),configure:e.querySelector("#configure"),profile:e.querySelector("#profile"),about:e.querySelector("#about"),context_menu:r})}(document.body,{app_custom_paint:!0});xd.register_app(V.ECHO.name,on,V.ECHO.options),xd.register_app(V.SERIAL.name,En,V.SERIAL.options),xd.register_app(V.MONITOR.name,Nn,V.MONITOR.options),xd.register_app(V.TCP_SERVER.name,Bn,V.TCP_SERVER.options),xd.register_app(V.TCP_CLIENT.name,rr,V.TCP_CLIENT.options),xd.register_local_app(_r,Ed(Ed({},V.WEBUSB.options),{},{drivers:[{name:"USB_CDC",driver:sd},{name:"CP201x",driver:_d}]})),xd.register_local_app(Ir,V.WEBSERIAL.options),xd.register_local_app(Gr,V.WEBSOCKET_CLIENT.options),xd.register_local_app(Kr,V.GEOLOCATION.options),xd.register_local_app(ri,V.ORIENTATION.options),xd.register_command(new ii),xd.register_command(new oi),xd.register_command(new ai),xd.register_command(new si),xd.register_script(new Mi("Send Message")),xd.register_script(new Pi("Echo Message")),xd.register_script(new Li("Bridge Messages")),xd.register_script(new Qu("ESP32 Mesh")),xd.register_view("Terminal",mi),xd.register_view("Data Compare",Ni);var Sd=new yd(document.querySelector("#tools-menu"));Sd.register(new kd),Sd.register(new gd),Sd.register(new bd)},4630:(e,t,n)=>{"use strict";n.d(t,{pQ:()=>y,NU:()=>g,wm:()=>b});var r=n(4575),i=n.n(r),o=n(3913),a=n.n(o),s=n(2205),c=n.n(s),l=n(8585),u=n.n(l),d=n(9754),h=n.n(d),f=n(7065),p=n(5334),_=n(6002),v=n(1996);function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var i=h()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return u()(this,n)}}var y=function(e){c()(n,e);var t=m(n);function n(e,r){var o,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;return i()(this,n),(o=t.call(this))._name=e,o._server=r,o._long_name=a,o}return a()(n,[{key:"long_name",value:function(){return this._long_name}},{key:"name",value:function(){return this._name}},{key:"server",value:function(){return this._server}},{key:"update_ids",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Array.isArray(e)||(e=[e]),this.emit(_.O7.INPUT_REGISTER,{server:this.server(),app:this,ids:e})}},{key:"render",value:function(e){console.log("The 'render' method must create the configuration menu of the application. It receives de container where the menu must be created"),console.assert("You need to override this method ('render(container)')")}},{key:"on_message",value:function(e){switch(e.type){case p.DI.control.value:this._control_message(e);break;case p.DI.data.value:this._data_message(e);break;default:return void this.error_message("undefined type message",e)}this.emit(_.O7.RECEIVED_MESSAGE,e)}},{key:"format_output",value:function(e){var t=(0,v.J)(e);switch(t.data=[],e.type){case p.DI.data.value:this._format_output_data(t,e);break;case p.DI.control.value:this._format_output_control(t,e);break;default:this.error_message("undefined type message",e)}return t}},{key:"error_message",value:function(e,t){console.error(this.name(),e,t)}},{key:"message_info",value:function(e,t,n){console.error('The "message_info" method must return the infomations request by the parameter "type_info". This was a way to unifity access to information provided diferently by difernte programs')}},{key:"_format_output_data",value:function(e,t){e.id=this.message_info(_.bM.ID,t),e.id_str=this.message_info(_.bM.ID_STRING,t),e.data=this.message_info(_.bM.DATA_OUTPUT,t);var n=this.message_info(_.bM.DATA_FIELD);null!=n&&"number"==typeof n&&(e.data_field=n);var r=this.message_info(_.bM.FROM,t);null!=r&&(e.from=r);var i=this.message_info(_.bM.FROM_STRING,t);null!=i&&(e.from_str=i)}},{key:"_format_output_control",value:function(e,t){switch(t.ctype){case p.$M.status.value:this._format_control_status(e,t);break;case p.$M.config.value:this._format_control_config(e,t);break;case p.$M.custom.value:this._format_control_custom(e,t);break;case p.$M.open.value:this._format_control_open(e,t);break;case p.$M.close.value:this._format_control_close(e,t);break;case p.$M.error.value:this._format_control_error(e,t);break;default:this.error_message("undefined format_output control type message",t)}}},{key:"_format_control_close",value:function(e,t){console.warn(this.name(),"format output control close",t)}},{key:"_format_control_open",value:function(e,t){console.warn(this.name(),"format output control open",t)}},{key:"_format_control_custom",value:function(e,t){console.warn(this.name(),"format output control custom",t)}},{key:"_format_control_config",value:function(e,t){console.warn(this.name(),"format output control config",t)}},{key:"_format_control_status",value:function(e,t){console.warn(this.name(),"format output control status",t)}},{key:"_format_control_error",value:function(e,t){var n="";t.data.hasOwnProperty("what")&&t.data.what.length>0&&(n=" (".concat(t.data.what,")")),e.data.push("[".concat(t.data.code,"] ").concat(t.data.message).concat(n))}},{key:"_data_message",value:function(e){}},{key:"_control_message",value:function(e){switch(e.ctype){case p.$M.status.value:this._control_status(e);break;case p.$M.config.value:this._control_config(e);break;case p.$M.custom.value:this._control_custom(e);break;case p.$M.open.value:this._control_open(e);break;case p.$M.close.value:this._control_close(e);break;case p.$M.error.value:this._control_error(e);break;default:this.error_message("undefined control type message",e)}}},{key:"_control_close",value:function(e){console.warn(this.name(),"control close",e)}},{key:"_control_open",value:function(e){console.warn(this.name(),"control open",e)}},{key:"_control_custom",value:function(e){console.warn(this.name(),"control custom",e)}},{key:"_control_config",value:function(e){console.warn(this.name(),"control config",e)}},{key:"_control_status",value:function(e){console.warn(this.name(),"control status",e)}},{key:"_control_error",value:function(e){console.warn(this.name(),"control error",e)}}]),n}(f.I),g=function(e){c()(n,e);var t=m(n);function n(e,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;return i()(this,n),t.call(this,e,r,o)}return a()(n,[{key:"enable",value:function(e){console.log("The 'enable' method is called whenever the browser connect (param true) or close (param false) connection with the daemon. The application must show the configurations when connect, and hide when not connected"),console.assert("You need to override this method ('enable(en)')")}},{key:"send",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=this.send_data(e,t,n,r);i&&this.emit(_.O7.SEND_MESSAGE,p.bj.create(this.name(),p.DI.data.value,null,i))}},{key:"send_data",value:function(e,t,n){console.assert(!1,"'send_data' method must be overriden")}},{key:"send_control",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.emit(_.O7.SEND_MESSAGE,p.bj.create(this.name(),p.DI.control.value,e,t))}}]),n}(y),b=function(e){c()(n,e);var t=m(n);function n(e,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;return i()(this,n),t.call(this,e,r,o)}return a()(n,[{key:"support",value:function(){return console.warn("Method 'support' MUST be overriden"),!1}},{key:"send",value:function(e,t,n,r){var i=this._make_message(this.send_data(e,t,n,r),p.kc.sent.value,p.DI.data.value);this.emit(_.O7.SEND_MESSAGE,this.format_output(i))}},{key:"send_data",value:function(e,t,n){console.assert(!1,"'send_data' method must be overriden")}},{key:"post_data",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=this._make_message(e,n?p.kc.received.value:p.kc.sent.value,p.DI.data.value);this.emit(_.O7.SEND_MESSAGE,this.format_output(r))}},{key:"control",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this._make_message(t,p.kc.received.value,p.DI.control.value,e);this.emit(_.O7.SEND_MESSAGE,this.format_output(n))}},{key:"send_control",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this._make_message(t,p.kc.sent.value,p.DI.control.value,e);this.emit(_.O7.SEND_MESSAGE,this.format_output(n))}},{key:"received_data",value:function(e){var t=this._make_message(e,p.kc.received.value,p.DI.data.value);this.emit(_.O7.RECEIVED_MESSAGE,this.format_output(t))}},{key:"_make_message",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=p.bj.create(this.name(),n,r,e);return i.dir=t,i.sid=this.server().id(),i.saddr=this.server().addr(),i.sname=this.server().name(),i.uid=t===p.kc.received.value?this.server().server_user_id():this.server().user_id(),i.smid=this.server().server_message_id(),i.session=this.server().session,i}}]),n}(y)},7920:(e,t,n)=>{"use strict";n.d(t,{q:()=>c});var r=n(6200),i=n(4766),o=n(6810),a=n(5334),s=n(1646);function c(e,t){t.time_format=i.Cu.DATETIME.value,t.time_precision=i.Ec.MICROSECONDS.value;var n=(0,r.Je)(e,t),c=document.createElement("div"),l=c.attachShadow({mode:"open"});c.id="container-data-details",l.innerHTML="\n<style>\n    #container\n    {\n        display: flex;\n        flex-direction: column;\n        height: 100%;\n        position: relative;\n        box-sizing: border-box;\n        padding: 0px 15px 3px 20px;\n    }\n\n    h2{ margin: 10px 3px;}\n    #outer-container\n    {\n        display: flex;\n        flex-direction: column;\n        flex-grow: 1;\n        box-sizing: border-box;\n        height: 100%;\n        overflow: auto;\n    }\n\n    #data-container\n    {\n        display: flex;\n        flex-direction: column;\n        flex-grow: 1;\n        box-sizing: border-box;\n        height: 100%;\n        overflow: auto;\n    }\n\n    #data \n    {\n        display: flex;\n        flex-direction: row;\n        flex-wrap: wrap;\n    }\n\n    .field-data\n    {\n        display: inline-flex;\n        flex-direction: row;\n        border-radius: 5px;\n        overflow: auto;\n        margin: 0px 5px 5px 0px;\n        text-align: center;\n    }\n\n    .title\n    {\n        background-color: bisque;\n        padding: 5px;\n        font-weight: bold;\n    }\n\n    .value\n    {\n        background-color: azure;\n        padding: 5px;\n    }\n\n    #payload\n    {\n        flex-basis: auto;\n        width: 100%;\n        height: 100%;\n        box-sizing: border-box;\n        overflow-y: auto;\n    }\n\n    #payload .value\n    {\n        padding: 10px;\n        display: inline-flex;\n        flex-direction: row;\n        overflow: auto;\n        flex-grow: 1;\n        align-items: flex-start;\n    }\n\n    .payload-value\n    {\n        white-space: pre;\n        text-align: left;\n        background-color: antiquewhite;\n        padding: 5px;\n        border-radius: 5px;\n        margin: 0px 5px 5px 0px;\n    }\n\n    .data-field\n    { \n        align-self: stretch;\n        padding: 0px;\n    }\n\n    .command\n    {\n        padding: 5px 10px;\n        float: right;\n        cursor: pointer;\n        border-radius: 5px;\n    }\n\n    #delete\n    {\n        background-color: white;\n        color: red;\n        font-weight: bold;\n    }\n\n    #delete:hover\n    {\n        background-color: red;\n        color: white;\n    }\n\n    #arrow-container\n    {\n        position: absolute;\n        display: flex;\n        flex-direction: row;\n        justify-content: space-between;\n        width: 100%;\n        height: 100%;\n        align-items: center;\n    }\n\n    .arrow\n    {\n        padding: 40px 5px;\n        cursor: pointer;\n        vertial-align: middle;\n        z-index: 15;\n    }\n\n    .arrow:hover\n    {\n        background-color: lightgrey;\n    }\n    \n    #left:after{ content: '❰'; }\n    #right:after{ content: '❱'; }\n\n</style>\n<div id=arrow-container>\n    <div class=arrow id=left data-value=left></div>\n    <div class=arrow id=right data-value=right></div>\n</div>\n<div id=container>\n    <div id=outer-container>\n        <h2>Details</h2>\n        <div id=data-container>\n            <div id=data></div>\n            <div id=payload class=field-data>\n                <span class=title>Payload</span>\n                <span class=value></span>\n            </div>\n        </div>\n    </div>\n    <div id=commands-container>\n        <hr>\n        <div id=commands><button class=command id=delete data-value=delete>Delete</button></div>\n    </div>\n</div>";var u=l.querySelector("#data"),d=l.querySelector("#payload").querySelector(".value");return Object.keys(n).forEach((function(t){var r=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u,r=document.createElement("div");r.classList.add("field-data"),r.innerHTML="<span class=title>".concat(e,"</span><span class=value>").concat(t,"</span>"),n.appendChild(r)};switch(t){case"file":case"mid":case"sid":case"smid":case"uid":case"sname":case"saddr":case"app":case"session":case"type":case"from":t in n&&r(o.zF[t].description,n[t]);break;case"time":r(o.zF[t].description,"".concat(n[t]," (").concat(e.time,")"));break;case"id":r(e.type===a.DI.data.value?"App ID":a.DI.control.name,n[t]);break;case"dir":r(o.zF[t].description,"".concat(a.kc[e.dir].value," (").concat(n[t],")"));break;case"size":break;case"payload":Array.isArray(n.payload)||(n.payload=[n.payload]),"data_field"in e?(r(o.zF.size.description,n.size),n.payload.forEach((function(t,r){if(r!==e.data_field){var i=document.createElement("span");i.classList.add("payload-value"),i.textContent=t,d.appendChild(i)}else{var o=document.createElement("convert-container");o.classList.add("payload-value","data-field"),Object.values(s.uw).forEach((function(e){e.value!==s.uw.NONE.value&&o.add_type(e.value)})),o.value(t,n.payload_type),d.appendChild(o)}}))):n.payload.forEach((function(e){var t=document.createElement("span");t.classList.add("payload-value"),t.textContent=e,d.appendChild(t)}))}})),c}},6200:(e,t,n)=>{"use strict";n.d(t,{Je:()=>y,ZR:()=>g});var r=n(9713),i=n.n(r),o=n(8),a=n.n(o),s=n(6810),c=n(1646),l=(n(4687),n(4766)),u=(n(961),n(8336)),d=n(9118),h=n(5334);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _=new d.O;function v(e,t){if((t===c.uw.NONE.value||t===c.uw.text.value)&&"string"==typeof e)return{data:e,size:e.length,type:c.uw.text.value};if("string"==typeof e)_.from(e,c.uw.text.value);else if(Array.isArray(e))_.raw(e);else{if("object"!==a()(e))return console.error("Output data not supported"),{data:"",size:-1,type:c.uw.NONE.value};_.raw(Object.values(e))}var n=t===c.uw.NONE.value?c.uw.hex.value:t;return{data:_.to(n),size:_.size(),type:n}}var m={time_format:l.Cu.TIME.value,time_precision:l.Ec.MILISECONDS.value,data_format:c.uw.NONE.value,select:s.kg,stringify:!1,stringify_sep:" "};function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={};return(t=p(p({},m),t)).select.forEach((function(r){switch(r){case"file":case"mid":case"sid":case"smid":case"uid":case"sname":case"saddr":case"app":case"session":n[r]=r in e?e[r]:"";case"from":n.from="from_str"in e?e.from_str:"";break;case"type":n.type=h.DI[e.type].name;break;case"dir":n.dir=h.kc[e.dir].name;break;case"time":n.time=l.uc.format(e.time,t.time_format,t.time_precision);break;case"id":n.id="id_str"in e?e.id_str:"ctype"in e?h.$M[e.ctype].name:"";break;case"size":n.size="";break;case"payload":if("data"in e)if(e.data instanceof Array){var i="data_field"in e?e.data_field:-1,o=[];e.data.forEach((function(e,r){if(r!=i)o.push(e);else{var a=v(e,t.data_format);n.size=a.size,n.payload_type=a.type,o.push(a.data)}})),n.payload=t.stringify?o.join(t.stringify_sep):o}else n.payload=e.data;else n.payload=""}})),n}function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[],r=t.filter||{};return e.forEach((function(e){u.w.filter(r,e.data)&&n.push(y(e.data,t))})),n}},3686:(e,t,n)=>{"use strict";n.d(t,{S:()=>k});var r=n(2298),i=n(4753),o=n(4575),a=n.n(o),s=n(3913),c=n.n(s),l=n(2205),u=n.n(l),d=n(8585),h=n.n(d),f=n(9754),p=n.n(f),_=n(7065),v=n(1755),m=n(1584),y=n(1646),g=n(6002);var b=function(e){u()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=p()(t);if(n){var i=p()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return h()(this,e)});function i(e,t){var n;return a()(this,i),(n=r.call(this))._model=e,n._view=t,n._view.on(v.xB.OPEN_VIEW,(function(e){return n.open(e)})).on(v.xB.REMOVE_VIEW,(function(e){return n.remove(e)})),n._model.on(m.r.PROPAGATE,(function(e){return n.emit(m.r.PROPAGATE,e)})).on(v.xB.SELECT_ID,(function(e){return n.emit(v.xB.SELECT_ID,e)})),n.on(m.r.CHECK_IDS,(function(e){return n._model.emit(m.r.CHECK_IDS,e)})).on(y.Mk.POST,(function(e){return n._model.emit(g.O7.RECEIVED_MESSAGE,e)})),n}return c()(i,[{key:"register",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._model.register(e,t,n)}},{key:"open",value:function(e){return this._model.open(e)}},{key:"remove",value:function(e){this._model.remove(e)}}]),i}(_.I);function k(e){var t=new r.o;return new b(t,new i.F(t,e))}},8995:(e,t,n)=>{"use strict";n.d(t,{U:()=>f});var r=n(4575),i=n.n(r),o=n(3913),a=n.n(o),s=n(2205),c=n.n(s),l=n(8585),u=n.n(l),d=n(9754),h=n.n(d);var f=function(e){c()(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=h()(t);if(n){var i=h()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return u()(this,e)});function o(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i()(this,o),(t=r.call(this))._name=e,t._window=null,t._options=n,t}return a()(o,[{key:"render",value:function(e){console.warn('Method "render" must be overridden!')}},{key:"window",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null!==e&&(this._window=e),this._window}},{key:"name",get:function(){return this._name}},{key:"options",get:function(){return this._options}}]),o}(n(7065).I)},5198:(e,t,n)=>{"use strict";n.d(t,{X:()=>m});var r=n(4575),i=n.n(r),o=n(3913),a=n.n(o),s=n(2205),c=n.n(s),l=n(8585),u=n.n(l),d=n(9754),h=n.n(d),f=n(7065),p=n(4107),_=n(7565),v=n(1584);var m=function(e){c()(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=h()(t);if(n){var i=h()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return u()(this,e)});function o(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i()(this,o),(t=r.call(this))._model=new p.o(n),t._view=new _.O(t._model,e),t._model.on(v.r.CHECK_IDS,(function(e){return t.emit(v.r.CHECK_IDS,e)})),t._view.on(v.r.CHANGE_ID,(function(e){return t._model.check_selected(e)})),t.check_ids(),t}return a()(o,[{key:"push_ids",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this._model.push_ids(e,t)}},{key:"check_ids",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._model.check_ids(e)}},{key:"has_ids",value:function(){return this._model.has_ids()}},{key:"list",value:function(){return this._model.list()}},{key:"flat_list",value:function(){return this._model.flat_list()}},{key:"clean",value:function(e){this._model.clean(e)}},{key:"selected",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this._model.selected(e)}},{key:"propagate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this._model.propagate(e)}}]),o}(f.I)},4880:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(4580);function i(e,t){console.assert(e instanceof r.y,'"id" argument must be of type App_ID_Template');var n=null;return e.server().addr()in t?e.app().name()in t[e.server().addr()]?(t[e.server().addr()][e.app().name()].some((function(t){if(e.compare_ids(t))return n=t,!0})),n||-3):-2:-1}},4580:(e,t,n)=>{"use strict";n.d(t,{m:()=>u,y:()=>d});var r=n(4575),i=n.n(r),o=n(3913),a=n.n(o),s=n(4630),c=n(271),l=n(4880),u={One2One:"1to1",One2N:"1toN",One2All:"1toAll"},d=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:u.One2One;i()(this,e),console.assert(n instanceof s.pQ,'"app" paremeter must be a "App_Template"'),this._value=t,this._name="string"==typeof r?r:JSON.stringify(r),this._app=n,this._type=o}return a()(e,[{key:"app",value:function(){return this._app}},{key:"value",value:function(){return this._value}},{key:"name",value:function(){return this._name}},{key:"type",value:function(){return this._type}},{key:"server",value:function(){return this._app.server()}},{key:"app_name",value:function(){return this._app.name}},{key:"send",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.app().send(e,this,t,n)}},{key:"full_name",value:function(){return this.server().name()?"".concat(this.server().name(),":").concat(this._app.name(),":").concat(this._name):"".concat(this.server().addr(),":").concat(this._app.name(),":").concat(this._name)}},{key:"is_equal",value:function(t){return console.assert(t instanceof e,"compare_id"),this.app().server()==t.app().server()&&this.app()==t.app()&&this.compare_ids(t)}},{key:"compare_ids",value:function(t){return t instanceof e?JSON.stringify(this.value())==JSON.stringify(t.value()):JSON.stringify(this.value())==JSON.stringify(t)}},{key:"is_message_to_id",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.app().name()===e.app&&this.server().addr()===e.saddr&&this.compare_message_id(e,t)}},{key:"compare_message_id",value:function(e,t){return!0}},{key:"is_at_list",value:function(e){return(0,l.Z)(this,e)}},{key:"filter_message",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return!!c.D.filter(n,e)&&this.is_message_to_id(e,t)}}]),e}()},5328:(e,t,n)=>{"use strict";n.d(t,{p:()=>s});var r=n(4575),i=n.n(r),o=n(3913),a=n.n(o),s=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i()(this,e),this._rules=t,this._headers=n}return a()(e,[{key:"init",value:function(){return Object.values(this._rules).forEach((function(e){e.current=e.min})),this}},{key:"update_headers",value:function(e){this._headers=e}},{key:"set",value:function(e){e in this._rules&&(this._headers[e].style.width=this._rules[e].current+"ch")}},{key:"set_all",value:function(){var e=this;Object.keys(this._rules).forEach((function(t){return e.set(t)}))}},{key:"check",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{add:2};if(e in this._rules){var r=0;switch(this._rules[e].type){case"flexible":r=t.textContent.length;break;case"break-white-force":case"break-white":r=t.textContent.split(" ").reduce((function(e,t){return t.length>e?t.length:e}),0)}r+=n.add,"max"in this._rules[e]&&r>this._rules[e].max&&(r=this._rules[e].max);var i=!1;switch(this._rules[e].type){case"flexible":case"break-white":r>this._rules[e].current&&r>this._rules[e].current!=this._rules[e].max&&(i=!0);break;case"break-white-force":r!=this._rules[e].current&&(i=!0)}i&&(this._headers[e].style.width=r+"ch",this._rules[e].current=r)}}},{key:"rules",get:function(){return this._rules}}]),e}()},8161:(e,t,n)=>{"use strict";n.d(t,{C:()=>b,_:()=>g});var r=n(4575),i=n.n(r),o=n(3913),a=n.n(o),s=n(2205),c=n.n(s),l=n(8585),u=n.n(l),d=n(9754),h=n.n(d),f=n(4596),p=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i()(this,e),this._name=t,this._style=(0,f.DQ)(t,n)}return a()(e,[{key:"element",value:function(){return this._style}},{key:"update",value:function(e){(0,f.cT)(this._style,this._name,e)}}]),e}(),_=n(4399),v=n(1996),m=n(7065),y=n(7203);function g(e,t){return"<tr id=".concat(t,"-line>\n        <td>").concat(e,"</td>\n        <td><input class=").concat(t,"-bg-color type=color></td>\n        <td><input class=").concat(t,"-text-color type=color></td>\n        <td><input class=").concat(t,"-text-bold type=checkbox></td>\n        <td><input class=").concat(t,"-text-italic type=checkbox></td>\n        <td><input class=").concat(t,"-text-size type=number min=10 max=20 style=width:5ch></td>\n        <td><select class=").concat(t,"-font-famity>\n                <option value=monospace>monospace</option>\n                <option value=sans-serif>sans-serif</option>\n                <option value=serif>serif</option>\n            </select></td>\n        <td class=filter-").concat(t,"-example>Example output data</td>\n    </tr>")}var b=function(e){c()(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=h()(t);if(n){var i=h()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return u()(this,e)});function o(e,t){var n,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return i()(this,o),(n=r.call(this))._filter=a,n._style=new p(t,a),n._prefix=e,n.append_head(),n}return a()(o,[{key:"append_head",value:function(){document.getElementsByTagName("head")[0].appendChild(this._style.element())}},{key:"remove",value:function(){this._style.element().parentNode.removeChild(this._style.element())}},{key:"filter",value:function(){return(0,v.J)(this._filter)}},{key:"configure",value:function(e){var t=this,n=e.querySelector(".".concat(this._prefix,"-bg-color")),r=e.querySelector(".".concat(this._prefix,"-text-color")),i=e.querySelector(".".concat(this._prefix,"-text-bold")),o=e.querySelector(".".concat(this._prefix,"-text-italic")),a=e.querySelector(".".concat(this._prefix,"-text-size")),s=e.querySelector(".".concat(this._prefix,"-font-famity")),c=e.querySelector(".filter-".concat(this._prefix,"-example"));(0,f.yn)(c,this._filter),n.value=(0,y.c)(this._filter.backgroundColor),n.onchange=function(e){t._filter.backgroundColor=e.target.value,t._style.update(t._filter),(0,f.yn)(c,t._filter),t.emit("filter_change",{filter:t._filter,prop:"backgroundColor"})},r.value=(0,y.c)(this._filter.color),r.onchange=function(e){t._filter.color=e.target.value,t._style.update(t._filter),(0,f.yn)(c,t._filter),t.emit("filter_change",{filter:t._filter,prop:"color"})},i.checked="bold"==this._filter.fontWeight,i.onchange=function(e){t._filter.fontWeight=e.target.checked?"bold":"normal",t._style.update(t._filter),(0,f.yn)(c,t._filter),t.emit("filter_change",{filter:t._filter,prop:"fontWeight"})},o.checked="italic"==this._filter.fontStyle,o.onchange=function(e){t._filter.fontStyle=e.target.checked?"italic":"normal",t._style.update(t._filter),(0,f.yn)(c,t._filter),t.emit("filter_change",{filter:t._filter,prop:"fontStyle"})},a.value=parseInt(this._filter.fontSize),a.onchange=function(e){t._filter.fontSize=e.target.value+"px",t._style.update(t._filter),(0,f.yn)(c,t._filter),t.emit("filter_change",{filter:t._filter,prop:"fontSize"})},(0,_.f1)(s,this._filter.fontFamily),s.onchange=function(e){t._filter.fontFamily=(0,_.Jc)(e.target).value,t._style.update(t._filter),(0,f.yn)(c,t._filter),t.emit("filter_change",{filter:t._filter,prop:"fontFamily"})}}}]),o}(m.I)},5425:(e,t,n)=>{"use strict";n.d(t,{d:()=>y});var r=n(4575),i=n.n(r),o=n(3913),a=n.n(o),s=n(2205),c=n.n(s),l=n(8585),u=n.n(l),d=n(9754),h=n.n(d),f=n(8161),p=n(7065),_=n(5612),v=n(1996),m=n(2130);var y=function(e){c()(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=h()(t);if(n){var i=h()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return u()(this,e)});function o(e,t,n){var a,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,c=arguments.length>4?arguments[4]:void 0;return i()(this,o),(a=r.call(this))._tag=new f.C(e,t,n),a._filter=s,a._id=c,s&&(a.on(m.$l.RENDER_FILTER,(function(e){return a._filter.filter_options(e)})),a._filter.on(m.$l.RENDER_DATA,(function(){return a.emit(m.$l.RENDER_DATA)})),a._filter.on(m.$l.RENDER_FILTER,(function(e){return a.emit(m.$l.RENDER_FILTER)}))),a._tag.on("filter_change",(function(){return a.emit(_.jK.CHANGE_STYLE_VIEW)})),a}return a()(o,[{key:"id",value:function(){return this._id}},{key:"remove",value:function(){this._tag.remove()}},{key:"configure",value:function(e){this._tag.configure(e)}},{key:"style",value:function(){return this._tag.filter()}},{key:"filter",value:function(){return(0,v.J)(this._filter.get())}}]),o}(p.I)},8336:(e,t,n)=>{"use strict";n.d(t,{w:()=>v});var r=n(4575),i=n.n(r),o=n(3913),a=n.n(o),s=n(2205),c=n.n(s),l=n(8585),u=n.n(l),d=n(9754),h=n.n(d),f=n(7065),p=n(271),_=(n(6001),n(2130));var v=function(e){c()(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=h()(t);if(n){var i=h()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return u()(this,e)});function o(e,t){var n;return i()(this,o),(n=r.call(this))._model=e,n._view=t,n._view.on(_.$l.SET_FILTER,(function(e){return n.select(e,e.recursevely,e.unselect)})),n._model.on(_.$l.RENDER_DATA,(function(e){return n.emit(_.$l.RENDER_DATA,e)})).on(_.$l.RENDER_FILTER,(function(e){return n.emit(_.$l.RENDER_FILTER,e)})),n}return a()(o,[{key:"add_option",value:function(e){this._model.add_option(e)}},{key:"select",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];this._model.select(e,t,n,r)}},{key:"filter",value:function(e){return this._model.filter(e)}},{key:"filter_options",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._model.filter_options(e,t)}},{key:"get",value:function(){return this._model.get()}},{key:"update",value:function(e){this._model.update(e)}}],[{key:"filter",value:function(e,t){return p.D.filter(e,t)}}]),o}(f.I)},8977:(e,t,n)=>{"use strict";n.d(t,{dV:()=>s,eC:()=>c,B9:()=>l}),n(9713);var r=n(5334),i=n(271),o=n(6001),a=n(8336);function s(e){var t={sid:{},time:null,dir:Object.keys(r.kc),type:Object.keys(r.DI),ctype:[],session:{},app:[]};return t.appf=Object.assign([],e.appf),t.ctype=Object.assign([],e.ctype),Object.keys(e.sid).forEach((function(n){t.sid[n]={},Object.keys(e[n]).forEach((function(r){t[n][r]=Object.assign([],e[n][r])}))})),Object.keys(e.session).forEach((function(n){t[n]=Object.assign([],e[n])})),t}function c(e){return Array.isArray(e)||(e=[e]),{sid:e}}function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=new i.D(t,n);return new a.w(s,new o.W(s,e,r))}n(4580)},2124:(e,t,n)=>{"use strict";n.d(t,{d:()=>r});var r=document.createElement("template");r.innerHTML="\n<style>\n    .filter-row-attr\n    {\n        padding: 1px;\n        margin: 1px;\n        margin-left: 1px;\n        margin-right: 1px;\n        background-color: bisque;\n        display: inline-block;\n        border-radius: 5px;\n    }\n\n    .filter-button\n    {\n        outline: none;\n    }\n\n    .filter-button:hover\n    {\n        filter: brightness(115%);\n        cursor: pointer;\n    }\n\n    .filter-button:first-child\n    {\n        border-top-left-radius: 5px;\n        border-bottom-left-radius: 5px;\n    }\n\n    .filter-button:last-child\n    {\n        border-top-right-radius: 5px;\n        border-bottom-right-radius: 5px;\n    }\n\n    .filter-selected{\n        border-style: inset;\n        background-color: darkgray;\n        color: white;\n    }\n\n    .filter-unselected{\n        border-style: outset;\n    }\n\n    /*\n    *\n    */\n    .filter-sid\n    {\n        background-color: bisque;\n        padding: 2px;\n        display: inline-flex;\n        flex-direction: row;\n        flex-wrap: wrap;\n        margin-right: 2px;\n        border-radius: 5px;\n        border: 3px solid brown;\n    }\n\n    .filter-sid-app\n    {\n        display: inline-block;\n        margin-right: 4px;\n    }\n\n    .filter-sid-app-id\n    {\n        display: inline-block;\n        margin-right: 4px;\n    }\n\n    .filter-button-app\n    {\n        border-top-right-radius: 0px !important;\n        border-bottom-right-radius: 0px !important;\n    }\n\n    .filter-button-id\n    {\n    /*    margin-right: 2px;*/\n    }\n\n    .filter-commands label\n    {\n        background-color: antiquewhite;\n        padding: 1px;\n        border-radius: 3px;\n    }\n</style>\n<div id=filter-list></div>"},5334:(e,t,n)=>{"use strict";n.d(t,{DI:()=>u,$M:()=>d,kc:()=>h,T5:()=>f,Qb:()=>p,bj:()=>_});var r=n(4575),i=n.n(r),o=n(3913),a=n.n(o),s=n(8),c=n.n(s),l=n(1925),u={data:{value:"data",name:"data"},control:{value:"control",name:"control"}};Object.freeze(u);var d={status:{value:"status",name:"status"},error:{value:"error",name:"error"},open:{value:"open",name:"open"},close:{value:"close",name:"close"},config:{value:"config",name:"config"},custom:{value:"custom",name:"custom"}};Object.freeze(d);var h={sent:{value:"sent",name:">>"},received:{value:"received",name:"<<"}};function f(e){if("data_field"in e&&e.data_field>=0){var t=e.data[e.data_field];if("string"==typeof t||t instanceof Uint8Array)return t;if(Array.isArray(t))return new Uint8Array(t);if("object"===c()(t))return new Uint8Array(Object.values(t))}return!1}function p(){return 1e3*parseInt(Date.now())}Object.freeze(h);var _=function(){function e(){i()(this,e)}return a()(e,null,[{key:"create",value:function(e,t,n,r){var i={};if(i.app=e,i.time=p(),!(0,l.yp)(u,t))return!1;if(i.type=t,t==u.control.value){if(!(0,l.yp)(d,n))return!1;i.ctype=n}return r&&(i.data=r),i}}]),e}()},9232:(e,t,n)=>{"use strict";n.d(t,{K:()=>S});var r=n(9713),i=n.n(r),o=n(4575),a=n.n(o),s=n(3913),c=n.n(s),l=n(4766),u=n(8977),d=n(8336),h=n(6177),f=n(6810),p=n(1646),_=n(4399),v=n(6200),m=n(319),y=n.n(m);function g(e,t){return"string"!=typeof e?e:-1!=y()(e).findIndex((function(e){return e==t||" "==e||"\n"==e}))?'"'.concat(e,'"'):e}var b=n(4596),k=n(1925),w=n(4419);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var S=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};a()(this,e),this._data=t,this._container=n,this._options=x(x({},{time_format:l.Cu.DATETIME.value,time_precision:l.Ec.MILISECONDS.value,data_format:p.uw.NONE.value,select:f.kg,filter:{},stringify:!0}),r),this.open()}return c()(e,[{key:"_select",value:function(e,t){switch(e){case"json":t.querySelector("#json-options").style.display="inline-block",t.querySelector("#csv-options").style.display="none",t.querySelector("#html-options").style.display="none";break;case"csv":t.querySelector("#json-options").style.display="none",t.querySelector("#csv-options").style.display="inline-block",t.querySelector("#html-options").style.display="none";break;case"html":t.querySelector("#json-options").style.display="none",t.querySelector("#csv-options").style.display="none",t.querySelector("#html-options").style.display="none"}}},{key:"open",value:function(){var e=this,t=document.createElement("div"),n=t.attachShadow({mode:"open"});t.style.padding="10px",n.appendChild(w.XK.content.cloneNode(!0)),this._select("json",n),n.querySelector("#file-format").onchange=function(t){e._select(t.path[0].value,n)};var r=(0,h.C)(n.querySelector("#select"),this._options.select),i=(0,u.B9)(n.querySelector("#filter"),null,this._options.filter),o=n.querySelector("#time-format"),a=o.querySelector("[value=".concat(this._options.time_format,"]"));a&&(a.selected=!0);var s=n.querySelector("#time-precision"),c=s.querySelector("[value=".concat(this._options.time_precision,"]"));c&&(c.selected=!0);var l=n.querySelector("#data-format"),d=l.querySelector("[value=".concat(this._options.data_format,"]"));d&&(d.selected=!0),n.querySelector("#ok-button").onclick=function(){e._options.time_format=o.selectedOptions[0].value||e._options.time_format,e._options.time_precision=s.selectedOptions[0].value||e._options.time_precision,e._options.data_format=l.selectedOptions[0].value||e._options.data_format;var t=(0,_.vr)(n.querySelector("#file-format")).value,a=n.querySelector("#file-name").value.trim();if(a.length){var c;switch(a.slice(-(t.length+1))!=="."+t&&(a+="."+t),e._options.select=r.select(),e._options.stringify=!0,e._options.filter=i.get(),t){case"csv":c=e.save_csv(e._format_data(),{sep:n.querySelector("#csv-sep").checked});break;case"html":c=e.save_html(e._format_data(),{});break;case"json":c=e.save_json({prettify:n.querySelector("#json-prettify").checked,custom_paint:n.querySelector("#json-custom-paint").checked,state:n.querySelector("#json-state").checked,select:n.querySelector("#json-select").checked})}(0,k.LR)(a,c),e.close()}else e.print_error(n,"File name can't be empty")},this._container.appendChild(t)}},{key:"save_json",value:function(e){var t=this,n=[];this._data.forEach((function(e){d.w.filter(t._options.filter,e.data)&&n.push(e.data)}));var r={data:n};return e.custom_paint&&(r.custom_paint=this._options.custom_paint),e.select&&(r.select=this._options.select),e.state&&(r.state={time:{format:this._options.time_format,precision:this._options.time_precision},type:this._options.data_format}),JSON.stringify(r,null,e.prettify?2:0)}},{key:"save_csv",value:function(e,t){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{header:null,sep:",",add_cr:!1,add_sep:!1},n=t.sep||",",r=t.header||null,i=t.add_cr?"\r\n":"\n",o="";t.add_sep&&(o+="sep=".concat(n).concat(i));var a=n+" ";return r&&(r.forEach((function(e){o+=g(e,n)+a})),o=o.slice(0,-2)+i),e.forEach((function(e){e.forEach((function(e){o+=g(e,n)+a})),o=o.slice(0,-2)+i})),o.slice(-i.length),o}(e,{header:this._options.select,add_sep:t.sep})}},{key:"save_html",value:function(e,t){var n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{header:null,footer:null},n=t.header||null,r=t.footer||null,i=document.createElement("table");if(n){var o=document.createElement("thead"),a=document.createElement("tr");n.forEach((function(e){var t=document.createElement("th");t.textContent=e,a.appendChild(t)})),o.appendChild(a),i.appendChild(o)}if(r){var s=document.createElement("tfoot"),c=document.createElement("tr");r.forEach((function(e){var t=document.createElement("td");t.textContent=e,c.appendChild(t)})),s.appendChild(c),i.appendChild(s)}var l=document.createElement("tbody");return e.forEach((function(e){var t=document.createElement("tr");e.forEach((function(e){var n=document.createElement("td");n.textContent=e,t.appendChild(n)})),l.appendChild(t)})),i.appendChild(l),i}(e,{header:this._options.select});return(0,b.tN)(n,w.tt).outerHTML}},{key:"close",value:function(){this._container.dispatchEvent(new Event("close"))}},{key:"print_error",value:function(e,t){e.querySelector("#error").value=t}},{key:"_format_data",value:function(){var e=this,t=(0,v.ZR)(this._data,this._options),n=[];return t.forEach((function(t){var r=[];e._options.select.forEach((function(e){return r.push(t[e])})),n.push(r)})),n}}]),e}()},4687:(e,t,n)=>{"use strict";n.d(t,{P:()=>v});var r=n(4575),i=n.n(r),o=n(3913),a=n.n(o),s=n(2205),c=n.n(s),l=n(8585),u=n.n(l),d=n(9754),h=n.n(d),f=n(7065),p=n(3551),_=(n(9589),n(6810));var v=function(e){c()(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=h()(t);if(n){var i=h()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return u()(this,e)});function o(e,t){var n;return i()(this,o),(n=r.call(this))._model=e,n._view=t,n._model.on(_.$r.RENDER_DATA,(function(e){return n.emit(_.$r.RENDER_DATA,e)})),n._view.on(_.$r.SET_SELECTED,(function(e){return n._model.set_select(e.type,e.column)})),n._view.render(),n}return a()(o,[{key:"is_selected",value:function(e){return this._model.is_selected(e)}},{key:"select",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this._model.select(e)}},{key:"columns",value:function(){return this._model.columns()}},{key:"add",value:function(e){this._model.add(e)}},{key:"remove",value:function(e){this._model.remove(e)}}],[{key:"is_selected",value:function(e,t){return p.N.is_selected(e,t)}}]),o}(f.I)},6177:(e,t,n)=>{"use strict";n.d(t,{C:()=>s});var r=n(3551),i=n(9589),o=n(4687),a=n(6810);function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.kg,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.JK,s=new r.N(t,n);return new o.P(s,new i.U(s,e))}},6002:(e,t,n)=>{"use strict";n.d(t,{O7:()=>r,bM:()=>i,$P:()=>o,ln:()=>a,RF:()=>s,bt:()=>c,Om:()=>l});var r={SEND_MESSAGE:"send message",INPUT_REGISTER:"input register",RECEIVED_MESSAGE:"received message",SENT:"sent",SHOW_MESSAGE:"show message",SERVER_NAME_CHANGE:"server name change",CLOSE_SERVER:"close server",SERVER_CONNECTED:"server connected",ADD_CONNECTION:"add connection",REMOVE_CONNECTION:"remove connection",ADD_APP:"new app added",ADD_LOCAL_APP:"new local pp added"};Object.freeze(r);var i={ID:"id",ID_STRING:"id_str",FROM:"from",FROM_STRING:"from_str",DATA_OUTPUT:"data_output",DATA_FIELD:"data_field"};Object.freeze(i);var o={plain:{value:"ws",name:"Plain"},secure:{value:"wss",name:"SSL"}};Object.freeze(o);var a="127.0.0.1",s=8080,c={CONFIG_SEND:"config_send",CONFIG_RECEIVED:"config_recv",RECEIVED:"received",SENT:"sent"};Object.freeze(c);var l={app_custom_paint:!1}},7203:(e,t,n)=>{"use strict";function r(){for(var e="#",t=0;t<6;t++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e}function i(e){return e.replace(/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])$/,"#$1$1$2$2$3$3")}n.d(t,{E:()=>r,c:()=>i})},9018:(e,t,n)=>{"use strict";function r(e){return e.composedPath&&e.composedPath()||evt.path}n.d(t,{I:()=>r,e:()=>i});var i=navigator.userAgent.includes("Chrome")&&navigator.vendor.includes("Google Inc")},4596:(e,t,n)=>{"use strict";function r(e,t){return t?(Object.assign(e.style,t),e):e}function i(e){var t=document.createElement("template");return r(t,e),t.style.cssText}function o(e,t){var n=document.createElement("style");return n.textContent="".concat(e,"{").concat(i(t),"}"),n}function a(e,t,n){e.textContent="".concat(t,"{").concat(i(n),"}")}function s(e,t){var n=document.createElement("style");n.textContent=t;var r=document.createElement("div");return r.appendChild(n),r.appendChild(e),r}function c(e){e.scrollTop=e.scrollHeight}n.d(t,{yn:()=>r,DQ:()=>o,cT:()=>a,tN:()=>s,Mf:()=>c})},1925:(e,t,n)=>{"use strict";n.d(t,{yp:()=>o,WW:()=>a,LR:()=>s});var r=n(8),i=n.n(r);function o(e,t){return console.assert("object"===i()(e),e,"is not a object"),t in e}function a(e){var t=document.createElement("template");return e=e.trim(),t.innerHTML=e,t.content.firstChild}function s(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{type:"text/plain"},r=new Blob([t],n);if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveBlob(r,e);else{var i=window.document.createElement("a");i.href=window.URL.createObjectURL(r),i.download=e,document.body.appendChild(i),i.click(),document.body.removeChild(i)}}},961:(e,t,n)=>{"use strict";function r(e){return/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(e)}function i(e){return"string"==typeof e&&/^([a-zA-Z0-9-]+\.)+[a-zA-Z]{2,6}$/.test(e)}function o(e){if("string"==typeof e){if("string"!=typeof(t=e)||!/^[-+]?[0-9]+$/.test(t))return!1;e=parseInt(e)}var t;return!(Number.isNaN(e)||e<=0||e>65535)&&e}function a(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.assert("number"==typeof e,'"num" must be a number');var n=("0"+e.toString(16)).substr(-2,2);return t?"0x"+n:n}n.d(t,{Ch:()=>r,uX:()=>i,S0:()=>o,LD:()=>a}),n(8)},4399:(e,t,n)=>{"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e){return new Promise((function(t){return setTimeout(t,e)}))}function o(e){for(var t,n=0,r=e.options.length;n<r&&!0!==(t=e.options[n]).selected;n++)t=!1;return t}function a(e,t){for(var n,r=0,i=e.options.length;r<i;r++)(n=e.options[r]).selected=!1,n.value===t&&(n.selected=!0);return n}function s(e){var t,n=!1,i=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw a}}}}(e.querySelectorAll("input[type=radio]"));try{for(i.s();!(t=i.n()).done;){var o=t.value;if(!0===o.checked){n=o;break}}}catch(e){i.e(e)}finally{i.f()}return n}n.d(t,{_v:()=>i,Jc:()=>o,f1:()=>a,vr:()=>s})},2201:(e,t,n)=>{"use strict";n.d(t,{_P:()=>o});var r=n(8),i=n.n(r);function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;console.assert("object"===i()(t),"Parameter must be a object");var r=document.createElement("form");return Object.keys(t).forEach((function(i,o){var a=document.createElement("input");a.setAttribute("name",e),a.setAttribute("type","radio"),a.setAttribute("value",i),o==n&&a.setAttribute("checked",!0),r.appendChild(a);var s=document.createElement("label");s.appendChild(a),s.appendChild(document.createTextNode(t[i])),r.appendChild(s)})),r}},1996:(e,t,n)=>{"use strict";n.d(t,{J:()=>o,H:()=>a});var r=n(8),i=n.n(r);function o(e){return e instanceof Array?Object.assign([],e):"object"==i()(e)&&Object.assign({},e)}function a(e){return e instanceof Array?0==e.length:0===Object.keys(e).length&&e.constructor===Object}},1067:(e,t,n)=>{"use strict";function r(e,t){for(var n="",r=0;r<t;r++)n+="0";return(n+e).slice(-t)}function i(e){var t=document.createElement("input");t.style.opacity="0",t.style["pointer-events"]="none",document.body.appendChild(t),t.value=e,t.focus(),t.select(),document.execCommand("copy"),document.body.removeChild(t)}n.d(t,{Du:()=>r,ZP:()=>i,WA:()=>o});var o=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return e.apply(void 0,r.concat(n))}}},6251:(e,t,n)=>{"use strict";n.d(t,{kc:()=>b,Fg:()=>k,lR:()=>w});var r=n(9713),i=n.n(r),o=n(4575),a=n.n(o),s=n(3913),c=n.n(s),l=n(2205),u=n.n(l),d=n(8585),h=n.n(d),f=n(9754),p=n.n(f),_=n(5957),v=n.n(_),m=n(5797);function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var b=function(e){u()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=p()(t);if(n){var i=p()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return h()(this,e)});function i(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return a()(this,i),(t=r.call(this,e.message))._code=e.code,t._arg=n,t}return c()(i,[{key:"code",get:function(){return this._code}},{key:"arg",get:function(){return this._arg}}]),i}(v()(Error));function k(e){return console.assert("string"==typeof e,"Wrong argument"),e.match(/\\x[0-9a-f]{1,2}|\\[0abefnrtv\\]|.{1}|\n/gi).map((function(e){return 1===e.length?e.charCodeAt(0):(e=e.slice(1))in m.Xs?m.Xs[e].hex:parseInt(e.slice(1),16)}))}var w=function(){function e(){a()(this,e)}return c()(e,null,[{key:"raw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=[];return null!=t&&(t instanceof Array||t instanceof Uint8Array)&&e.is_uint8_array(t)&&(n=t instanceof Array?Object.assign([],t):Array.from(t)),n}},{key:"_set_arr_option",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.hasOwnProperty("sep")?t.sep:" ",r=t.hasOwnProperty("aggregate")?t.aggregate:0,i="";return e.forEach((function(e,t){r>1&&t%r!=0||0!=t&&(i+=n),i+=e})),i}},{key:"_set_data_opt",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=""+e;var n=t.hasOwnProperty("pad_size")?t.pad_size:0,r=t.hasOwnProperty("pad_char")?t.pad_char:"0";return e.padStart(n,r)}},{key:"_separator",value:function(e,t,n,r){if(null===t)return e;if(void 0===t)return n?n(e):e;if(t){if(t instanceof RegExp)return e.replace(t,"");if("string"==typeof t)return e.replace(new RegExp("[".concat(t,"]"),"g"),r);throw new b(m.GR.WRONG_ARGUMENT,t)}return e}},{key:"invalid_number_char",value:function(e){return/[^\+\-0-9 ]+/.test(e)}},{key:"to_hex_string",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!("number"==typeof e&&e>=0&&e<=255))throw new b(m.GR.WRONG_ARGUMENT,e);return t?e.toString(16).toUpperCase():e.toString(16).toLowerCase()}},{key:"is_uint8_num",value:function(e){return e>=0&&e<=255}},{key:"is_uint8_array",value:function(t){return t.every((function(t){return e.is_uint8_num(t)}))}},{key:"clear_no_digit_char",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t=g(g({},{allowed:" "}),t),e.replace(new RegExp("[^0-9".concat(t.allowed,"]"),"g"),"")}},{key:"invalid_number_char",value:function(e){return/[^\+\-0-9 ]+/.test(e)}}]),e}()},3292:(e,t,n)=>{"use strict";n.d(t,{y:()=>f});var r=n(9713),i=n.n(r),o=n(4575),a=n.n(o),s=n(3913),c=n.n(s),l=n(6251),u=n(5797);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f=function(){function e(){a()(this,e)}return c()(e,null,[{key:"to",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=h(h({},{sep:" ",aggregate:0,pad_size:8,pad_char:"0"}),n),l.lR._set_arr_option(e.to_arr(t,n),n)}},{key:"to_arr",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=l.lR.raw(t);n=h(h({},{sep:" ",aggregate:0,pad_size:8,pad_char:"0"}),n);var i=[];return r.forEach((function(t){i.push(l.lR._set_data_opt(e.to_binary_string(t),n))})),i}},{key:"from",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};console.assert("string"==typeof t,"Argument must be a string");var r=h(h({},{separator:" ",padding:!0}),n);if(t=l.lR._separator(t,r.separator,e.clear_no_binary_char,""),!e.is_binary_string(t))throw new l.kc(u.GR.INVALID_CHAR,t);if(!r.padding&&t.length%8)throw new l.kc(u.GR.INVALID_SIZE,t.length%8);var i=t.match(/[01]{1,8}/gi).map((function(e){return parseInt(e,2)}));return i}},{key:"to_binary_string",value:function(e){if(!("number"==typeof e&&e>=0&&e<=255))throw new l.kc(u.GR.WRONG_ARGUMENT,e);return e.toString(2)}},{key:"clear_no_binary_char",value:function(e){return e.replace(/[^01]/g,"")}},{key:"is_binary_char",value:function(e){return"1"===e||"0"===e}},{key:"is_binary_string",value:function(t){for(var n=0,r=t.length;n<r;n++)if(!e.is_binary_char(t[n]))return!1;return!0}},{key:"num_bytes",value:function(){return 1}}]),e}()},9118:(e,t,n)=>{"use strict";n.d(t,{O:()=>b});var r=n(4575),i=n.n(r),o=n(3913),a=n.n(o),s=n(6251),c=n(5797),l=n(9709),u=n(3414),d=n(3292),h=n(5517),f=n(4964),p=n(8938),_=n(8639),v=n(8567),m=n(6850),y=n(3090),g=n(8083),b=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};i()(this,e),this._container=[],null===n?this.raw(t):this.from(t,n,r)}return a()(e,[{key:"from",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c.Nm.text.value,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!(t in c.Nm))throw new s.kc(c.GR.UNKNOW_TYPE,t);if("number"==typeof e&&(e="".concat(e)),"string"!=typeof e)throw new s.kc(c.GR.WRONG_ARGUMENT,e);return""===e?(this._container=[],""):(this._container=c.Nm[t].from(e,n),c.Nm[t].from(e,n))}},{key:"to",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(e in c.Nm))throw new s.kc(c.GR.UNKNOW_TYPE,e);return c.Nm[e].to(this._container,t)}},{key:"to_arr",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(e in c.Nm))throw new s.kc(c.GR.UNKNOW_TYPE,e);return c.Nm[e].to_arr(this._container,t)}},{key:"size",value:function(){return this._container.length}},{key:"raw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null!==t&&(this._container=e.raw(t)),Object.assign([],this._container)}},{key:"is_ascii_string",value:function(){return this._container.every((function(e){return l.a.is_ascii_int(e)}))}},{key:"raw_str",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.uint8(e)}},{key:"string",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return l.a.to(this._container,e)}},{key:"string_to_array",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._container=l.a.from(e,t),this._container}},{key:"hex",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return u.g.to(this._container,e)}},{key:"hex_arr",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return u.g.to_arr(this._container,e)}},{key:"string_hex_to_array",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._container=u.g.from(e,t),this._container}},{key:"binary",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return d.y.to(this._container,e)}},{key:"binary_arr",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return d.y.to_arr(this._container,e)}},{key:"string_binary_to_array",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._container=d.y.from(e,t),this._container}},{key:"int8",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return h.f.to(this._container,e)}},{key:"int8_arr",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return h.f.to_arr(this._container,e)}},{key:"string_int8_to_array",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._container=h.f.from(e,t),this._container}},{key:"uint8",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f.H.to(this._container,e)}},{key:"uint8_arr",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f.H.to_arr(this._container,e)}},{key:"string_uint8_to_array",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._container=f.H.from(e,t),this._container}},{key:"int16",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return p.G.to(this._container,e,t)}},{key:"int16_arr",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return p.G.to_arr(this._container,e,t)}},{key:"string_int16_to_array",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._container=p.G.from(e,t,n),this._container}},{key:"uint16",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _.p.to(this._container,e,t)}},{key:"uint16_arr",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _.p.to_arr(this._container,e,t)}},{key:"string_uint16_to_array",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._container=_.p.from(e,t,n),this._container}},{key:"int32",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return v.M.to(this._container,e,t)}},{key:"int32_arr",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return v.M.to_arr(this._container,e,t)}},{key:"string_int32_to_array",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._container=v.M.from(e,t,n),this._container}},{key:"uint32",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return m.E.to(this._container,e,t)}},{key:"uint32_arr",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return m.E.to_arr(this._container,e,t)}},{key:"string_uint32_to_array",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._container=m.E.from(e,t,n),this._container}},{key:"int64",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return y.V.to(this._container,e,t)}},{key:"int64_arr",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return y.V.to_arr(this._container,e,t)}},{key:"string_int64_to_array",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._container=y.V.from(e,t,n),this._container}},{key:"uint64",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return g.d.to(this._container,e,t)}},{key:"uint64_arr",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return g.d.to_arr(this._container,e,t)}},{key:"string_uint64_to_array",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._container=g.d.from(e,t,n),this._container}}],[{key:"parse",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!(t in c.Nm))throw new s.kc(c.GR.UNKNOW_TYPE,t);return c.Nm[t].from(e,n)}},{key:"num_bytes",value:function(e){if(!(e in c.Nm))throw new s.kc(c.GR.UNKNOW_TYPE,e);return c.Nm[e].num_bytes()}},{key:"is_valid_char",value:function(e,t){if(!(t in c.Nm))throw new s.kc(c.GR.UNKNOW_TYPE,t);return c.Nm[t].is_valid_char(e)}},{key:"clear_invalid_char",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!(t in c.Nm))throw new s.kc(c.GR.UNKNOW_TYPE,t);return c.Nm[t].clear_invalid_char(e,n)}},{key:"convert",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!(t in c.Nm)||!(n in c.Nm))throw new s.kc(c.GR.UNKNOW_TYPE,[t,n]);var i=c.Nm[t].from(e,r);return c.Nm[n].to(i,r)}},{key:"raw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return s.lR.raw(e)}},{key:"is_ascii_char",value:function(e){return l.a.is_ascii_char(e)}}]),e}()},3414:(e,t,n)=>{"use strict";n.d(t,{g:()=>f});var r=n(9713),i=n.n(r),o=n(4575),a=n.n(o),s=n(3913),c=n.n(s),l=n(6251),u=n(5797);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f=function(){function e(){a()(this,e)}return c()(e,null,[{key:"to",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=h(h({},{sep:" ",aggregate:2,pad_size:2,pad_char:"0"}),n),l.lR._set_arr_option(e.to_arr(t,n),n)}},{key:"to_arr",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=l.lR.raw(e);t=h(h({},{sep:" ",aggregate:2,pad_size:2,pad_char:"0"}),t);var r=[];return n.forEach((function(e){r.push(l.lR._set_data_opt(l.lR.to_hex_string(e,t.uppercase),t))})),r}},{key:"from",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};console.assert("string"==typeof t,"Argument must be a string");var r=h(h({},{separator:" ",padding:!0}),n);if(t=l.lR._separator(t,r.separator,e.clear_no_hex_char,""),!e.is_hex_string(t))throw new l.kc(u.GR.INVALID_CHAR,t);if(!r.padding&&t.length%2)throw new l.kc(u.GR.INVALID_SIZE,t.length%2);var i=t.match(/[\da-fA-F]{1,2}/gi).map((function(e){return parseInt(e,16)}));return i}},{key:"clear_no_hex_char",value:function(e){return e.replace(/[^0-9a-f]/gi,"")}},{key:"is_hex_char",value:function(e){return e>="0"&&e<="9"||e>="a"&&e<="f"||e>="A"&&e<="F"}},{key:"is_hex_string",value:function(t){for(var n=0,r=t.length;n<r;n++)if(!e.is_hex_char(t[n]))return!1;return!0}},{key:"num_bytes",value:function(){return 1}}]),e}()},8938:(e,t,n)=>{"use strict";n.d(t,{G:()=>f});var r=n(9713),i=n.n(r),o=n(4575),a=n.n(o),s=n(3913),c=n.n(s),l=n(6251),u=n(5797);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f=function(){function e(){a()(this,e)}return c()(e,null,[{key:"to",value:function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r=h(h({},{sep:" ",aggregate:0,pad_size:0,pad_char:" "}),r),l.lR._set_arr_option(e.to_arr(t,n,r),r)}},{key:"to_arr",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=l.lR.raw(e);n=h(h({},{padding:!0,sep:" ",aggregate:0,pad_size:0,pad_char:" "}),n);var i=[],o=new DataView(new Uint8Array(r).buffer),a=o.byteLength%2;if(!n.padding&&a)throw new l.kc(u.GR.INVALID_SIZE,a);for(var s=o.byteLength/2-a,c=0;c<s;c++)i.push(l.lR._set_data_opt(o.getInt16(2*c,t),n));if(a){var d=new ArrayBuffer(2),f=new Uint8Array(d);f.set(r.slice(-a),2-a),i.push(l.lR._set_data_opt(new DataView(f.buffer).getInt16(0,t),n))}return i}},{key:"from",value:function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};console.assert("string"==typeof t,"Argument must be a string");var i=h(h({},{separator:" "}),r);if(t=l.lR._separator(t,i.separator,null," "),void 0!==i.separator&&l.lR.invalid_number_char(t))throw new l.kc(u.GR.INVALID_CHAR,t);var o=t.match(/[+-]{0,1}[0-9]+/gi);if(!o)throw new l.kc(u.GR.WRONG_ARGUMENT,t);if(o=o.map((function(e){return parseInt(e,10)})),!e.is_int16_array(o))throw new l.kc(u.GR.OUT_OF_BOUND,o);var a=new ArrayBuffer(2*o.length),s=new DataView(a);o.forEach((function(e,t){s.setInt16(2*t,e,n)}));var c=new Uint8Array(a),d=[];return c.forEach((function(e){return d.push(e)})),d}},{key:"is_int16_array",value:function(t){return t.every((function(t){return e.is_int16_num(t)}))}},{key:"is_int16_num",value:function(e){return e>=-32768&&e<=32767}},{key:"num_bytes_int16",value:function(){return 2}}]),e}()},8567:(e,t,n)=>{"use strict";n.d(t,{M:()=>f});var r=n(9713),i=n.n(r),o=n(4575),a=n.n(o),s=n(3913),c=n.n(s),l=n(6251),u=n(5797);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f=function(){function e(){a()(this,e)}return c()(e,null,[{key:"to",value:function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r=h(h({},{sep:" ",aggregate:0,pad_size:0,pad_char:" "}),r),l.lR._set_arr_option(e.to_arr(t,n,r),r)}},{key:"to_arr",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=l.lR.raw(e);n=h(h({},{padding:!0,sep:" ",aggregate:0,pad_size:0,pad_char:" "}),n);var i=[],o=new DataView(new Uint8Array(r).buffer),a=o.byteLength%4;if(!n.padding&&a)throw new l.kc(u.GR.INVALID_SIZE,a);for(var s=o.byteLength/4-a,c=0;c<s;c++)i.push(l.lR._set_data_opt(o.getInt32(4*c,t),n));if(a){var d=new ArrayBuffer(4),f=new Uint8Array(d);f.set(r.slice(-a),4-a),i.push(l.lR._set_data_opt(new DataView(f.buffer).getInt32(0,t),n))}return i}},{key:"from",value:function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};console.assert("string"==typeof t,"Argument must be a string");var i=h(h({},{separator:" "}),r);if(t=l.lR._separator(t,i.separator,null," "),void 0!==i.separator&&l.lR.invalid_number_char(t))throw new l.kc(u.GR.INVALID_CHAR,t);var o=t.match(/[+-]{0,1}[0-9]+/gi);if(!o)throw new l.kc(u.GR.WRONG_ARGUMENT,t);if(o=o.map((function(e){return parseInt(e,10)})),!e.is_int32_array(o))throw new l.kc(u.GR.OUT_OF_BOUND,o);var a=new ArrayBuffer(4*o.length),s=new DataView(a);o.forEach((function(e,t){s.setInt32(4*t,e,n)}));var c=new Uint8Array(a),d=[];return c.forEach((function(e){return d.push(e)})),d}},{key:"is_int32_num",value:function(e){return e>=-2147483648&&e<=2147483647}},{key:"is_int32_array",value:function(t){return t.every((function(t){return e.is_int32_num(t)}))}},{key:"num_bytes_int32",value:function(){return 4}}]),e}()},3090:(e,t,n)=>{"use strict";n.d(t,{V:()=>f});var r=n(9713),i=n.n(r),o=n(4575),a=n.n(o),s=n(3913),c=n.n(s),l=n(6251),u=n(5797);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f=function(){function e(){a()(this,e)}return c()(e,null,[{key:"to",value:function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r=h(h({},{sep:" ",aggregate:0,pad_size:0,pad_char:" "}),r),l.lR._set_arr_option(e.to_arr(t,n,r),r)}},{key:"to_arr",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=l.lR.raw(e);n=h(h({},{padding:!0,sep:" ",aggregate:0,pad_size:0,pad_char:" "}),n);var i=[],o=new DataView(new Uint8Array(r).buffer),a=o.byteLength%8;if(!n.padding&&a)throw new l.kc(u.GR.INVALID_SIZE,a);for(var s=o.byteLength/8-a,c=0;c<s;c++)i.push(l.lR._set_data_opt(o.getBigInt64(8*c,t),n));if(a){var d=new ArrayBuffer(8),f=new Uint8Array(d);f.set(r.slice(-a),8-a),i.push(l.lR._set_data_opt(new DataView(f.buffer).getBigInt64(0,t),n))}return i}},{key:"from",value:function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};console.assert("string"==typeof t,"Argument must be a string");var i=h(h({},{separator:" "}),r);if(t=l.lR._separator(t,i.separator,null," "),void 0!==i.separator&&l.lR.invalid_number_char(t))throw new l.kc(u.GR.INVALID_CHAR,t);var o=t.match(/[-+]{0,1}[0-9]+/gi);if(!o)throw new l.kc(u.GR.WRONG_ARGUMENT,t);if(o=o.map((function(e){return parseInt(e,10)})),!e.is_int64_array(o))throw new l.kc(u.GR.OUT_OF_BOUND,o);var a=new ArrayBuffer(8*o.length),s=new DataView(a);o.forEach((function(e,t){s.setBigInt64(8*t,BigInt(e),n)}));var c=new Uint8Array(a),d=[];return c.forEach((function(e){return d.push(e)})),d}},{key:"is_int64_num",value:function(e){return e>=-0x8000000000000000&&e<=0x8000000000000000}},{key:"is_int64_array",value:function(t){return t.every((function(t){return e.is_int64_num(t)}))}},{key:"num_bytes_int64",value:function(){return 8}}]),e}()},5517:(e,t,n)=>{"use strict";n.d(t,{f:()=>f});var r=n(9713),i=n.n(r),o=n(4575),a=n.n(o),s=n(3913),c=n.n(s),l=n(6251),u=n(5797);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f=function(){function e(){a()(this,e)}return c()(e,null,[{key:"to",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=h(h({},{sep:" ",aggregate:0,pad_size:0,pad_char:" "}),n),l.lR._set_arr_option(e.to_arr(t,n),n)}},{key:"to_arr",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=l.lR.raw(e);t=h(h({},{sep:" ",aggregate:0,pad_size:0,pad_char:" "}),t);var r=[],i=new Int8Array(n);return i.forEach((function(e){r.push(l.lR._set_data_opt(e,t))})),r}},{key:"from",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};console.assert("string"==typeof t,"Argument must be a string");var r=h(h({},{separator:" "}),n);if(t=l.lR._separator(t,r.separator,null," "),void 0!==r.separator&&l.lR.invalid_number_char(t))throw new l.kc(u.GR.INVALID_CHAR,t);var i=t.match(/[+-]{0,1}[0-9]+/gi);if(!i)throw new l.kc(u.GR.WRONG_ARGUMENT,t);if(i=i.map((function(e){return parseInt(e,10)})),!e.is_int8_array(i))throw new l.kc(u.GR.OUT_OF_BOUND,i);var o=[],a=new Uint8Array(i);return a.forEach((function(e){return o.push(e)})),o}},{key:"is_int8_num",value:function(e){return e>=-128&&e<=127}},{key:"is_int8_array",value:function(t){return t.every((function(t){return e.is_int8_num(t)}))}},{key:"num_bytes",value:function(){return 1}}]),e}()},9709:(e,t,n)=>{"use strict";n.d(t,{a:()=>h});var r=n(9713),i=n.n(r),o=n(4575),a=n.n(o),s=n(3913),c=n.n(s),l=n(6251);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n(5797);var h=function(){function e(){a()(this,e)}return c()(e,null,[{key:"to",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=l.lR.raw(t),i=n.hasOwnProperty("prefix")?n.prefix:"\\x",o=n.hasOwnProperty("suffix")?n.suffix:"";n.pad_size=n.hasOwnProperty("pad_size")?n.pad_size:2,n.pad_char=n.hasOwnProperty("pad_char")?n.pad_char:"0";var a="";return r.forEach((function(t){a+=e.is_ascii_int(t)?String.fromCharCode(t):i+l.lR._set_data_opt(l.lR.to_hex_string(t),n)+o})),a}},{key:"from",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};console.assert("string"==typeof e,"Argument must be a string");var n=d(d({},{escaped_string:!0}),t),r=[];if(n.escaped_string)r=(0,l.Fg)(e);else{r=[];for(var i=0,o=e.length;i<o;i++)r.push(e.charCodeAt(i))}return r}},{key:"is_ascii_int",value:function(e){return e>=32&&e<126}},{key:"is_ascii_char",value:function(e){return 1===e.length}},{key:"is_ascii_string",value:function(t){for(var n=0,r=t.length;n<r;n++)if(!e.is_ascii_char(t[n]))return!1;return!0}},{key:"clear_no_digit_char",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t=d(d({},{allowed:" "}),t),e.replace(new RegExp("[^0-9".concat(t.allowed,"]"),"g"),"")}},{key:"num_bytes",value:function(){return 1}}]),e}()},8639:(e,t,n)=>{"use strict";n.d(t,{p:()=>f});var r=n(9713),i=n.n(r),o=n(4575),a=n.n(o),s=n(3913),c=n.n(s),l=n(6251),u=n(5797);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f=function(){function e(){a()(this,e)}return c()(e,null,[{key:"to",value:function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r=h(h({},{sep:" ",aggregate:0,pad_size:0,pad_char:" "}),r),l.lR._set_arr_option(e.to_arr(t,n,r),r)}},{key:"to_arr",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=l.lR.raw(e);n=h(h({},{padding:!0,sep:" ",aggregate:0,pad_size:0,pad_char:" "}),n);var i=[],o=new DataView(new Uint8Array(r).buffer),a=o.byteLength%2;if(!n.padding&&a)throw new l.kc(u.GR.INVALID_SIZE,a);for(var s=o.byteLength/2-a,c=0;c<s;c++)i.push(l.lR._set_data_opt(o.getUint16(2*c,t),n));if(a){var d=new ArrayBuffer(2),f=new Uint8Array(d);f.set(r.slice(-a),2-a),i.push(l.lR._set_data_opt(new DataView(f.buffer).getInt16(0,t),n))}return i}},{key:"from",value:function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=h(h({},{separator:" "}),r);if(t=l.lR._separator(t,i.separator,null," "),void 0!==i.separator&&l.lR.invalid_number_char(t))throw new l.kc(u.GR.INVALID_CHAR,t);var o=t.match(/[+-]{0,1}[0-9]+/gi);if(!o)throw new l.kc(u.GR.WRONG_ARGUMENT,t);if(o=o.map((function(e){return parseInt(e,10)})),!e.is_uint16_array(o))throw new l.kc(u.GR.OUT_OF_BOUND,o);var a=new ArrayBuffer(2*o.length),s=new DataView(a);o.forEach((function(e,t){s.setUint16(2*t,e,n)}));var c=new Uint8Array(a),d=[];return c.forEach((function(e){return d.push(e)})),d}},{key:"is_uint16_num",value:function(e){return e>=0&&e<=65535}},{key:"is_uint16_array",value:function(t){return t.every((function(t){return e.is_uint16_num(t)}))}},{key:"num_bytes",value:function(){return 2}}]),e}()},6850:(e,t,n)=>{"use strict";n.d(t,{E:()=>f});var r=n(9713),i=n.n(r),o=n(4575),a=n.n(o),s=n(3913),c=n.n(s),l=n(6251),u=n(5797);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f=function(){function e(){a()(this,e)}return c()(e,null,[{key:"to",value:function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r=h(h({},{sep:" ",aggregate:0,pad_size:0,pad_char:" "}),r),l.lR._set_arr_option(e.to_arr(t,n,r),r)}},{key:"to_arr",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=l.lR.raw(e);n=h(h({},{padding:!0,sep:" ",aggregate:0,pad_size:0,pad_char:" "}),n);var i=[],o=new DataView(new Uint8Array(r).buffer),a=o.byteLength%4;if(!n.padding&&a)throw new l.kc(u.GR.INVALID_SIZE,a);for(var s=o.byteLength/4-a,c=0;c<s;c++)i.push(l.lR._set_data_opt(o.getUint32(4*c,t),n));if(a){var d=new ArrayBuffer(4),f=new Uint8Array(d);f.set(r.slice(-a),4-a),i.push(l.lR._set_data_opt(new DataView(f.buffer).getUint32(0,t),n))}return i}},{key:"from",value:function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};console.assert("string"==typeof t,"Argument must be a string");var i=h(h({},{separator:" "}),r);if(t=l.lR._separator(t,i.separator,null," "),void 0!==i.separator&&l.lR.invalid_number_char(t))throw new l.kc(u.GR.INVALID_CHAR,t);var o=t.match(/[+-]{0,1}[0-9]+/gi);if(!o)throw new l.kc(u.GR.WRONG_ARGUMENT,t);if(o=o.map((function(e){return parseInt(e,10)})),!e.is_uint32_array(o))throw new l.kc(u.GR.OUT_OF_BOUND,o);var a=new ArrayBuffer(4*o.length),s=new DataView(a);o.forEach((function(e,t){s.setUint32(4*t,e,n)}));var c=new Uint8Array(a),d=[];return c.forEach((function(e){return d.push(e)})),d}},{key:"is_uint32_num",value:function(e){return e>=0&&e<=4294967295}},{key:"is_uint32_array",value:function(t){return t.every((function(t){return e.is_uint32_num(t)}))}},{key:"num_bytes",value:function(){return 4}}]),e}()},8083:(e,t,n)=>{"use strict";n.d(t,{d:()=>f});var r=n(9713),i=n.n(r),o=n(4575),a=n.n(o),s=n(3913),c=n.n(s),l=n(6251),u=n(5797);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f=function(){function e(){a()(this,e)}return c()(e,null,[{key:"to",value:function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r=h(h({},{sep:" ",aggregate:0,pad_size:0,pad_char:" "}),r),l.lR._set_arr_option(e.to_arr(t,n,r),r)}},{key:"to_arr",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=l.lR.raw(e);n=h(h({},{padding:!0,sep:" ",aggregate:0,pad_size:0,pad_char:" "}),n);var i=[],o=new DataView(new Uint8Array(r).buffer),a=o.byteLength%8;if(!n.padding&&a)throw new l.kc(u.GR.INVALID_SIZE,a);for(var s=o.byteLength/8-a,c=0;c<s;c++)i.push(l.lR._set_data_opt(o.getBigUint64(8*c,t),n));if(a){var d=new ArrayBuffer(8),f=new Uint8Array(d);f.set(r.slice(-a),8-a),i.push(l.lR._set_data_opt(new DataView(f.buffer).getBigUint64(0,t),n))}return i}},{key:"from",value:function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};console.assert("string"==typeof t,"Argument must be a string");var i=h(h({},{separator:" "}),r);if(t=l.lR._separator(t,i.separator,null," "),void 0!==i.separator&&l.lR.invalid_number_char(t))throw new l.kc(u.GR.INVALID_CHAR,t);var o=t.match(/[-+]{0,1}[0-9]+/gi);if(!o)throw new l.kc(u.GR.WRONG_ARGUMENT,t);if(o=o.map((function(e){return parseInt(e,10)})),!e.is_uint64_array(o))throw new l.kc(u.GR.OUT_OF_BOUND,o);var a=new ArrayBuffer(8*o.length),s=new DataView(a);o.forEach((function(e,t){s.setBigUint64(8*t,BigInt(e),n)}));var c=new Uint8Array(a),d=[];return c.forEach((function(e){return d.push(e)})),d}},{key:"is_uint64_num",value:function(e){return e>=0&&e<=0x10000000000000000}},{key:"is_uint64_array",value:function(t){return t.every((function(t){return e.is_uint64_num(t)}))}},{key:"num_bytes_uint64",value:function(){return 8}}]),e}()},4964:(e,t,n)=>{"use strict";n.d(t,{H:()=>f});var r=n(9713),i=n.n(r),o=n(4575),a=n.n(o),s=n(3913),c=n.n(s),l=n(6251),u=n(5797);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f=function(){function e(){a()(this,e)}return c()(e,null,[{key:"to",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=h(h({},{sep:" ",aggregate:0,pad_size:0,pad_char:" "}),n),l.lR._set_arr_option(e.to_arr(t,n),n)}},{key:"to_arr",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=l.lR.raw(e);t=h(h({},{sep:" ",aggregate:0,pad_size:0,pad_char:" "}),t);var r=[],i=new Uint8Array(n);return i.forEach((function(e){r.push(l.lR._set_data_opt(e,t))})),r}},{key:"from",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};console.assert("string"==typeof t,"Argument must be a string");var r=h(h({},{separator:" "}),n);if(t=l.lR._separator(t,r.separator,null," "),void 0!==r.separator&&l.lR.invalid_number_char(t))throw new l.kc(u.GR.INVALID_CHAR,t);var i=t.match(/[+-]{0,1}[0-9]+/gi);if(!i)throw new l.kc(u.GR.WRONG_ARGUMENT,t);if(i=i.map((function(e){return parseInt(e,10)})),!e.is_uint8_array(i))throw new l.kc(u.GR.OUT_OF_BOUND,i);return i}},{key:"is_uint8_num",value:function(e){return e>=0&&e<=255}},{key:"is_uint8_array",value:function(t){return t.every((function(t){return e.is_uint8_num(t)}))}},{key:"num_bytes",value:function(){return 1}}]),e}()},7065:(e,t,n)=>{"use strict";n.d(t,{I:()=>s});var r=n(4575),i=n.n(r),o=n(3913),a=n.n(o),s=function(){function e(){i()(this,e),this._events={}}return a()(e,[{key:"on",value:function(e,t){return(this._events[e]||(this._events[e]=[])).push(t),this}},{key:"emit",value:function(e,t){(this._events[e]||[]).slice().forEach((function(e){return e(t)}))}},{key:"clean",value:function(){this._events={}}}]),e}()},4766:(e,t,n)=>{"use strict";n.d(t,{Cu:()=>l,Ec:()=>u,uc:()=>h});var r=n(4575),i=n.n(r),o=n(3913),a=n.n(o),s=n(1067),c=n(317),l={DATE:{name:"date",value:"data",format:"%d/%m/%Y"},TIME:{name:"time",value:"time",format:"%H:%M:%S"},DATETIME:{name:"date/time",value:"datetime",format:"%d/%m/%Y %H:%M:%S"},EPOCH:{name:"unix timesptamp",value:"epoch",format:"%s"},ISO:{name:"UTC-ISO",value:"iso",format:"%Y-%m-%dT%H:%M:%S.%LZ"}},u={SECONDS:{name:"seconds",value:"sec"},MILISECONDS:{name:"miliseconds",value:"mili"},MICROSECONDS:{name:"microseconds",value:"micro"}};function d(e){return Object.values(l).find((function(t){return t.value==e}))||l.TIME}var h=function(){function e(){i()(this,e)}return a()(e,null,[{key:"format",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.TIME.value,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u.MILISECONDS.value,r=Math.floor(e/1e3),i=(0,c.i$)(d(t).format)(r);if(t===l.ISO.value||t===l.DATE.value)return i;var o="";switch(n){case u.MICROSECONDS.value:o+=".".concat((0,s.Du)(e%1e6,6));break;case u.MILISECONDS.value:o=".".concat((0,s.Du)(r%1e3,3));break;case u.SECONDS.value:}return i+o}}]),e}()},4850:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(3645),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,'/**\n * Copyright (c) 2014 The xterm.js authors. All rights reserved.\n * Copyright (c) 2012-2013, Christopher Jeffrey (MIT License)\n * https://github.com/chjj/term.js\n * @license MIT\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the "Software"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n *\n * Originally forked from (with the author\'s permission):\n *   Fabrice Bellard\'s javascript vt100 for jslinux:\n *   http://bellard.org/jslinux/\n *   Copyright (c) 2011 Fabrice Bellard\n *   The original design remains. The terminal itself\n *   has been extended to include xterm CSI codes, among\n *   other features.\n */\n\n/**\n *  Default styles for xterm.js\n */\n\n.xterm {\n    font-feature-settings: "liga" 0;\n    position: relative;\n    user-select: none;\n    -ms-user-select: none;\n    -webkit-user-select: none;\n}\n\n.xterm.focus,\n.xterm:focus {\n    outline: none;\n}\n\n.xterm .xterm-helpers {\n    position: absolute;\n    top: 0;\n    /**\n     * The z-index of the helpers must be higher than the canvases in order for\n     * IMEs to appear on top.\n     */\n    z-index: 5;\n}\n\n.xterm .xterm-helper-textarea {\n    padding: 0;\n    border: 0;\n    margin: 0;\n    /* Move textarea out of the screen to the far left, so that the cursor is not visible */\n    position: absolute;\n    opacity: 0;\n    left: -9999em;\n    top: 0;\n    width: 0;\n    height: 0;\n    z-index: -5;\n    /** Prevent wrapping so the IME appears against the textarea at the correct position */\n    white-space: nowrap;\n    overflow: hidden;\n    resize: none;\n}\n\n.xterm .composition-view {\n    /* TODO: Composition position got messed up somewhere */\n    background: #000;\n    color: #FFF;\n    display: none;\n    position: absolute;\n    white-space: nowrap;\n    z-index: 1;\n}\n\n.xterm .composition-view.active {\n    display: block;\n}\n\n.xterm .xterm-viewport {\n    /* On OS X this is required in order for the scroll bar to appear fully opaque */\n    background-color: #000;\n    overflow-y: scroll;\n    cursor: default;\n    position: absolute;\n    right: 0;\n    left: 0;\n    top: 0;\n    bottom: 0;\n}\n\n.xterm .xterm-screen {\n    position: relative;\n}\n\n.xterm .xterm-screen canvas {\n    position: absolute;\n    left: 0;\n    top: 0;\n}\n\n.xterm .xterm-scroll-area {\n    visibility: hidden;\n}\n\n.xterm-char-measure-element {\n    display: inline-block;\n    visibility: hidden;\n    position: absolute;\n    top: 0;\n    left: -9999em;\n    line-height: normal;\n}\n\n.xterm {\n    cursor: text;\n}\n\n.xterm.enable-mouse-events {\n    /* When mouse events are enabled (eg. tmux), revert to the standard pointer cursor */\n    cursor: default;\n}\n\n.xterm.xterm-cursor-pointer {\n    cursor: pointer;\n}\n\n.xterm.column-select.focus {\n    /* Column selection mode */\n    cursor: crosshair;\n}\n\n.xterm .xterm-accessibility,\n.xterm .xterm-message {\n    position: absolute;\n    left: 0;\n    top: 0;\n    bottom: 0;\n    right: 0;\n    z-index: 10;\n    color: transparent;\n}\n\n.xterm .live-region {\n    position: absolute;\n    left: -9999px;\n    width: 1px;\n    height: 1px;\n    overflow: hidden;\n}\n\n.xterm-dim {\n    opacity: 0.5;\n}\n\n.xterm-underline {\n    text-decoration: underline;\n}\n',""]);const o=i},387:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(3645),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,"#op-container\n{\n    display: inline-flex;\n    flex-direction: row;\n}\n\n#button-geo\n{\n    font-size: 60px;\n    border-radius: 15px;\n    outline: none;\n    cursor: pointer;\n}\n\n#button-geo:after\n{\n    content: '\\1F310';\n}\n\n.option\n{\n    margin-bottom: 1px;\n    margin-left: 1px;\n}\n\n.input-number\n{\n    width: 23ch;\n    padding: 4px 0px;\n}\n\n.pressed{\n    border-style: inset;\n    background-color: darkgrey;\n}\n\n#error{\n    background-color: red;\n    color: white;\n}",""]);const o=i},9296:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(3645),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,"#op-container\n{\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n}\n\n#in-op-container\n{\n    display: flex;\n    flex-direction: row;\n}\n\n#button-ori\n{\n    font-size: 60px;\n    border-radius: 15px;\n    outline: none;\n    cursor: pointer;\n}\n\n#button-ori:after\n{\n    content: '\\2725';\n}\n\n.option\n{\n    margin-bottom: 1px;\n}\n\n#watch-interval\n{\n    width: 8ch;\n}\n\n.pressed{\n    border-style: inset;\n    background-color: darkgray;\n}\n\n#error{\n    background-color: red;\n    color: white;\n}\n\n#install-listeners\n{\n    font-weight: bold;\n    border-radius: 15px;\n    width: 10ch;\n    cursor: pointer;\n    outline: none;\n}\n\n#install-listeners[data-installed=true]\n{\n    background-color: darkgrey;\n    border-style: inset;\n}\n\n#install-listeners[data-installed=true]:after\n{\n    content: 'Uninstall';\n}\n\n#install-listeners[data-installed=false]\n{\n    border-style: outset;\n}\n\n#install-listeners[data-installed=false]:after\n{\n    content: 'Install';\n}",""]);const o=i},1964:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(3645),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,"#request-container\n{\n    display: inline-flex;\n    flex-direction: row;\n    flex-wrap: wrap;\n    margin-bottom: 1px;\n}\n\n.button-request{\n    margin-top: 5px;\n    padding: 4px 5px;\n    vertical-align: center;        \n}\n\n#request-options\n{\n    display: inline-flex;\n    flex-direction: row;\n    flex-wrap: wrap;\n}\n\n.request-opt\n{\n    display: inline-flex;\n    flex-direction: column;\n    padding-right: 4px;\n}\n\n.request-label\n{\n    font-weight: bold;\n    text-align: center;\n    font-size: 12px;\n}\n\n.request-input\n{\n    width: 7ch;\n}\n\n.input-error\n{\n    outline: 1px solid red;\n}\n\n#error\n{\n    background-color: red;\n    color: white;\n}\n\n#header-line\n{\n    background-color: cadetblue;\n    color: white;\n}\n\n#device-name\n{\n    width: 100%;\n}\n\n#device-op\n{\n/*    padding: 2px 5px;*/\n}\n\n.device-name\n{\n    background-color: beige;\n    text-align: center;\n    font-weight: bold;\n}\n\n.device-name:hover\n{\n    background-color: antiquewhite;\n}\n\n.device-op\n{\n    margin: 0px;\n    cursor: pointer;\n}\n\n.device-op[data-opened=false]\n{\n    color: lawngreen;\n    background-color: white;\n}\n\n.device-op[data-opened=false]:hover\n{\n    color: white;\n    background-color: lawngreen; \n}\n\n.device-op[data-opened=true]\n{\n    color: red;\n    background-color: white;\n    padding: 2px 5px;\n}\n\n.device-op[data-opened=true]:hover\n{\n    color: white;\n    background-color: red;\n    \n}\n\n.signal{\n    margin: 0px;\n    padding: 0px;\n    border-style: outset;\n    outline: none;\n    cursor: pointer;\n}\n\n.pressed\n{\n    border-style: inset;\n}\n",""]);const o=i},7618:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(3645),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,"#connect-button\n{\n    background-color: white;\n    color: lawngreen;\n    font-size: 30px;\n    border-radius: 5px;\n}\n\n#connect-button:hover\n{\n    background-color: lawngreen;\n    color: white;\n}\n\n#connect-button:after\n{\n    content: '\\25ba';\n}\n\n#header-line\n{\n    background-color: cadetblue;\n    color: white;\n}\n\n#socket-name\n{\n    width: 100%;\n}\n\n.socket-name\n{\n    background-color: beige;\n    text-align: center;\n    font-weight: bold;\n    width: 100%;\n}\n\n.socket-name:hover\n{\n    background-color: antiquewhite;\n}\n\n.socket-op\n{\n    margin: 0px;\n    cursor: pointer;\n    background-color: white;\n    color: red;\n    padding: 2px 5px;\n}\n\n.socket-op:after\n{\n    content: '\\00D7';\n}\n\n.socket-op:hover\n{\n    background-color: red;\n    color: white;\n}\n\n#error\n{\n    margin: 1px;\n    background-color: red;\n    color: white;\n    width: 100%;\n}\n\n\n",""]);const o=i},7701:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(3645),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,"#request-options\n{\n    display: inline-flex;\n    flex-direction: row;\n    flex-wrap: wrap;\n    width: 100%;\n    margin-bottom: 2px;\n}\n\n.request-opt\n{\n    display: inline-flex;\n    flex-direction: column;\n    padding-right: 4px;\n}\n\n.request-label\n{\n    font-weight: bold;\n    text-align: center;\n    font-size: 12px;\n}\n\n.request-input\n{\n    width: 7ch;\n}\n\n.input-error\n{\n    outline: 1px solid red;\n}\n\n#error\n{\n    background-color: red;\n    color: white;\n}\n\n#header-line\n{\n    background-color: cadetblue;\n    color: white;\n}\n\n#device-name\n{\n    width: 100%;\n}\n\n.device-name\n{\n    background-color: beige;\n    text-align: center;\n    font-weight: bold;\n}\n\n.device-name:hover\n{\n    background-color: antiquewhite;\n}\n\n.device-op\n{\n    margin: 0px;\n    cursor: pointer;\n}\n\n.device-op[data-opened=true]\n{\n    color: red;\n    background-color: white;\n    padding: 2px 5px;\n}\n\n.device-op[data-opened=true]:hover\n{\n    color: white;\n    background-color: red;\n    \n}\n\n.drivers\n{\n    --drop-menu-title-icon: '';\n    --drop-menu-title-bg: white;\n    --drop-menu-title-color: lawngreen;\n    --drop-menu-title-bg-hover: lawngreen;\n    --drop-menu-title-color-hover: white;\n    --drop-menu-title-padding: 8px 4px;\n    --drop-menu-content-left: -230%;\n    --drop-menu-content-bottom: 30%;\n}\n\n.driver-list\n{\n    list-style-type: none;\n}\n\n.driver-op:hover\n{\n    background-color: #aaa;\n}\n",""]);const o=i},1136:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(3645),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,"#container{\n    background-color: antiquewhite;\n}\n\n",""]);const o=i},2544:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(3645),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,"#options\n{\n    display: flex;\n    flex-wrap: wrap;\n    background-color: bisque;\n}\n\n.field\n{\n    display: flex;\n    flex-direction: column;\n    padding: 2px;\n}\n\n.flowcontrol\n{\n    width: 4ch;\n}\n\n.label\n{\n    font-weight: bold;\n}\n\n.table-port-name{\n    padding: 2px 5px;\n    text-align: center;\n    font-weight: bold;\n}\n\n#thead-ports{\n    background-color: darkturquoise;\n    color: antiquewhite;\n}\n\n#cell-port-name{\n    width: 100%;   \n}\n\n.conn-button{\n    text-align: center;\n    cursor: pointer;\n}\n\n.table-port-line{\n    background-color: azure;\n}\n\n.table-port-line:hover{\n    background-color: bisque;\n}\n\n#conn-button-head{\n    width: 1px;\n    padding: 2px 10px;\n    text-align: center;\n}\n\n.conn-button[data-value=true]{\n    background-color: white;\n    color: red;\n}\n\n.conn-button[data-value=true]:hover{\n    background-color: red;\n    color: white;\n}\n\n.conn-button[data-value=false]{\n    background-color: white;\n    color: lawngreen;\n}\n\n.conn-button[data-value=false]:hover{\n    background-color: lawngreen;\n    color: white;\n}\n\n/*\n#--app-container{\n    background-color: blue;\n}\n\n.field\n{\n    display: block;\n}\n\n#--table-ports{\n    width: 100%;   \n}\n\n#--thead-ports{\n    background-color: darkturquoise;\n    color: antiquewhite;\n}\n\n#--conn-button-head{\n    width: 1px;\n    padding: 2px 10px;\n    text-align: center;\n}\n\n.conn-button{\n    text-align: center;\n    cursor: pointer;\n}\n\n.table-port-line{\n    background-color: azure;\n}\n\n.table-port-line:hover{\n    background-color: bisque;\n}\n\n.conn-button[data-value=true]{\n    background-color: white;\n    color: red;\n}\n\n.conn-button[data-value=true]:hover{\n    background-color: red;\n    color: white;\n}\n\n.conn-button[data-value=false]{\n    background-color: white;\n    color: lawngreen;\n}\n\n.conn-button[data-value=false]:hover{\n    background-color: lawngreen;\n    color: white;\n}\n\n#--cell-port-name{\n    width: 100%;   \n}\n.table-port-name{\n    padding: 2px 5px;\n    text-align: center;\n}\n*/\n",""]);const o=i},1454:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(3645),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,"#container\n{\n    padding: 1px;\n}\n\n#error{\n    width: 100%;\n}\n\n#table-list\n{\n    width: 100%;\n    margin: 1px;\n}\n\n#header-list\n{\n    background-color: darkturquoise;\n    color: white;\n    font-weight: bold;\n    text-align: center;\n    padding: 2px 3px;\n    margin-top: 2px;\n}\n\n#body-list{\n    padding: 0;\n    margin-top: 2px;\n}\n\n.line{\n    background-color: azure;\n    color: black;\n    padding: 3px 4px;\n}\n\n.line:hover\n{\n    filter: brightness(80%);\n}\n\n.close{\n    background-color: white;\n    color: red;\n    cursor: pointer;\n    padding: 2px 5px;\n}\n\n.close:hover{\n    background-color: red;\n    color: white;\n}\n\n.close:after\n{\n    content: '\\00D7';\n}\n\n.no-client\n{\n    font-style: italic;\n    background: white;\n    padding: 2px;\n    text-align: center;\n}\n",""]);const o=i},1276:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(3645),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,"#container\n{\n    padding: 1px;\n}\n\n#list\n{\n    display: block;\n    background-color: darkturquoise;\n    color: white;\n    font-weight: bold;\n    text-align: center;\n    padding: 2px 5px;\n    margin-top: 2px;\n}\n\n#opt-container\n{\n    display: flex;\n    flex-direction: row;\n    width: 100%;\n}\n\n#button-opt\n{\n    font-size: 20px;\n    cursor: pointer;\n    background-color: antiquewhite;\n    padding: 0px 5px;\n    display: inline-block;\n    border-radius: 7px;\n}\n\n#button-opt:hover{\n    filter: brightness(110%);\n}\n\n#options-config \n{\n    background-color: bisque;\n}\n\n#options-config table\n{\n    border-collapse: collapse;\n}\n\n#options-config table,\n#options-config th,\n#options-config td{\n    border: 0px solid black;\n}\n\n#options-config th\n{\n    font-size: 15px;\n    padding: 0px;\n    margin: 0px;\n}\n\n#error{\n/*    background-color: red;*/\n/*    padding: 1px;*/\n/*    color: white;*/\n    width: 100%;\n}\n\n#button-container\n{\n    margin-top: 2px;\n}\n\n#body-list{\n    list-style-type: none;\n    width: 100%;\n    padding: 0;\n    margin-top: 2px;\n}\n\n.item-list{\n    width: 100%;\n    padding-bottom: 2px;\n}\n\n.table-item{\n    border-collapse: collapse;\n    border-color: black;\n}\n\n.server-name{\n    width: 100%;\n    padding: 2px 5px;\n}\n\n.line{\n    background-color: lightcoral;\n    color: black;\n}\n\n.line:hover{\n    filter: brightness(98%);\n}\n\n.close{\n    background-color: white;\n    color: red;\n    cursor: pointer;\n    padding: 2px 5px;\n}\n\n.close:hover{\n    background-color: red;\n    color: white;\n}\n\n.server-select{\n    padding: 1px;\n    margin: 1px;\n    width:1%;\n    white-space:nowrap;\n}\n\n.client-close{\n    background-color: white;\n    color: red;\n    cursor: pointer;\n    padding: 2px 5px;\n}\n\n.client-close:hover{\n    background-color: red;\n    color: white;\n}\n\n.clients-list{\n\n}\n\n.client-line{\n    background-color: azure;\n    color: black;\n}\n\n.client-name{\n    padding: 2px 5px;\n}\n\n.no-server\n{\n    font-style: italic;\n    background: white;\n    padding: 2px;\n}",""]);const o=i},3649:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(3645),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,".server-container\n{\n    display: block;\n    margin-top: 2px;\n    background-color: beige;\n    border-radius: 3px;\n    overflow: hidden;\n}\n\n.title-container\n{\n    margin: 2px 0px;\n    display: flex;\n    justify-content: space-between;\n}\n\n.server-title-name\n{\n    overflow: hidden;\n    text-overflow: ellipsis;\n    flex-grow: 1;\n    font-size: medium;\n}\n\n.server-title-options\n{\n    white-space: nowrap;\n}\n\n.close\n{\n    background-color: transparent;\n    color: red;\n    cursor: pointer;\n    margin-right: 5px;\n    padding: 1px 5px;\n    border-radius: 5px;\n}\n\n.close:hover\n{\n    background-color: red;\n    color: white;\n}\n\n.edit-name:hover\n{\n    color: greenyellow;\n}\n\n.server-container h4\n{\n    margin: 2px 0px;\n}\n\n.server-container .app-container\n{\n    background-color: antiquewhite;\n}\n\n.server-container .app-container:hover\n{\n    filter: brightness(110%);\n}\n\n.container\n{\n    display: flex;\n    flex-direction: column;\n}\n\n.server-session-value\n{\n    padding: 1px 3px;\n}\n\n\n.server-session-add\n{\n    padding: 1px 4px;\n    border-radius: 10px;\n    background-color: white;\n    color: black;\n    cursor: pointer;\n}\n\n.server-session-add:hover\n{\n    font-weight: bold;\n    background-color: black;\n    color: white;\n}\n\n.server-session-add:after\n{\n    content: '\\2B';\n}\n\n",""]);const o=i},2731:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(3645),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,"#esp32-mesh-modal{\n    --my-modal-content-width: 96%;\n    --my-modal-content-margin: 1% auto;\n    --my-modal-content-bg: #f0f0f0;\n}\n\n#esp32-mesh-modal-container\n{\n    padding: 10px;\n    display: flex;\n    flex-direction: column;\n    height: 100%;\n    box-sizing: border-box;\n}\n\n#esp32-mesh-modal-title{\n    margin-top: 0px;\n    margin-bottom: 10px;\n}\n\n#esp32-mesh-content\n{\n    overflow: auto;\n    flex-grow: 1;\n}\n\n#esp32-mesh-content-tabs > button {\n    padding: 5px;\n    padding-left: 10px;\n    border-top-left-radius: 25px;\n}\n\n.esp32-mesh-content-panel{\n    overflow: auto;\n    width: 100%;\n}\n\n.esp32-mesh-script-table{\n}\n\n#esp32-mesh-table-messages-container{\n    scroll-behavior: smooth;\n/*    overflow: auto;*/\n}\n\n#esp32-mesh-messages-head th\n{\n    top: 0px;\n    position: sticky;\n}\n\n#esp32-mesh-comm-input{\n    width: 100%;\n}\n\n#esp32-mesh-comm-error\n{\n    background-color: red;\n    color: white;\n}\n\n.esp32-mesh-script-table th,\n.esp32-mesh-script-table td\n{\n    border: 1px solid black;\n}\n\n.esp32-mesh-script-table th{\n    background-color: antiquewhite;\n}\n\n.esp32-mesh-script-table td{\n    background-color: azure;\n}\n\n.esp32-mesh-script-table tr:hover td{\n    background-color: yellow;\n}\n\n.esp32-mesh-script-table{\n    border-collapse: collapse;\n    margin-bottom: 10px;\n}\n\n.esp32-mesh-mac-device{\n    cursor: pointer;\n}\n\n#esp32-mesh-comm-input-br-container{\n    margin: 2px;\n}\n\n.esp32-mesh-net-dev-content{\n    display: flex;\n    justify-content: flex-start;\n    width: 100%;\n}\n\n.esp32-mesh-dev-net-title{\n    display: flex;\n    justify-content: space-between;\n    width: 300px;\n    padding: 2px 5px;\n    cursor: pointer;\n}\n\n.esp32-mesh-dev-net-title-selected{\n    background-color: antiquewhite;\n    font-weight: bold;\n}\n\n.esp32-mesh-dev-net-title-unconnected{\n    background-color: lightgray;\n    color: grey;\n}\n\n.esp32-mesh-dev-net-title:hover{\n    background-color: yellow;\n}\n\n.esp32-mesh-dev-net-title:hover ~ .esp32-mesh-node-circle{\n    fill: green;\n}\n\n.esp32-mesh-dev-info{\n    display: flex;\n    flex-wrap: wrap;\n    width: 100%;\n}\n\n/*\n.esp32-mesh-net-dev-list{\n    overflow-x: auto;   \n}\n*/\n\n.esp32-mesh-net-dev-info{\n    background-color: antiquewhite;\n/*    overflow: auto;*/\n}\n\n.esp32-mesh-dev-info-line{\n    display: inline-flex;\n    flex-direction: column;\n    margin: 2px;\n}\n\n.esp32-mesh-dev-info-head{\n    font-weight: bold;\n    text-align: center;\n    background-color: red;\n    padding: 3px 2px;\n    border-top-left-radius: 8px;\n    border-top-right-radius: 8px;\n}\n\n.esp32-mesh-dev-info-content{\n    background-color: greenyellow;\n    padding: 3px 2px;\n    text-align: center;\n    border-bottom-left-radius: 8px;\n    border-bottom-right-radius: 8px;\n}\n\n/**\n* Mesh tree css\n*/\n\n.node circle {\n  fill: #fff;\n  stroke: steelblue;\n  stroke-width: 3px;\n}\n\n.node text { font: 12px sans-serif; }\n\n.node--internal text {\n  text-shadow: 0 1px 0 #fff, 0 -1px 0 #fff, 1px 0 0 #fff, -1px 0 0 #fff;\n}\n\n.link {\n  fill: none;\n  stroke: #ccc;\n  stroke-width: 2px;\n}\n\n.node--br circle{\n    fill: #ccd;\n}\n\n.node--router circle{\n    fill: green;\n}\n\n.link text textPath{\n  fill: none;\n  stroke: black;\n  stroke-width: 2px;\n}\n\n.esp32-mesh-node-circle:hover\n{\n    stroke-width: 5px;\n    cursor: pointer;\n}\n\n/**\n* Rssi graph\n*/\n.esp32-rssi-graph{\n    display: block;\n}\n\n.line {\n    fill: none;\n    stroke: #ffab00;\n    stroke-width: 3;\n}\n  \n.dot {\n    fill: #ffab00;\n    stroke: #fff;\n    cursor: pointer;\n}\n\n.dot:hover {\n    stroke: #ffcd00;\n    stroke-width: 3px;\n}\n\n/**\n* New graph\n*/\n\n.esp32-mesh-dev-rssi-parent-title{\n    padding: 5px;\n    padding-left: 10px;\n    border-top-left-radius: 25px;\n}\n\n.my-esp32-graph\n{\n    width: 100%;\n    height: 100%;\n}",""]);const o=i},285:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(3645),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,"/*Class of all inputs ids*/\n.script-input-id-select\n{\n    max-width: 170px;\n}\n\n.script-label\n{\n    font-weight: bold;\n}",""]);const o=i},8588:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(3645),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,"html, body\n{\n    width: 100%;\n    height: 100%;\n    margin: 0;\n    padding: 0;\n    background-color: black;\n}\n\n#header\n{\n    background-color: red;\n    display:flex;\n    flex-direction: row;\n    justify-content: space-between;\n    padding: 2px 4px;\n    margin-bottom: 2px;\n    align-items: center;\n}\n\n#open-selector\n{\n    display: inline-block;\n    padding: 3px 6px;\n    border-radius: 4px;\n    cursor: pointer;\n    font-weight: bold;\n}\n\n#open-selector:hover\n{\n    transform: translateY(4px);\n}\n\n#selected-id\n{ \n    font-weight: bold; \n    padding: 2px;\n    border-radius: 4px;\n    max-width: 33%;\n    overflow: hidden;\n    text-overflow: ellipsis;\n}\n\n#selected-id:hover\n{\n    background-color: brown;\n}\n\n#select-container\n{\n    padding: 30px;\n    border: 2px solid black;\n    border-radius: 10px;\n}\n\n#select-container h3\n{\n    margin: 0px 0px 5px 0px;\n    text-align: center;\n}\n\n#select-container select,\n#select-container button\n{\n    padding: 10px;\n}\n\nmy-modal\n{\n    --my-modal-content-width: fit-content;\n    --my-modal-content-height: fit-content;\n}\n\n#container\n{\n    flex-grow: 1;\n    align-self: stretch;\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n}\n\n#title\n{\n    font-family: \"Courier\", Times, serif;\n    font-size: 23px;\n    margin-top: 2px;\n}\n\n#title:after\n{\n    content: 'View::Data Compare';\n}\n\n#content\n{\n    background-color: antiquewhite;\n    flex-grow: 1;\n    display: flex;\n    flex-direction: column;\n    overflow: auto;\n    margin-bottom: 2px;\n    width: 100%;\n}\n\nlabel:hover\n{\n    cursor: pointer;\n}\n\n#options\n{\n    display: flex;\n    width: fit-content;\n}\n\n#break-line-container\n{\n    border: 2px solid black;\n    border-radius: 5px;\n    padding: 3px 7px;\n/*    background: antiquewhite;*/\n}\n\n#data\n{\n    display: flex;\n    flex-direction: row;\n    flex-grow: 1;\n    overflow: auto;\n    width: 100%;\n}\n\n.option\n{\n    align-self: center;\n    margin-right: 2px;\n}\n\n#add\n{\n    background-color: white;\n    color: lawngreen;\n    border-radius: 9px;\n    cursor: pointer;\n    font-weight: bold;\n    outline: none;\n}\n\n#add:hover\n{\n    background-color: lawngreen;\n    color: white;\n}\n\n#add:after\n{\n    content: '\\ff0b';\n}\n\n.view\n{\n    display: flex;\n    flex-direction: column;\n    margin-right: 1px;\n    margin-left: 1px;\n    flex-grow: 1;\n    max-width: 100%;\n    box-sizing: border-box;\n}\n\n.view-options\n{\n    display: flex;\n    justify-content: space-between;\n    padding: 2px;\n    max-width: 100%;\n    box-sizing: border-box;\n}\n\n.close\n{\n    padding: 1px 5px;\n    cursor: pointer;\n    color: red;\n    font-size: 2ch;\n    border-radius: 3px;\n}\n\n.close:hover\n{\n    background-color: red;\n    color: white;\n}\n\n.view-data\n{\n    min-width: 200px;\n    max-width: 100%;\n    overflow-x: auto;\n    background-color: white;\n    border: 1px solid black;\n    font-family: monospace;\n    cursor: text;\n    border-radius: 5px;\n    padding: 6px;\n    flex-grow: 1;\n    line-height: 2.5ch;\n    margin: 0px;\n    box-sizing: border-box;\n}\n\n.view-data:hover\n{\n    outline-style: solid;\n    outline-width: medium;\n}\n\n.sent\n{\n    color: blue;\n}\n\n.no-id-avaliable{ display: none; }\n\n/*Status bar*/\n#status\n{\n    padding: 5px;\n    font-weight: bold;\n}\n\n.error\n{\n    background-color: red;\n    color: white;\n}\n\n.warning\n{\n    background-color: rgb(200, 200, 50);\n}\n\n.ok\n{\n    background-color: green;\n}\n\n.none\n{\n    background-color: aliceblue;\n}\n\n.message-status\n{\n    padding: 2px;\n}\n\n",""]);const o=i},3645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=e(t);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,r){"string"==typeof e&&(e=[[null,e,""]]);var i={};if(r)for(var o=0;o<this.length;o++){var a=this[o][0];null!=a&&(i[a]=!0)}for(var s=0;s<e.length;s++){var c=[].concat(e[s]);r&&i[c[0]]||(n&&(c[2]?c[2]="".concat(n," and ").concat(c[2]):c[2]=n),t.push(c))}},t}},3085:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(8885);function i(e){return(e=(0,r.V)(Math.abs(e)))?e[1]:NaN}},8885:(e,t,n)=>{"use strict";function r(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function i(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}n.d(t,{Z:()=>r,V:()=>i})},8129:(e,t,n)=>{"use strict";function r(e,t){return function(n,r){for(var i=n.length,o=[],a=0,s=e[0],c=0;i>0&&s>0&&(c+s+1>r&&(s=Math.max(1,r-c)),o.push(n.substring(i-=s,i+s)),!((c+=s+1)>r));)s=e[a=(a+1)%e.length];return o.reverse().join(t)}}n.d(t,{Z:()=>r})},576:(e,t,n)=>{"use strict";function r(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}n.d(t,{Z:()=>r})},2994:(e,t,n)=>{"use strict";n.d(t,{y:()=>r,Z:()=>o});var r,i=n(8885);function o(e,t){var n=(0,i.V)(e,t);if(!n)return e+"";var o=n[0],a=n[1],s=a-(r=3*Math.max(-8,Math.min(8,Math.floor(a/3))))+1,c=o.length;return s===c?o:s>c?o+new Array(s-c+1).join("0"):s>0?o.slice(0,s)+"."+o.slice(s):"0."+new Array(1-s).join("0")+(0,i.V)(e,Math.max(0,t+s-1))[0]}},6196:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function i(e){if(!(t=r.exec(e)))throw new Error("invalid format: "+e);var t;return new o({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function o(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}i.prototype=o.prototype,o.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type}},1485:(e,t,n)=>{"use strict";function r(e){e:for(var t,n=e.length,r=1,i=-1;r<n;++r)switch(e[r]){case".":i=t=r;break;case"0":0===i&&(i=r),t=r;break;default:if(!+e[r])break e;i>0&&(i=0)}return i>0?e.slice(0,i)+e.slice(t+1):e}n.d(t,{Z:()=>r})},6668:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(8885),i=n(2994);function o(e,t){var n=(0,r.V)(e,t);if(!n)return e+"";var i=n[0],o=n[1];return o<0?"0."+new Array(-o).join("0")+i:i.length>o+1?i.slice(0,o+1)+"."+i.slice(o+1):i+new Array(o-i.length+2).join("0")}const a={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:r.Z,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>o(100*e,t),r:o,s:i.Z,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)}},9890:(e,t,n)=>{"use strict";function r(e){return e}n.d(t,{Z:()=>r})},317:(e,t,n)=>{"use strict";var r,i,o;n.d(t,{i$:()=>i}),o={dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},r=(0,n(472).Z)(o),i=r.format,r.parse,r.utcFormat,r.utcParse},9478:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(1829),i=n(1222),o=(0,r.Z)((e=>e.setHours(0,0,0,0)),((e,t)=>e.setDate(e.getDate()+t)),((e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*i.yB)/i.UD),(e=>e.getDate()-1));const a=o;o.range},1222:(e,t,n)=>{"use strict";n.d(t,{Ym:()=>r,yB:()=>i,Y2:()=>o,UD:()=>a,iM:()=>s});var r=1e3,i=6e4,o=36e5,a=864e5,s=6048e5},1829:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=new Date,i=new Date;function o(e,t,n,a){function s(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return s.floor=function(t){return e(t=new Date(+t)),t},s.ceil=function(n){return e(n=new Date(n-1)),t(n,1),e(n),n},s.round=function(e){var t=s(e),n=s.ceil(e);return e-t<n-e?t:n},s.offset=function(e,n){return t(e=new Date(+e),null==n?1:Math.floor(n)),e},s.range=function(n,r,i){var o,a=[];if(n=s.ceil(n),i=null==i?1:Math.floor(i),!(n<r&&i>0))return a;do{a.push(o=new Date(+n)),t(n,i),e(n)}while(o<n&&n<r);return a},s.filter=function(n){return o((function(t){if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)}),(function(e,r){if(e>=e)if(r<0)for(;++r<=0;)for(;t(e,-1),!n(e););else for(;--r>=0;)for(;t(e,1),!n(e););}))},n&&(s.count=function(t,o){return r.setTime(+t),i.setTime(+o),e(r),e(i),Math.floor(n(r,i))},s.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?s.filter(a?function(t){return a(t)%e==0}:function(t){return s.count(0,t)%e==0}):s:null}),s}},9692:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(1829),i=n(1222),o=(0,r.Z)((function(e){e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+t)}),(function(e,t){return(t-e)/i.UD}),(function(e){return e.getUTCDate()-1}));const a=o;o.range},7326:(e,t,n)=>{"use strict";n.d(t,{Ox:()=>a,l6:()=>s,hB:()=>u});var r=n(1829),i=n(1222);function o(e){return(0,r.Z)((function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+7*t)}),(function(e,t){return(t-e)/i.iM}))}var a=o(0),s=o(1),c=o(2),l=o(3),u=o(4),d=o(5),h=o(6);a.range,s.range,c.range,l.range,u.range,d.range,h.range},1181:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(1829),i=(0,r.Z)((function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)}),(function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()}),(function(e){return e.getUTCFullYear()}));i.every=function(e){return isFinite(e=Math.floor(e))&&e>0?(0,r.Z)((function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)})):null};const o=i;i.range},2776:(e,t,n)=>{"use strict";n.d(t,{OM:()=>a,wA:()=>s,bL:()=>u});var r=n(1829),i=n(1222);function o(e){return(0,r.Z)((function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)}),(function(e,t){e.setDate(e.getDate()+7*t)}),(function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*i.yB)/i.iM}))}var a=o(0),s=o(1),c=o(2),l=o(3),u=o(4),d=o(5),h=o(6);a.range,s.range,c.range,l.range,u.range,d.range,h.range},2209:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(1829),i=(0,r.Z)((function(e){e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,t){e.setFullYear(e.getFullYear()+t)}),(function(e,t){return t.getFullYear()-e.getFullYear()}),(function(e){return e.getFullYear()}));i.every=function(e){return isFinite(e=Math.floor(e))&&e>0?(0,r.Z)((function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,n){t.setFullYear(t.getFullYear()+n*e)})):null};const o=i;i.range},5666:e=>{var t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var i=t&&t.prototype instanceof v?t:v,o=Object.create(i.prototype),a=new T(r||[]);return o._invoke=function(e,t,n){var r=d;return function(i,o){if(r===f)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw o;return D()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=S(a,n);if(s){if(s===_)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===d)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=f;var c=u(e,t,n);if("normal"===c.type){if(r=n.done?p:h,c.arg===_)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=p,n.method="throw",n.arg=c.arg)}}}(e,n,a),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var d="suspendedStart",h="suspendedYield",f="executing",p="completed",_={};function v(){}function m(){}function y(){}var g={};g[o]=function(){return this};var b=Object.getPrototypeOf,k=b&&b(b(A([])));k&&k!==n&&r.call(k,o)&&(g=k);var w=y.prototype=v.prototype=Object.create(g);function E(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(i,o,a,s){var c=u(e[i],e,o);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==typeof d&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(d).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,s)}))}s(c.arg)}var i;this._invoke=function(e,r){function o(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(o,o):o()}}function S(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,S(e,n),"throw"===n.method))return _;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return _}var i=u(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,_;var o=i.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,_):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,_)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function R(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function A(e){if(e){var n=e[o];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}return{next:D}}function D(){return{value:t,done:!0}}return m.prototype=w.constructor=y,y.constructor=m,m.displayName=c(y,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,c(e,s,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},E(x.prototype),x.prototype[a]=function(){return this},e.AsyncIterator=x,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new x(l(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(w),c(w,s,"Generator"),w[o]=function(){return this},w.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=A,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(R),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,_):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),R(n),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;R(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:A(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),_}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}},2617:e=>{window,e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FitAddon=void 0;var r=function(){function e(){}return e.prototype.activate=function(e){this._terminal=e},e.prototype.dispose=function(){},e.prototype.fit=function(){var e=this.proposeDimensions();if(e&&this._terminal){var t=this._terminal._core;this._terminal.rows===e.rows&&this._terminal.cols===e.cols||(t._renderService.clear(),this._terminal.resize(e.cols,e.rows))}},e.prototype.proposeDimensions=function(){if(this._terminal&&this._terminal.element&&this._terminal.element.parentElement){var e=this._terminal._core,t=window.getComputedStyle(this._terminal.element.parentElement),n=parseInt(t.getPropertyValue("height")),r=Math.max(0,parseInt(t.getPropertyValue("width"))),i=window.getComputedStyle(this._terminal.element),o=n-(parseInt(i.getPropertyValue("padding-top"))+parseInt(i.getPropertyValue("padding-bottom"))),a=r-(parseInt(i.getPropertyValue("padding-right"))+parseInt(i.getPropertyValue("padding-left")))-e.viewport.scrollBarWidth;return{cols:Math.max(2,Math.floor(a/e._renderService.dimensions.actualCellWidth)),rows:Math.max(1,Math.floor(o/e._renderService.dimensions.actualCellHeight))}}},e}();t.FitAddon=r}])}},t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={id:r,exports:{}};return e[r](i,i.exports,n),i.exports}n.m=e,n.x=e=>{},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.j=826,(()=>{var e={826:0},t=[[2845,569,978,577,568,336]],r=e=>{},i=(i,o)=>{for(var a,s,[c,l,u,d]=o,h=0,f=[];h<c.length;h++)s=c[h],n.o(e,s)&&e[s]&&f.push(e[s][0]),e[s]=0;for(a in l)n.o(l,a)&&(n.m[a]=l[a]);for(u&&u(n),i&&i(o);f.length;)f.shift()();return d&&t.push.apply(t,d),r()},o=self.webpackChunkweb=self.webpackChunkweb||[];function a(){for(var r,i=0;i<t.length;i++){for(var o=t[i],a=!0,s=1;s<o.length;s++){var c=o[s];0!==e[c]&&(a=!1)}a&&(t.splice(i--,1),r=n(n.s=o[0]))}return 0===t.length&&(n.x(),n.x=e=>{}),r}o.forEach(i.bind(null,0)),o.push=i.bind(null,o.push.bind(o));var s=n.x;n.x=()=>(n.x=s||(e=>{}),(r=a)())})(),n.x()})();