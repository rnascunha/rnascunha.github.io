(()=>{"use strict";var t,e={5039:(t,e,n)=>{function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function a(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t,e){if(e&&("object"===c(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return l(t)}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function f(t,e,n){return(f=h()?Reflect.construct:function(t,e,n){var i=[null];i.push.apply(i,e);var r=new(Function.bind.apply(t,i));return n&&o(r,n.prototype),r}).apply(null,arguments)}function p(t){var e="function"==typeof Map?new Map:void 0;return(p=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,i)}function i(){return f(t,arguments,d(this).constructor)}return i.prototype=Object.create(t.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),o(i,t)})(t)}function _(t){return t.key.length>1}function v(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function m(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function y(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?m(Object(n),!0).forEach((function(e){v(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var g;n(7287),n(8805),(g=document.createElement("template")).innerHTML='\n<style>\n  :host{\n    box-sizing: border-box;\n    display: inline-flex;\n    justify-content: stretch;\n    align-items: center;\n    border: 1px solid black;\n    border-radius: 5px;\n    font-size: 20px;\n    --close-font-size: 35px;\n    --inner-padding: 5px;\n    --icon-color: black;\n    overflow: hidden;\n    --color-placeholder: rgba(200, 200, 200, 0.9);\n  }\n\n  .icon{\n    box-sizing: border-box;\n    font-size: inherit;\n    padding: var(--inner-padding);\n    margin: 0px;\n    display: inline-flex;\n    flex-direction: column;\n    justify-content: center;\n    border: none;\n    flex: 0 10 auto;\n    max-width: 4ch;\n    color: var(--icon-color);\n  }\n\n  input{\n    box-sizing: border-box;\n    padding: var(--inner-padding);\n    margin: 0px;\n    outline: none;\n    font-size: 20px;\n    /* --input-font-size: 20px; */\n    background-color: inherit;\n    color: inherit;\n    text-align: center;\n    font-family: inherit;\n    flex: 4 1 auto;\n    border: none;\n    min-width: 0;\n    font-family: inherit;\n  }\n\n  .close{\n    box-sizing: border-box;\n    text-align: center;\n    font-family: inherit;\n    font-size: var(--close-font-size, inherit);\n    flex: 0 10 auto;\n    border: none;\n    padding: var(--inner-padding);\n    cursor: pointer;\n    font-family: inherit;\n    max-width: 3ch;\n    color: var(--icon-color);\n  }\n\n  .close:hover{\n    font-weight: bold;\n  }\n\n  ::placeholder { /* Chrome, Firefox, Opera, Safari 10.1+ */\n    color: var(--color-placeholder);\n  }\n\n  :-ms-input-placeholder { /* Internet Explorer 10-11 */\n    color: var(--color-placeholder);\n  }\n\n  ::-webkit-input-placeholder {\n     color: var(--color-placeholder);\n  }\n\n  :-moz-placeholder { /* Firefox 18- */\n     color: var(--color-placeholder);\n  }\n</style>\n<span class=icon><slot name=icon></slot></span>\n<input autocapitalize="none">\n<span class=close>&times</span>',customElements.define("x-input-icon",function(t){s(o,t);var e,n,r=(e=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,i=d(e);if(n){var r=d(this).constructor;t=Reflect.construct(i,arguments,r)}else t=i.apply(this,arguments);return u(this,t)});function o(){var t;i(this,o);var e=(t=r.call(this)).attachShadow({mode:"open"});return e.appendChild(g.content.cloneNode(!0)),t._icon=e.querySelector(".icon"),t._input=e.querySelector("input"),t._close=e.querySelector(".close"),t._close.addEventListener("click",(function(e){t._input.value="",t._input.focus()})),t._input.addEventListener("keydown",(function(t){"Escape"!=t.key||(t.target.value="")})),t.addEventListener=t._input.addEventListener,t}return a(o,[{key:"value",get:function(){return this._input.value},set:function(t){this._input.value=t}},{key:"disabled",get:function(){return this._input.disabled},set:function(t){this._input.disabled=Boolean(t),this._input.disabled?this.setAttribute("disabled",""):this.removeAttribute("disabled")}},{key:"input",get:function(){return this._input}},{key:"focus",value:function(){this._input.focus()}},{key:"connectedCallback",value:function(){this.hasAttribute("type")&&(this._input.type=this.getAttribute("type")),this.hasAttribute("value")&&(this._input.value=this.getAttribute("value")),this.hasAttribute("placeholder")&&(this._input.placeholder=this.getAttribute("placeholder"))}}]),o}(p(HTMLElement))),function(){var t=document.createElement("template");t.innerHTML='\n<style>\n  :host{\n    box-sizing: border-box;\n    display: inline-flex;\n    justify-content: stretch;\n    align-items: center;\n    border: 1px solid black;\n    border-radius: 5px;\n    font-size: 20px;\n    --inner-padding: 5px;\n    --icon-color: black;\n    overflow: hidden;\n  }\n\n  .icon{\n    box-sizing: border-box;\n    font-size: inherit;\n    padding: var(--inner-padding);\n    margin: 0px;\n    display: inline-flex;\n    flex-direction: column;\n    justify-content: center;\n    border: none;\n    flex: 0 10 auto;\n    max-width: 4ch;\n    color: var(--icon-color);\n  }\n\n  #scheme{\n    background-color: inherit;\n    color: inherit;\n    text-align: center;\n    font-family: inherit;\n    font-size: inherit;\n    outline: none;\n    box-sizing: border-box;\n    border: none;\n    margin: 0;\n    padding: 0;\n    align-self: stretch;\n  }\n\n  #scheme:focus{\n    filter: brightness(0.9);\n  }\n\n  input{\n    box-sizing: border-box;\n    margin: 0px;\n    outline: none;\n    font-size: 20px;\n    background-color: inherit;\n    color: inherit;\n    text-align: center;\n    font-family: inherit;\n    border: none;\n    min-width: 0;\n    font-family: inherit;\n  }\n\n  #addr{\n    flex: 4 1 auto;\n  }\n\n  #port{\n    flex: 1 1 auto;\n    max-width: 6ch;\n  }\n\n  .close{\n    box-sizing: border-box;\n    text-align: center;\n    font-family: inherit;\n    font-size: var(--close-font-size, inherit);\n    flex: 0 10 auto;\n    border: none;\n    padding: var(--inner-padding);\n    cursor: pointer;\n    font-family: inherit;\n    max-width: 3ch;\n    color: var(--icon-color);\n  }\n\n  .separator{\n    max-width: 1ch;\n    flex: 0 10 auto;\n  }\n\n  .close:hover{\n    font-weight: bold;\n  }\n\n  ::placeholder { /* Chrome, Firefox, Opera, Safari 10.1+ */\n    color: var(--color-placeholder);\n  }\n\n  :-ms-input-placeholder { /* Internet Explorer 10-11 */\n    color: var(--color-placeholder);\n  }\n\n  ::-webkit-input-placeholder {\n     color: var(--color-placeholder);\n  }\n\n  :-moz-placeholder { /* Firefox 18- */\n     color: var(--color-placeholder);\n  }\n</style>\n<span class=icon><slot name=icon></slot></span>\n<select id="scheme">\n  <option value="ws">ws</option>\n  <option value="wss" selected>wss</option>\n</select>\n<input id=addr placeholder=Address>\n<span class=separator>:</span>\n<input id=port placeholder=Port pattern="[0-9]*" inputmode="numeric">\n<span class=close>&times</span>',customElements.define("x-input-server",function(e){s(c,e);var n,r,o=(n=c,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=d(n);if(r){var i=d(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return u(this,t)});function c(){var e;i(this,c);var n=(e=o.call(this)).attachShadow({mode:"open"});return n.appendChild(t.content.cloneNode(!0)),e._icon=n.querySelector(".icon"),e._scheme=n.querySelector("#scheme"),e._input_addr=n.querySelector("#addr"),e._input_port=n.querySelector("#port"),e._close=n.querySelector(".close"),e._close.addEventListener("click",(function(t){e._input_addr.value="",e._input_port.value="",e._input_addr.focus()})),e._input_port.addEventListener("keydown",(function(t){"Escape"!=t.key?function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!_(t))if(t.keyCode>=48&&t.keyCode<=57){var i=t.target.value+t.key;(e&&Number.isInteger(e)&&i&&parseInt(i)<e||n&&Number.isInteger(n)&&i&&parseInt(i)>n)&&t.preventDefault()}else t.preventDefault()}(t,1,65535):t.target.value=""})),e}return a(c,[{key:"scheme",get:function(){return this._scheme.selectedOptions[0].value},set:function(t){this._scheme.querySelector("[value=".concat(t,"]")).selected=!0}},{key:"address",get:function(){return this._input_addr.value},set:function(t){this._input_addr.value=t}},{key:"port",get:function(){return this._input_port.value},set:function(t){this._input_port.value=t}},{key:"input_addr",get:function(){return this._input_addr}},{key:"input_port",get:function(){return this._input_port}},{key:"connectedCallback",value:function(){this.hasAttribute("addr")&&(this._input_addr.value=this.getAttribute("addr")),this.hasAttribute("port")&&(this._input_port.value=this.getAttribute("port"))}}]),c}(p(HTMLElement)))}(),function(){var t=document.createElement("template");t.innerHTML="\n<style>\n  :host{\n    display: inline-block;\n    font-size: 18px;\n    --color-placeholder: rgba(200, 200, 200, 0.9);\n  }\n\n  fieldset{\n    border: 1px solid var(--text-color);\n    border-radius: 10px;\n    box-sizing: border-box;\n  }\n\n  input{\n    width: 100%;\n    margin: 0px;\n    outline: none;\n    font-size: inherit;\n    background-color: inherit;\n    color: inherit;\n    text-align: center;\n    font-family: inherit;\n    /* flex: 4 1 auto; */\n    border: none;\n    min-width: 0;\n    font-family: inherit;\n  }\n\n  ::placeholder { /* Chrome, Firefox, Opera, Safari 10.1+ */\n    color: var(--color-placeholder);\n  }\n\n  :-ms-input-placeholder { /* Internet Explorer 10-11 */\n    color: var(--color-placeholder);\n  }\n\n  ::-webkit-input-placeholder {\n     color: var(--color-placeholder);\n  }\n\n  :-moz-placeholder { /* Firefox 18- */\n     color: var(--color-placeholder);\n  }\n</style>\n<fieldset>\n  <legend><slot name=field>Field</slot></legend>\n  <input>\n</fieldset>",customElements.define("overtext-input",function(e){s(c,e);var n,r,o=(n=c,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=d(n);if(r){var i=d(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return u(this,t)});function c(){var e;i(this,c);var n=(e=o.call(this)).attachShadow({mode:"open"});return n.appendChild(t.content.cloneNode(!0)),e._input=n.querySelector("input"),e._input.addEventListener("keydown",(function(t){"Escape"!=t.key||(t.target.value="")})),e.addEventListener=e._input.addEventListener,e}return a(c,[{key:"value",get:function(){return this._input.value},set:function(t){this._input.value=t}},{key:"disabled",get:function(){return this._input.disabled},set:function(t){this._input.disabled=Boolean(t),this._input.disabled?this.setAttribute("disabled",""):this.removeAttribute("disabled")}},{key:"input",get:function(){return this._input}},{key:"focus",value:function(){this._input.focus()}},{key:"connectedCallback",value:function(){this.hasAttribute("type")&&(this._input.type=this.getAttribute("type")),this.hasAttribute("value")&&(this._input.value=this.getAttribute("value")),this.hasAttribute("placeholder")&&(this._input.placeholder=this.getAttribute("placeholder"))}}]),c}(p(HTMLElement)))}(),function(){var t=document.createElement("template");t.innerHTML='\n<style>\n    :host\n    {\n      display: inline-flex;\n      padding: 0px;\n      margin: 0px;\n      --width-switch: 50px;\n      --height-switch: 30px;\n      --gap-switch: 4px;\n      height: var(--height-switch, 30px);\n      width: var(--width-switch, 50px);\n      justify-content: center;\n      align-items: center;\n      --border: none;\n      --bg-checked: #243d42;\n      --bg-unchecked: #477a85;\n      --color-ball: #e8f5f7;\n    }\n\n    /* disabling input */\n    :host([disabled])\n    {\n      --bg-checked: rgba(40, 40, 40, 0.4);\n      --bg-unchecked: rgba(40, 40, 40, 0.3);\n      --color-ball: lightgrey;\n    }\n\n    :host([disabled]) label\n    {\n      cursor: default;\n    }\n\n    /* hide input */\n    input[type="checkbox"]\n    {\n      width: 0;\n      height: 0;\n      visibility: hidden;\n      display: none;\n    }\n    /* box */\n    label\n    {\n      width: 100%;\n      height: 100%;\n      display:block;\n      background-color: var(--bg-unchecked, #477a85);\n      border-radius: var(--height-switch);\n      border: var(--border, none);\n      position: relative;\n      cursor: pointer;\n      transition: 0.5s;\n      box-shadow: 0 0 50px #477a8550;\n    }\n    /* ball */\n    label::after\n    {\n      content: "";\n      width: calc(var(--height-switch) - var(--gap-switch));\n      height: calc(var(--height-switch) - var(--gap-switch));\n      background-color: var(--color-ball, #e8f5f7);\n      position: absolute;\n      border-radius: var(--height-switch);\n      top: calc(var(--gap-switch) / 2);\n      left: calc(var(--gap-switch) / 2);\n      transition: 0.5s;\n    }\n\n    input:checked + label:after\n    {\n      left: calc(100% - calc(var(--gap-switch) / 2));\n      transform: translateX(-100%);\n    }\n\n    input:checked + label\n    {\n      background-color: var(--bg-checked, #243d42);\n    }\n\n    label:active:after\n    {\n      width: calc(var(--height-switch) * 1.1);\n    }\n</style>\n<input type="checkbox" name="switch" id="switch">\n<label for="switch"></label>\n',customElements.define("check-switch",function(e){s(c,e);var n,r,o=(n=c,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=d(n);if(r){var i=d(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return u(this,t)});function c(){var e;i(this,c);var n=(e=o.call(this)).attachShadow({mode:"open"});return n.appendChild(t.content.cloneNode(!0)),e._input=n.querySelector("#switch"),e}return a(c,[{key:"checked",get:function(){return this._input.checked},set:function(t){this._input.checked=Boolean(t),this._input.checked?this.setAttribute("checked",""):this.removeAttribute("checked")}},{key:"disabled",get:function(){return this._input.disabled},set:function(t){this._input.disabled=Boolean(t),this._input.disabled?this.setAttribute("disabled",""):this.removeAttribute("disabled")}},{key:"input",get:function(){return this._input}},{key:"connectedCallback",value:function(){this.hasAttribute("checked")&&(this.checked=!0),this.hasAttribute("disabled")&&(this.disabled=!0)}}]),c}(p(HTMLElement)))}(),function(){var t=document.createElement("template");t.innerHTML="\n<style>\n    :host\n    {\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      position: fixed;\n      box-sizing: border-box;\n      padding: 0;\n      margin: 0;\n      width: 100%;\n      height: 100%;\n      background-color: rgba(50, 50, 50, 0.5);\n      font-size: 50%;\n      z-index: 1000;\n      overflow: hidden;\n    }\n\n    .icon{\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      width: 50%;\n      height: 50%;\n      font-size: 200px;\n      z-index: 1001;\n      color: rgb(200, 200, 200, 0.9);\n    }\n</style>\n<slot class=icon></slot>",customElements.define("load-screen",function(e){s(c,e);var n,r,o=(n=c,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=d(n);if(r){var i=d(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return u(this,t)});function c(){var e;return i(this,c),(e=o.call(this)).attachShadow({mode:"open"}).appendChild(t.content.cloneNode(!0)),e}return a(c,[{key:"connectedCallback",value:function(){}},{key:"show",value:function(){this.style.display="flex"}},{key:"hide",value:function(){this.style.display="none"}}]),c}(p(HTMLElement)))}(),function(){var t=document.createElement("template");t.innerHTML="\n<style>\n    :host\n    {\n      position: relative;\n    }\n\n    .drop-menu{\n      display: none;\n      position: absolute;\n      float: right;\n      right: 0;\n      background-color: white;\n      color: black;\n      border-radius: 5px;\n      padding: 5px;\n      outline: none;\n    }\n</style>\n<span id=drop-button><slot name=drop-button></slot></span>\n<select class=drop-menu><slot></slot></select>",customElements.define("drop-menu",function(e){s(c,e);var n,r,o=(n=c,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=d(n);if(r){var i=d(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return u(this,t)});function c(){var e;i(this,c);var n=(e=o.call(this)).attachShadow({mode:"open"});return n.appendChild(t.content.cloneNode(!0)),e._button=n.querySelector("#drop-button"),e._menu=n.querySelector(".drop-menu"),e._button.addEventListener("click",(function(t){e._menu.style.display="block"==e._menu.style.display?"none":"block"})),e}return a(c,[{key:"connectedCallback",value:function(){}},{key:"hide",value:function(){this._menu.style.display="none"}}]),c}(p(HTMLElement)))}(),function(){var t=document.createElement("template");t.innerHTML="\n<style>\n    :host\n    {\n      display: none;\n      justify-content: center;\n      align-items: center;\n      position: fixed;\n      box-sizing: border-box;\n      padding: 0;\n      margin: 0;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      background-color: rgba(50, 50, 50, 0.5);\n      z-index: 1002;\n      overflow: hidden;\n      --inner-width: auto;\n      --min-inner-width: auto;\n      --max-inner-width: 50%;\n      --inner-height: auto;\n      --min-inner-height: auto;\n      --max-inner-height: auto;\n    }\n\n    .pop-up{\n      width: var(--inner-width);\n      max-width: var(--max-inner-width);\n      min-width: var(--min-inner-width);\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      z-index: 1003;\n      height: var(--inner-height);\n      min-height: var(--min-inner-height);\n      max-height: var(--max-inner-height);\n    }\n\n    @media only screen and (max-width: 600px) {\n      :host{\n        --max-inner-width: 98%;\n      }\n    }\n</style>\n<slot class=pop-up></slot>",customElements.define("pop-modal",function(e){s(c,e);var n,r,o=(n=c,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=d(n);if(r){var i=d(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return u(this,t)});function c(){var e;return i(this,c),(e=o.call(this)).attachShadow({mode:"open"}).appendChild(t.content.cloneNode(!0)),e.addEventListener("click",(function(t){t.target==l(e)&&e.dispatchEvent(new Event("cancel"))})),e}return a(c,[{key:"connectedCallback",value:function(){this.hasAttribute("show")&&this.show()}},{key:"show",value:function(){this.style.display="flex"}},{key:"hide",value:function(){this.style.display="none"}},{key:"delete",value:function(){this.parentNode.removeChild(this)}}]),c}(p(HTMLElement)))}(),function(){var t=document.createElement("template");t.innerHTML="\n<style>\n    :host\n    {\n      width: 100%;\n      display: flex;\n      font-size: 20px;\n      align-items: center;\n    }\n\n    :host(:hover)\n    {\n        background-color: var(--primary-color);\n    }\n\n    .icon{\n      width: 7%;\n      text-align: center;\n      display: inline-block;\n    }\n\n    .text{\n      font-weight: bold;\n      width: 30%;\n      padding-left: 10px;\n      display: inline-block;\n    }\n\n    .value{\n      width: 100%;\n      text-align: center;\n      vertical-align: middle;\n      display: inline-block;\n      word-break: break-word;\n      flex-grow: 4;\n      /* shine effect */\n      position: relative;\n      overflow: hidden;\n    }\n</style>\n<slot class=icon name=icon></slot>\n<slot class=text name=name></slot>\n<slot class=value></slot>",customElements.define("detail-line",function(e){s(c,e);var n,r,o=(n=c,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=d(n);if(r){var i=d(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return u(this,t)});function c(){var e;return i(this,c),(e=o.call(this)).attachShadow({mode:"open"}).appendChild(t.content.cloneNode(!0)),e}return a(c,[{key:"connectedCallback",value:function(){}}]),c}(p(HTMLElement)))}(),function(){var t=document.createElement("template");t.innerHTML="\n<style>\n    :host\n    {\n      display: inline-flex;\n      flex-direction: column;\n      width: 100%;\n      border-radius: 15px;\n      overflow: hidden;\n    }\n\n    .title{\n      font-size: 22px;\n      text-decoration: underline;\n      width: 100%;\n      text-align: center;\n      background-color: var(--primary-color-dark);\n      padding: 5px;\n      cursor: pointer;\n    }\n\n    .content{\n      width: 100%;\n      text-align: center;\n      vertical-align: middle;\n      display: block;\n    }\n</style>\n<slot class=title name=title></slot>\n<slot class=content></slot>",customElements.define("expand-menu",function(e){s(c,e);var n,r,o=(n=c,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=d(n);if(r){var i=d(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return u(this,t)});function c(){var e;i(this,c);var n=(e=o.call(this)).attachShadow({mode:"open"});return n.appendChild(t.content.cloneNode(!0)),e._content=n.querySelector(".content"),n.querySelector(".title").addEventListener("click",(function(t){e.toggle()})),e}return a(c,[{key:"connectedCallback",value:function(){this.hasAttribute("show")?this.show():this.hasAttribute("hide")&&this.hide()}},{key:"show",value:function(){this.removeAttribute("hide"),this.setAttribute("show",""),this._content.style.display="block"}},{key:"hide",value:function(){this.removeAttribute("show"),this.setAttribute("hide",""),this._content.style.display="none"}},{key:"toggle",value:function(){"none"==this._content.style.display?this.show():this.hide()}}]),c}(p(HTMLElement)))}(),function(){var t=document.createElement("template");t.innerHTML="\n<style>\n    :host\n    {\n      display: inline-flex;\n      flex-direction: column;\n      width: 100%;\n      border-radius: 15px;\n      overflow: hidden;\n    }\n\n\n    .header{\n        display: flex;\n        /* justify-content: center;\n        align-content: center; */\n        font-size: 22px;\n        width: 100%;\n        padding: 5px;\n    }\n\n    .icon\n    {\n      width: 7%;\n    }\n\n    .title{\n      width: 100%;\n      /* text-decoration: underline; */\n      text-align: center;\n      display: inline-block;\n      /* background-color: var(--primary-color-dark); */\n      /* cursor: pointer; */\n    }\n\n    ::slotted(.div)\n    {\n      width: 100%;\n    }\n\n    .content{\n      width: 100%;\n      text-align: center;\n      vertical-align: middle;\n      display: block;\n    }\n</style>\n<div class=header>\n  <slot class=icon name=icon></slot>\n  <slot class=title name=title></slot>\n</div>\n<slot class=content></slot>",customElements.define("detail-command",function(e){s(c,e);var n,r,o=(n=c,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=d(n);if(r){var i=d(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return u(this,t)});function c(){var e;return i(this,c),(e=o.call(this)).attachShadow({mode:"open"}).appendChild(t.content.cloneNode(!0)),e}return a(c,[{key:"connectedCallback",value:function(){}}]),c}(p(HTMLElement)))}(),function(){var t=document.createElement("template");t.innerHTML="\n<style>\n  :host{\n    display: inline-flex;\n    width: 100%;\n    align-items: center;\n    border-radius: 10px;\n    overflow: hidden;\n    background-color: rgba(150, 150, 150, 0.5);\n  }\n\n  .index{\n    font-weight: bold;\n    padding: 0px 2px;\n    display: inline-block;\n    min-width: 13px;\n  }\n\n  .buttons{\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n  }\n\n  .buttons button\n  {\n    cursor: pointer;\n    width: 100%;\n    color: var(--text-color);\n    background-color: var(--primary-color-dark);\n    font-family: var(--font-family);\n    padding: 6px 3px;\n    flex-grow: 4;\n  }\n\n  :host([disabled]) .buttons button\n  {\n    pointer-events: none;\n    border-style: none;\n  }\n\n  .buttons button:hover\n  {\n     font-weight: bold;\n  }\n\n  .buttons button:active\n  {\n    transform: translateY(2px);\n  }\n\n  .result\n  {\n    display: inline-block;\n    padding: 0px 4px;\n    font-size: 20px;\n  }\n\n  .result *{\n    background-color: white;\n    border-radius: 10px;\n  }\n\n  .on{\n    color: lawngreen;\n  }\n\n  .off{\n    color: red;\n  }\n\n  :host([data-on='false']) .on\n  {\n    display: none;\n  }\n\n  :host([data-on='false']) .off\n  {\n    display: inline-block;\n  }\n\n  :host([data-on='true']) .off\n  {\n    display: none;\n  }\n\n  :host([data-on='true']) .on\n  {\n    display: inline-block;\n  }\n</style>\n<div class=index></div>\n<div class=buttons>\n  <button data-on=true>ON</button>\n  <button data-on=false>OFF</button>\n</div>\n<div class=result data-on=false>\n  <slot class=on name=on></slot>\n  <slot class=off name=off></slot>\n</div>",customElements.define("btn-on-off",function(e){s(c,e);var n,r,o=(n=c,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=d(n);if(r){var i=d(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return u(this,t)});function c(){var e;i(this,c);var n=(e=o.call(this)).attachShadow({mode:"open"});return n.appendChild(t.content.cloneNode(!0)),e._buttons=n.querySelector(".buttons"),e._index=+e.dataset.index,e.state=!1,n.querySelector(".index").textContent=e._index,e._buttons.addEventListener("click",(function(t){e.dispatchEvent(new CustomEvent("command",{bubbles:!0,detail:{type:"ac_load",index:e._index,on:t.target.dataset.on}}))})),e}return a(c,[{key:"connectedCallback",value:function(){}},{key:"state",set:function(t){this.dataset.on=Boolean(t)}},{key:"disabled",get:function(){return this.hasAttribute("disabled")},set:function(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}}]),c}(p(HTMLElement)))}(),function(){var t=document.createElement("template");t.innerHTML="\n<style>\n  :host{\n    display: inline-flex;\n    width: 100%;\n    border-radius: 10px;\n    overflow: hidden;\n    height: 100%;\n  }\n</style>\n<slot></slot>",customElements.define("array-command",function(e){s(c,e);var n,r,o=(n=c,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=d(n);if(r){var i=d(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return u(this,t)});function c(){var e;return i(this,c),(e=o.call(this)).attachShadow({mode:"open"}).appendChild(t.content.cloneNode(!0)),e.addEventListener("click",(function(t){"index"in t.target.dataset&&e.dispatchEvent(new CustomEvent("command",{bubbles:!0,detail:{type:e.dataset.type,index:t.target.dataset.index}}))})),e}return a(c,[{key:"connectedCallback",value:function(){}}]),c}(p(HTMLElement)))}();var b=function(){function t(){i(this,t)}return a(t,null,[{key:"to",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=rt.raw(e),r=n.hasOwnProperty("prefix")?n.prefix:"\\x",a=n.hasOwnProperty("suffix")?n.suffix:"";n.pad_size=n.hasOwnProperty("pad_size")?n.pad_size:2,n.pad_char=n.hasOwnProperty("pad_char")?n.pad_char:"0";var o="";return i.forEach((function(e){o+=t.is_ascii_int(e)?String.fromCharCode(e):r+rt._set_data_opt(rt.to_hex_string(e),n)+a})),o}},{key:"from",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};console.assert("string"==typeof t,"Argument must be a string");var n=y(y({},{escaped_string:!0}),e),i=[];if(n.escaped_string)i=it(t);else{i=[];for(var r=0,a=t.length;r<a;r++)i.push(t.charCodeAt(r))}return i}},{key:"is_ascii_int",value:function(t){return t>=32&&t<126}},{key:"is_printable",value:function(t){return t>=" "&&t<"~"}},{key:"is_ascii_char",value:function(t){return 1===t.length}},{key:"is_ascii_string",value:function(e){for(var n=0,i=e.length;n<i;n++)if(!t.is_ascii_char(e[n]))return!1;return!0}},{key:"clear_no_digit_char",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=y(y({},{allowed:" "}),e),t.replace(new RegExp("[^0-9".concat(e.allowed,"]"),"g"),"")}},{key:"num_bytes",value:function(){return 1}}]),t}();function w(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function x(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?w(Object(n),!0).forEach((function(e){v(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var k=function(){function t(){i(this,t)}return a(t,null,[{key:"to",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=x(x({},{sep:" ",aggregate:2,pad_size:2,pad_char:"0"}),n),rt._set_arr_option(t.to_arr(e,n),n)}},{key:"to_arr",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=rt.raw(t);e=x(x({},{sep:" ",aggregate:2,pad_size:2,pad_char:"0"}),e);var i=[];return n.forEach((function(t){i.push(rt._set_data_opt(rt.to_hex_string(t,e.uppercase),e))})),i}},{key:"from",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};console.assert("string"==typeof e,"Argument must be a string");var i=x(x({},{separator:" ",padding:!0}),n);if(e=rt._separator(e,i.separator,t.clear_no_hex_char,""),!t.is_hex_string(e))throw new nt(Q.INVALID_CHAR,e);if(!i.padding&&e.length%2)throw new nt(Q.INVALID_SIZE,e.length%2);var r=e.match(/[\da-fA-F]{1,2}/gi).map((function(t){return parseInt(t,16)}));return r}},{key:"clear_no_hex_char",value:function(t){return t.replace(/[^0-9a-f]/gi,"")}},{key:"is_hex_char",value:function(t){return t>="0"&&t<="9"||t>="a"&&t<="f"||t>="A"&&t<="F"}},{key:"is_hex_string",value:function(e){for(var n=0,i=e.length;n<i;n++)if(!t.is_hex_char(e[n]))return!1;return!0}},{key:"num_bytes",value:function(){return 1}}]),t}();function E(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function S(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?E(Object(n),!0).forEach((function(e){v(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var O=function(){function t(){i(this,t)}return a(t,null,[{key:"to",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=S(S({},{sep:" ",aggregate:0,pad_size:8,pad_char:"0"}),n),rt._set_arr_option(t.to_arr(e,n),n)}},{key:"to_arr",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=rt.raw(e);n=S(S({},{sep:" ",aggregate:0,pad_size:8,pad_char:"0"}),n);var r=[];return i.forEach((function(e){r.push(rt._set_data_opt(t.to_binary_string(e),n))})),r}},{key:"from",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};console.assert("string"==typeof e,"Argument must be a string");var i=S(S({},{separator:" ",padding:!0}),n);if(e=rt._separator(e,i.separator,t.clear_no_binary_char,""),!t.is_binary_string(e))throw new nt(Q.INVALID_CHAR,e);if(!i.padding&&e.length%8)throw new nt(Q.INVALID_SIZE,e.length%8);var r=e.match(/[01]{1,8}/gi).map((function(t){return parseInt(t,2)}));return r}},{key:"to_binary_string",value:function(t){if(!("number"==typeof t&&t>=0&&t<=255))throw new nt(Q.WRONG_ARGUMENT,t);return t.toString(2)}},{key:"clear_no_binary_char",value:function(t){return t.replace(/[^01]/g,"")}},{key:"is_binary_char",value:function(t){return"1"===t||"0"===t}},{key:"is_binary_string",value:function(e){for(var n=0,i=e.length;n<i;n++)if(!t.is_binary_char(e[n]))return!1;return!0}},{key:"num_bytes",value:function(){return 1}}]),t}();function T(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function A(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?T(Object(n),!0).forEach((function(e){v(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var C=function(){function t(){i(this,t)}return a(t,null,[{key:"to",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=A(A({},{sep:" ",aggregate:0,pad_size:0,pad_char:" "}),n),rt._set_arr_option(t.to_arr(e,n),n)}},{key:"to_arr",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=rt.raw(t);e=A(A({},{sep:" ",aggregate:0,pad_size:0,pad_char:" "}),e);var i=[],r=new Int8Array(n);return r.forEach((function(t){i.push(rt._set_data_opt(t,e))})),i}},{key:"from",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};console.assert("string"==typeof e,"Argument must be a string");var i=A(A({},{separator:" "}),n);if(e=rt._separator(e,i.separator,null," "),void 0!==i.separator&&rt.invalid_number_char(e))throw new nt(Q.INVALID_CHAR,e);var r=e.match(/[+-]{0,1}[0-9]+/gi);if(!r)throw new nt(Q.WRONG_ARGUMENT,e);if(r=r.map((function(t){return parseInt(t,10)})),!t.is_int8_array(r))throw new nt(Q.OUT_OF_BOUND,r);var a=[],o=new Uint8Array(r);return o.forEach((function(t){return a.push(t)})),a}},{key:"is_int8_num",value:function(t){return t>=-128&&t<=127}},{key:"is_int8_array",value:function(e){return e.every((function(e){return t.is_int8_num(e)}))}},{key:"num_bytes",value:function(){return 1}}]),t}();function M(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function P(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?M(Object(n),!0).forEach((function(e){v(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var j=function(){function t(){i(this,t)}return a(t,null,[{key:"to",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=P(P({},{sep:" ",aggregate:0,pad_size:0,pad_char:" "}),n),rt._set_arr_option(t.to_arr(e,n),n)}},{key:"to_arr",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=rt.raw(t);e=P(P({},{sep:" ",aggregate:0,pad_size:0,pad_char:" "}),e);var i=[],r=new Uint8Array(n);return r.forEach((function(t){i.push(rt._set_data_opt(t,e))})),i}},{key:"from",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};console.assert("string"==typeof e,"Argument must be a string");var i=P(P({},{separator:" "}),n);if(e=rt._separator(e,i.separator,null," "),void 0!==i.separator&&rt.invalid_number_char(e))throw new nt(Q.INVALID_CHAR,e);var r=e.match(/[+-]{0,1}[0-9]+/gi);if(!r)throw new nt(Q.WRONG_ARGUMENT,e);if(r=r.map((function(t){return parseInt(t,10)})),!t.is_uint8_array(r))throw new nt(Q.OUT_OF_BOUND,r);return r}},{key:"is_uint8_num",value:function(t){return t>=0&&t<=255}},{key:"is_uint8_array",value:function(e){return e.every((function(e){return t.is_uint8_num(e)}))}},{key:"num_bytes",value:function(){return 1}}]),t}();function L(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function N(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?L(Object(n),!0).forEach((function(e){v(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var D=function(){function t(){i(this,t)}return a(t,null,[{key:"to",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return i=N(N({},{sep:" ",aggregate:0,pad_size:0,pad_char:" "}),i),rt._set_arr_option(t.to_arr(e,n,i),i)}},{key:"to_arr",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=rt.raw(t);n=N(N({},{padding:!0,sep:" ",aggregate:0,pad_size:0,pad_char:" "}),n);var r=[],a=new DataView(new Uint8Array(i).buffer),o=a.byteLength%2;if(!n.padding&&o)throw new nt(Q.INVALID_SIZE,o);for(var s=a.byteLength/2-o,c=0;c<s;c++)r.push(rt._set_data_opt(a.getInt16(2*c,e),n));if(o){var l=new ArrayBuffer(2),u=new Uint8Array(l);u.set(i.slice(-o),2-o),r.push(rt._set_data_opt(new DataView(u.buffer).getInt16(0,e),n))}return r}},{key:"from",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};console.assert("string"==typeof e,"Argument must be a string");var r=N(N({},{separator:" "}),i);if(e=rt._separator(e,r.separator,null," "),void 0!==r.separator&&rt.invalid_number_char(e))throw new nt(Q.INVALID_CHAR,e);var a=e.match(/[+-]{0,1}[0-9]+/gi);if(!a)throw new nt(Q.WRONG_ARGUMENT,e);if(a=a.map((function(t){return parseInt(t,10)})),!t.is_int16_array(a))throw new nt(Q.OUT_OF_BOUND,a);var o=new ArrayBuffer(2*a.length),s=new DataView(o);a.forEach((function(t,e){s.setInt16(2*e,t,n)}));var c=new Uint8Array(o),l=[];return c.forEach((function(t){return l.push(t)})),l}},{key:"is_int16_array",value:function(e){return e.every((function(e){return t.is_int16_num(e)}))}},{key:"is_int16_num",value:function(t){return t>=-32768&&t<=32767}},{key:"num_bytes_int16",value:function(){return 2}}]),t}();function q(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function R(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?q(Object(n),!0).forEach((function(e){v(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var U=function(){function t(){i(this,t)}return a(t,null,[{key:"to",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return i=R(R({},{sep:" ",aggregate:0,pad_size:0,pad_char:" "}),i),rt._set_arr_option(t.to_arr(e,n,i),i)}},{key:"to_arr",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=rt.raw(t);n=R(R({},{padding:!0,sep:" ",aggregate:0,pad_size:0,pad_char:" "}),n);var r=[],a=new DataView(new Uint8Array(i).buffer),o=a.byteLength%2;if(!n.padding&&o)throw new nt(Q.INVALID_SIZE,o);for(var s=a.byteLength/2-o,c=0;c<s;c++)r.push(rt._set_data_opt(a.getUint16(2*c,e),n));if(o){var l=new ArrayBuffer(2),u=new Uint8Array(l);u.set(i.slice(-o),2-o),r.push(rt._set_data_opt(new DataView(u.buffer).getInt16(0,e),n))}return r}},{key:"from",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=R(R({},{separator:" "}),i);if(e=rt._separator(e,r.separator,null," "),void 0!==r.separator&&rt.invalid_number_char(e))throw new nt(Q.INVALID_CHAR,e);var a=e.match(/[+-]{0,1}[0-9]+/gi);if(!a)throw new nt(Q.WRONG_ARGUMENT,e);if(a=a.map((function(t){return parseInt(t,10)})),!t.is_uint16_array(a))throw new nt(Q.OUT_OF_BOUND,a);var o=new ArrayBuffer(2*a.length),s=new DataView(o);a.forEach((function(t,e){s.setUint16(2*e,t,n)}));var c=new Uint8Array(o),l=[];return c.forEach((function(t){return l.push(t)})),l}},{key:"is_uint16_num",value:function(t){return t>=0&&t<=65535}},{key:"is_uint16_array",value:function(e){return e.every((function(e){return t.is_uint16_num(e)}))}},{key:"num_bytes",value:function(){return 2}}]),t}();function z(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Z(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?z(Object(n),!0).forEach((function(e){v(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var I=function(){function t(){i(this,t)}return a(t,null,[{key:"to",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return i=Z(Z({},{sep:" ",aggregate:0,pad_size:0,pad_char:" "}),i),rt._set_arr_option(t.to_arr(e,n,i),i)}},{key:"to_arr",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=rt.raw(t);n=Z(Z({},{padding:!0,sep:" ",aggregate:0,pad_size:0,pad_char:" "}),n);var r=[],a=new DataView(new Uint8Array(i).buffer),o=a.byteLength%4;if(!n.padding&&o)throw new nt(Q.INVALID_SIZE,o);for(var s=a.byteLength/4-o,c=0;c<s;c++)r.push(rt._set_data_opt(a.getInt32(4*c,e),n));if(o){var l=new ArrayBuffer(4),u=new Uint8Array(l);u.set(i.slice(-o),4-o),r.push(rt._set_data_opt(new DataView(u.buffer).getInt32(0,e),n))}return r}},{key:"from",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};console.assert("string"==typeof e,"Argument must be a string");var r=Z(Z({},{separator:" "}),i);if(e=rt._separator(e,r.separator,null," "),void 0!==r.separator&&rt.invalid_number_char(e))throw new nt(Q.INVALID_CHAR,e);var a=e.match(/[+-]{0,1}[0-9]+/gi);if(!a)throw new nt(Q.WRONG_ARGUMENT,e);if(a=a.map((function(t){return parseInt(t,10)})),!t.is_int32_array(a))throw new nt(Q.OUT_OF_BOUND,a);var o=new ArrayBuffer(4*a.length),s=new DataView(o);a.forEach((function(t,e){s.setInt32(4*e,t,n)}));var c=new Uint8Array(o),l=[];return c.forEach((function(t){return l.push(t)})),l}},{key:"is_int32_num",value:function(t){return t>=-2147483648&&t<=2147483647}},{key:"is_int32_array",value:function(e){return e.every((function(e){return t.is_int32_num(e)}))}},{key:"num_bytes_int32",value:function(){return 4}}]),t}();function H(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function B(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?H(Object(n),!0).forEach((function(e){v(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Y=function(){function t(){i(this,t)}return a(t,null,[{key:"to",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return i=B(B({},{sep:" ",aggregate:0,pad_size:0,pad_char:" "}),i),rt._set_arr_option(t.to_arr(e,n,i),i)}},{key:"to_arr",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=rt.raw(t);n=B(B({},{padding:!0,sep:" ",aggregate:0,pad_size:0,pad_char:" "}),n);var r=[],a=new DataView(new Uint8Array(i).buffer),o=a.byteLength%4;if(!n.padding&&o)throw new nt(Q.INVALID_SIZE,o);for(var s=a.byteLength/4-o,c=0;c<s;c++)r.push(rt._set_data_opt(a.getUint32(4*c,e),n));if(o){var l=new ArrayBuffer(4),u=new Uint8Array(l);u.set(i.slice(-o),4-o),r.push(rt._set_data_opt(new DataView(u.buffer).getUint32(0,e),n))}return r}},{key:"from",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};console.assert("string"==typeof e,"Argument must be a string");var r=B(B({},{separator:" "}),i);if(e=rt._separator(e,r.separator,null," "),void 0!==r.separator&&rt.invalid_number_char(e))throw new nt(Q.INVALID_CHAR,e);var a=e.match(/[+-]{0,1}[0-9]+/gi);if(!a)throw new nt(Q.WRONG_ARGUMENT,e);if(a=a.map((function(t){return parseInt(t,10)})),!t.is_uint32_array(a))throw new nt(Q.OUT_OF_BOUND,a);var o=new ArrayBuffer(4*a.length),s=new DataView(o);a.forEach((function(t,e){s.setUint32(4*e,t,n)}));var c=new Uint8Array(o),l=[];return c.forEach((function(t){return l.push(t)})),l}},{key:"is_uint32_num",value:function(t){return t>=0&&t<=4294967295}},{key:"is_uint32_array",value:function(e){return e.every((function(e){return t.is_uint32_num(e)}))}},{key:"num_bytes",value:function(){return 4}}]),t}();function V(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function F(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?V(Object(n),!0).forEach((function(e){v(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var G=function(){function t(){i(this,t)}return a(t,null,[{key:"to",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return i=F(F({},{sep:" ",aggregate:0,pad_size:0,pad_char:" "}),i),rt._set_arr_option(t.to_arr(e,n,i),i)}},{key:"to_arr",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=rt.raw(t);n=F(F({},{padding:!0,sep:" ",aggregate:0,pad_size:0,pad_char:" "}),n);var r=[],a=new DataView(new Uint8Array(i).buffer),o=a.byteLength%8;if(!n.padding&&o)throw new nt(Q.INVALID_SIZE,o);for(var s=a.byteLength/8-o,c=0;c<s;c++)r.push(rt._set_data_opt(a.getBigInt64(8*c,e),n));if(o){var l=new ArrayBuffer(8),u=new Uint8Array(l);u.set(i.slice(-o),8-o),r.push(rt._set_data_opt(new DataView(u.buffer).getBigInt64(0,e),n))}return r}},{key:"from",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};console.assert("string"==typeof e,"Argument must be a string");var r=F(F({},{separator:" "}),i);if(e=rt._separator(e,r.separator,null," "),void 0!==r.separator&&rt.invalid_number_char(e))throw new nt(Q.INVALID_CHAR,e);var a=e.match(/[-+]{0,1}[0-9]+/gi);if(!a)throw new nt(Q.WRONG_ARGUMENT,e);if(a=a.map((function(t){return parseInt(t,10)})),!t.is_int64_array(a))throw new nt(Q.OUT_OF_BOUND,a);var o=new ArrayBuffer(8*a.length),s=new DataView(o);a.forEach((function(t,e){s.setBigInt64(8*e,BigInt(t),n)}));var c=new Uint8Array(o),l=[];return c.forEach((function(t){return l.push(t)})),l}},{key:"is_int64_num",value:function(t){return t>=-0x8000000000000000&&t<=0x8000000000000000}},{key:"is_int64_array",value:function(e){return e.every((function(e){return t.is_int64_num(e)}))}},{key:"num_bytes_int64",value:function(){return 8}}]),t}();function W(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function X(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?W(Object(n),!0).forEach((function(e){v(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var K=function(){function t(){i(this,t)}return a(t,null,[{key:"to",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return i=X(X({},{sep:" ",aggregate:0,pad_size:0,pad_char:" "}),i),rt._set_arr_option(t.to_arr(e,n,i),i)}},{key:"to_arr",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=rt.raw(t);n=X(X({},{padding:!0,sep:" ",aggregate:0,pad_size:0,pad_char:" "}),n);var r=[],a=new DataView(new Uint8Array(i).buffer),o=a.byteLength%8;if(!n.padding&&o)throw new nt(Q.INVALID_SIZE,o);for(var s=a.byteLength/8-o,c=0;c<s;c++)r.push(rt._set_data_opt(a.getBigUint64(8*c,e),n));if(o){var l=new ArrayBuffer(8),u=new Uint8Array(l);u.set(i.slice(-o),8-o),r.push(rt._set_data_opt(new DataView(u.buffer).getBigUint64(0,e),n))}return r}},{key:"from",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};console.assert("string"==typeof e,"Argument must be a string");var r=X(X({},{separator:" "}),i);if(e=rt._separator(e,r.separator,null," "),void 0!==r.separator&&rt.invalid_number_char(e))throw new nt(Q.INVALID_CHAR,e);var a=e.match(/[-+]{0,1}[0-9]+/gi);if(!a)throw new nt(Q.WRONG_ARGUMENT,e);if(a=a.map((function(t){return parseInt(t,10)})),!t.is_uint64_array(a))throw new nt(Q.OUT_OF_BOUND,a);var o=new ArrayBuffer(8*a.length),s=new DataView(o);a.forEach((function(t,e){s.setBigUint64(8*e,BigInt(t),n)}));var c=new Uint8Array(o),l=[];return c.forEach((function(t){return l.push(t)})),l}},{key:"is_uint64_num",value:function(t){return t>=0&&t<=0x10000000000000000}},{key:"is_uint64_array",value:function(e){return e.every((function(e){return t.is_uint64_num(e)}))}},{key:"num_bytes_uint64",value:function(){return 8}}]),t}(),J={text:{value:"text",name:"Text",long_name:"Text",to:b.to,to_arr:b.to,from:b.from,num_bytes:b.num_bytes,is_valid_char:b.is_ascii_char,clear_invalid_char:function(t){return t}},hex:{value:"hex",name:"Hexa",long_name:"Hexadecimal",to:k.to,to_arr:k.to_arr,from:k.from,num_bytes:k.num_bytes,is_valid_char:k.is_hex_char,clear_invalid_char:k.clear_no_hex_char},binary:{value:"binary",name:"Binary",long_name:"Binary",to:O.to,to_arr:O.to_arr,from:O.from,num_bytes:O.num_bytes,is_valid_char:O.is_binary_char,clear_invalid_char:O.clear_no_binary_char},int8:{value:"int8",name:"Interger8",long_name:"Interger8",to:C.to,to_arr:C.to_arr,from:C.from,num_bytes:C.num_bytes,is_valid_char:C.is_digit_char,clear_invalid_char:O.clear_no_digit_char},uint8:{value:"uint8",name:"UInterger8",long_name:"Unsigned Interger8",to:j.to,to_arr:j.to_arr,from:j.from,num_bytes:j.num_bytes,is_valid_char:j.is_digit_char,clear_invalid_char:j.clear_no_digit_char},int16le:{value:"int16le",name:"Interger16LE",long_name:"Interger16 little endian",to:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return D.to(t,!0,e)},to_arr:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return D.to_arr(t,!0,e)},from:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return D.from(t,!0,e)},num_bytes:D.num_bytes,is_valid_char:D.is_digit_char,clear_invalid_char:D.clear_no_digit_char},int16be:{value:"int16be",name:"Interger16BE",long_name:"Interger16 big endian",to:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return D.to(t,!1,e)},to_arr:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return D.to_arr(t,!1,e)},from:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return D.from(t,!1,e)},num_bytes:D.num_bytes,is_valid_char:D.is_digit_char,clear_invalid_char:D.clear_no_digit_char},uint16le:{value:"uint16le",name:"UInterger16LE",long_name:"Unsigned Interger16 little endian",to:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return U.to(t,!0,e)},to_arr:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return U.to_arr(t,!0,e)},from:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return U.from(t,!0,e)},num_bytes:U.num_bytes,is_valid_char:U.is_digit_char,clear_invalid_char:U.clear_no_digit_char},uint16be:{value:"uint16be",name:"UInterger16BE",long_name:"Unsigned Interger16 big endian",to:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return U.to(t,!1,e)},to_arr:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return U.to_arr(t,!1,e)},from:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return U.from(t,!1,e)},num_bytes:U.num_bytes,is_valid_char:U.is_digit_char,clear_invalid_char:U.clear_no_digit_char},int32le:{value:"int32le",name:"Interger32LE",long_name:"Interger32 little endian",to:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return I.to(t,!0,e)},to_arr:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return I.to_arr(t,!0,e)},from:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return I.from(t,!0,e)},num_bytes:I.num_bytes,is_valid_char:I.is_digit_char,clear_invalid_char:I.clear_no_digit_char},int32be:{value:"int32be",name:"Interger32BE",long_name:"Interger32 big endian",to:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return I.to(t,!1,e)},to_arr:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return I.to_arr(t,!1,e)},from:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return I.from(t,!1,e)},num_bytes:I.num_bytes,is_valid_char:I.is_digit_char,clear_invalid_char:I.clear_no_digit_char},uint32le:{value:"uint32le",name:"UInterger32LE",long_name:"Unsigned Interger32 little endian",to:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Y.to(t,!0,e)},to_arr:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Y.to_arr(t,!0,e)},from:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Y.from(t,!0,e)},num_bytes:Y.num_bytes,is_valid_char:Y.is_digit_char,clear_invalid_char:Y.clear_no_digit_char},uint32be:{value:"uint32be",name:"UInterger32BE",long_name:"Unsigned Interger32 big endian",to:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Y.to(t,!1,e)},to_arr:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Y.to_arr(t,!1,e)},from:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Y.from(t,!1,e)},num_bytes:Y.num_bytes,is_valid_char:Y.is_digit_char,clear_invalid_char:Y.clear_no_digit_char},int64le:{value:"int64le",name:"Interger64LE",long_name:"Interger64 little endian",to:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return G.to(t,!0,e)},to_arr:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return G.to_arr(t,!0,e)},from:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return G.from(t,!0,e)},num_bytes:G.num_bytes,is_valid_char:G.is_digit_char,clear_invalid_char:G.clear_no_digit_char},int64be:{value:"int64be",name:"Interger64BE",long_name:"Interger64 big endian",to:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return G.to(t,!1,e)},to_arr:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return G.to_arr(t,!1,e)},from:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return G.from(t,!1,e)},num_bytes:G.num_bytes,is_valid_char:G.is_digit_char,clear_invalid_char:G.clear_no_digit_char},uint64le:{value:"uint64le",name:"UInterger64LE",long_name:"UInterger64 little endian",to:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return K.to(t,!0,e)},to_arr:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return K.to_arr(t,!0,e)},from:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return K.from(t,!0,e)},num_bytes:K.num_bytes,is_valid_char:K.is_digit_char,clear_invalid_char:K.clear_no_digit_char},uint64be:{value:"uint64be",name:"UInterger64BE",long_name:"UInterger64 big endian",to:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return K.to(t,!1,e)},to_arr:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return K.to_arr(t,!1,e)},from:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return K.from(t,!1,e)},num_bytes:K.num_bytes,is_valid_char:K.is_digit_char,clear_invalid_char:K.clear_no_digit_char}};Object.freeze(J);var $={0:{value:"0",hex:0,name:"Null"},a:{value:"a",hex:7,name:"Alert"},b:{value:"b",hex:8,name:"Backspace"},e:{value:"e",hex:27,name:"Escape"},f:{value:"f",hex:12,name:"Formfeed"},n:{value:"n",hex:10,name:"Newline"},r:{value:"r",hex:13,name:"Carriage Return"},t:{value:"t",hex:9,name:"Horizontal Tab"},v:{value:"v",hex:11,name:"Vertical Tab"},"\\":{value:"\\",hex:92,name:"Backslash"}},Q={UNKNOW_TYPE:{code:1,message:"Unknow type"},OUT_OF_BOUND:{code:2,message:"Value out of bound"},WRONG_ARGUMENT:{code:3,message:"Wrong argument"},INVALID_CHAR:{code:4,message:"Invalid character"},INVALID_SIZE:{code:5,message:"Invalid size to type"}};function tt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function et(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?tt(Object(n),!0).forEach((function(e){v(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var nt=function(t){s(o,t);var e,n,r=(e=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,i=d(e);if(n){var r=d(this).constructor;t=Reflect.construct(i,arguments,r)}else t=i.apply(this,arguments);return u(this,t)});function o(t){var e,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return i(this,o),(e=r.call(this,t.message))._code=t.code,e._arg=n,e}return a(o,[{key:"code",get:function(){return this._code}},{key:"arg",get:function(){return this._arg}}]),o}(p(Error));function it(t){return console.assert("string"==typeof t,"Wrong argument"),t.match(/\\x[0-9a-f]{1,2}|\\[0abefnrtv\\]|.{1}|\n/gi).map((function(t){return 1===t.length?t.charCodeAt(0):(t=t.slice(1))in $?$[t].hex:parseInt(t.slice(1),16)}))}var rt=function(){function t(){i(this,t)}return a(t,null,[{key:"raw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=[];return null!=e&&(e instanceof Array||e instanceof Uint8Array)&&t.is_uint8_array(e)&&(n=e instanceof Array?Object.assign([],e):Array.from(e)),n}},{key:"_set_arr_option",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.hasOwnProperty("sep")?e.sep:" ",i=e.hasOwnProperty("aggregate")?e.aggregate:0,r="";return t.forEach((function(t,e){i>1&&e%i!=0||0!=e&&(r+=n),r+=t})),r}},{key:"_set_data_opt",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t=""+t;var n=e.hasOwnProperty("pad_size")?e.pad_size:0,i=e.hasOwnProperty("pad_char")?e.pad_char:"0";return t.padStart(n,i)}},{key:"_separator",value:function(t,e,n,i){if(null===e)return t;if(void 0===e)return n?n(t):t;if(e){if(e instanceof RegExp)return t.replace(e,"");if("string"==typeof e)return t.replace(new RegExp("[".concat(e,"]"),"g"),i);throw new nt(Q.WRONG_ARGUMENT,e)}return t}},{key:"invalid_number_char",value:function(t){return/[^\+\-0-9 ]+/.test(t)}},{key:"to_hex_string",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!("number"==typeof t&&t>=0&&t<=255))throw new nt(Q.WRONG_ARGUMENT,t);return e?t.toString(16).toUpperCase():t.toString(16).toLowerCase()}},{key:"is_uint8_num",value:function(t){return t>=0&&t<=255}},{key:"is_uint8_array",value:function(e){return e.every((function(e){return t.is_uint8_num(e)}))}},{key:"clear_no_digit_char",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=et(et({},{allowed:" "}),e),t.replace(new RegExp("[^0-9".concat(e.allowed,"]"),"g"),"")}}]),t}(),at=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};i(this,t),this._container=[],null===n?this.raw(e):this.from(e,n,r)}return a(t,[{key:"from",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:J.text.value,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!(e in J))throw new nt(Q.UNKNOW_TYPE,e);if("number"==typeof t&&(t="".concat(t)),"string"!=typeof t)throw new nt(Q.WRONG_ARGUMENT,t);return""===t?(this._container=[],""):(this._container=J[e].from(t,n),J[e].from(t,n))}},{key:"to",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(t in J))throw new nt(Q.UNKNOW_TYPE,t);return J[t].to(this._container,e)}},{key:"to_arr",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(t in J))throw new nt(Q.UNKNOW_TYPE,t);return J[t].to_arr(this._container,e)}},{key:"size",value:function(){return this._container.length}},{key:"raw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null!==e&&(this._container=t.raw(e)),Object.assign([],this._container)}},{key:"is_ascii_string",value:function(){return this._container.every((function(t){return b.is_ascii_int(t)}))}},{key:"raw_str",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.uint8(t)}},{key:"string",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return b.to(this._container,t)}},{key:"string_to_array",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._container=b.from(t,e),this._container}},{key:"hex",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return k.to(this._container,t)}},{key:"hex_arr",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return k.to_arr(this._container,t)}},{key:"string_hex_to_array",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._container=k.from(t,e),this._container}},{key:"binary",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return O.to(this._container,t)}},{key:"binary_arr",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return O.to_arr(this._container,t)}},{key:"string_binary_to_array",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._container=O.from(t,e),this._container}},{key:"int8",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return C.to(this._container,t)}},{key:"int8_arr",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return C.to_arr(this._container,t)}},{key:"string_int8_to_array",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._container=C.from(t,e),this._container}},{key:"uint8",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return j.to(this._container,t)}},{key:"uint8_arr",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return j.to_arr(this._container,t)}},{key:"string_uint8_to_array",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._container=j.from(t,e),this._container}},{key:"int16",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return D.to(this._container,t,e)}},{key:"int16_arr",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return D.to_arr(this._container,t,e)}},{key:"string_int16_to_array",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._container=D.from(t,e,n),this._container}},{key:"uint16",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return U.to(this._container,t,e)}},{key:"uint16_arr",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return U.to_arr(this._container,t,e)}},{key:"string_uint16_to_array",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._container=U.from(t,e,n),this._container}},{key:"int32",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return I.to(this._container,t,e)}},{key:"int32_arr",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return I.to_arr(this._container,t,e)}},{key:"string_int32_to_array",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._container=I.from(t,e,n),this._container}},{key:"uint32",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Y.to(this._container,t,e)}},{key:"uint32_arr",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Y.to_arr(this._container,t,e)}},{key:"string_uint32_to_array",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._container=Y.from(t,e,n),this._container}},{key:"int64",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return G.to(this._container,t,e)}},{key:"int64_arr",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return G.to_arr(this._container,t,e)}},{key:"string_int64_to_array",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._container=G.from(t,e,n),this._container}},{key:"uint64",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return K.to(this._container,t,e)}},{key:"uint64_arr",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return K.to_arr(this._container,t,e)}},{key:"string_uint64_to_array",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._container=K.from(t,e,n),this._container}}],[{key:"to",value:function(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!(n in J))throw new nt(Q.UNKNOW_TYPE,n);var r=t.raw(e);return J[n].to(r,i)}},{key:"parse",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!(e in J))throw new nt(Q.UNKNOW_TYPE,e);if("number"==typeof t&&(t="".concat(t)),"string"!=typeof t)throw new nt(Q.WRONG_ARGUMENT,t);return""===t?[]:J[e].from(t,n)}},{key:"num_bytes",value:function(t){if(!(t in J))throw new nt(Q.UNKNOW_TYPE,t);return J[t].num_bytes()}},{key:"is_valid_char",value:function(t,e){if(!(e in J))throw new nt(Q.UNKNOW_TYPE,e);return J[e].is_valid_char(t)}},{key:"clear_invalid_char",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!(e in J))throw new nt(Q.UNKNOW_TYPE,e);return J[e].clear_invalid_char(t,n)}},{key:"convert",value:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!(e in J)||!(n in J))throw new nt(Q.UNKNOW_TYPE,[e,n]);var r=J[e].from(t,i);return J[n].to(r,i)}},{key:"raw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return rt.raw(t)}},{key:"is_ascii_char",value:function(t){return b.is_ascii_char(t)}},{key:"is_printable",value:function(t){return b.is_printable(t)}}]),t}();function ot(t){document.querySelector("meta[name=theme-color]").setAttribute("content",t)}!function(){var t=document.createElement("template");t.innerHTML="\n<style>\n  :host{\n    display: inline-flex;\n    width: 100%;\n    border-radius: 10px;\n    overflow: hidden;\n    border: 1px solid black;\n  }\n\n  textarea{\n    color: var(--text-color);\n    background-color: var(--primary-color);\n    font-family: var(--font-family);\n    resize: none;\n    outline: none;\n    flex-grow: 4;\n    padding: 5px;\n  }\n\n  .data-type {\n    display: flex;\n    flex-direction: column;\n  }\n\n  button\n  {\n    cursor: pointer;\n    color: var(--text-color);\n    background-color: var(--primary-color-dark);\n    font-family: var(--font-family);\n    padding: 6px 6px;\n    overflow: hidden;\n  }\n\n  button[data-selected='true']{\n    border-style: inset;\n  }\n</style>\n<textarea cols=4 placeholder=Payload></textarea>\n<div class=data-type>\n  <button value=text>Text</button>\n  <button value=hex>Hex</button>\n</div>",customElements.define("binary-data",function(e){s(c,e);var n,r,o=(n=c,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=d(n);if(r){var i=d(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return u(this,t)});function c(){var e;i(this,c);var n=(e=o.call(this)).attachShadow({mode:"open"});return n.appendChild(t.content.cloneNode(!0)),e._payload=n.querySelector("textarea"),e._text=n.querySelector("button[value=text]"),e._hex=n.querySelector("button[value=hex]"),n.querySelector(".data-type").addEventListener("click",(function(t){e._payload.focus(),e[t.target.value]()})),e.text(),e._payload.addEventListener("keydown",(function(t){1!=t.key.length||at.is_valid_char(t.key,e._format)||t.preventDefault()})),e}return a(c,[{key:"connectedCallback",value:function(){this.hasAttribute("readonly")&&this._payload.setAttribute("readonly","")}},{key:"text",value:function(){"text"!=this._format&&(this._text.dataset.selected="true",this._hex.dataset.selected="false",this._format="text",this._payload.value.length&&(this._payload.value=at.convert(this._payload.value,"hex","text")))}},{key:"hex",value:function(){"hex"!=this._format&&(this._text.dataset.selected="false",this._hex.dataset.selected="true",this._format="hex",this._payload.value.length&&(this._payload.value=at.convert(this._payload.value,"text","hex")))}},{key:"value_string",get:function(){return this._payload.value}},{key:"value",get:function(){return at.parse(this._payload.value,this._format)},set:function(t){this._payload.value=at.to(t,this._format)}}]),c}(p(HTMLElement)))}(),function(){var t=document.createElement("template");t.innerHTML="\n<style>\n    :host\n    {\n      display: inline-flex;\n      font-size: 15px;\n      align-items: stretch;\n      border: 1px solid black;\n      border-radius: 4px;\n    }\n\n    .name\n    {\n      background-color: var(--primary-color-dark);\n      padding: 3px;\n      font-weight: bold;\n    }\n\n    .value\n    {\n      background-color: var(--primary-color-light);\n      padding: 3px;\n    }\n</style>\n<div class=name></div>\n<div class=value></div>",customElements.define("header-value",function(e){s(c,e);var n,r,o=(n=c,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=d(n);if(r){var i=d(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return u(this,t)});function c(){var e;i(this,c);var n=(e=o.call(this)).attachShadow({mode:"open"});return n.appendChild(t.content.cloneNode(!0)),e._name=n.querySelector(".name"),e._value=n.querySelector(".value"),e}return a(c,[{key:"connectedCallback",value:function(){this.hasAttribute("name")&&(this._name.textContent=this.getAttribute("name"))}},{key:"name",get:function(){return this._name.textContent},set:function(t){this._name.textContent=t}},{key:"value",get:function(){return this._value.textContent},set:function(t){this._value.textContent=t}}]),c}(p(HTMLElement)))}(),function(){var t=document.createElement("template");t.innerHTML="\n<style>\n    :host\n    {\n      display: flex;\n      gap: 2px;\n    }\n\n    input[type=checkbox]\n    {\n      align-self: center;\n    }\n\n    select,\n    input{\n      border-radius: 5px;\n      color: var(--text-color);\n      background-color: var(--primary-color);\n      outline: none;\n      font-family: var(--font-family);\n      font-size: 1em;\n      border-color: rgb(170, 170, 170);\n      text-align: center;\n    }\n\n    select:hover,\n    input:hover\n    {\n      border-color: white;\n    }\n\n    .value{\n      width: 7ch;\n    }\n\n    .close{\n      font-size: 1.7em;\n      cursor: pointer;\n      transform: translateY(-2px);\n    }\n\n    .close:hover{\n      font-weight: bold;\n    }\n\n    /* Chrome, Safari, Edge, Opera */\n    input::-webkit-outer-spin-button,\n    input::-webkit-inner-spin-button {\n      -webkit-appearance: none;\n      margin: 0;\n    }\n\n    /* Firefox */\n    input[type=number] {\n      -moz-appearance: textfield;\n    }\n</style>\n<input type=checkbox checked title='Enable/disable'>\n<select class=sensors></select>\n<select class=op>\n  <option value=less><</option>\n  <option value=less_equal><=</option>\n  <option value=equal>=</option>\n  <option value=greater_equal>>=</option>\n  <option value=greater>></option>\n</select>\n<input class=value type=number value=0>\n<span class=close>&times;</span>",customElements.define("sensor-notify",function(e){s(c,e);var n,r,o=(n=c,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=d(n);if(r){var i=d(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return u(this,t)});function c(){var e;return i(this,c),(e=o.call(this))._shadowRoot=e.attachShadow({mode:"open"}),e._shadowRoot.appendChild(t.content.cloneNode(!0)),e._sensors=e._shadowRoot.querySelector(".sensors"),e._shadowRoot.querySelector(".close").addEventListener("click",(function(t){e.parentNode.removeChild(l(e))})),e}return a(c,[{key:"connectedCallback",value:function(){}},{key:"value",get:function(){var t=this._shadowRoot.querySelector(".sensors").selectedOptions[0].value.split("@");return{enable:this._shadowRoot.querySelector("input[type=checkbox]").checked,sensor:{type:+t[0],index:+t[1]},operation:this._shadowRoot.querySelector(".op").selectedOptions[0].value,value:+this._shadowRoot.querySelector(".value").value}},set:function(t){this._shadowRoot.querySelector("input[type=checkbox]").checked=t.enabled,this._shadowRoot.querySelector(".sensors").value="".concat(t.sensor.type,"@").concat(t.sensor.index),this._shadowRoot.querySelector(".op").value=t.operation,this._shadowRoot.querySelector(".value").value=t.value}},{key:"add_sensor",value:function(t,e){var n=document.createElement("option");n.textContent=t,n.value=e,this._sensors.appendChild(n)}}]),c}(p(HTMLElement)))}();var st=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};i(this,t),this._template=e,this._script=n,this._options=r}return a(t,[{key:"load",value:function(){document.body.innerHTML="","title"in this._options&&(window.document.title=this._options.title),"theme-color"in this._options&&ot(this._options["theme-color"]),document.body.appendChild(this._template.content.cloneNode(!0)),this._script&&this._script.apply(this,arguments)}}]),t}(),ct=new(function(){function t(){i(this,t),this._list={},this._current=null}return a(t,[{key:"current",get:function(){this._current}},{key:"add",value:function(t,e){return"string"==typeof t&&e instanceof st&&!(t in this._list)&&(this._list[t]=e,!0)}},{key:"run",value:function(t){var e;if(!(t in this._list))return!1;for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return(e=this._list[t]).load.apply(e,i),this._current=t,!0}}]),t}());function lt(){return navigator.userAgent.match(/\(([^()]*)\)/)[1]}function ut(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function dt(t,e){if(t){if("string"==typeof t)return ut(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ut(t,e):void 0}}function ht(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,r,a=[],o=!0,s=!1;try{for(n=n.call(t);!(o=(i=n.next()).done)&&(a.push(i.value),!e||a.length!==e);o=!0);}catch(t){s=!0,r=t}finally{try{o||null==n.return||n.return()}finally{if(s)throw r}}return a}}(t,e)||dt(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ft=document.querySelector("#template-login-session"),pt={weekday:"short",year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",hourCycle:"h24"};function _t(t,e,n){var i=e.storage,r=e.registration,a=document.querySelector("#login-load-screen");if(i||a.hide(),!n)return a.hide(),void i.erase("instance","autoconnect");i.load("instance","autoconnect",(function(e){e&&e.autoconnect?((t=new WebSocket(e.server_addr)).onopen=function(n){t.send(JSON.stringify({type:"user",command:"auth_session_id",data:{user:e.username,sessionid:e.sessionid,user_agent:lt()}}))},t.onmessage=function(n){var a=JSON.parse(n.data);"user"==a.type&&"authenticate"==a.command&&a.data.authenticated&&ct.run("main",{ws:t,username:e.username,server_addr:e.server_addr,message:a,sessionid:e.sessionid,storage:i,autoconnect:!0,registration:r,policy:a.data.policy})},t.onclose=function(e){a.hide(),t=null},t.onerror=function(t){}):a.hide()}),(function(t){a.hide()}))}function vt(t,e,n){!function(t,e,n){new Promise((function(i,r){t||r(null);var a=[];t.iterate("sessions",null,"next",(function(t){return a.push(t.value),!0}),(function(){a.sort((function(t,e){return t.date.getTime()<e.date.getTime()?1:-1})),a.forEach((function(i){!function(t,e,n,i){var r=ft.content.cloneNode(!0),a=i.server_addr,o=i.username,s=document.createElement("span"),c="".concat(o,"@").concat(a);r.querySelector(".session-info").textContent=c,r.querySelector(".session-last-login").textContent=i.date.toLocaleDateString(void 0,pt);var l=r.querySelector(".session-data"),u=r.querySelector(".session-erase");l.addEventListener("click",(function(t){n.username.value=o;var e=ht(a.split("://"),2),r=e[0],s=e[1];n.server.scheme=r;var c=ht(s.split(":"),2),l=c[0],u=c[1];n.server.address=l,n.server.port=u,n.autoconnect.checked=i.autoconnect,n.password.value="",n.password.focus()})),u.addEventListener("click",(function(e){s.parentNode.removeChild(s),t.erase("sessions",c)})),s.appendChild(r),e.appendChild(s)}(t,e,n,i)})),i()}))}))}(t,e,n)}var mt={1e3:"Normal Closure",1001:"Going Away",1002:"Protocol error",1003:"Unsupported Data",1005:"No Status Rcvd",1006:"Abnormal Closure",1007:"Invalid frame payload data",1008:"Policy Violation",1009:"Message Too Big",1010:"Mandatory Ext.",1011:"Internal Server Error",1015:"TLS handshake",4001:"Invalid value",4003:"Missing field",4005:"Internal error",4100:"User not found",4101:"User is inactive",4102:"User is suspended",4103:"User is deleted",4104:"Password not match",4105:"Session expired"};function yt(t){var e=t.storage,n=t.registration,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=null,a=document.querySelector("#username"),o=document.querySelector("#password"),s=document.querySelector("#server-addr"),c=document.querySelector("#autoconnect"),l=document.querySelector("#connect"),u=document.querySelector("#connect-label"),d=document.querySelector("#error"),h=document.querySelector("#spinner");function f(t){t.send(JSON.stringify({type:"user",command:"authenticate",data:{user:a.value,password:o.value,keep_connected:c.checked,user_agent:lt()}}))}function p(t){d.textContent=t,d.style.display=t?"block":"none"}function _(){u.textContent="Connecting...",h.style.display="inline-block",l.disabled=!0}function v(){u.textContent="Connect",h.style.display="none",l.disabled=!1}vt(e,document.querySelector("#sessions"),{username:a,password:o,autoconnect:c,server:s}),_t(r,{storage:e,registration:n},i),p(),a.focus();var m=function(t){if(p(),a.value.length)if(o.value.length)if(s.address.length)if(s.port.length){var i=s.scheme+"://"+s.address+":"+s.port;try{r?f(r):r=new WebSocket(i),_(),r.onopen=function(t){u.textContent="Authenticating...",f(r)},r.onmessage=function(t){var o=JSON.parse(t.data);"user"==o.type&&"authenticate"==o.command&&o.data.authenticated&&ct.run("main",{ws:r,username:a.value,server_addr:i,message:o,sessionid:o.data.sessionid,storage:e,autoconnect:c.checked,registration:n,policy:o.data.policy})},r.onclose=function(t){v(),p("".concat(1006!=t.code&&t.code in mt?mt[t.code]:"Error connecting")),r=null},r.onerror=function(t){}}catch(t){console.log("catch error",t),p(t),r=null}}else p("Server port not set");else p("Server address not set");else p("Password not set");else p("Username not set")};a.addEventListener("keydown",(function(t){"Enter"==t.key&&m(t)})),o.addEventListener("keydown",(function(t){"Enter"==t.key&&m(t)})),l.addEventListener("click",m)}function gt(t){return function(t){if(Array.isArray(t))return ut(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||dt(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}Object.freeze(mt),function(){var t=document.createElement("template");t.innerHTML='<load-screen id=login-load-screen><i class="fas fa-spinner fa-pulse"></i></load-screen>\n<main id=login>\n  <section id=container>\n    <h1>Agro Telemetry</h1>\n    <div id=input-container>\n      <x-input-icon class=login-input id=username placeholder=Username title=Username>\n        <i slot=icon class="fas fa-user"></i>\n      </x-input-icon>\n      <x-input-icon class=login-input id=password placeholder=Password title=password type=password>\n        <i slot=icon class="fas fa-key"></i>\n      </x-input-icon>\n      <x-input-server class=login-input id=server-addr>\n        <i slot=icon class="fas fa-network-wired"></i>\n      </x-input-server>\n      <label><input id=autoconnect type=checkbox> keep connected</label>\n      <button id=connect><span id=connect-label>Connect</span><span id=spinner><i class="fas fa-spinner fa-pulse"></span></i></button>\n      <div id=error></div>\n    </div>\n  </section>\n  <section id=sessions></section>\n</main>\n',ct.add("login",new st(t,yt,{title:"Agro Telemetry - Login","theme-color":"#0064c8"}))}();var bt=function(){function t(e,n,r){i(this,t),this._type=e,this._command=n,this._cb=r;for(var a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];this._args=o}return a(t,[{key:"run",value:function(t){this._cb.apply(this,[t].concat(gt(this._args)))}}]),t}(),wt=function(){function t(){i(this,t),this._responses={}}return a(t,[{key:"add",value:function(t,e){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];this._responses[this._make_index(t,e)]=f(bt,[t,e].concat(i))}},{key:"remove",value:function(t,e){delete this._responses[this._make_index(t,e)]}},{key:"run",value:function(t){if("type"in t&&"command"in t){var e=this._make_index(t.type,t.command);e in this._responses?this._responses[e].run(t):console.warn("No handler register to ".concat(e,"."))}else console.error("Invalid message",t)}},{key:"_make_index",value:function(t,e){return"".concat(t,"@").concat(e)}}]),t}(),xt=function(){function t(e){var n=e.type,r=e.index,a=e.data;i(this,t),this._type=n,this._index=r,this._data=[],a&&this.add({type:n,index:r,data:a})}return a(t,[{key:"type",get:function(){return this._type}},{key:"index",get:function(){return this._index}},{key:"data",get:function(){return this._data}},{key:"add",value:function(t){t.type,t.index;var e=t.data;Array.isArray(e)?this._data=e.map((function(t){return t.time=new Date(1e3*t.time),t})):(e.time=new Date(1e3*e.time),this._data.push(e))}},{key:"last_data",value:function(){return this._data[this._data.length-1]}},{key:"has_data",value:function(t){var e=this;return t.find((function(t){return t.type==e._type&&t.index==e._index}))}}]),t}(),kt=function(){function t(){i(this,t),this._list={}}return a(t,[{key:"list",get:function(){return this._list}},{key:"size",get:function(){return Object.keys(this._list)}},{key:"sensor",value:function(e,n){return this._list[t.make_index(e,n)]}},{key:"last_data",value:function(t,e){var n=this.sensor(t,e);return n?n.last_data():null}},{key:"process",value:function(e){var n=this;e.forEach((function(e){var i=t.make_index(e.type,e.index);i in n._list?n._list[i].add(e):n._list[i]=new xt(e)}))}}],[{key:"make_index",value:function(t,e){return"".concat(t,"@").concat(e)}}]),t}();function Et(t){setTimeout((function(){return t.classList.add("shine-active")}),0),setTimeout((function(){return t.classList.remove("shine-active")}),700)}var St=function(){function t(e){i(this,t),this._container=e}return a(t,[{key:"update",value:function(t,e){var n=this;this._container.innerHTML="",["mac","name","firmware_version","hardware_version","endpoint","connected"].forEach((function(i){switch(i){case"name":n._make_cell(t.name?t.name:t.mac,i in e);break;case"endpoint":n._make_cell(t.endpoint.addr,"endpoint"in e),n._make_cell(t.endpoint.port,"endpoint"in e);break;case"channel":n._make_cell("".concat(t.channel,"/").concat(t.channel_config),"channel"in e);break;case"children":n._make_cell(t.children.join(" "),"children"in e);break;case"connected":n._container.dataset.connected=t[i];break;default:n._make_cell(t[i],i in e)}}))}},{key:"_make_cell",value:function(t,e){var n=document.createElement("td");n.classList.add("shine"),n.textContent=t,this._container.appendChild(n),e&&Et(n)}}]),t}();function Ot(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Tt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ot(Object(n),!0).forEach((function(e){v(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ot(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var At=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};i(this,t),this._id=e,this._mac=n,this._name=n,this._version_fw=null,this._version_hw=null,this._endpoint={addr:"0.0.0.0",port:0},this._connected=!1,this._ch_config=null,this._ch_conn=null,this._children=[],this._children_table=[],this._layer=-1,this._mac_ap=null,this._net_id=null,this._parent=null,this._has_rtc=!1,this._has_temp_sensor=!1,this._sensors=new kt,this._rtc=null,this._fuse=null,this._ota_version=null,this._uptime=null,this._reset_reason=null,this._custom_responses=[],this._views=r}return a(t,[{key:"id",get:function(){return this._id}},{key:"mac",get:function(){return this._mac}},{key:"name",get:function(){return this._name}},{key:"firmware_version",get:function(){return this._version_fw}},{key:"hardware_version",get:function(){return this._version_hw}},{key:"endpoint",get:function(){return this._endpoint}},{key:"connected",get:function(){return this._connected}},{key:"channel_config",get:function(){return this._ch_config}},{key:"channel",get:function(){return this._ch_conn}},{key:"children",get:function(){return this._children},set:function(t){this._children=t}},{key:"children_table",get:function(){return this._children_table}},{key:"layer",get:function(){return this._layer}},{key:"mac_ap",get:function(){return this._mac_ap}},{key:"net_id",get:function(){return this._net_id}},{key:"parent",get:function(){return this._parent}},{key:"has_rtc",get:function(){return this._has_rtc}},{key:"has_temp_sensor",get:function(){return this._has_temp_sensor}},{key:"sensor_list",get:function(){return this._sensors}},{key:"time",get:function(){return this._rtc}},{key:"fuse",get:function(){return this._fuse}},{key:"ota_version",get:function(){return this._ota_version}},{key:"uptime",get:function(){return this._uptime}},{key:"reset_reason",get:function(){return this._reset_reason}},{key:"custom_responses",get:function(){return this._custom_responses}},{key:"set_connected",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.process({connected:Boolean(t)},e)}},{key:"process",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];["name","version_fw","version_hw","endpoint","connected","ch_config","ch_conn","children_table","net_id","parent","layer","mac_ap","has_rtc","has_temp_sensor","rtc","fuse","ota_version","uptime","reset_reason"].forEach((function(n){n in t&&(e["_".concat(n)]=t[n])})),"sensor"in t&&this._sensors.process(t.sensor),n&&this.update_view(t)}},{key:"add_custom_response",value:function(t){this._custom_responses.push(Tt(Tt({},t),{time:new Date}))}},{key:"register_view",value:function(t,e){this._views[t]=e}},{key:"delete_view",value:function(t){delete this._views[t]}},{key:"update_view",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;Object.values(this._views).forEach((function(n){return n.update(t,e)}))}}]),t}(),Ct=function(){function t(e){i(this,t),this._list={},this._container=e}return a(t,[{key:"size",get:function(){return Object.keys(this._list).length}},{key:"list",get:function(){return this._list}},{key:"process",value:function(t){switch(t.command){case"data":case"list":case"edit":case"custom_response":this.add(t);break;default:console.warn("Data type '".concat(t.command,"' not recognized!"))}}},{key:"set_connected",value:function(t){Object.values(this._list).forEach((function(e){e.set_connected(!t.find((function(t){return t==e.mac})),!0)}))}},{key:"add",value:function(t){var e=this;t&&t.data&&(Array.isArray(t.data)?t.data.forEach((function(n){e._add_device(n,t.command)})):this._add_device(t.data,t.command))}},{key:"remove",value:function(t){delete this._list[t]}},{key:"_add_device",value:function(t,e){var n;switch(t.device in this._list?n=this._list[t.device]:(this.size||this._clear_view(),n=new At(t.id,t.device,{device_table:new St(this._make_line(t.device))}),this._list[t.device]=n),e){case"custom_response":n.add_custom_response(t);break;default:n.process(t,!0)}}},{key:"_make_line",value:function(t){var e=document.createElement("tr");return e.dataset.device=t,this._container.appendChild(e),e}},{key:"_clear_view",value:function(){this._container.innerHTML=""}}]),t}();function Mt(t){return"".concat(t.getDate()).padStart(2,"0")+"/"+"".concat(t.getMonth()+1).padStart(2,"0")+"/"+"".concat(t.getFullYear()).padStart(4,"0")+" "+"".concat(t.getHours()).padStart(2,"0")+":"+"".concat(t.getMinutes()).padStart(2,"0")}function Pt(t){return"".concat(t.getDate()).padStart(2,"0")+"/"+"".concat(t.getMonth()+1).padStart(2,"0")+"/"+"".concat(t.getFullYear()).padStart(4,"0")+" "+"".concat(t.getHours()).padStart(2,"0")+":"+"".concat(t.getMinutes()).padStart(2,"0")+":"+"".concat(t.getSeconds()).padStart(2,"0")}function jt(t,e,n){return!!e&&(t in e&&Et(n),!0)}function Lt(t,e){var n;return"normal"==e?(n=t.time?"".concat(t.time.value," (").concat(t.time.time-t.time.value,") "):"<time> (<lag>) ",n+=t.fuse?"(".concat(t.fuse,")"):"(<fuse>)"):(n=t.time?"".concat(Pt(new Date(1e3*t.time.value))," (").concat(t.time.time-t.time.value,") "):"<time> (<lag>) ",n+=t.fuse?"(".concat(function(t){var e=t<0;t=e?-t:t;var n=Math.floor(t/3600),i=t%60,r=t-3600*n-60*i;return(e?"-":"")+"".concat(n).padStart(2,"0")+":"+"".concat(i).padStart(2,"0")+(r?":"+"".concat(r).padStart(2,"0"):"")}(t.fuse),")"):"(<fuse>)"),n}function Nt(t,e){return t.uptime?"normal"==e?"".concat(t.uptime.value):(s=(n=t.uptime.value)%1e3,l=(c=Math.floor(n/1e3))%1e3,i=(c=Math.floor(c/1e3))%60,r=(c=Math.floor(c/60))%60,a=(c=Math.floor(c/60))%24,o=Math.floor(c/24),"".concat(o,"d")+"".concat(a).padStart(2,"0")+"h"+"".concat(r).padStart(2,"0")+"m"+"".concat(i).padStart(2,"0")+"s"+"".concat(l).padStart(3,"0")+"."+"".concat(s).padStart(3,"0")):"<uptime>";var n,i,r,a,o,s,c,l}var Dt={USER:"user",DEVICE:"device",REPORT:"report",IMAGE:"image",APP:"app",SENSOR:"sensor",NOTIFY:"notify"};Object.freeze(Dt);var qt={USER_GROUP_POLICIES:"user_group_policies",NOTIFY_KEY:"notify_key",LOGOUT:"logout",ADD_USER:"add_user",EDIT_USER:"edit_user",DELETE_USER:"delete_user",ADD_GROUP:"add_group",DELETE_GROUP:"delete_group",PUSH_SUBSCRIBE:"push_subscribe",PUSH_UNSUBSCRIBE:"push_unsubscribe"};Object.freeze(qt);var Rt={LIST:"list",DATA:"data",TREE:"tree",EDIT:"edit",REQUEST:"request",CUSTOM_RESPONSE:"custom_response"};Object.freeze(Rt);var Ut={LIST:"list",ADD:"add",EDIT:"edit",REMOVE:"remove"};Object.freeze(Ut);var zt="device",Zt="image",It="warning",Ht={0:{value:0,name:"integer",title:"Integer"},1:{value:1,name:"unsigned",title:"Unsigned"},2:{value:2,name:"float",title:"Float"}},Bt=document.createElement("template");Bt.innerHTML='<div id=main-device-detail>\n  <h1 class=detail-title>11:22:33:44:55:66</h1>\n  <div class=detail-content>\n    <detail-line>\n      <i class="fas fa-link" slot=icon></i>\n      <span slot=name>Status</span>\n      <span class=\'detail-connected shine\'></span>\n    </detail-line>\n    <expand-menu>\n      <h2 slot=title>General</h2>\n      <detail-line>\n        <i class="fas fa-fingerprint" slot=icon></i>\n        <div slot=name>ID</div>\n        <div class=\'detail-id shine\'></div>\n      </detail-line>\n      <detail-line>\n        <i class="fas fa-signature" slot=icon></i>\n        <div slot=name>Name</div>\n        <span class=\'detail-name-container detail-value shine\'>\n          <span class=detail-name></span>\n          <span class=detail-edit-name><i class="fas fa-edit"></i></span>\n        </span>\n      </detail-line>\n      <detail-line>\n        <i class="fas fa-code" slot=icon></i>\n        <div slot=name>Firmware</div>\n        <div class=\'detail-fw shine\'></div>\n      </detail-line>\n      <detail-line>\n        <i class="fas fa-microchip" slot=icon></i>\n        <div slot=name>Hardware</div>\n        <div class=\'detail-hw shine\'></div>\n      </detail-line>\n      <detail-line>\n        <i class="fas fa-at" slot=icon></i>\n        <div slot=name>Endpoint</div>\n        <div class=\'detail-endpoint shine\'></div>\n      </detail-line>\n    </expand-menu>\n    <expand-menu>\n      <h2 slot=title>Mesh Network</h2>\n      <detail-line>\n        <i class="fas fa-layer-group" slot=icon></i>\n        <div slot=name>Layer</div>\n        <div class=\'detail-layer shine\'></div>\n      </detail-line>\n      <detail-line>\n        <i class="fas fa-sort-up" slot=icon></i>\n        <div slot=name>Parent</div>\n        <div class=\'detail-parent shine\'></div>\n      </detail-line>\n      <detail-line>\n        <i class="fas fa-sitemap" slot=icon></i>\n        <div slot=name>Net ID</div>\n        <div class=\'detail-netid shine\'></div>\n      </detail-line>\n      <detail-line>\n        <i class="fas fa-sliders-h" slot=icon></i>\n        <div slot=name>Channel</div>\n        <div class=\'detail-channel shine\'></div>\n      </detail-line>\n      <detail-line>\n        <i class="fas fa-wifi" slot=icon></i>\n        <div slot=name>MAC AP</div>\n        <div class=\'detail-macap shine\'></div>\n      </detail-line>\n      <detail-line>\n        <i class="fas fa-baby" slot=icon></i>\n        <div slot=name>Children</div>\n        <div class=\'detail-children shine\'></div>\n      </detail-line>\n    </expand-menu>\n    <expand-menu>\n      <h2 slot=title>Configuration</h2>\n      <detail-line>\n        <i class="fas fa-clock" slot=icon></i>\n        <div slot=name>RTC</div>\n        <div class=\'detail-has-rtc shine\'></div>\n      </detail-line>\n      <detail-line>\n        <i class="fas fa-thermometer-half" slot=icon></i>\n        <div slot=name>Temperature Sensor</div>\n        <div class=\'detail-has-temp shine\'></div>\n      </detail-line>\n    </expand-menu>\n    <expand-menu class=detail-device-commands>\n      <h2 slot=title>Commands</h2>\n      <label class=detail-device-command-force><input type=checkbox> Force</label>\n      <detail-line>\n        <i class="fas fa-bullseye" slot=icon></i>\n        <div slot=name>AC Load</div>\n        <span class=detail-ac-load>\n          <btn-on-off data-index=1>\n            <span slot=on><i class="fas fa-check-circle"></i></span>\n            <span slot=off><i class="fas fa-times-circle"></i></span>\n          </btn-on-off>\n          <btn-on-off data-index=2>\n            <span slot=on><i class="fas fa-check-circle"></i></span>\n            <span slot=off><i class="fas fa-times-circle"></i></span>\n          </btn-on-off>\n          <btn-on-off data-index=3>\n            <span slot=on><i class="fas fa-check-circle"></i></span>\n            <span slot=off><i class="fas fa-times-circle"></i></span>\n          </btn-on-off>\n        </span>\n      </detail-line>\n      <detail-line>\n        <i class="fas fa-cube" slot=icon></i>\n        <div slot=name>Packets</div>\n        <array-command class=\'detail-command\' data-type=packet>\n          <button data-index=\'board\'>Board</button>\n          <button data-index=\'config\'>Config</button>\n          <button data-index=\'sensors\'>Sensors</button>\n          <button data-index=\'route\'>Route</button>\n          <button data-index=\'full_config\'>Full Config</button>\n        </array-command>\n      </detail-line>\n    </expand-menu>\n  </div>\n</div>\n';var Yt=function(){function t(e,n){var r=this;i(this,t);var a=Bt.content.firstElementChild.cloneNode(!0);this._title=a.querySelector(".detail-title"),this._connected=a.querySelector(".detail-connected"),this._id=a.querySelector(".detail-id"),this._name=a.querySelector(".detail-name"),this._fw=a.querySelector(".detail-fw"),this._hw=a.querySelector(".detail-hw"),this._endpoint=a.querySelector(".detail-endpoint"),this._layer=a.querySelector(".detail-layer"),this._parent=a.querySelector(".detail-parent"),this._netid=a.querySelector(".detail-netid"),this._channel=a.querySelector(".detail-channel"),this._macap=a.querySelector(".detail-macap"),this._children=a.querySelector(".detail-children"),this._has_rtc=a.querySelector(".detail-has-rtc"),this._has_temp=a.querySelector(".detail-has-temp"),this._commands=a.querySelector(".detail-device-commands"),this._commands_gpios_out=this._commands.querySelectorAll("btn-on-off"),this._force=this._commands.querySelector(".detail-device-command-force input"),this._force.addEventListener("change",(function(t){r._commands.dataset.disabled=!r._force.checked})),this._name.addEventListener("edited",(function(t){r._name.contentEditable=!1,n.send(Dt.DEVICE,Rt.EDIT,{device:r._title.textContent,name:r._name.textContent})})),a.querySelector(".detail-edit-name").addEventListener("click",(function(t){r._name.contentEditable=!0,r._name.focus()})),this._name.addEventListener("blur",(function(t){r._name.contentEditable=!1,n.send(Dt.DEVICE,Rt.EDIT,{device:r._title.textContent,name:r._name.textContent})})),this._commands.addEventListener("command",(function(t){if(!t.target.disabled&&"true"!=r._commands.dataset.disabled)switch(t.detail.type){case"ac_load":n.send(Dt.DEVICE,Rt.REQUEST,{request:"ac".concat(t.detail.index,"_").concat("true"==t.detail.on?"on":"off"),device:r._title.textContent});case"packet":n.send(Dt.DEVICE,Rt.REQUEST,{request:t.detail.index,device:r._title.textContent});break;default:console.warn("command not found",t.detail)}})),e.innerHTML="",e.appendChild(a)}return a(t,[{key:"disable_commands",value:function(t){this._commands.dataset.disabled=t}},{key:"update",value:function(t,e){this._title.textContent=t.mac,this._connected.textContent=t.connected?"connected":"disconnected",jt("connected",e,this._connected),this.disable_commands(!t.connected),this._id.textContent=t.id,jt("id",e,this._id),this._name.textContent=t.name,jt("name",e,this._name),this._fw.textContent=t.firmware_version,jt("version_fw",e,this._fw),this._hw.textContent=t.hardware_version,jt("version_hw",e,this._hw),this._endpoint.textContent=t.endpoint.addr+":"+t.endpoint.port,jt("endpoint",e,this._endpoint),this._layer.textContent=t.layer,jt("layer",e,this._layer),this._parent.textContent=t.parent,jt("parent",e,this._parent),this._netid.textContent=t.net_id,jt("net_id",e,this._netid),this._channel.textContent="".concat(t.channel," / ").concat(t.channel_config),jt("ch_conn",e,this._channel),this._macap.textContent=t.mac_ap,jt("mac_ap",e,this._macap),this._children.textContent=t.children_table.join(" | "),jt("children_table",e,this._children),this._has_rtc.textContent=t.has_rtc,jt("has_rtc",e,this._has_rtc),this._has_temp.textContent=t.has_temp_sensor,jt("has_temp_sensor",e,this._has_temp),this._commands_gpios_out.forEach((function(e){var n=t.sensor_list.last_data(5,0);n&&(e.state=n.value&1<<+e.dataset.index+8-1)}))}}]),t}();function Vt(t,e,n){return JSON.stringify({type:t,command:e,data:n})}var Ft=n(1834);function Gt(t,e){return e&&t.name?t.name:t.mac}var Wt=function(){function t(e,n){i(this,t),this._unconnected=[],this._endpoints=[],this._tree=[],this._view=[new Xt(e),new Kt(n)],this._show_name=!1}return a(t,[{key:"unconnected",get:function(){return this._unconnected}},{key:"endpoints",get:function(){return this._endpoints}},{key:"tree",get:function(){return this._tree}},{key:"get_endpoint",value:function(t){var e=this._unconnected.find((function(e){return e==t}));if(e)return!1;if(!(e=this._tree.find((function(e){return e.device==t}))))return!1;if(e.layer<=0)return!1;for(;1!=e.layer;)if(!(e=this._tree.find((function(t){return t.device==e.parent}))))return!1;var n=this._endpoints.find((function(t){return t.device}));return!!n&&n.endpoint}},{key:"process",value:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._unconnected=[],t.data.unconnected.forEach((function(t){t in e.device_list.list&&n._unconnected.push(e.device_list.list[t]),e.device_list.list[t].children=[]})),this._endpoints=[],t.data.endpoints.forEach((function(t){t.device in e.device_list.list&&n._endpoints.push(e.device_list.list[t.device])})),this._tree=[],t.data.tree.forEach((function(t){t.device in e.device_list.list?(n._tree.push(e.device_list.list[t.device]),e.device_list.list[t.device].children=t.children):-1!=t.layer&&0!=t.layer||n._tree.push({mac:t.device,layer:t.layer,children:t.children})})),i&&this.update_view(e,this._show_name)}},{key:"update_view",value:function(t,e){var n=this;this._show_name=void 0===e?this._show_name:e,this._view.forEach((function(e){return e.update(n,t,n._show_name)}))}}]),t}(),Xt=function(){function t(e){i(this,t),this._endpoints=e.querySelector("#net-devices-endpoints"),this._unconnected=e.querySelector("#net-devices-unconnected"),this._tree=e.querySelector("#net-devices-tree")}return a(t,[{key:"update",value:function(t,e,n){this._update_unconnected(t,n),this._update_endpoints(t,n),this._update_tree(t,n)}},{key:"_update_unconnected",value:function(t,e){var n=this;t.unconnected.length?(this._unconnected.innerHTML="",t.unconnected.forEach((function(t){var i=document.createElement("tr"),r=document.createElement("td");r.dataset.device=t.mac,r.textContent=Jt(t,e),i.appendChild(r),n._unconnected.appendChild(i)}))):this._unconnected.innerHTML="<tr><td><em>No devices unconnected</em></td></tr>"}},{key:"_update_endpoints",value:function(t,e){var n=this;t.endpoints.length?(this._endpoints.innerHTML="",t.endpoints.forEach((function(t){var i=document.createElement("tr"),r=document.createElement("td"),a=document.createElement("td");r.dataset.device=t.mac,r.textContent=Jt(t,e),a.textContent="".concat(t.endpoint.addr,":").concat(t.endpoint.port),i.appendChild(r),i.appendChild(a),n._endpoints.appendChild(i)}))):this._endpoints.innerHTML="<tr><td colspan=2><em>No endpoints avaiable</em></td></tr>"}},{key:"_update_tree",value:function(t,e){var n=this;t.tree.length?(this._tree.innerHTML="",t.tree.forEach((function(i){var r=document.createElement("tr"),a=document.createElement("td"),o=document.createElement("td"),s=document.createElement("td"),c=document.createElement("td");a.textContent=-1!=i.layer?i.layer:"-",s.textContent=-1!=i.layer?Jt(i,e):"daemon",o.textContent=-1==i.layer?"-":0==i.layer?"daemon":$t(i.parent,t.tree,e),c.style.width="100%",i.children.forEach((function(n,r,a){var o=document.createElement("span");o.textContent=$t(n,t.tree,e),i.layer>-1&&(o.dataset.device=n),c.appendChild(o),a.length-1&&c.appendChild(document.createElement("br"))})),i.layer>0&&(s.dataset.device=i.mac),i.layer>1&&(o.dataset.device=i.parent),r.appendChild(a),r.appendChild(s),r.appendChild(o),r.appendChild(c),n._tree.appendChild(r)}))):this._tree.innerHTML="<tr><td colspan=5><em>No devices connected</em></td></tr>"}}]),t}(),Kt=function(){function t(e){i(this,t),this._container=e}return a(t,[{key:"update",value:function(t,e,n){!function(t,e,n,i){e.innerHTML="";var r=e.offsetWidth-50-90,a=Ft.G_s().size([260,r]),o=Ft.bT9(t,(function(t){return t.children}));o=a(o);var s=Ft.Ue8("svg");s.attr("viewBox","0 0 "+(r+50+90)+" 300").attr("preserveAspectRatio","xMaxYMin meet");var c=s.append("g").attr("transform","translate(50,20)"),l=c.selectAll(".link").data(o.descendants().slice(1)).enter().append("g").attr("class","link");l.append("path").attr("d",(function(t){return"M"+t.y+","+t.x+"C"+(t.y+t.parent.y)/2+","+t.x+" "+(t.y+t.parent.y)/2+","+t.parent.x+" "+t.parent.y+","+t.parent.x})),l.append("text").attr("transform",(function(t){return"translate("+(t.y+t.parent.y)/2+","+(t.x+t.parent.x)/2+")"})).attr("dy",".35em").attr("text-anchor","middle").text((function(t){return function(t,e){var n=e.sensor_type_list.get_name("rssi");if(!n||-1==t.layer||0==t.layer)return null;var i=t.sensor_list.last_data(n.id,0);return i?i.value:null}(t.data.device,n)||""}));var u=c.selectAll(".node").data(o.descendants()).enter().append("g").attr("class",(function(t){return"node"+(t.children?" node--internal":" node--leaf")})).attr("transform",(function(t){return"translate("+t.y+","+t.x+")"}));u.append("circle").attr("r",10).attr("class",(function(t){switch(t.data.device.layer){case-1:return"node--daemon";case 0:return"node--router";case 1:return"node--root";default:return"node--non-root"}})).on("click",(function(t,e){n.open_device_detail(e.data.device.mac)})),u.append("text").each((function(){var t=Ft.Ys(this),e=t.datum().data.device;switch(t.style("text-anchor","middle"),e.layer){case-1:t.attr("dy",-13).text("daemon");break;case 0:t.text(null).append("tspan").attr("dy",-13).text(e.mac),t.append("tspan").attr("dy",-13).attr("x",0).text("router");break;case 1:t.text(null).append("tspan").attr("dy",-13).text(Gt(e,i)),t.append("tspan").attr("dy",-13).attr("x",0).text("root [".concat(function(t){return 1!=t.layer?null:"".concat(t.endpoint.addr,":").concat(t.endpoint.port)}(e),"]"));break;default:t.attr("dy",-13).text(Gt(e,i))}})),e.appendChild(s.node())}(this._make_data(t.tree),this._container,e,n)}},{key:"_make_data",value:function(t){return this._make_node("00:00:00:00:00:00",t)}},{key:"_make_node",value:function(t,e){var n=this,i=e.find((function(e){return e.mac==t}));if(!i)return{};var r={device:i,children:[]};return i.children.forEach((function(t){return r.children.push(n._make_node(t,e))})),r}}]),t}();function Jt(t,e){return e&&t.name?t.name:t.mac}function $t(t,e,n){if(!n)return t;var i=e.find((function(e){return e.mac==t||e.mac_ap==t}));return i&&i.name?i.name:t}var Qt=["id","name","version","size","project","time","date","idf_version","hash","magic_number","secure_version","description","uploader","date_upload"],te=function(){function t(e){var n=e.id,r=e.name,a=e.hash,o=e.magic_number,s=e.project,c=e.secure_version,l=e.size,u=e.time,d=e.date,h=e.version,f=e.idf_version,p=e.description,_=e.uploader,v=e.date_upload;i(this,t),this._id=n,this._name=r,this._hash=a,this._magic_number=o,this._project=s,this._secure_version=c,this._size=l,this._time=u,this._date=d,this._version=h,this._idf_version=f,this._description=p,this._uploader=_,this._date_upload=v}return a(t,[{key:"id",get:function(){return this._id}},{key:"name",get:function(){return this._name}},{key:"hash",get:function(){return this._hash}},{key:"magic_number",get:function(){return this._magic_number}},{key:"project",get:function(){return this._project}},{key:"secure_version",get:function(){return this._secure_version}},{key:"size",get:function(){return this._size}},{key:"time",get:function(){return this._time}},{key:"date",get:function(){return this._date}},{key:"version",get:function(){return this._version}},{key:"idf_version",get:function(){return this._idf_version}},{key:"description",get:function(){return this._description}},{key:"uploader",get:function(){return this._uploader}},{key:"date_upload",get:function(){return this._date_upload}}]),t}(),ee=function(){function t(e){i(this,t),this._list={},this._view=new ne(e)}return a(t,[{key:"list",get:function(){return this._list}},{key:"size",get:function(){return Object.keys(this._list).length}},{key:"exist",value:function(t){return t in this._list}},{key:"process",value:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._list={},t.data.forEach((function(t){return n._list[t.name]=new te(t)})),i&&this.update_view()}},{key:"update_view",value:function(){this._view.update(this)}}]),t}(),ne=function(){function t(e){i(this,t),this._container=e}return a(t,[{key:"update",value:function(t){var e=this;t.size?(this._container.innerHTML="",Object.values(t.list).sort((function(t,e){return t.id-e.id})).forEach((function(t){var n=document.createElement("tr");n.dataset.image=t.name,Qt.forEach((function(e){switch(e){case"project":case"time":case"date":case"hash":case"magic_number":case"secure_version":case"description":case"uploader":case"date_upload":case"idf_version":break;default:var i=document.createElement("td");i.textContent=t[e],n.appendChild(i)}}));var i=document.createElement("td");i.innerHTML='<i class="fas fa-file-download image-download"></i>',i.title="Download image",i.classList.add("image-download"),n.appendChild(i);var r=document.createElement("td");r.innerHTML="&times;",r.title="Delete image",r.classList.add("image-close"),n.appendChild(r),e._container.appendChild(n)}))):this._container.innerHTML="<tr>\n        <td colspan=20>\n          <em>No images uploaded</em>\n        </td>\n      </tr>"}}]),t}(),ie=document.createElement("template");ie.innerHTML='<div id=main-image-detail class=image-app-detail>\n  <h1 class=detail-title>image.bin</h1>\n  <div class=detail-content>\n    <div class=detail-general>\n      <h2>Details</h2>\n      <detail-line>\n        <i class="fas fa-fingerprint" slot=icon></i>\n        <div slot=name>ID</div>\n        <div class=\'detail-id shine\'></div>\n      </detail-line>\n      <detail-line>\n        <i class="fas fa-code" slot=icon></i>\n        <div slot=name>Version</div>\n        <div class=\'detail-version shine\'></div>\n      </detail-line>\n      <detail-line>\n        <i class="fas fa-expand-arrows-alt" slot=icon></i>\n        <div slot=name>Size</div>\n        <div class=\'detail-size shine\'></div>\n      </detail-line>\n      <detail-line>\n        <i class="fas fa-project-diagram" slot=icon></i>\n        <div slot=name>Project</div>\n        <div class=\'detail-project shine\'></div>\n      </detail-line>\n      <detail-line>\n        <i class="fas fa-clock" slot=icon></i>\n        <div slot=name>Time</div>\n        <div class=\'detail-time shine\'></div>\n      </detail-line>\n      <detail-line>\n        <i class="fas fa-calendar-alt" slot=icon></i>\n        <div slot=name>Date</div>\n        <div class=\'detail-date shine\'></div>\n      </detail-line>\n      <detail-line>\n        <i class="fas fa-info" slot=icon></i>\n        <div slot=name>IDF Version</div>\n        <div class=\'detail-idf-version shine\'></div>\n      </detail-line>\n      <detail-line>\n        <i class="fas fa-hashtag" slot=icon></i>\n        <div slot=name>Hash</div>\n        <div class=\'detail-hash shine\'></div>\n      </detail-line>\n      <detail-line>\n        <i class="fas fa-magic" slot=icon></i>\n        <div slot=name>Magic word</div>\n        <div class=\'detail-magic-word shine\'></div>\n      </detail-line>\n      <detail-line>\n        <i class="fas fa-shield-alt" slot=icon></i>\n        <div slot=name>Secure version</div>\n        <div class=\'detail-secure-version shine\'></div>\n      </detail-line>\n      <detail-line>\n        <i class="fas fa-user-tag" slot=icon></i>\n        <div slot=name>Uploader</div>\n        <div class=\'detail-uploader shine\'></div>\n      </detail-line>\n      <detail-line>\n        <i class="fas fa-calendar-day" slot=icon></i>\n        <div slot=name>Upload date</div>\n        <div class=\'detail-upload-date shine\'></div>\n      </detail-line>\n    </div>\n    <div class=detail-line-description>\n      <h2>\n        <span class=detail-icon><i class="fas fa-audio-description"></i></span>\n        <span class=detail-text>Description</span>\n        <span class=detail-edit-description><i class="fas fa-edit"></i></span>\n      </h2>\n      <div class=detail-description contenteditable="false"></div>\n    </div>\n  </div>\n</div>\n';var re=function(){function t(e,n){var r=this;i(this,t);var a=ie.content.firstElementChild.cloneNode(!0);this._name=a.querySelector(".detail-title"),this._id=a.querySelector(".detail-id"),this._version=a.querySelector(".detail-version"),this._size=a.querySelector(".detail-size"),this._project=a.querySelector(".detail-project"),this._time=a.querySelector(".detail-time"),this._date=a.querySelector(".detail-date"),this._idf_version=a.querySelector(".detail-idf-version"),this._hash=a.querySelector(".detail-hash"),this._magic_number=a.querySelector(".detail-magic-word"),this._secure_version=a.querySelector(".detail-secure-version"),this._description=a.querySelector(".detail-description"),this._uploader=a.querySelector(".detail-uploader"),this._date_upload=a.querySelector(".detail-upload-date"),a.querySelector(".detail-edit-description").addEventListener("click",(function(t){r._description.contentEditable=!0,r._description.focus()})),this._description.addEventListener("blur",(function(t){r._description.contentEditable=!1,n.send(Dt.IMAGE,"edit",{name:r._name.textContent,description:r._description.innerText})})),e.innerHTML="",e.appendChild(a)}return a(t,[{key:"update",value:function(t){var e=this;Qt.forEach((function(n){switch(n){case"date_upload":e["_".concat(n)].textContent=Mt(new Date(1e3*t[n]));break;case"description":e["_".concat(n)].innerText=t[n];break;default:e["_".concat(n)].textContent=t[n]}}))}}]),t}(),ae=["id","name","version","size","hash","description","uploader","date_upload"],oe=function(){function t(e){var n=e.id,r=e.name,a=e.version,o=e.size,s=e.hash,c=e.description,l=e.uploader,u=e.date_upload;i(this,t),this._id=n,this._name=r,this._version=a,this._size=o,this._hash=s,this._description=c,this._uploader=l,this._date_upload=u}return a(t,[{key:"id",get:function(){return this._id}},{key:"name",get:function(){return this._name}},{key:"version",get:function(){return this._version}},{key:"size",get:function(){return this._size}},{key:"hash",get:function(){return this._hash}},{key:"description",get:function(){return this._description}},{key:"uploader",get:function(){return this._uploader}},{key:"date_upload",get:function(){return this._date_upload}}]),t}(),se=function(){function t(e){i(this,t),this._list={},this._view=new ce(e)}return a(t,[{key:"list",get:function(){return this._list}},{key:"size",get:function(){return Object.keys(this._list).length}},{key:"process",value:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._list={},Object.values(t.data).forEach((function(t){return n._list[t.name]=new oe(t)})),i&&this.update_view()}},{key:"update_view",value:function(){this._view.update(this)}}]),t}(),ce=function(){function t(e){i(this,t),this._container=e}return a(t,[{key:"update",value:function(t){var e=this;t.size?(this._container.innerHTML="",Object.values(t.list).forEach((function(t){var n=document.createElement("tr");n.dataset.app=t.name,ae.forEach((function(e){switch(e){case"hash":case"description":case"uploader":case"date_upload":break;default:var i=document.createElement("td");i.textContent=t[e],n.appendChild(i)}}));var i=document.createElement("td");i.innerHTML='<i class="fas fa-file-download app-download"></i>',i.title="Download app",i.classList.add("app-download"),n.appendChild(i);var r=document.createElement("td");r.innerHTML="&times;",r.title="Delete app",r.classList.add("app-close"),n.appendChild(r),e._container.appendChild(n)}))):this._container.innerHTML="<tr><td colspan=20><em>No app uploaded</em></td></tr>"}}]),t}(),le=document.createElement("template");le.innerHTML='<div id=main-app-detail class=image-app-detail>\n  <h1 class=detail-title>app.elf</h1>\n  <div class=detail-content>\n    <div class=detail-general>\n      <h2>Details</h2>\n      <detail-line>\n        <i class="fas fa-fingerprint" slot=icon></i>\n        <div slot=name>ID</div>\n        <div class=\'detail-id shine\'></div>\n      </detail-line>\n      <detail-line>\n        <i class="fas fa-code" slot=icon></i>\n        <div slot=name>Version</div>\n        <div class=\'detail-version shine\'></div>\n      </detail-line>\n      <detail-line>\n        <i class="fas fa-expand-arrows-alt" slot=icon></i>\n        <div slot=name>Size</div>\n        <div class=\'detail-size shine\'></div>\n      </detail-line>\n      <detail-line>\n        <i class="fas fa-hashtag" slot=icon></i>\n        <div slot=name>Hash</div>\n        <div class=\'detail-hash shine\'></div>\n      </detail-line>\n      <detail-line>\n        <i class="fas fa-user-tag" slot=icon></i>\n        <div slot=name>Uploader</div>\n        <div class=\'detail-uploader shine\'></div>\n      </detail-line>\n      <detail-line>\n        <i class="fas fa-calendar-day" slot=icon></i>\n        <div slot=name>Upload date</div>\n        <div class=\'detail-upload-date shine\'></div>\n      </detail-line>\n    </div>\n    <div class=detail-line-description>\n      <h2>\n        <span class=detail-icon><i class="fas fa-audio-description"></i></span>\n        <span class=detail-text>Description</span>\n        <span class=detail-edit-description><i class="fas fa-edit"></i></span>\n      </h2>\n      <div class=detail-description contenteditable="false"></div>\n    </div>\n  </div>\n</div>\n';var ue=function(){function t(e,n){var r=this;i(this,t);var a=le.content.firstElementChild.cloneNode(!0);this._name=a.querySelector(".detail-title"),this._id=a.querySelector(".detail-id"),this._version=a.querySelector(".detail-version"),this._size=a.querySelector(".detail-size"),this._hash=a.querySelector(".detail-hash"),this._description=a.querySelector(".detail-description"),this._uploader=a.querySelector(".detail-uploader"),this._date_upload=a.querySelector(".detail-upload-date"),a.querySelector(".detail-edit-description").addEventListener("click",(function(t){r._description.contentEditable=!0,r._description.focus()})),this._description.addEventListener("blur",(function(t){r._description.contentEditable=!1,n.send(Dt.APP,"edit",{name:r._name.textContent,description:r._description.innerText})})),e.innerHTML="",e.appendChild(a)}return a(t,[{key:"update",value:function(t){var e=this;ae.forEach((function(n){switch(n){case"date_upload":e["_".concat(n)].textContent=Mt(new Date(1e3*t[n]));break;case"description":e["_".concat(n)].innerText=t[n];break;default:e["_".concat(n)].textContent=t[n]}}))}}]),t}(),de=function(){function t(e){var n=e.id,r=e.name,a=e.long_name,o=e.type,s=e.unit,c=e.unit_name,l=e.add_change,u=e.description;i(this,t),this._id=n,this._name=r,this._long_name=a,this._type=o,this._unit=s,this._unit_name=c,this._add_change=l,this._description=u}return a(t,[{key:"id",get:function(){return this._id}},{key:"name",get:function(){return this._name}},{key:"long_name",get:function(){return this._long_name}},{key:"type",get:function(){return this._type}},{key:"unit",get:function(){return this._unit}},{key:"unit_name",get:function(){return this._unit_name}},{key:"add_change",get:function(){return this._add_change}},{key:"description",get:function(){return this._description}}]),t}(),he=function(){function t(){i(this,t),this._list={},this._view=null}return a(t,[{key:"size",get:function(){return Object.keys(this._list).length}},{key:"list",get:function(){return this._list}},{key:"process",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];!("data"in t)&&Array.isArray(t.data)||(this._list={},t.data.forEach((function(t){return e.add(t)})),n&&this.update_view())}},{key:"add",value:function(t){"name"in t&&(this._list[t.name]=new de(t))}},{key:"remove",value:function(t){delete this._list[t]}},{key:"has_name",value:function(t){return t in this._list}},{key:"get_name",value:function(t){return this._list[t]}},{key:"has_id",value:function(t){return Object.values(this._list).find((function(e){return e.id==t}))}},{key:"get_id",value:function(t){return Object.values(this._list).find((function(e){return e.id==t}))}},{key:"register_view",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this._view=t?new fe(t):null}},{key:"update_view",value:function(){this._view&&this._view.update(this)}}]),t}();document.createElement("template").innerHTML="";var fe=function(){function t(e){i(this,t),this._container=e}return a(t,[{key:"update",value:function(t){var e=this;t.size?(this._container.innerHTML="",Object.values(t.list).sort((function(t,e){return t.id-e.id})).forEach((function(t){var n=document.createElement("tr");n.dataset.sensor=t.name,["id","name","long_name","type","unit_name"].forEach((function(e){var i=document.createElement("td");i.textContent=t[e],"type"==e&&(i.textContent+=t[e]in Ht?" ".concat(Ht[t[e]].name):""),n.appendChild(i)}));var i=document.createElement("td"),r=document.createElement("td");i.innerHTML='<i class="fas fa-edit"></i>',i.classList.add("edit-data"),r.innerHTML="&times;",r.classList.add("delete-data"),n.appendChild(i),n.appendChild(r),e._container.appendChild(n)}))):this._container.innerHTML="<tr><td colspan=20><em>No sensors configured</em></td></tr>"}}]),t}(),pe=function(){function t(e,n,r,a,o,s){i(this,t),this._ws=e,this._logged=n,this._server_addr=r,this._registration=a,this._is_subscribed=!1,this._storage=o,this._device_list=new Ct(s.containers.device_table),this._response_handler=new wt,this._tree=new Wt(s.containers.tree_container,s.containers.tree_graph),this._images=new ee(s.containers.image_table),this._apps=new se(s.containers.app_table),this._sensor_types=new he,this._detail=s.containers.detail,this._main_content=s.containers.main_content,this._register_ws_events()}return a(t,[{key:"ws",get:function(){return this._ws}},{key:"logged_user",get:function(){return this._logged}},{key:"username",get:function(){return this._logged.info.username}},{key:"session_id",get:function(){return this._logged.session_id}},{key:"policy",get:function(){return this._logged.policy}},{key:"notify",get:function(){return this._logged.notify}},{key:"server_addr",get:function(){return this._server_addr}},{key:"registration",get:function(){return this._registration}},{key:"is_subscribed",get:function(){return this._is_subscribed},set:function(t){this._is_subscribed=Boolean(t)}},{key:"device_list",get:function(){return this._device_list}},{key:"tree",get:function(){return this._tree}},{key:"image_list",get:function(){return this._images}},{key:"app_list",get:function(){return this._apps}},{key:"sensor_type_list",get:function(){return this._sensor_types}},{key:"detail",get:function(){return this._detail}},{key:"main_container",get:function(){return this._main_content}},{key:"add_handler",value:function(t,e){for(var n,i=arguments.length,r=new Array(i>2?i-2:0),a=2;a<i;a++)r[a-2]=arguments[a];(n=this._response_handler).add.apply(n,[t,e].concat(r))}},{key:"remove_handler",value:function(t,e){this._response_handler.remove(t,e)}},{key:"send",value:function(t,e,n){this._ws.send(Vt(t,e,n))}},{key:"send_image",value:function(t){return this._send_binary_data(t,1)}},{key:"send_app",value:function(t){return this._send_binary_data(t,2)}},{key:"report",value:function(t,e,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";this._ws.send(Vt(Dt.REPORT,t,{type:e,reference:n,message:i,arg:r}))}},{key:"open_device_detail",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.device_list.list[t];if(!n)return!1;this._detail.clear();var i=new Yt(this._detail.content,this);return n.register_view("detail",i),i.update(n),e&&this._detail.show(),this._detail.register_close("detail",(function(t){t.delete_view("detail")}),n),this._detail}},{key:"open_image_detail",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.image_list.list[t];if(!n)return!1;this._detail.clear();var i=new re(this._detail.content,this);return i.update(n),e&&this._detail.show(),this._detail}},{key:"open_app_detail",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.app_list.list[t];if(!n)return!1;this._detail.clear();var i=new ue(this._detail.content,this);return i.update(n),e&&this._detail.show(),this._detail}},{key:"_send_binary_data",value:function(t,e){var n=this,i=new FileReader,r=new ArrayBuffer;i.loadend=function(){},i.onload=function(i){r=i.target.result,n._ws.send(n._make_binary_data(t.name,t.size,r,e))},i.readAsArrayBuffer(t)}},{key:"_make_binary_data",value:function(t,e,n,i){var r=new Uint8Array(2+t.length+e),a=(new TextEncoder).encode(t);return r.set(new Uint8Array([i]),0),r.set(new Uint8Array([t.length]),1),r.set(a,2),r.set(new Uint8Array(n),2+a.length),r.buffer}},{key:"_register_ws_events",value:function(){var t=this;this._ws.binaryType="arraybuffer",this._ws.onmessage=function(e){if("string"==typeof e.data)try{var n=JSON.parse(e.data);t._response_handler.run(n)}catch(t){console.error("Error parsing message",e.data,t)}else t._read_binary_data(e.data)},this._ws.onclose=function(e){ct.run("login",{storage:t._storage,registration:t._registration},!1)}}},{key:"_read_binary_data",value:function(t){var e=new Uint8Array(t),n=(e.slice(0,1)[0],new Uint16Array(e.slice(1,3))[0]);!function(t,e){var n=new Blob([e],arguments.length>2&&void 0!==arguments[2]?arguments[2]:{type:"application/octet-stream"});if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveBlob(n,t);else{var i=window.document.createElement("a");i.href=window.URL.createObjectURL(n),i.download=t,document.body.appendChild(i),i.click(),document.body.removeChild(i)}}((new TextDecoder).decode(new Uint8Array(e.slice(3,3+n))),new Uint8Array(e.slice(3+n)))}}]),t}(),_e=function(){function t(){i(this,t),this._list=[],this._list_device={},this._list_sensor={}}return a(t,[{key:"list",get:function(){return this._list}},{key:"device_list",get:function(){return this._list_device}},{key:"sensor_list",get:function(){return this._list_sensor}},{key:"has",value:function(t){return this._list.find((function(e){return e==t}))}},{key:"set",value:function(t){var e=this;Array.isArray(t)&&(this._list=[],t.forEach((function(t){return e._list.push(t.name)})))}},{key:"set_device",value:function(t){var e=this;this._list_device={},t.forEach((function(t){e._list_device[t.id]=t.notify}))}},{key:"set_sensors",value:function(t){Array.isArray(t)?this._set_all_sensors(t):this._set_device_sensors(t)}},{key:"_set_all_sensors",value:function(t){var e=this;this._list_sensor={},t.forEach((function(t){t.id in e._list_sensor||(e._list_sensor[t.id]={}),e._list_sensor[t.id]["".concat(t.type,"@").concat(t.index)]=t.notify}))}},{key:"_set_device_sensors",value:function(t){var e=this;delete this._list_sensor[t.id],this._list_sensor[t.id]={},t.sensors.forEach((function(n){e._list_sensor[t.id]["".concat(n.type,"@").concat(n.index)]=n.notify}))}}]),t}(),ve={INVALID:{value:-1,name:"invalid"},ACTIVE:{value:0,name:"active"},INACTIVE:{value:1,name:"inactive"},SUSPENDED:{value:2,name:"suspended"},DELETED:{value:3,name:"deleted"}},me=["root","system"],ye=function(){function t(e,n,r,a,o){i(this,t),this._id=e,this._username=n,this._name=r,this._email=a,this._status=o}return a(t,[{key:"id",get:function(){return this._id}},{key:"username",get:function(){return this._username}},{key:"name",get:function(){return this._name}},{key:"email",get:function(){return this._email}},{key:"status",get:function(){return this._status}},{key:"status_string",get:function(){return t.status_string(this._status)}},{key:"update",value:function(t,e,n){this._username=t,this._name=e,this._email=n}},{key:"get_table_view",value:function(){var t=document.createElement("tr");return t.dataset.id=this._id,t.innerHTML="<td>".concat(this._id,"</td>")+"<td>".concat(this._username,"</td>")+"<td>".concat(this._name,"</td>")+"<td>".concat(this._email,"</td>")+"<td>".concat(this.status_string,"</td>")+"<td class=delete-data data-id=".concat(this._id,">&times;</td>"),t}}],[{key:"status_string",value:function(t){var e=Object.values(ve).find((function(e){return e.value==t}));return e?e.name:""}},{key:"check_username",value:function(t){return t.length?me.find((function(e){return e==t}))?{err:!0,message:"Username '".concat(t,"' is not allowed")}:t.length<4?{err:!0,message:"'username' minimum length: ".concat(4)}:t.length>12?{err:!0,message:"'username' maximum length: ".concat(12)}:-1!=t.indexOf(" ")?{err:!0,message:"'username' can't have space (' ') character"}:{err:!1}:{err:!0,message:"Empty 'username' not allowed"}}},{key:"check_password",value:function(t){return t.length?t.length<6?{err:!0,message:"'password' minimum length: ".concat(6)}:{err:!1}:{err:!0,message:"Empty 'password' not allowed"}}}]),t}(),ge=function(){function t(e){i(this,t),this._list={},this._view=new be(this,e)}return a(t,[{key:"list",get:function(){return this._list}},{key:"size",get:function(){return Object.keys(this._list).length}},{key:"add",value:function(t,e,n,i,r){var a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this._list[t]=new ye(t,e,n,i,r),a&&this.update_view()}},{key:"update",value:function(t,e,n,i){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];t in this._list&&(this._list[t].update(e,n,i),r&&this.update_view())}},{key:"remove",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];delete this._list[t],e&&this.update_view()}},{key:"get_user",value:function(t){return this._list[t]}},{key:"get_user_by_username",value:function(t){return Object.values(this._list).find((function(e){return e.username==t}))}},{key:"check_username",value:function(t){var e=ye.check_username(t);return e.err?e:this.get_user_by_username(t)?{err:!0,message:"'".concat(t,"' is already been used")}:{err:!1}}},{key:"update_view",value:function(){this._view.update_view()}}]),t}(),be=function(){function t(e,n){i(this,t),this._model=e,this._container=n,this.update_view()}return a(t,[{key:"update_view",value:function(){var t=this;this._container.innerHTML="",this._model.size?Object.values(this._model.list).forEach((function(e){t._container.appendChild(e.get_table_view())})):this._container.innerHTML="<tr><td colspan=6><em>No users avaiable</em></td></tr>"}}]),t}(),we=function(){function t(e,n,r,a,o,s,c){i(this,t),this._info=new ye(e,n,r,a,o),this._session_id=s,this._policy=c,this._notify=new _e}return a(t,[{key:"id",get:function(){return this._info.id}},{key:"info",get:function(){return this._info}},{key:"session_id",get:function(){return this._session_id}},{key:"policy",get:function(){return this._policy}},{key:"notify",get:function(){return this._notify}}]),t}(),xe=function(){function t(){i(this,t)}return a(t,null,[{key:"can",value:function(t,e){return 0==t.id||t.policy&e}},{key:"hide_user_admin_element",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body;t.querySelectorAll(".is-admin").forEach((function(t){t.style.display="none"}))}},{key:"show_user_admin_element",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body;t.querySelectorAll(".is-admin").forEach((function(t){t.style.display=""}))}}]),t}(),ke={user_admin:1,view_device:2,edit_device:4,get_resource:8,post_resource:16,put_resource:32,delete_resource:64,view_image:128,upload_image:256,install_image:512,upload_app:1024,install_app:2048};Object.freeze(ke);var Ee=function(){function t(){i(this,t);var e=document.querySelector("#main #notify-disabled"),n=document.querySelector("#main #notify-enable");this._notify_disabled=e,this._notify_enable=n}return a(t,[{key:"addEventListener",value:function(t,e){this._notify_disabled.addEventListener(t,(function(t){e(t)})),this._notify_enable.addEventListener(t,(function(t){e(t)}))}},{key:"enable",value:function(){this._notify_enable.removeAttribute("disabled"),this._notify_disabled.removeAttribute("disabled","true"),this._notify_enable.title="Notify is supported"}},{key:"disable",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._notify_enable.setAttribute("disabled",""),this._notify_disabled.setAttribute("disabled",""),this._notify_disabled.title=t?"Notify was denied":"Notify isn't supported"}},{key:"check",value:function(){this._notify_enable.setAttribute("checked",""),this._notify_disabled.setAttribute("checked",""),this._notify_enable.title="Notify is enabled"}},{key:"uncheck",value:function(){this._notify_enable.removeAttribute("checked"),this._notify_disabled.removeAttribute("checked"),this._notify_disabled.title="Notify is disabled"}}]),t}(),Se=function(){function t(e,n,r,a,o){var s=this;i(this,t),this._ws=e,this._user=n,this._app_key=function(t){for(var e=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=window.atob(e),i=new Uint8Array(n.length),r=0;r<n.length;++r)i[r]=n.charCodeAt(r);return i}(r),this._registration=a,this._is_subscribed=!1,this._subscription=null,this._container=o,o.addEventListener("click",(function(t){s._is_subscribed?s.unsubscribe():s.subscribe()}))}return a(t,[{key:"is_subscribed",get:function(){return this._is_subscribed}},{key:"send_subscribe",value:function(){this._is_subscribed&&this._ws.send(JSON.stringify({type:"user",command:"push_subscribe",data:{user:this._user,user_agent:lt(),subscription:this._subscription}}))}},{key:"send_unsubscribe",value:function(){this._ws.send(JSON.stringify({type:"user",command:"push_unsubscribe",data:{user:this._user,user_agent:lt()}}))}},{key:"get_subscription",value:function(){var t=this;if(this._registration)return this._registration.pushManager.getSubscription().then((function(e){return t._subscription=e,t._is_subscribed=!(null===e),t.send_subscribe(),t._update_container(),t._is_subscribed}))}},{key:"subscribe",value:function(){var t=this;this._registration&&this._registration.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:this._app_key}).then((function(e){t._is_subscribed=!0,t._subscription=e,t.send_subscribe(),t._update_container()})).catch((function(e){console.log("Failed to subscribe the user: ",e),t._update_container()}))}},{key:"unsubscribe",value:function(){var t=this;this._subscription.unsubscribe().catch((function(t){console.log("Error unsubscribing",t)})).then((function(){t._is_subscribed=!1,t.send_unsubscribe(),t._update_container()}))}},{key:"_update_container",value:function(){if("denied"===Notification.permission)return this._container.disable(!0),void this.send_unsubscribe();this._container.enable(),this._is_subscribed?this._container.check():this._container.uncheck()}}],[{key:"support",value:function(){return"serviceWorker"in navigator&&"PushManager"in window}}]),t}();function Oe(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];e.innerHTML="",Object.values(t.list).forEach((function(t){var i=document.createElement("label"),r=document.createElement("input"),a=document.createElement("span");i.classList.add("group-user-check"),r.type="checkbox",r.value=t.id,a.textContent=t.name,n.find((function(e){return e.id==t.id}))&&(r.checked=!0),i.appendChild(r),i.appendChild(a),e.appendChild(i)}))}function Te(t){var e=[];return t.querySelectorAll("input").forEach((function(t){t.checked&&e.push(+t.value)})),e}var Ae=null;var Ce=null;var Me=function(){function t(e,n,r,a){i(this,t),this._id=e,this._name=n,this._description=r,this._members=a}return a(t,[{key:"size",get:function(){return this._members.length}},{key:"id",get:function(){return this._id}},{key:"name",get:function(){return this._name}},{key:"description",get:function(){return this._description}},{key:"members",get:function(){return this._members}},{key:"add_user",value:function(t){this._members.find((function(e){return e==t}))||this._members.push(t)}},{key:"contain",value:function(t){return!!this._members.find((function(e){return e==t}))}},{key:"remove_user",value:function(t){this._members=this._members.filter((function(e){return e!=t}))}},{key:"get_table_view",value:function(t){var e=document.createElement("tr");e.dataset.id=this._id;var n=[];return this._members.forEach((function(e){var i=t.get_user(e);n.push(i?i.username:"id:".concat(e))})),e.innerHTML="<td>".concat(this._id,"</td>")+"<td>".concat(this._name,"</td>")+"<td>".concat(this._description,"</td>")+"<td>".concat(this.size,"</td>")+"<td>".concat(n.join(" / "),"</td>"),e}}]),t}(),Pe=function(){function t(e,n){i(this,t),this._list={},this._user_list=e,this._view=new je(this,n)}return a(t,[{key:"size",get:function(){return Object.keys(this._list).length}},{key:"list",get:function(){return this._list}},{key:"add",value:function(t,e,n,i){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this._list[t]=new Me(t,e,n,i),r&&this.update_view()}},{key:"set_user_group",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.remove_all_user(t,!1),this.add_user_to_groups(t,e,!1),n&&this.update_view()}},{key:"contain_user",value:function(t){return Object.values(this._list).filter((function(e){return e.contain(t)}))}},{key:"add_user_to_groups",value:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e.forEach((function(e){e in n._list&&n._list[e].add_user(t)})),i&&this.update_view()}},{key:"remove",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];delete this._list[t],e&&this.update_view()}},{key:"remove_all_user",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Object.values(this._list).forEach((function(e){return e.remove_user(t)})),e&&this.update_view()}},{key:"get_group",value:function(t){return this._list[t]}},{key:"update_view",value:function(){this._view.update_view(this._user_list)}}]),t}(),je=function(){function t(e,n){i(this,t),this._model=e,this._container=n}return a(t,[{key:"update_view",value:function(t){var e=this;this._container.innerHTML="",this._model.size?Object.values(this._model.list).forEach((function(n){e._container.appendChild(n.get_table_view(t))})):this._container.innerHTML="<tr><td colspan=6><em>No groups avaiable</em></td></tr>"}}]),t}(),Le=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;i(this,t),this._template=e,this._script_init=n,this._script_end=r}return a(t,[{key:"load",value:function(t){if(t.appendChild(this._template.content.cloneNode(!0)),this._script_init){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];this._script_init.apply(this,[t].concat(n))}}},{key:"terminate",value:function(t){if(this._script_end){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];this._script_end.apply(this,[t].concat(n))}}}]),t}(),Ne=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;i(this,t),this._container=e.content.firstElementChild.cloneNode(!0),this._script_init=n,this._script_end=r,this._run_once=a}return a(t,[{key:"container",get:function(){return this._container}},{key:"install",value:function(){if(this._run_once){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._run_once.apply(this,[this._container].concat(e))}}},{key:"load",value:function(t){if(t.appendChild(this._container),this._script_init){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];this._script_init.apply(this,[t].concat(n))}}},{key:"terminate",value:function(t){if(this._script_end){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];this._script_end.apply(this,[t].concat(n))}t.removeChild(this._container)}}]),t}(),De=function(){function t(e){i(this,t),this._container=e,this._list={},this._current_name=null}return a(t,[{key:"current",get:function(){return this._current_name}},{key:"container",get:function(){return this._container}},{key:"add",value:function(t,e){return"string"==typeof t&&(e instanceof Le||e instanceof Ne)&&!(t in this._list)&&void(this._list[t]=e)}},{key:"run",value:function(t){if(this._current_name!=t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];var r,a;this._current_name&&(r=this._list[this._current_name]).terminate.apply(r,[this._container].concat(n)),this._current_name=null,this._container.innerHTML="",t in this._list&&((a=this._list[t]).load.apply(a,[this._container].concat(n)),this._current_name=t)}}}]),t}();function qe(t,e,n){var i=e.querySelector("#admin-user-tbody"),r=e.querySelector("#admin-group-tbody");n.users=new ge(i),n.groups=new Pe(n.users,r),function(t,e,n){e.forEach((function(e){t.users.add(e.id,e.username,e.name,e.email,e.status,!1)})),t.users.update_view(),Ae&&n.removeEventListener("click",Ae),Ae=function(e){if(e.target.classList.contains("delete-data"))document.body.appendChild(function(t,e){var n=document.createElement("template");n.innerHTML="<div class=popup-container>\n  <h1 class=popup-header>\n    <i class=\"fas fa-user-slash\"></i>\n    <span class=popup-title>Delete User</span>\n  </h1>\n  <div class=popup-content>\n    <span class=popup-content-text>\n      <p>Delete user '<span class=user-name></span>'?</p>\n      <p>Any permission or policy related to this user will also be deleted!</p>\n    </span>\n    <div class=popup-option-container>\n      <span class=popup-option id=option-yes>Yes</span>\n      <span class=popup-option id=option-no>No</span>\n    </div>\n  </div>\n</div>\n";var i=document.createElement("pop-modal"),r=n.content.cloneNode(!0),a=t.users.get_user(e);r.querySelector(".user-name").textContent=a.username,i.appendChild(r),i.addEventListener("cancel",(function(t){i.delete()}));var o=i.querySelector("#option-yes"),s=i.querySelector("#option-no");return i.addEventListener("click",(function(e){e.target!=s?e.target==o&&(t.send(Dt.USER,qt.DELETE_USER,{id:a.id}),i.delete()):i.delete()})),i.show(),i}(t,e.target.dataset.id));else{var n=e.composedPath()[1];"id"in n.dataset&&document.body.appendChild(function(t,e){var n=document.createElement("template");n.innerHTML='<div class=popup-container>\n  <h1 class=popup-header>\n    <i class="fas fa-user-edit"></i>\n    <span class=popup-title>Edit User</span>\n  </h1>\n  <div class=popup-content>\n    <span class=popup-content-text>\n      <div>\n        <span title=\'User ID\'>\n          <span><i class="fas fa-fingerprint"></i></span>\n          <span id=user-id></span>\n        </span>\n        <span title=Username>\n          <span><i class="fas fa-user"></i></span>\n          <span id=username></span>\n        </span>\n        <span title=Name>\n          <span><i class="fas fa-signature"></i></span>\n          <span id=name></span>\n        </span>\n        <span title=Email>\n          <span><i class="fas fa-envelope-open-text"></i></span>\n          <span id=email></span>\n        </span>\n      </div>\n      <fieldset id=group-user-fieldset>\n        <legend>Groups</legend>\n        <div id=add-user-group-list></div>\n      </fieldset>\n    </span>\n    <div>\n      <div class=popup-error></div>\n      <div class=popup-option-container>\n        <span class=popup-option id=option-yes>Change</span>\n        <span class=popup-option id=option-cancel>Cancel</span>\n      </div>\n  </div>\n  </div>\n</div>\n';var i=document.createElement("pop-modal"),r=t.users.get_user(e);i.classList.add("popup-modal"),i.appendChild(n.content.cloneNode(!0)),i.addEventListener("cancel",(function(t){i.delete()}));var a=i.querySelector("#user-id"),o=i.querySelector("#username"),s=i.querySelector("#name"),c=i.querySelector("#email"),l=i.querySelector("#option-yes"),u=i.querySelector("#option-cancel"),d=i.querySelector("#add-user-group-list");return a.textContent=r.id,o.textContent=r.username,s.textContent=r.name,c.textContent=r.email?r.email:"<no email>",Oe(t.groups,d,t.groups.contain_user(r.id)),i.addEventListener("click",(function(e){e.target!=u?e.target==l&&(t.send(Dt.USER,qt.EDIT_USER,{id:r.id,username:r.username,name:r.name,email:r.email,groups:Te(d)}),i.delete()):i.delete()})),i.show(),i}(t,n.dataset.id))}},n.addEventListener("click",Ae)}(n,t.data.users,e.querySelector("#admin-user-tbody")),function(t,e,n){n.innerHTML="",e.forEach((function(e){t.groups.add(e.id,e.name,e.description,e.members,!1)})),t.groups.update_view(),Ce&&n.removeEventListener("click",Ce),Ce=function(e){e.target.classList.contains("delete-data")&&document.body.appendChild(function(t,e){var n=document.createElement("pop-modal"),i=delete_template.content.cloneNode(!0);i.querySelector(".group-name").textContent=e.name,n.appendChild(i),n.addEventListener("cancel",(function(t){n.delete()}));var r=n.querySelector("#option-yes"),a=n.querySelector("#option-no");return n.addEventListener("click",(function(i){i.target!=a?i.target==r&&(t.send(Dt.USER,qt.DELETE_GROUP,{id:e.id}),n.delete()):n.delete()})),n.show(),n}(t,t.groups.get_group(e.target.dataset.id)))},n.addEventListener("click",Ce)}(n,t.data.groups,e.querySelector("#admin-group-tbody"))}function Re(t,e){e.add_handler(Dt.USER,qt.USER_GROUP_POLICIES,qe,t,e),e.add_handler(Dt.USER,qt.ADD_USER,(function(t){var n=t.data;e.users.add(n.id,n.username,n.name,n.email,n.status,!0),"groups"in n&&Array.isArray(n.groups)&&e.groups.add_user_to_groups(n.id,n.groups,!0)})),e.add_handler(Dt.USER,qt.DELETE_USER,(function(t){e.users.remove(t.data.id,!0),e.groups.remove_all_user(t.data.id,!0)})),e.add_handler(Dt.USER,qt.EDIT_USER,(function(t){e.users.update(t.data.id,t.data.username,t.data.name,t.data.email,!0),e.groups.set_user_group(t.data.id,t.data.groups,!0)})),e.send(Dt.USER,qt.USER_GROUP_POLICIES),t.querySelector("#admin-user-add").addEventListener("click",(function(t){document.body.appendChild(function(t){var e=document.createElement("template");e.innerHTML='<div class=popup-container>\n  <h1 class=popup-header>\n    <i class="fas fa-user"></i>\n    <span class=popup-title>Add User</span>\n  </h1>\n  <div class=popup-content>\n    <span class=popup-content-text>\n      <x-input-icon class=add-input id=username placeholder=Username title=Username>\n        <i slot=icon class="fas fa-user"></i>\n      </x-input-icon>\n      <x-input-icon class=add-input id=name placeholder=Name title=Name>\n        <i slot=icon class="fas fa-signature"></i>\n      </x-input-icon>\n      <x-input-icon class=add-input id=password placeholder=Password title=Password type=password>\n        <i slot=icon class="fas fa-key"></i>\n      </x-input-icon>\n      <x-input-icon class=add-input id=email placeholder=Email title=email>\n        <i slot=icon class="fas fa-envelope-open-text"></i>\n      </x-input-icon>\n      <fieldset id=group-user-fieldset>\n        <legend>Groups</legend>\n        <div id=add-user-group-list></div>\n      </fieldset>\n    </span>\n    <div>\n      <div class=popup-error></div>\n      <div class=popup-option-container>\n        <span class=popup-option id=option-yes>Add</span>\n        <span class=popup-option id=option-cancel>Cancel</span>\n      </div>\n  </div>\n  </div>\n</div>\n';var n=document.createElement("pop-modal");n.appendChild(e.content.cloneNode(!0)),n.addEventListener("cancel",(function(t){n.delete()}));var i=n.querySelector("#username"),r=n.querySelector("#name"),a=n.querySelector("#password"),o=n.querySelector("#email"),s=n.querySelector("#option-yes"),c=n.querySelector("#option-cancel"),l=n.querySelector("#add-user-group-list"),u=n.querySelector(".popup-error");return Oe(t.groups,l),n.addEventListener("click",(function(e){if(e.target!=c){if(e.target==s){var d=t.users.check_username(i.value);if(d.err)return void(u.textContent=d.message);if((d=ye.check_password(a.value)).err)return void(u.textContent=d.message);t.send(Dt.USER,qt.ADD_USER,{username:i.value,name:r.value?r.value:i.value,password:a.value,email:o.value,groups:Te(l)}),n.delete()}}else n.delete()})),n.show(),n}(e,e.groups))}))}function Ue(t,e){e.remove_handler(Dt.USER,qt.USER_GROUP_POLICIES),e.remove_handler(Dt.USER,qt.ADD_USER),e.remove_handler(Dt.USER,qt.DELETE_USER),e.remove_handler(Dt.USER,qt.EDIT_USER)}function ze(t){var e=document.createElement("template");e.innerHTML="<div id=sensor-type-popup-container class=popup-container>\n  <h1 class=popup-header>\n    <i class=\"fas fa-weight-hanging\"></i>\n    <span class=popup-title></span>\n  </h1>\n  <div class=popup-content>\n    <div class=input-line>\n      <overtext-input placeholder=ID class='sensor-type-short sensor-type-id'>\n        <span slot=field>ID</span>\n      </overtext-input>\n      <overtext-input placeholder='Name ID' class='sensor-type-long sensor-type-name-id'>\n        <span slot=field>Name ID</span>\n      </overtext-input>\n    </div>\n    <overtext-input placeholder=Name class=sensor-type-name>\n      <span slot=field>Name</span>\n    </overtext-input>\n    <div class=input-line>\n      <overtext-input placeholder='Unit' class='sensor-type-short sensor-type-unit'>\n        <span slot=field>Unit</span>\n      </overtext-input>\n      <overtext-input placeholder='Unit Name' class='sensor-type-long sensor-type-unit-name'>\n        <span slot=field>Unit Name</span>\n      </overtext-input>\n    </div>\n    <div>\n      <select class='hide-first-opiton sensor-type-unit-type'></select>\n      <label title='A new value will only be inserted when a different value from previouly be received'><input class=sensor-type-add-change type=checkbox> Insert only at change</label>\n    </div>\n    <fieldset>\n      <legend>Description</legend>\n      <div name=\"name\" class=sensor-type-description contenteditable=\"true\"></div>\n    </fieldset>\n    <div>\n      <div class=popup-error></div>\n      <div class=popup-option-container>\n        <span class=popup-option id=option-yes></span>\n        <span class=popup-option id=option-cancel></span>\n      </div>\n    </div>\n  </div>\n</div>\n";var n=document.createElement("pop-modal"),i=document.importNode(e.content.firstElementChild,!0);i.classList.add("sensor-type-".concat(t,"-new")),n.appendChild(i);var r=n.querySelector(".sensor-type-unit-type");return r.innerHTML='<option value="">Unit Type</option>',Object.values(Ht).forEach((function(t){var e=document.createElement("option");e.value=t.value,e.textContent=t.title,r.appendChild(e)})),n.addEventListener("cancel",(function(t){n.delete()})),n.querySelector("#option-cancel").addEventListener("click",(function(t){n.delete()})),n.show(),n}function Ze(t){return{error:t.querySelector(".popup-error"),description:t.querySelector(".sensor-type-description"),unit_type:t.querySelector(".sensor-type-unit-type"),unit_name:t.querySelector(".sensor-type-unit-name"),unit:t.querySelector(".sensor-type-unit"),name:t.querySelector(".sensor-type-name"),name_id:t.querySelector(".sensor-type-name-id"),id:t.querySelector(".sensor-type-id"),add_change:t.querySelector(".sensor-type-add-change")}}function Ie(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!n){if(t.id.value=t.id.value.trim(),!t.id.value.length||n)return t.error.textContent="ID field can't be empty",!1;if(e.has_id(+t.id.value))return t.error.textContent="ID '".concat(t.id.value,"' already exits"),!1;if(t.name_id.value=t.name_id.value.trim(),!t.name_id.value.length)return t.error.textContent="Name ID field can't be empty",!1;if(e.has_name(t.name_id.value))return t.error.textContent="Name ID '".concat(t.name_id.value,"' already exits"),!1}return t.name.value=t.name.value.trim(),t.name.value.length||(t.name.value=t.name_id.value),t.unit.value=t.unit.value.trim(),t.unit.value.length?(t.unit_name.value=t.unit_name.value.trim(),t.unit_name.value.length||(t.unit_name.value=t.unit.value),!(!n&&""==t.unit_type.selectedOptions[0].value&&(t.error.textContent="Unit type field not selected",1))):(t.error.textContent="Unit field can't be empty",!1)}function He(t,e){var n=t.querySelector("#sensor-type-tbody");e.sensor_type_list.register_view(n),e.sensor_type_list.update_view(),t.querySelector(".sensor-type-add-new-button").addEventListener("click",(function(t){var n=ze("add");!function(t,e){var n=Ze(t);n.id.addEventListener("keydown",(function(t){t.key.length>1||(t.key<"0"||t.key>"9")&&t.preventDefault()})),n.name_id.addEventListener("keydown",(function(t){" "==t.key&&t.preventDefault()})),t.querySelector("#option-yes").addEventListener("click",(function(i){Ie(n,e.sensor_type_list)&&(e.send(Dt.SENSOR,Ut.ADD,{id:+n.id.value,name:n.name_id.value,long_name:n.name.value,unit:n.unit.value,unit_name:n.unit_name.value,unit_type:+n.unit_type.selectedOptions[0].value,description:n.description.innerText,add_change:n.add_change.checked}),t.delete())}))}(n,e),document.body.appendChild(n)})),n.addEventListener("click",(function(t){for(var i=t.composedPath(),r=null,a=0,o="show";i[a]!=n;){if("sensor"in i[a].dataset){r=i[a].dataset.sensor;break}i[a].classList.contains("edit-data")?o="edit":i[a].classList.contains("delete-data")&&(o="delete"),a++}if(r)if("delete"!=o){var s=ze(o);"edit"==o?function(t,e,n){var i=Ze(t);i.id.disabled=!0,i.name_id.disabled=!0,i.unit_type.disabled=!0,i.id.value=e.id,i.name_id.value=e.name,i.name.value=e.long_name,i.unit.value=e.unit,i.unit_name.value=e.unit_name,i.unit_type.selectedIndex=e.type+1,i.description.innerText=e.description,i.add_change.checked=e.add_change,t.querySelector("#option-yes").addEventListener("click",(function(e){Ie(i,n.sensor_type_list,!0)&&(n.send(Dt.SENSOR,Ut.EDIT,{id:+i.id.value,name:i.name_id.value,long_name:i.name.value,unit:i.unit.value,unit_name:i.unit_name.value,unit_type:+i.unit_type.selectedOptions[0].value,description:i.description.innerText,add_change:i.add_change.checked}),t.delete())}))}(s,e.sensor_type_list.list[r],e):function(t,e){var n=Ze(t);Object.entries(n).forEach((function(t){var e=ht(t,2);e[0],e[1].disabled=!0})),n.description.contentEditable=!1,n.id.value=e.id,n.name_id.value=e.name,n.name.value=e.long_name,n.unit.value=e.unit,n.unit_name.value=e.unit_name,n.unit_type.selectedIndex=e.type+1,n.description.innerText=e.description,n.add_change.checked=e.add_change}(s,e.sensor_type_list.list[r]),document.body.appendChild(s)}else e.send(Dt.SENSOR,Ut.REMOVE,{name:r})}))}function Be(t,e){e.sensor_type_list.register_view()}function Ye(t,e){}function Ve(t,e){}var Fe={0:{value:0,string:"not determined",short_string:"ESP_RST_UNKNOWN"},1:{value:1,string:"power-on event",short_string:"ESP_RST_POWERON"},2:{value:2,string:"external pin",short_string:"ESP_RST_EXT"},3:{value:3,string:"software reset",short_string:"ESP_RST_SW"},4:{value:4,string:"exception/panic",short_string:"ESP_RST_PANIC"},5:{value:5,string:"interrupt watchdog",short_string:"ESP_RST_INT_WDT"},6:{value:6,string:"task watchdog",short_string:"ESP_RST_TASK_WDT"},7:{value:7,string:"other watchdogs",short_string:"ESP_RST_WDT"},8:{value:8,string:"exiting deep sleep",short_string:"ESP_RST_DEEPSLEEP"},9:{value:9,string:"brownout",short_string:"ESP_RST_BROWNOUT"},10:{value:10,string:"over SDIO",short_string:"ESP_RST_BROWNOUT"}};function Ge(t){return t in Fe?Fe[t].string:"not recognized"}function We(t,e){var n=t.index?"-".concat(t.index):"";return e?"".concat(e.long_name).concat(n):"Sensor ".concat(t.type).concat(n)}function Xe(t,e){if(!e||"gpios"!=e.name)return t;var n=15&t,i=t>>4&15;return"Out:"+(t>>8&7).toString(2).padStart(3,"0")+"\nIn:"+i.toString(2).padStart(4,"0")+" WL:"+n.toString(2).padStart(4,"0")}function Ke(t,e,n,i){Object.values(e.sensor_list.list).forEach((function(e){if(t.querySelector(".description-sensor-".concat(e.type,"-").concat(e.index))){if(i&&e.has_data(i)){var r=t.querySelector(".detail-value-".concat(e.type,"-").concat(e.index)),a=n.sensor_type_list.get_id(e.type);r.innerText=Xe(e.last_data().value,a),Et(r)}}else t.appendChild(function(t,e){var n=document.createElement("detail-line");n.classList.add("description-sensor-".concat(t.type,"-").concat(t.index),"description-sensor"),n.dataset.sensor="".concat(t.type,"@").concat(t.index);var i=document.createElement("i");i.classList.add("fas","fa-thermometer"),i.slot="icon",n.appendChild(i);var r=document.createElement("div");r.slot="name";var a=e.get_id(t.type);r.textContent=We(t,a),n.appendChild(r);var o=document.createElement("div");return o.innerText=Xe(t.last_data().value,a),o.classList.add("detail-value-".concat(t.type,"-").concat(t.index),"shine"),n.appendChild(o),n}(e,n.sensor_type_list))}))}function Je(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function $e(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Je(Object(n),!0).forEach((function(e){v(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Je(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Qe(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};switch(t){case"top_axis":return $e($e({},{margin:{top:40,right:20,bottom:10,left:60},axis:{top:{label:"Time",format:Ft.i$Z("%H:%M")},left:{label:"".concat(We(e,n)," (").concat(n.unit,")")}},dot:{fill:"green",stroke:"green"},path:{stroke:"green"}}),i);case"digital":return $e($e({},{margin:{top:20,right:20,bottom:20,left:30},height:110,domain_y:[0,1],curve:Ft.jsv,axis:{bottom:{format:Ft.i$Z("%H:%M"),bottom:"Time"},left:{label:n.long_name,values:[]}}}),i);default:return $e($e({},{margin:{top:20,right:20,bottom:40,left:60},axis:{bottom:{label:"Time",format:Ft.i$Z("%H:%M")},left:{label:"".concat(We(e,n)," (").concat(n.unit,")")}}}),i)}}function tn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function en(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?tn(Object(n),!0).forEach((function(e){v(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}Object.freeze(Fe);var nn={margin:{top:20,right:20,bottom:40,left:50},width:!1,height:300,curve:Ft.FdL,tooltip:{time_format:"%H:%M:%S"},axis:{bottom:{format:Ft.i$Z("%H:%M"),label:"Time"},left:{label:"Value"}},zoom:{max:1/0},brush:{height:80,margin:{bottom:30,top:0}},old_brush:!1,path:!1,dot:!1},rn=function(){function t(e){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,t),this._options=en(en({},nn),r),this._width=e.offsetWidth-this._options.margin.left-this._options.margin.right,this._height=this._options.height-this._options.margin.top-this._options.margin.bottom,this._options.tooltip&&(this._tooltip=Ft.Ys(e).append("div").attr("class","tooltip").style("opacity",0),"time_format"in this._options.tooltip&&(this._tooltipFormatTime=Ft.i$Z(this._options.tooltip.time_format))),this._x=Ft.Xf().range([0,this._width]),this._y=Ft.BYU().range([this._height,0]),this._valueline=Ft.jvg().curve(this._options.curve).x((function(t){return n._x(t.time)})).y((function(t){return n._y(t.value)}));var a=Ft.Ys(e).append("svg").attr("viewBox","0 0 "+(this._width+this._options.margin.left+this._options.margin.right)+" "+(this._height+this._options.margin.top+this._options.margin.bottom+(this._options.brush?this._options.brush.height+this._options.brush.margin.top+this._options.brush.margin.bottom:0))).attr("preserveAspectRatio","xMidYMid meet");this._svg=a.append("g").attr("transform","translate("+this._options.margin.left+","+this._options.margin.top+")");var o=this._options.axis;o&&(this._create_axis(Object.keys(o)),this._create_labels(o)),this._options.zoom||this._options.brush||this._options.old_brush?(this._x2=Ft.Xf().range(this._x.range()),this._svg.append("defs").append("svg:clipPath").attr("id","clip").append("svg:rect").attr("width",this._width).attr("height",this._height+10).attr("x",0).attr("y",-5),this._area=this._svg.append("g").attr("clip-path","url(#clip)"),this._transform=null):this._area=this._svg,this._options.zoom&&(this._zoom=Ft.sPX().scaleExtent([1,this._options.zoom.max]).translateExtent([[0,0],[this._width,this._height]]).extent([[0,0],[this._width,this._height]]).on("zoom",this._zoomed.bind(this)),this._area.append("rect").attr("class","zoom").attr("width",this._width).attr("height",this._height+10).attr("x",0).attr("y",-5).call(this._zoom)),this._options.brush&&(this._y2=Ft.BYU().range([this._options.brush.height,0]),this._valueline2=Ft.jvg().curve(this._options.curve).x((function(t){return n._x2(t.time)})).y((function(t){return n._y2(t.value)})),this._brush=Ft.Yud().extent([[0,0],[this._width,this._options.brush.height]]).on("brush end",this._brushed.bind(this)),this._svg2=a.append("g").attr("transform","translate("+this._options.margin.left+","+(this._options.brush.margin.top+this._options.height)+")"),this._create_axis(["bottom"],this._options.brush.height,this._svg2),this._svg2.append("g").attr("class","brush").call(this._brush).call(this._brush.move,this._x.range())),this._options.old_brush&&(this._old_brush=Ft.Yud().extent([[0,0],[this._width,this._height]]).on("end",this._old_brushed.bind(this)),this._area.append("g").attr("class","brush").call(this._old_brush),this._cleared=!1)}return a(t,[{key:"set_brush_selection",value:function(t){if(this._options.brush){var e=this._area.selectAll(".line").data()[0];if(e.length<t)this._svg2.select(".brush").call(this._brush.move,this._x.range());else{var n=e[e.length-t];this._update_brush_selection([this._x2(n.time),this._x2.range()[1]])}}}},{key:"update",value:function(t){var e=this;if(this._options.zoom||this._options.brush||this._options.old_brush)if(this._x2.domain(Ft.Wem(t,(function(t){return t.time}))),this._options.brush){var n=Ft.mN7(this._svg2.select(".brush").node());this._transform=n.map(this._x2.invert,this._x2),this._x.domain(this._transform)}else this._x.domain(this._transform?this._transform:this._x2.domain());else this._x.domain(Ft.Wem(t,(function(t){return t.time})));this._y.domain("domain_y"in this._options?this._options.domain_y:Ft.Wem(t,(function(t){return t.value}))),this._options.brush&&this._y2.domain(this._y.domain()),this._area.selectAll(".line").data([t],(function(t){return t.time})).join((function(t){return t.append("path").classed("line",!0).call(e._style.bind(e),e._options.path)})).transition().attr("d",this._valueline),this._area.selectAll("circle").data(t).join((function(t){return t.append("circle").classed("circle",!0).call(e._style.bind(e),e._options.dot).call(e._set_tooltips.bind(e))})).transition().attr("r",5).attr("cx",(function(t){return e._x(t.time)})).attr("cy",(function(t){return e._y(t.value)})),this._update_axis(this._options.axis),this._update_brush(t)}},{key:"_update_brush",value:function(t){var e=this;this._options.brush&&(this._svg2.selectAll(".line-brush").data([t],(function(t){return t.time})).join((function(t){return t.append("path").classed("line-brush",!0).call(e._style.bind(e),e._options.path)})).transition().attr("d",this._valueline2),this._svg2.select(".bottom--axis").call(this._format_axis(Ft.LLu(this._x2),{format:Ft.i$Z("%H:%M")})))}},{key:"_set_tooltips",value:function(t){var e=this;this._tooltip&&t.on("mouseover",(function(t,n){e._tooltip.transition().duration(200).style("opacity",.9),e._tooltip.html(e._tooltipFormatTime(n.time)+"<br/>"+n.value).style("left",t.offsetX-25+"px").style("top",t.offsetY-30+"px")})).on("mouseout",(function(t){e._tooltip.transition().duration(500).style("opacity",0)}))}},{key:"_create_axis",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;t&&Array.isArray(t)&&(i||(i=this._svg),t.forEach((function(t){switch(t){case"top":case"left":case"right":i.append("g").attr("class","axis ".concat(t,"--axis"));break;case"bottom":i.append("g").attr("class","axis ".concat(t,"--axis")).attr("transform","translate(0,"+(n||e._height)+")")}})))}},{key:"_update_axis",value:function(t){var e=this;Object.entries(t).forEach((function(t){var n=ht(t,2),i=n[0],r=n[1],a=e._svg.select(".".concat(i,"--axis"));if(!a.empty())switch(i){case"top":a.call(e._format_axis(Ft.F5q(e._x),r));break;case"bottom":a.call(e._format_axis(Ft.LLu(e._x),r));break;case"left":a.call(e._format_axis(Ft.y4O(e._y),r));break;case"right":a.call(e._format_axis(Ft.Khx(e._y),r))}}))}},{key:"_format_axis",value:function(t,e){return"format"in e&&t.tickFormat(e.format),"values"in e&&t.tickValues(e.values),t}},{key:"_create_labels",value:function(t){"top"in t&&"label"in t.top&&this._label_top(t.top.label),"left"in t&&"label"in t.left&&this._label_left(t.left.label),"bottom"in t&&"label"in t.bottom&&this._label_bottom(t.bottom.label)}},{key:"_label_top",value:function(t){this._svg.append("text").attr("class","label top--label").attr("transform","translate("+this._width/2+" ,"+(0-this._options.margin.top/2)+")").style("text-anchor","middle").text(t)}},{key:"_label_left",value:function(t){this._svg.append("text").attr("transform","rotate(-90)").attr("y",0-this._options.margin.left).attr("x",0-this._height/2).attr("class","label left--label").attr("dy","1em").style("text-anchor","middle").text(t)}},{key:"_label_bottom",value:function(t){this._svg.append("text").attr("class","label bottom--label").attr("y",this._height+this._options.margin.bottom/2).attr("dy","1em").attr("x",this._width/2).style("text-anchor","middle").text(t)}},{key:"_style",value:function(t,e){e&&("class"in e&&t.classed(e.class,!0),"stroke"in e&&t.style("stroke",e.stroke),"fill"in e&&t.style("fill",e.fill))}},{key:"_update_chart",value:function(){var t=this;this._area.selectAll(".line").transition().attr("d",this._valueline),this._area.selectAll("circle").transition().attr("r",5).attr("cx",(function(e){return t._x(e.time)})).attr("cy",(function(e){return t._y(e.value)})),this._update_axis(this._options.axis)}},{key:"_zoomed",value:function(t){if(this._transform=t.transform.rescaleX(this._x2).domain(),this._x.domain(this._transform),this._update_chart(),this._options.brush){var e=t.transform;this._svg2.select(".brush").call(this._brush.move,this._x.range().map(e.invertX,e))}}},{key:"_update_brush_selection",value:function(t){this._transform=t.map(this._x2.invert,this._x2),this._x.domain(this._transform),this._svg.select(".zoom").call(this._zoom.transform,Ft.CRH.scale(this._width/(t[1]-t[0])).translate(-t[0],0)),this._update_chart()}},{key:"_brushed",value:function(t){t.mode&&this._update_brush_selection(t.selection||this._x2.range())}},{key:"_old_brushed",value:function(t){if(this._cleared)this._cleared=!1;else{var e=t.selection;e&&e[0]==this._x.domain()[0]&&e[1]==this._x.domain()[1]||(this._transform=e?"handle"==t.mode?[this._x.invert(e[0]),this._x.invert(e[1])]:e.map(this._x2.invert,this._x2):this._x2.domain(),this._x.domain(this._transform),this._update_chart(),e&&(this._cleared=!0,this._svg.select(".brush").call(this._old_brush.move,null)))}}}]),t}();function an(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function on(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?an(Object(n),!0).forEach((function(e){v(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):an(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var sn=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};i(this,t),this._outputs=[];for(var a=1;a<=3;a++){var o=document.createElement("div");o.classList.add("detail-device-graph-output","chart-line-graph"),e.appendChild(o);var s=new rn(o,on(on(on({},Qe("digital",n,{long_name:"AC Load "+a})),{dot:{fill:Ft.xHP[a-1],stroke:Ft.xHP[a-1]},path:{stroke:Ft.xHP[a-1]}}),r));this._outputs.push(s)}this._inputs=[];for(var c=1;c<=8;c++){var l=document.createElement("div");l.classList.add("detail-device-graph-input","chart-line-graph"),e.appendChild(l);var u=new rn(l,on(on(on({},Qe("digital",n,{long_name:"Input "+c})),{dot:{fill:Ft.xHP[c+3-1],stroke:Ft.xHP[c+3-1]},path:{stroke:Ft.xHP[c+3-1]}}),r));this._inputs.push(u)}}return a(t,[{key:"set_brush_selection",value:function(t){this._inputs.forEach((function(e){return e.set_brush_selection(t)})),this._outputs.forEach((function(e){return e.set_brush_selection(t)}))}},{key:"update",value:function(t){this._outputs.forEach((function(e,n){e.update(t.map((function(t){return{time:t.time,value:t.value>>n+8&1}})))})),this._inputs.forEach((function(e,n){e.update(t.map((function(t){return{time:t.time,value:t.value>>n&1}})))}))}}]),t}();function cn(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return n?"rssi"==n.name?new rn(t,Qe("top_axis",e,n,i)):"gpios"!=n.name?new rn(t,Qe("normal",e,n,i)):new sn(t,e,i):new rn(t,Qe("normal",e,{long_name:"Value",unit:"num"},i))}function ln(t,e,n){var i=t.sensor_list.sensor(e.type,e.index).data;return n?i.slice(n):i}function un(t,e,n,i,r){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;Object.values(n.sensor_list.list).forEach((function(s){var c=dn(s);if(c in t)r&&s.has_data(r)&&t[c].update(ln(n,s,o));else{var l=document.createElement("div");l.classList.add(".description-sensor-graph-".concat(s.type,"-").concat(s.index)),5!=s.type&&l.classList.add("chart-line-graph"),e.appendChild(l);var u=cn(l,s,i.sensor_type_list.get_id(s.type),a);u&&(t[c]=u,t[c].update(ln(n,s,o)))}}))}function dn(t){return"".concat(t.type,"@").concat(t.index)}var hn=document.createElement("template");hn.innerHTML="<div id=sensor-description-content class=popup-container>\n  <span class=close>&times;</span>\n  <h1 class='sensor-description-title popup-title'></h1>\n  <div class=inner-container>\n    <section class=sensor-header></section>\n    <section class=sensor-data-container>\n      <div class=outer-table>\n        <table>\n          <thead>\n            <tr><th>Date</th><th>Value</th></tr>\n          </thead>\n          <tbody class=sensor-data-tbody>\n          </tbody>\n        </table>\n      </div>\n      <div class='sensor-graph chart-line-graph'></div>\n    </section>\n  </div>\n</div>\n";var fn=function(){function t(e,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};i(this,t),this._sensor=r,this._sensor_type=n.sensor_type_list.get_id(r.type);var o=hn.content.cloneNode(!0);o.querySelector(".close").addEventListener("click",(function(t){e.delete()})),o.querySelector(".sensor-description-title").textContent=We(this._sensor,this._sensor_type),this._table_tbody=o.querySelector(".sensor-data-tbody");var s=o.querySelector(".sensor-graph");e.appendChild(o),pn(this._table_tbody,this._sensor.data,this._sensor_type),this._graph=cn(s,this._sensor,this._sensor_type,a)}return a(t,[{key:"sensor",get:function(){return this._sensor}},{key:"graph",get:function(){return this._graph}},{key:"update",value:function(){var t,e,n,i;this._graph.update(this._sensor.data),t=this._table_tbody,e=this._sensor.data,n=this._sensor_type,i=Ft.i$Z("%d/%m/%y %H:%M:%S"),Ft.Ys(t).selectAll("tr").data(e).join("tr").selectAll("td").data((function(t){return[i(t.time),Xe(t.value,n)]})).enter().append("td").text((function(t){return t}))}}]),t}();function pn(t,e){e.length?t.innerHTML="":t.innerHTML="<tr><td colspan=2>No data yet</td></tr>"}var _n=function(){function t(e){var n=this;i(this,t),this._type=e.querySelector(".custom-request-type"),this._made=e.querySelector(".custom-request-made"),this._payload=e.querySelector(".custom-request-payload"),this._path=e.querySelector(".custom-request-path"),e.querySelector(".custom-request-button").addEventListener("click",(function(t){if(0!=n._type.selectedIndex){var i=n._split_path();e.dispatchEvent(new CustomEvent("command",{bubbles:!0,detail:{type:"custom",method:n._type.selectedOptions[0].value,resource:i.path,query:i.query,payload:n._payload.value}})),n._made.textContent="".concat(n._type.selectedOptions[0].value,": ").concat(n._path.value.trim()," [").concat(n._payload.value.length,"]")}else n._made.textContent="Error! Request 'type' not set"}))}return a(t,[{key:"_split_path",value:function(){var t=ht(this._path.value.trim().split("?"),2),e=t[0],n=t[1];return{path:e.split("/").filter((function(t){return t.length})),query:n?n.split("&").filter((function(t){return t.length})):[]}}}]),t}();function vn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function mn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?vn(Object(n),!0).forEach((function(e){v(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function yn(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=document.createElement("sensor-notify");Object.values(t.sensor_list.list).forEach((function(t){var n=e.sensor_type_list.get_id(t.type);r.add_sensor(We(t,n),"".concat(t.type,"@").concat(t.index))})),i&&(r.value=i),n.querySelector(".notify-sensor-list").appendChild(r)}function gn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function bn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?gn(Object(n),!0).forEach((function(e){v(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var wn=document.createElement("template");wn.innerHTML="<div id=main-device-description>\n  <h1 class=detail-title>\n    <span class=device-title>11:22:33:44:55:66</span>\n    <span class=device-notify><i class=\"fas fa-flag\"></i></span>\n  </h1>\n  <div class=detail-content>\n    <detail-line>\n      <i class=\"fas fa-link\" slot=icon></i>\n      <span slot=name>Status</span>\n      <span class='detail-connected shine'></span>\n    </detail-line>\n    <expand-menu>\n      <h2 slot=title>General</h2>\n      <detail-line>\n        <i class=\"fas fa-fingerprint\" slot=icon></i>\n        <div slot=name>ID</div>\n        <div class='detail-id shine'></div>\n      </detail-line>\n      <detail-line>\n        <i class=\"fas fa-signature\" slot=icon></i>\n        <div slot=name>Name</div>\n        <span class='detail-name-container detail-value shine'>\n          <span class=detail-name></span>\n          <span class=detail-edit-name><i class=\"fas fa-edit\"></i></span>\n        </span>\n      </detail-line>\n      <detail-line>\n        <i class=\"fas fa-code\" slot=icon></i>\n        <div slot=name>Firmware</div>\n        <div class='detail-fw shine'></div>\n      </detail-line>\n      <detail-line>\n        <i class=\"fas fa-microchip\" slot=icon></i>\n        <div slot=name>Hardware</div>\n        <div class='detail-hw shine'></div>\n      </detail-line>\n      <detail-line>\n        <i class=\"fas fa-at\" slot=icon></i>\n        <div slot=name>Endpoint</div>\n        <div class='detail-endpoint shine'></div>\n      </detail-line>\n    </expand-menu>\n    <expand-menu>\n      <h2 slot=title>Mesh Network</h2>\n      <detail-line>\n        <i class=\"fas fa-layer-group\" slot=icon></i>\n        <div slot=name>Layer</div>\n        <div class='detail-layer shine'></div>\n      </detail-line>\n      <detail-line>\n        <i class=\"fas fa-sort-up\" slot=icon></i>\n        <div slot=name>Parent</div>\n        <div class='detail-parent shine'></div>\n      </detail-line>\n      <detail-line>\n        <i class=\"fas fa-sitemap\" slot=icon></i>\n        <div slot=name>Net ID</div>\n        <div class='detail-netid shine'></div>\n      </detail-line>\n      <detail-line>\n        <i class=\"fas fa-sliders-h\" slot=icon></i>\n        <div slot=name>Channel</div>\n        <div class='detail-channel shine'></div>\n      </detail-line>\n      <detail-line>\n        <i class=\"fas fa-wifi\" slot=icon></i>\n        <div slot=name>MAC AP</div>\n        <div class='detail-macap shine'></div>\n      </detail-line>\n      <detail-line>\n        <i class=\"fas fa-baby\" slot=icon></i>\n        <div slot=name>Children</div>\n        <div class='detail-children shine'></div>\n      </detail-line>\n    </expand-menu>\n    <expand-menu>\n      <h2 slot=title>Configuration</h2>\n      <detail-line>\n        <i class=\"fas fa-clock\" slot=icon></i>\n        <div slot=name>RTC</div>\n        <div class='detail-has-rtc shine'></div>\n      </detail-line>\n      <detail-line>\n        <i class=\"fas fa-thermometer-half\" slot=icon></i>\n        <div slot=name>Temperature Sensor</div>\n        <div class='detail-has-temp shine'></div>\n      </detail-line>\n    </expand-menu>\n    <expand-menu>\n      <h2 slot=title>Sensors</h2>\n      <div class=description-sensor-content></div>\n    </expand-menu>\n    <expand-menu class=detail-device-commands>\n      <h2 slot=title>Commands</h2>\n      <label class=detail-device-command-force><input type=checkbox> Force</label>\n      <div class=device-command-list-container>\n        <detail-command class=detail-ac-load-container>\n          <i class=\"fas fa-bullseye\" slot=icon></i>\n          <div slot=title>AC Load</div>\n          <span class=detail-ac-load>\n            <btn-on-off data-index=1>\n              <span slot=on><i class=\"fas fa-check-circle\"></i></span>\n              <span slot=off><i class=\"fas fa-times-circle\"></i></span>\n            </btn-on-off>\n            <btn-on-off data-index=2>\n              <span slot=on><i class=\"fas fa-check-circle\"></i></span>\n              <span slot=off><i class=\"fas fa-times-circle\"></i></span>\n            </btn-on-off>\n            <btn-on-off data-index=3>\n              <span slot=on><i class=\"fas fa-check-circle\"></i></span>\n              <span slot=off><i class=\"fas fa-times-circle\"></i></span>\n            </btn-on-off>\n          </span>\n        </detail-command>\n        <detail-command id=detail-packet>\n          <i class=\"fas fa-cube\" slot=icon></i>\n          <div slot=title>Packets</div>\n          <array-command class='detail-command' data-type=packet>\n            <button data-index='board'>Board</button>\n            <button data-index='config'>Config</button>\n            <button data-index='sensors'>Sensors</button>\n            <button data-index='route'>Route</button>\n            <button data-index='full_config'>Full Config</button>\n          </array-command>\n        </detail-command>\n        <detail-command id=detail-time>\n          <i class=\"fas fa-clock\" slot=icon></i>\n          <div slot=title title=Time>Time</div>\n          <span class='detail-command detail-command-time'>\n            <div class=detail-time-value-container>\n              <div class='detail-time-value shine' title='<time> <lag> <fuse>' data-format=normal></div>\n              <div class='detail-time-switch' title='switch time format'><i class=\"fas fa-exchange-alt\"></i></div>\n            </div>\n            <div class=detail-time-command-container>\n              <div class=detail-time-index>Time</div>\n              <array-command class=detail-time-command data-type=time>\n                <button data-index=get_rtc>Get</button>\n                <button data-index=update_rtc>Update</button>\n              </array-command>\n            </div>\n            <div class=detail-time-command-container>\n              <div class=detail-time-index>Fuse</div>\n              <array-command class=detail-time-command data-type=fuse>\n                <button data-index=get_fuse>Get</button>\n                <button data-index=update_fuse>Update</button>\n              </array-command>\n            </div>\n          </span>\n        </detail-command>\n        <detail-command id=detail-ota>\n          <i class=\"fas fa-cloud-upload-alt\" slot=icon></i>\n          <div slot=title title='Update Over the Air'>OTA</div>\n          <span class='detail-command'>\n              <div class='detail-ota-version shine'></div>\n              <array-command data-type=ota>\n                <button data-index=get_ota_version>Get</button>\n                <select class=detail-select-ota-image></select>\n                <button data-index=update_ota>Update</button>\n              </array-command>\n          </span>\n        </detail-command>\n        <detail-command id=detail-system>\n          <i class=\"fas fa-cogs\" slot=icon></i>\n          <div slot=title>System</div>\n          <array-command class=detail-command data-type=system>\n            <div class=inner-command>\n              <div class='inner-value detail-reset-reason shine'>Reason</div>\n              <button data-index=reset_reason>Reset reason</button>\n            </div>\n            <div class=inner-command>\n              <div class='inner-value inner-value-uptime'>\n                <div class='detail-uptime shine' title='microseconds since boot' data-format=normal></div>\n                <div class='detail-uptime-switch' title='switch time format'><i class=\"fas fa-exchange-alt\"></i></div>\n              </div>\n              <button data-index=uptime>Uptime</button>\n            </div>\n            <div class=inner-command>\n              <button data-index=reset>Reset</button>\n              <button data-index=waive_root>Waive root</button>\n            </div>\n          </array-command>\n        </detail-command>\n        <detail-command id=detail-custom>\n          <i class=\"fas fa-hat-wizard\" slot=icon></i>\n          <div slot=title>Custom</div>\n          <div class=detail-command>\n            <div class=inner-command>\n              <select class=custom-request-type>\n                <option>Type</option>\n                <option value=get>GET</option>\n                <option value=post>POST</option>\n                <option value=put>PUT</option>\n                <option value=delete>DELETE</option>\n              </select>\n              <input placeholder='Resource path, e.g, /path/to/resource?query=1' class=custom-request-path autocapitalize=\"none\">\n            </div>\n            <binary-data class=custom-request-payload></binary-data>\n            <div class=inner-command>\n              <div class=custom-request-made></div>\n              <button class=custom-request-button>Request</button>\n              <button class=custom-response-button>Responses</button>\n            </div>\n          </div>\n        </detail-command>\n      </div>\n    </expand-menu>\n    <expand-menu class=detail-device-graph>\n      <h2 slot=title>Graph</h2>\n      <div class=detail-device-graph-container></div>\n    </expand-menu>\n  </div>\n</div>\n";var xn=function(){function t(e,n,r){var a=this;i(this,t);var o=wn.content.firstElementChild.cloneNode(!0);this._instance=r,this._title=o.querySelector(".device-title"),this._connected=o.querySelector(".detail-connected"),this._id=o.querySelector(".detail-id"),this._name=o.querySelector(".detail-name"),this._fw=o.querySelector(".detail-fw"),this._hw=o.querySelector(".detail-hw"),this._endpoint=o.querySelector(".detail-endpoint"),this._layer=o.querySelector(".detail-layer"),this._parent=o.querySelector(".detail-parent"),this._net_id=o.querySelector(".detail-netid"),this._channel=o.querySelector(".detail-channel"),this._mac_ap=o.querySelector(".detail-macap"),this._children=o.querySelector(".detail-children"),this._has_rtc=o.querySelector(".detail-has-rtc"),this._has_temp_sensor=o.querySelector(".detail-has-temp"),this._sensors=o.querySelector(".description-sensor-content"),this._sensor_description=null,Ke(this._sensors,n,r),this._commands=o.querySelector(".detail-device-commands"),this._force=this._commands.querySelector(".detail-device-command-force input"),this._commands_gpios_out=this._commands.querySelectorAll("btn-on-off"),this._time=this._commands.querySelector(".detail-time-value"),this._ota_version=this._commands.querySelector(".detail-ota-version"),this._ota_select_image=this._commands.querySelector(".detail-select-ota-image"),this._uptime=this._commands.querySelector(".detail-uptime"),this._reset_reason=this._commands.querySelector(".detail-reset-reason"),this._custom_request=new _n(this._commands.querySelector("#detail-custom")),this._force.addEventListener("change",(function(t){a.disable_commands(!a._force.checked)})),o.querySelector(".detail-edit-name").addEventListener("click",(function(t){a._name.contentEditable=!0,a._name.focus()})),this._name.addEventListener("blur",(function(t){a._name.contentEditable=!1,r.send(Dt.DEVICE,Rt.EDIT,{device:a._title.textContent,name:a._name.textContent})})),this._commands.addEventListener("command",(function(t){if(!t.target.disabled&&"true"!=a._commands.dataset.disabled)switch(t.detail.type){case"ac_load":r.send(Dt.DEVICE,Rt.REQUEST,{request:"ac".concat(t.detail.index,"_").concat("true"==t.detail.on?"on":"off"),device:a._title.textContent});break;case"packet":r.send(Dt.DEVICE,Rt.REQUEST,{request:t.detail.index,device:a._title.textContent});break;case"time":r.send(Dt.DEVICE,Rt.REQUEST,{request:t.detail.index,device:a._title.textContent});case"fuse":r.send(Dt.DEVICE,Rt.REQUEST,{request:t.detail.index,device:a._title.textContent,payload:60*-(new Date).getTimezoneOffset()});break;case"ota":if(!t.detail.index)return;if("update_ota"==t.detail.index&&!a._ota_select_image.selectedOptions[0].value)return void r.report(zt,It,a._title.textContent,"Image not selected");r.send(Dt.DEVICE,Rt.REQUEST,{request:t.detail.index,device:a._title.textContent,image:a._ota_select_image.selectedOptions[0].value});break;case"system":r.send(Dt.DEVICE,Rt.REQUEST,{request:t.detail.index,device:a._title.textContent});break;case"custom":r.send(Dt.DEVICE,Rt.REQUEST,bn(bn({},{request:"custom",device:a._title.textContent}),t.detail));break;default:console.warn("command not found",t.detail)}})),this._commands.querySelector(".detail-time-switch").addEventListener("click",(function(t){a._time.dataset.format="normal"==a._time.dataset.format?"clock":"normal",a._time.textContent=Lt(n,a._time.dataset.format)})),this._commands.querySelector(".detail-uptime-switch").addEventListener("click",(function(t){a._uptime.dataset.format="normal"==a._uptime.dataset.format?"clock":"normal",a._uptime.textContent=Nt(n,a._uptime.dataset.format)})),this._commands.querySelector(".custom-response-button").addEventListener("click",(function(t){var e=document.createElement("pop-modal");e.classList.add("custom-response-modal"),e.innerHTML="<div class=custom-response-container>\n  <h1><span>Responses [</span><span class=custom-response-device></span>]</h1>\n  <div class=custom-response-responses>\n    <em>No custom response received yet...<em>\n  </div>\n</div>\n",function(t,e){if(e.querySelector(".custom-response-device").textContent=t.mac,t.custom_responses.length){var n=e.querySelector(".custom-response-responses");n.innerHTML="";var i=document.createElement("template");i.innerHTML="<div>\n  <hr>\n  <div class=custom-response-header>\n    <header-value class=custom-response-type name=Type></header-value>\n    <header-value class=custom-response-path name=Path></header-value>\n    <header-value class=custom-response-status name=Status></header-value>\n    <header-value class=custom-response-code name=Code></header-value>\n    <header-value class=custom-response-transaction name=Transaction></header-value>\n    <header-value class=custom-response-time name=Time></header-value>\n  </div>\n  <binary-data class=custom-response-payload readonly></binary-data>\n</div>\n",t.custom_responses.forEach((function(t){var e=document.importNode(i.content.firstElementChild,!0);e.querySelector(".custom-response-type").value=t.type,e.querySelector(".custom-response-status").value=t.success?"success":"fail",e.querySelector(".custom-response-code").value=t.code,e.querySelector(".custom-response-path").value=function(t){return"/"+t.resource.join("/")+(t.query.length?"?".concat(t.query.join("&")):"")}(t),e.querySelector(".custom-response-transaction").value=t.trans_status,e.querySelector(".custom-response-payload").value=t.payload,e.querySelector(".custom-response-time").value=Pt(t.time),n.prepend(e)}))}}(n,e),document.body.appendChild(e),e.show(),e.addEventListener("cancel",(function(t){t.target.delete()}))}));var s=document.createElement("option");s.textContent=r.image_list.size?"select image":"no image",s.value="",this._ota_select_image.appendChild(s),Object.values(r.image_list.list).forEach((function(t){t.version!=n.firmware_version&&((s=document.createElement("option")).value=t.name,s.textContent="".concat(t.version," (").concat(t.name,")"),a._ota_select_image.appendChild(s))})),this._sensors.addEventListener("click",(function(t){for(var e=t.target;e!=a._sensors&&!("sensor"in e.dataset);)e=e.parentNode;if("sensor"in e.dataset){var i=document.createElement("pop-modal");i.id="sensor-description-popup",i.addEventListener("cancel",(function(t){a._sensor_description=null,i.delete()})),document.body.appendChild(i),i.show();var o=ht(e.dataset.sensor.split("@"),2),s=o[0],c=o[1];s=+s,c=+c,r.sensor_type_list.get_id(s);var l=n.sensor_list.sensor(s,c);a._sensor_description=new fn(i,r,l),a._sensor_description.update(),a._sensor_description.graph.set_brush_selection(20)}})),o.querySelector(".device-notify").addEventListener("click",(function(t){return function(t,e){var n=document.createElement("pop-modal");n.classList.add("popup-modal","pop-modal-notify"),n.innerHTML="<div class='popup-container device-notify-popup'>\n  <span class=popup-header>\n    <span><i class=\"fas fa-flag\"></i></span>\n    <h1 class=popup-title>Notification</h1>\n  </span>\n  <div class=popup-content>\n    <fieldset class=notify-device>\n      <legend>Device</legend>\n      <label><input type=checkbox value=connect> Connect</label>\n      <label><input type=checkbox value=disconnect> Disconnect</label>\n      <label><input type=checkbox value=updated> Update</label>\n      <label><input type=checkbox value=app_installed> App installed</label>\n    </fieldset>\n    <fieldset class=notify-sensor>\n      <legend><span>Sensor </span><span class=add-notify-sensor><i class=\"fas fa-plus-square\"></i></span></legend>\n      <span class=notify-sensor-list></span>\n    </fieldset>\n  </div>\n  <div class=notify-footer><button class='button-normal notify-device-btn'>Apply</button></div>\n</div>\n",n.querySelectorAll(".notify-device input").forEach((function(n){var i=e.notify.device_list;t.id in i&&i[t.id].find((function(t){return t==n.value}))&&(n.checked=!0)})),t.id in e.notify.sensor_list&&Object.entries(e.notify.sensor_list[t.id]).forEach((function(i){var r=ht(i,2),a=r[0],o=r[1],s=ht(a.split("@"),2),c=s[0],l=s[1];o.forEach((function(i){yn(t,e,n,mn(mn({},i),{sensor:{type:c,index:l}}))}))})),n.querySelector(".add-notify-sensor").addEventListener("click",(function(i){return yn(t,e,n)})),n.querySelector(".notify-device-btn").addEventListener("click",(function(i){var r=[];n.querySelectorAll(".notify-device input").forEach((function(t){return t.checked?r.push(t.value):null})),e.send(Dt.NOTIFY,"device_set",{id:t.id,device:t.mac,notify:r});var a=[];n.querySelectorAll("sensor-notify").forEach((function(t){a.push(t.value)})),e.send(Dt.NOTIFY,"sensor_set",{id:t.id,mac:t.mac,sensors:a})})),document.body.appendChild(n),n.show(),n.addEventListener("cancel",(function(t){t.target.delete()}))}(n,r)})),e.innerHTML="",e.appendChild(o),this._graphs={},this._graphs_container=o.querySelector(".detail-device-graph-container"),un(this._graphs,this._graphs_container,n,r,null,{zoom:!1,brush:!1},-20);var c=n.sensor_list.last_data(5,0);c&&this._commands_gpios_out.forEach((function(t){t.state=c.value&1<<+t.dataset.index+8-1}))}return a(t,[{key:"disable_commands",value:function(t){this._commands.dataset.disabled=t,this._commands_gpios_out.forEach((function(e){e.disabled=t}))}},{key:"update",value:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this._title.textContent=t.mac,this._connected.textContent=t.connected?"connected":"disconnected",jt("connected",e,this._connected),this.disable_commands(!t.connected),["id","name","fw","hw","endpoint","layer","parent","net_id","channel","mac_ap","children_table","has_rtc","has_temp_sensor"].forEach((function(r){switch(r){case"fw":case"hw":(jt("version_".concat(r),e,n["_".concat(r)])||i)&&(n["_".concat(r)].textContent="fw"==r?t.firmware_version:t.hardware_version);break;case"endpoint":(jt("endpoint",e,n._endpoint)||i)&&(n._endpoint.textContent=t.endpoint.addr+":"+t.endpoint.port);break;case"channel":(jt("ch_conn",e,n._channel)||i)&&(n._channel.textContent="".concat(t.channel," / ").concat(t.channel_config));break;case"children_table":(jt("children_table",e,n._children)||i)&&(n._children.textContent=t.children_table.join(" | "));break;default:(jt(r,e,n["_".concat(r)])||i)&&(n["_".concat(r)].textContent=t[r])}})),this._time.textContent=Lt(t,this._time.dataset.format),jt("rtc",e,this._time),jt("fuse",e,this._time),this._ota_version.textContent=t.ota_version?t.ota_version:"<ota version>",jt("ota_version",e,this._ota_version),this._uptime.textContent=Nt(t,this._uptime.dataset.format),jt("uptime",e,this._uptime),this._reset_reason.textContent=t.reset_reason?"[".concat(t.reset_reason,"] ").concat(Ge(t.reset_reason)):"<reset_reason>",jt("reset_reason",e,this._reset_reason),e&&"sensor"in e||i){Ke(this._sensors,t,this._instance,e.sensor);var r=t.sensor_list.last_data(5,0);r&&this._commands_gpios_out.forEach((function(t){t.state=r.value&1<<+t.dataset.index+8-1})),this._sensor_description&&this._sensor_description.update(),un(this._graphs,this._graphs_container,t,this._instance,e.sensor,{zoom:!1},-20)}}}]),t}();function kn(t,e){}function En(t,e){}function Sn(t,e){var n=t.querySelector("#main-device-description");t.querySelector("#main-device-tbody").addEventListener("click",(function(t){var i=t.composedPath()[1].dataset.device;if(i&&i in e.device_list.list){n.innerHTML="";var r=e.device_list.list[i],a=new xn(n,r,e);r.register_view("description",a),a.update(r,{},!0),window.location.hash="main-device-description",setTimeout((function(){window.location.hash=""}),1e3)}}))}function On(t,e){e.tree.update_view(e)}function Tn(t,e){}function An(t,e){t.querySelector("#net-devices-tree").addEventListener("click",(function(t){var n=t.target.dataset.device;n&&e.open_device_detail(n)})),t.querySelector("#net-devices-unconnected").addEventListener("click",(function(t){var n=t.target.dataset.device;n&&e.open_device_detail(n)})),t.querySelector("#net-devices-endpoints").addEventListener("click",(function(t){var n=t.target.dataset.device;n&&e.open_device_detail(n)})),t.querySelector("#net-container-check-name").addEventListener("change",(function(t){e.tree.update_view(e,t.target.checked)}))}function Cn(t,e){}function Mn(t,e){}function Pn(t,e){}function jn(t,e){}function Ln(t,e){var n=16777216;t.querySelector(".file-input").addEventListener("change",(function(t){var i=t.target.files;if(i.length){if(i[0].name.length>30)return e.report(Zt,It,"upload image","Invalid name size [".concat(i[0].name,"]"),"size=".concat(i[0].name.length,"/max=").concat(30)),void(t.target.value="");if(i[0].size>n)return e.report(Zt,It,"upload image","File too big [".concat(i[0].name,"]"),"size=".concat(i[0].size,"/max=").concat(n)),void(t.target.value="");e.send_image(i[0]),t.target.value=""}})),t.querySelector("#image-main-container").addEventListener("click",(function(t){for(var n=t.target;"TD"!=n.tagName;)if("TR"==(n=n.parentNode).tagName)return;"image"in n.parentNode.dataset&&(n.classList.contains("image-close")?e.send(Dt.IMAGE,"delete",[n.parentNode.dataset.image]):n.classList.contains("image-download")?e.send(Dt.IMAGE,"download",{name:n.parentNode.dataset.image}):e.open_image_detail(n.parentNode.dataset.image))}))}function Nn(t,e){}function Dn(t,e){}function qn(t,e){var n=524288;t.querySelector(".file-input").addEventListener("change",(function(t){var i=t.target.files;if(i.length){if(i[0].name.length>12)return e.report(report_commands.APP,report_types.warning,"upload app","Invalid name size [".concat(i[0].name,"]"),"size=".concat(i[0].name.length,"/max=").concat(12)),void(t.target.value="");if(i[0].size>n)return e.report(report_commands.APP,report_types.warning,"upload app","File too big [".concat(i[0].name,"]"),"size=".concat(i[0].size,"/max=").concat(n)),void(t.target.value="");e.send_app(i[0]),t.target.value=""}})),t.querySelector("#app-main-container").addEventListener("click",(function(t){for(var n=t.target;"TD"!=n.tagName;)if("TR"==(n=n.parentNode).tagName)return;"app"in n.parentNode.dataset&&(n.classList.contains("app-close")?e.send(Dt.APP,"delete",[n.parentNode.dataset.app]):n.classList.contains("app-download")?e.send(Dt.APP,"download",{name:n.parentNode.dataset.app}):e.open_app_detail(n.parentNode.dataset.app))}))}function Rn(t,e){var n=t.querySelector("#notification-status");Se.support()?e.is_subscribed?(n.textContent="Push notification is enabled",n.classList.add("enabled"),n.classList.remove("not-supported","disabled")):(n.textContent="Push notification is disabled",n.classList.add("disabled"),n.classList.remove("not-supported","enabled")):(n.textContent="Push notificaiton is not supported by your browser.",n.classList.add("not-supported"),n.classList.remove("enabled","disabled"))}function Un(t,e){var n=t.querySelector("#notification-content");e.notify.list.forEach((function(t){n.querySelector("input[value=".concat(t,"]")).checked=!0})),Rn(t,e),t.querySelector("#notification-apply").addEventListener("click",(function(t){var i=[];n.querySelectorAll("input[type=checkbox]").forEach((function(t){return t.checked?i.push({name:t.value}):null})),e.send(Dt.NOTIFY,"general_set",i)}))}function zn(t,e){}var Zn=document.createElement("template");function In(t,e){return("000000000"+t).substr(-e)}Zn.innerHTML="<div id=report-history-content>\n  <h1>Report History</h1>\n  <div id=report-history-table-container>\n    <table>\n      <thead>\n        <tr><th>Time</th><th>Type</th><th>Report</th></tr>\n      </thead>\n      <tbody>\n        <tr><td colspan=3><em>No reports yet!</em></td></tr>\n      </tbody>\n    </table>\n  </div>\n</div>";var Hn=function(){function t(e,n){i(this,t),this._list=[],this._container=e,this._pop_container=n,this._pop_text=n.querySelector("span"),this.init_view(),this._inner_container=e.querySelector("#report-history-table-container"),this._tbody=e.querySelector("tbody")}return a(t,[{key:"add",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];!this._list.length&&(!Array.isArray(t)||Array.isArray(t)&&t.length)&&this.clear_view(),Array.isArray(t)?this._list=this._list.concat(t):this._list.push(t),e&&this.update_view(t)}},{key:"clear_view",value:function(){this._tbody.innerHTML=""}},{key:"init_view",value:function(t){var e=this;this._container.addEventListener("cancel",(function(t){e.hide()})),this._container.appendChild(Zn.content.cloneNode(!0)),this._pop_container.querySelector("#report-pop-close").addEventListener("click",(function(t){e._pop_container.style.display="none"}))}},{key:"update_view",value:function(t){var e=this;Array.isArray(t)?t.forEach((function(t){return e._update_line(t)})):(this._update_line(t),this._update_pop(t))}},{key:"show",value:function(){this._container.show(),this._inner_container.scrollTop=this._inner_container.scrollHeight}},{key:"hide",value:function(){this._container.hide()}},{key:"_update_line",value:function(t){var e=document.createElement("tr"),n=document.createElement("td"),i=document.createElement("td"),r=document.createElement("td"),a=this._make_message(t),o="time"in t?new Date(t.time):new Date;n.textContent="".concat(o.getHours(),":").concat(In(o.getMinutes(),2),":").concat(In(o.getSeconds(),2),".").concat(In(o.getMilliseconds(),3)),i.textContent=t.type,r.textContent=a,e.appendChild(n),e.appendChild(i),e.appendChild(r),e.classList.add("report-".concat(t.type)),this._tbody.appendChild(e)}},{key:"_update_pop",value:function(t){var e=this._make_message(t);this._pop_container.classList.remove("report-error","report-warning","report-success","report-info"),this._pop_text.textContent=e,this._pop_container.classList.add("report-".concat(t.type)),this._pop_container.style.display="block",Et(this._pop_container)}},{key:"_make_message",value:function(t){var e="";return"reference"in t&&(e="[".concat(t.reference,"]: ")),e+=t.message,"arg"in t&&(e+=" [".concat(t.arg,"]")),e}}]),t}(),Bn=function(){function t(){var e=this;i(this,t),this._detail=document.querySelector("#detail-container"),this._content=this._detail.querySelector("#detail-content"),this._close=this._detail.querySelector(".detail-close"),this._close_cb={},this._close_args={},this._close.addEventListener("click",(function(t){e.hide()}))}return a(t,[{key:"container",get:function(){return this._detail}},{key:"content",get:function(){return this._content}},{key:"close",get:function(){return this._close}},{key:"show",value:function(){this._detail.classList.add("show-container")}},{key:"hide",value:function(){this._detail.classList.remove("show-container"),this.clear()}},{key:"clear",value:function(){var t=this;Object.entries(this._close_cb).forEach((function(e){var n=ht(e,2),i=n[0];n[1].apply(void 0,gt(t._close_args[i])),delete t._close_cb[name],delete t._close_args[name]}))}},{key:"register_close",value:function(t,e){this._close_cb[t]=e;for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];this._close_args[t]=i}}]),t}();function Yn(){document.querySelectorAll(".drop-menu").forEach((function(t){return t.blur()}))}function Vn(t,e){Se.support()&&new Se(e.ws,e.username,t.data.key,e.registration,new Ee).get_subscription().then((function(t){e.is_subscribed=t}))}function Fn(t,e,n){n.is_subscribed=t,"notify"==e.current&&Rn(e.container,n)}function Gn(t){t.storage&&(t.storage.save("sessions",{index:"".concat(t.username,"@").concat(t.server_addr),username:t.username,server_addr:t.server_addr,autoconnect:t.autoconnect,date:new Date}),t.storage.save_key("instance",{username:t.username,server_addr:t.server_addr,autoconnect:t.autoconnect,sessionid:t.sessionid,date:new Date},"autoconnect"));var e=function(){var t=document.createElement("template");return t.innerHTML="<div id=device-container class=main-container>\n  <div id=device-main-container>\n    <h1>Devices</h1>\n    <div class=table-container>\n      <table>\n        <thead>\n          <tr>\n            <th colspan=3>General</th>\n            <th colspan=2>Version</th>\n            <th colspan=2>Endpoint</th>\n            \x3c!-- <th colspan=6>Network</th> --\x3e\n            \x3c!-- <th colspan=2>Config</th> --\x3e\n          </tr>\n          <tr>\n            \x3c!-- <th>#</th> --\x3e\n            \x3c!-- <th>ID</th> --\x3e\n            <th>MAC</th>\n            <th>Name</th>\n            <th>Firmware</th>\n            <th>Hardware</th>\n            <th>Address</th>\n            <th>Port</th>\n            \x3c!-- <th>Layer</th>\n            <th>Parent</th>\n            <th>Net ID</th>\n            <th>Channel</th>\n            <th>MAC AP</th>\n            <th>Children</th> --\x3e\n            \x3c!-- <th>RTC</th>\n            <th>Temp</th> --\x3e\n          </tr>\n        </thead>\n        <tbody id=main-device-tbody>\n          <tr>\n            <td colspan=20>\n              <em>No devices connected</em>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n    <div id=main-device-description></div>\n  </div>\n</div>\n",new Ne(t,kn,En,Sn)}(),n=function(){var t=document.createElement("template");return t.innerHTML="<div id=net-container class=main-container>\n  <h1>Net</h1>\n  <label><input type=checkbox id=net-container-check-name> Show names</label>\n  <div id=net-container-tree></div>\n  <div id=net-container-list>\n    <div>\n      <h2>Unconnected</h2>\n      <table>\n        <thead>\n          <tr><th>Devices</th></tr>\n        </thead>\n        <tbody id=net-devices-unconnected>\n          <tr><td><em>No devices unconnected</em></td></tr>\n        </tbody>\n      </table>\n    </div>\n    <div>\n      <table>\n        <h2>Endpoints</h2>\n        <thead>\n          <tr><th>Device</th><th>Endpoint</th></tr>\n        </thead>\n        <tbody id=net-devices-endpoints>\n          <tr><td colspan=2><em>No endpoints avaiable</em></td></tr>\n        </tbody>\n      </table>\n    </div>\n    <div>\n      <table>\n        <h2>Tree</h2>\n        <thead>\n          <tr><th>#</th><th>Device</th><th>Parent</th><th>Children</th></tr>\n        </thead>\n        <tbody id=net-devices-tree>\n          <tr><td colspan=5><em>No devices connected</em></td></tr>\n        </tbody>\n      </table>\n    </div>\n  </div>\n</div>\n",new Ne(t,On,Tn,An)}(),i=function(){var t=document.createElement("template");return t.innerHTML="<div id=image-container class=main-container>\n  <h1>Images</h1>\n  <div id=image-header>\n    <label class=image-upload-container title='Upload image'>\n      <input type=file class=file-input accept='.bin'>\n      <i class=\"fas fa-file-upload\"></i>\n      <span>Upload</span>\n    </label>\n  </div>\n  <div id=image-main-container>\n    <table>\n      <thead>\n        <tr>\n          <th>ID</th>\n          <th>Name</th>\n          <th>Version</th>\n          <th>Size</th>\n          \x3c!-- <th>Project</th> --\x3e\n          \x3c!-- <th>Time</th> --\x3e\n          \x3c!-- <th>Date</th> --\x3e\n          \x3c!-- <th>IDF Version</th> --\x3e\n          \x3c!-- <th>Hash</th> --\x3e\n          \x3c!-- <th>Magic word</th> --\x3e\n          \x3c!-- <th>Secure version</th> --\x3e\n          <th>#</th>\n          <th>X</th>\n        </tr>\n      </thead>\n      <tbody id=main-image-tbody>\n        <tr>\n          <td colspan=20>\n            <em>No images uploaded</em>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n</div>\n",new Ne(t,Pn,jn,Ln)}(),r=function(){var t=document.createElement("template");return t.innerHTML="<div class=main-container>\n    <h1>This is the main dashboard</h1>\n</div>\n",new Le(t,Ye,Ve)}(),a=function(){var t=document.createElement("template");return t.innerHTML="<div>\n    <h1>This is the main JOBs dashboard</h1>\n</div>\n",new Ne(t,Cn,Mn)}(),o=function(){var t=document.createElement("template");return t.innerHTML="<div id=app-container class=main-container>\n  <h1>Apps</h1>\n  <div id=app-header>\n    <label class=app-upload-container title='Upload app'>\n      <input type=file class=file-input accept='.elf'>\n      <i class=\"fas fa-file-upload\"></i>\n      <span>Upload</span>\n    </label>\n  </div>\n  <div id=app-main-container>\n    <table>\n      <thead>\n        <tr>\n          <th>ID</th>\n          <th>Name</th>\n          <th>Version</th>\n          <th>Size</th>\n          <th>#</th>\n          <th>X</th>\n        </tr>\n      </thead>\n      <tbody id=main-app-tbody>\n        <tr>\n          <td colspan=20>\n            <em>No app uploaded</em>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n</div>\n",new Ne(t,Nn,Dn,qn)}(),s=document.querySelector("#main-content"),c=new pe(t.ws,new we(t.message.data.id,t.message.data.username,t.message.data.name,t.message.data.email,t.message.data.status,t.sessionid,t.policy),t.server_addr,t.registration,t.storage,{containers:{detail:new Bn,main_content:s,device_table:e.container.querySelector("#main-device-tbody"),tree_container:n.container.querySelector("#net-container-list"),tree_graph:n.container.querySelector("#net-container-tree"),image_table:i.container.querySelector("#main-image-tbody"),app_table:o.container.querySelector("#main-app-tbody")}}),l=new Hn(document.querySelector("#report-history-container"),document.querySelector("#report-pop"));xe.can(c.logged_user,ke.user_admin)?xe.show_user_admin_element():xe.hide_user_admin_element();var u=new De(s);u.add("main",r),u.add("user_admin",function(){var t=document.createElement("template");return t.innerHTML="<div id=admin-portal-main>\n  <section>\n    <h1>\n      <span>Users <span>\n      <span class=admin-add-new id=admin-user-add title='Add new user'><i class=\"fas fa-plus-square\"></i><span>\n    </h1>\n    <table>\n      <thead>\n        <tr>\n          <th>ID</th>\n          <th>Username</th>\n          <th>Name</th>\n          <th>Email</th>\n          <th>Status</th>\n          <th>#</th>\n        </tr>\n      </thead>\n      <tbody id=admin-user-tbody>\n        <tr><td colspan=6><em>No users avaiable</em></td></tr>\n      </tbody>\n    </table>\n  </section>\n  <section>\n    <h1>\n      <span>User Groups <span>\n      \x3c!-- <span class=admin-add-new id=admin-group-add title='Add new group'><i class=\"fas fa-plus-square\"></i><span> --\x3e\n    </h1>\n    <table>\n      <thead>\n        <th>ID</th>\n        <th>Name</th>\n        <th>Description</th>\n        <th>Size</th>\n        <th>Members</th>\n        \x3c!-- <th>#</th> --\x3e\n      </thead>\n      <tbody id=admin-group-tbody>\n        <tr><td colspan=6><em>No groups avaiable</em></td></tr>\n      </tbody>\n    </table>\n  </section>\n</div>\n",new Le(t,Re,Ue)}()),u.add("device",e),u.add("net",n),u.add("job",a),u.add("image",i),u.add("app",o),u.add("sensor_type",function(){var t=document.createElement("template");return t.innerHTML="<div id=sensor-type-main>\n  <h1>\n    <span>Sensor Types<span>\n    <span class=sensor-type-add-new-button title='Add new sensor'><i class=\"fas fa-plus-square\"></i><span>\n  </h1>\n  <table>\n    <thead>\n      <tr>\n        <th>ID</th>\n        <th>Name ID</th>\n        <th>Name</th>\n        <th>Type</th>\n        \x3c!-- <th>Unit</th> --\x3e\n        <th>Unit Name</th>\n        \x3c!-- <th>Description</th> --\x3e\n        <th>#</th>\n        <th>X</th>\n      </tr>\n    </thead>\n    <tbody id=sensor-type-tbody>\n      <tr><td colspan=20><em>No sensors configured</em></td></tr>\n    </tbody>\n  </table>\n</div>\n",new Le(t,He,Be)}()),u.add("notify",function(){var t=document.createElement("template");return t.innerHTML="<div id=notification-container class=main-container>\n  <h1>Notificaiton</h1>\n  <div id=notification-status></div>\n  <div id=notification-content>\n    <label><input type=checkbox value=new_device> New device connected</label>\n    <label><input type=checkbox value=device_conn> Device connected</label>\n    <label><input type=checkbox value=device_dis> Device disconnected</label>\n    <label><input type=checkbox value=device_update> Device updated</label>\n    <label><input type=checkbox value=device_app_installed> Device app installed</label>\n    <label><input type=checkbox value=image_add> Image added</label>\n    <label><input type=checkbox value=image_del> Image deleted</label>\n    <label><input type=checkbox value=app_add> App added</label>\n    <label><input type=checkbox value=add_del> App deleted</label>\n    <label><input type=checkbox value=job_run> Job running</label>\n      <label><input type=checkbox value=job_stop> Job stopped</label>\n  </div>\n  <button id=notification-apply class=button-normal>Apply</button>\n</div>\n",new Le(t,Un,zn)}()),e.install(c),n.install(c),i.install(c),o.install(c),c.add_handler(Dt.USER,qt.NOTIFY_KEY,Vn,c),c.add_handler(Dt.USER,qt.PUSH_UNSUBSCRIBE,(function(t){return Fn(!1,u,c)})),c.add_handler(Dt.USER,qt.PUSH_SUBSCRIBE,(function(t){return Fn(!0,u,c)})),c.add_handler(Dt.DEVICE,Rt.LIST,(function(t){c.device_list.process(t)})),c.add_handler(Dt.DEVICE,Rt.DATA,(function(t){c.device_list.process(t)})),c.add_handler(Dt.DEVICE,Rt.EDIT,(function(t){c.device_list.process(t)})),c.add_handler(Dt.DEVICE,Rt.TREE,(function(t){c.tree.process(t,c,!0),c.device_list.set_connected(t.data.unconnected,!0),function(t,e){e.data.tree.forEach((function(e){var n=t.tree.get_endpoint(e.device);n&&t.device_list.process({type:Dt.DEVICE,command:Rt.DATA,data:{device:e.device,endpoint:n}},!0)}))}(c,t)})),c.add_handler(Dt.DEVICE,Rt.CUSTOM_RESPONSE,(function(t){c.device_list.process(t)})),c.add_handler(Dt.SENSOR,Ut.LIST,(function(t){c.sensor_type_list.process(t,!0)})),c.add_handler(Dt.IMAGE,"list",(function(t){c.image_list.process(t,c,!0)})),c.add_handler(Dt.APP,"list",(function(t){c.app_list.process(t,c,!0)})),c.add_handler(Dt.REPORT,zt,(function(t){l.add(t.data,!0)})),c.add_handler(Dt.REPORT,"list",(function(t){l.add(t.data,!0)})),c.add_handler(Dt.REPORT,Zt,(function(t){l.add(t.data,!0)})),c.add_handler(Dt.REPORT,"app",(function(t){l.add(t.data,!0)})),c.add_handler(Dt.REPORT,"notify",(function(t){l.add(t.data,!0)})),c.add_handler(Dt.NOTIFY,"general_list",(function(t){c.notify.set(t.data)})),c.add_handler(Dt.NOTIFY,"device_list",(function(t){c.notify.set_device(t.data)})),c.add_handler(Dt.NOTIFY,"sensor_list",(function(t){c.notify.set_sensors(t.data)})),document.querySelector("#menu-username").textContent=t.username,document.querySelector("#admin-portal").addEventListener("click",(function(t){u.run("user_admin",c),Yn()})),document.querySelector("#menu-report-history").addEventListener("click",(function(t){l.show(),Yn()})),document.querySelector("#menu-sensor-type").addEventListener("click",(function(t){u.run("sensor_type",c),Yn()})),document.querySelector("#notification-menu").addEventListener("click",(function(t){u.run("notify",c),Yn()})),document.querySelector("#title").addEventListener("click",(function(t){u.run("main",c)})),u.run("main",c),document.querySelector("#main-disconnect").addEventListener("click",(function(e){document.querySelector("#main-load-screen").show(),c.send(Dt.USER,qt.LOGOUT,{username:t.username,sessionid:t.sessionid})}));var d=document.querySelector("#main-side-menu");document.querySelector("#main-menu").addEventListener("click",(function(t){d.classList.toggle("show-menu")})),document.querySelector("#main-dashboard").addEventListener("click",(function(t){u.run("main",c)})),document.querySelector("#main-dashboard-device").addEventListener("click",(function(t){u.run("device",c)})),document.querySelector("#main-dashboard-net").addEventListener("click",(function(t){u.run("net",c)})),document.querySelector("#main-dashboard-job").addEventListener("click",(function(t){u.run("job",c)})),document.querySelector("#main-dashboard-image").addEventListener("click",(function(t){u.run("image",c)})),document.querySelector("#main-dashboard-app").addEventListener("click",(function(t){u.run("app",c)}))}!function(){var t=document.createElement("template");t.innerHTML='<main id=main>\n  <pop-modal id=report-history-container></pop-modal>\n  <div id=report-pop style=display:none class=shine>\n      <div>\n        <span id=report-pop-text>Data</span>\n        <span id=report-pop-close>&times</span>\n      </div>\n  </div>\n  <load-screen id=main-load-screen><i class="fas fa-spinner fa-pulse"></i></load-screen>\n  <section id=header>\n    <div id=menu>\n      <span id=main-menu class=icon-menu><i class="fas fa-bars"></i></span>\n      <x-input-icon id=search-bar placeholder=search title=Username>\n      <i slot=icon class="fas fa-search"></i>\n      </x-input-icon>\n    </div>\n    <div id=title></div>\n    <div id=options>\n      \x3c!-- <span id=notify-switch-container title=\'Notify not supported\' disabled>\n        <span id=notify-label><i class="fas fa-bell"></i></span>\n        <check-switch id=notify-switch disabled></check-switch>\n      </span> --\x3e\n      <span class=icon-menu id=notify-disabled disabled><i class="fas fa-bell-slash"></i></span>\n      <span class=icon-menu id=notify-enable disabled><i class="fas fa-bell"></i></span>\n      <span class=drop-menu tabindex=0>\n        <span class=icon-menu><i class="fas fa-cog"></i></span>\n        <div class=drop-menu-content>\n          <p id=menu-report-history>\n            <i class="fas fa-clipboard-list"></i>\n            <span class=drop-menu-item-text>Report History</span>\n          </p>\n          <p id=menu-sensor-type>\n            <i class="fas fa-ruler"></i>\n            <span class=drop-menu-item-text>Sensor Types</span>\n          </p>\n          <p>option3</p>\n          <p>option3</p>\n          <p>option3</p>\n          <p>option3</p>\n        </div>\n      </span>\n      <span class=drop-menu tabindex=0>\n        <span class=icon-menu><i class="fas fa-user"></i></span>\n        <div class=drop-menu-content>\n          <p>\n            <i class="fas fa-signature"></i>\n            <span id=menu-username title=\'User menu\'>my name</span>\n            <span id=main-disconnect title=\'Logout\' class=icon-hover><i class="fas fa-power-off"></i></span>\n          </p>\n          <p id=notification-menu>\n            <i class="fas fa-flag"></i>\n            <span class=drop-menu-item-text>Notification</span>\n          </p>\n          <p id=admin-portal class=is-admin>\n            <i class="fas fa-users-cog"></i>\n            <span class=drop-menu-item-text id=admin-portal-label>Admin portal</span>\n          </p>\n        </div>\n      </span>\n    </div>\n  </section>\n  <section id=main-main>\n    <div id=main-side-menu>\n      <ul>\n        <li id=main-dashboard>\n          <span class=side-menu-icon><i class="fas fa-poll"></i></span>\n          <span class=side-menu-text>Dashboard</span>\n        </li>\n        <li id=main-dashboard-device>\n          <span class=side-menu-icon><i class="fas fa-broadcast-tower"></i></span>\n          <span class=side-menu-text>Device</span>\n        </li>\n        <li id=main-dashboard-net>\n          <span class=side-menu-icon><i class="fas fa-network-wired"></i></span>\n          <span class=side-menu-text>Net</span>\n        </li>\n        <li id=main-dashboard-job>\n          <span class=side-menu-icon><i class="fas fa-tasks"></i></span>\n          <span class=side-menu-text>Jobs</span>\n        </li>\n        <li id=main-dashboard-image>\n          <span class=side-menu-icon><i class="fas fa-sd-card"></i></span>\n          <span class=side-menu-text>Image</span>\n        </li>\n        <li id=main-dashboard-app>\n          <span class=side-menu-icon><i class="fas fa-pager"></i></span>\n          <span class=side-menu-text>Apps</span>\n        </li>\n      </ul>\n    </div>\n    <div id=main-content></div>\n    <div id=detail-container>\n      <span class=detail-close>&times</span>\n      <div id=detail-content></div>\n    </div>\n  </section>\n</main>\n',ct.add("main",new st(t,Gn,{title:"Agro Telemetry","theme-color":"#0a1496"}))}();var Wn=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return function(){for(var e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];return t.apply(void 0,i.concat(n))}},Xn=function(){function t(e,n,r){var a=this;if(i(this,t),this._db=null,!indexedDB)return console.error("Storage IndexDB not supported"),null;var o=indexedDB.open(e,n);o.onerror=this._open_error.bind(this),o.onsuccess=this._open.bind(this),o.onblocked=this._blocked.bind(this),o.onupgradeneeded=function(t){a._onupgrade(t,r)},this._on_open=null}return a(t,[{key:"on_open",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return this._on_open=Wn.apply(void 0,[t].concat(n)),this}},{key:"add",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(this._db){var i=this._db.transaction(t,"readwrite");i.onerror=function(t){null!=n&&error_cb(t),t.stopImmediatePropagation()},i.objectStore(t).add(e)}}},{key:"save",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(this._db){var r=this._db.transaction(t,"readwrite").objectStore(t).put(e);r.onsuccess=function(t){null!==n&&n(t)},r.onerror=function(t){null!==i&&i(t)}}}},{key:"save_key",value:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(this._db){var a=this._db.transaction(t,"readwrite").objectStore(t).put(e,n);a.onsuccess=function(t){null!==i&&i(t)},a.onerror=function(t){null!==r&&r(t)}}}},{key:"load",value:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(this._db){var r=this._db.transaction(t).objectStore(t).get(e);r.onsuccess=function(t){n(t.target.result)},i&&(r.onerror=function(t){i(t)})}}},{key:"erase",value:function(t,e){this._db.transaction(t,"readwrite").objectStore(t).delete(e)}},{key:"clear",value:function(t){this._db.transaction(t,"readwrite").objectStore(t).clear()}},{key:"iterate",value:function(t,e,n,i,r){for(var a=arguments.length,o=new Array(a>5?a-5:0),s=5;s<a;s++)o[s-5]=arguments[s];this._db.transaction(t).objectStore(t).openCursor(e,n).onsuccess=function(t){var e=t.target.result;e?i.apply(void 0,[e].concat(o))&&e.continue():r&&r.apply(void 0,o)}}},{key:"_open",value:function(t){var e=this;this._db=t.target.result,this._db.onerror=function(t){console.error("DB error",t.target.error.code,t.target.error.message)},this._db.onversionchange=function(t){e._db.close(),console.log("A new version of this page is ready. Please reload or close this tab!")},this._on_open&&this._on_open(t.target)}},{key:"_onupgrade",value:function(t,e){var n=this;console.assert(e instanceof Array,'Argument "scheme" must be of type Array'),this._db=t.target.result,e.forEach((function(t){n._db.createObjectStore(t.name,t.options)}))}},{key:"_blocked",value:function(t){console.log("Please close all other tabs with this site open!")}},{key:"_open_error",value:function(t){console.error("Error opening db",t.target.error.code,t.target.error.message,t)}}],[{key:"support",value:function(){return!!window.indexedDB}}]),t}();Promise.all([function(){if(Xn.support()){var t=[{name:"instance"},{name:"sessions",options:{keyPath:"index"}}];return new Promise((function(e,n){var i=new Xn("agro",1,t).on_open();i.on_open((function(){return e(i)}))}))}return Promise.resolve(!1)}(),"serviceWorker"in navigator?navigator.serviceWorker.register("sw.js"):Promise.resolve(!1)]).then((function(t){ct.run("login",{storage:t[0],registration:t[1]})}))},9757:(t,e,n)=>{function i(t,e){return null==t||null==e?NaN:t<e?-1:t>e?1:t>=e?0:NaN}n.d(e,{Z:()=>i})},477:(t,e,n)=>{n.d(e,{Z:()=>r});var i=n(9757);function r(t){let e=t,n=t,r=t;function a(t,e,i=0,a=t.length){if(i<a){if(0!==n(e,e))return a;do{const n=i+a>>>1;r(t[n],e)<0?i=n+1:a=n}while(i<a)}return i}return 1===t.length&&(e=(e,n)=>t(e)-n,n=i.Z,r=(e,n)=>(0,i.Z)(t(e),n)),{left:a,center:function(t,n,i=0,r=t.length){const o=a(t,n,i,r-1);return o>i&&e(t[o-1],n)>-e(t[o],n)?o-1:o},right:function(t,e,i=0,a=t.length){if(i<a){if(0!==n(e,e))return a;do{const n=i+a>>>1;r(t[n],e)<=0?i=n+1:a=n}while(i<a)}return i}}}},9089:(t,e,n)=>{function i(t,e){let n,i;if(void 0===e)for(const e of t)null!=e&&(void 0===n?e>=e&&(n=i=e):(n>e&&(n=e),i<e&&(i=e)));else{let r=-1;for(let a of t)null!=(a=e(a,++r,t))&&(void 0===n?a>=a&&(n=i=a):(n>a&&(n=a),i<a&&(i=a)))}return[n,i]}n.d(e,{Z:()=>i})},3896:(t,e,n)=>{n.d(e,{ZP:()=>o,G9:()=>s,ly:()=>c});var i=Math.sqrt(50),r=Math.sqrt(10),a=Math.sqrt(2);function o(t,e,n){var i,r,a,o,c=-1;if(n=+n,(t=+t)==(e=+e)&&n>0)return[t];if((i=e<t)&&(r=t,t=e,e=r),0===(o=s(t,e,n))||!isFinite(o))return[];if(o>0){let n=Math.round(t/o),i=Math.round(e/o);for(n*o<t&&++n,i*o>e&&--i,a=new Array(r=i-n+1);++c<r;)a[c]=(n+c)*o}else{o=-o;let n=Math.round(t*o),i=Math.round(e*o);for(n/o<t&&++n,i/o>e&&--i,a=new Array(r=i-n+1);++c<r;)a[c]=(n+c)/o}return i&&a.reverse(),a}function s(t,e,n){var o=(e-t)/Math.max(0,n),s=Math.floor(Math.log(o)/Math.LN10),c=o/Math.pow(10,s);return s>=0?(c>=i?10:c>=r?5:c>=a?2:1)*Math.pow(10,s):-Math.pow(10,-s)/(c>=i?10:c>=r?5:c>=a?2:1)}function c(t,e,n){var o=Math.abs(e-t)/Math.max(0,n),s=Math.pow(10,Math.floor(Math.log(o)/Math.LN10)),c=o/s;return c>=i?s*=10:c>=r?s*=5:c>=a&&(s*=2),e<t?-s:s}},4752:(t,e,n)=>{function i(t){return t}n.d(e,{LL:()=>f,y4:()=>p,Kh:()=>h,F5:()=>d});var r=1e-6;function a(t){return"translate("+t+",0)"}function o(t){return"translate(0,"+t+")"}function s(t){return e=>+t(e)}function c(t,e){return e=Math.max(0,t.bandwidth()-2*e)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function l(){return!this.__axis}function u(t,e){var n=[],u=null,d=null,h=6,f=6,p=3,_="undefined"!=typeof window&&window.devicePixelRatio>1?0:.5,v=1===t||4===t?-1:1,m=4===t||2===t?"x":"y",y=1===t||3===t?a:o;function g(a){var o=null==u?e.ticks?e.ticks.apply(e,n):e.domain():u,g=null==d?e.tickFormat?e.tickFormat.apply(e,n):i:d,b=Math.max(h,0)+p,w=e.range(),x=+w[0]+_,k=+w[w.length-1]+_,E=(e.bandwidth?c:s)(e.copy(),_),S=a.selection?a.selection():a,O=S.selectAll(".domain").data([null]),T=S.selectAll(".tick").data(o,e).order(),A=T.exit(),C=T.enter().append("g").attr("class","tick"),M=T.select("line"),P=T.select("text");O=O.merge(O.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),T=T.merge(C),M=M.merge(C.append("line").attr("stroke","currentColor").attr(m+"2",v*h)),P=P.merge(C.append("text").attr("fill","currentColor").attr(m,v*b).attr("dy",1===t?"0em":3===t?"0.71em":"0.32em")),a!==S&&(O=O.transition(a),T=T.transition(a),M=M.transition(a),P=P.transition(a),A=A.transition(a).attr("opacity",r).attr("transform",(function(t){return isFinite(t=E(t))?y(t+_):this.getAttribute("transform")})),C.attr("opacity",r).attr("transform",(function(t){var e=this.parentNode.__axis;return y((e&&isFinite(e=e(t))?e:E(t))+_)}))),A.remove(),O.attr("d",4===t||2===t?f?"M"+v*f+","+x+"H"+_+"V"+k+"H"+v*f:"M"+_+","+x+"V"+k:f?"M"+x+","+v*f+"V"+_+"H"+k+"V"+v*f:"M"+x+","+_+"H"+k),T.attr("opacity",1).attr("transform",(function(t){return y(E(t)+_)})),M.attr(m+"2",v*h),P.attr(m,v*b).text(g),S.filter(l).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",2===t?"start":4===t?"end":"middle"),S.each((function(){this.__axis=E}))}return g.scale=function(t){return arguments.length?(e=t,g):e},g.ticks=function(){return n=Array.from(arguments),g},g.tickArguments=function(t){return arguments.length?(n=null==t?[]:Array.from(t),g):n.slice()},g.tickValues=function(t){return arguments.length?(u=null==t?null:Array.from(t),g):u&&u.slice()},g.tickFormat=function(t){return arguments.length?(d=t,g):d},g.tickSize=function(t){return arguments.length?(h=f=+t,g):h},g.tickSizeInner=function(t){return arguments.length?(h=+t,g):h},g.tickSizeOuter=function(t){return arguments.length?(f=+t,g):f},g.tickPadding=function(t){return arguments.length?(p=+t,g):p},g.offset=function(t){return arguments.length?(_=+t,g):_},g}function d(t){return u(1,t)}function h(t){return u(2,t)}function f(t){return u(3,t)}function p(t){return u(4,t)}},5528:(t,e,n)=>{n.d(e,{mN:()=>D,Yu:()=>q});var i=n(6057),r=n(848),a=n(9487),o=n(3838),s=n(3466),c=n(404);const l=t=>()=>t;function u(t,{sourceEvent:e,target:n,selection:i,mode:r,dispatch:a}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:i,enumerable:!0,configurable:!0},mode:{value:r,enumerable:!0,configurable:!0},_:{value:a}})}function d(t){t.stopImmediatePropagation()}function h(t){t.preventDefault(),t.stopImmediatePropagation()}var f={name:"drag"},p={name:"space"},_={name:"handle"},v={name:"center"};const{abs:m,max:y,min:g}=Math;function b(t){return[+t[0],+t[1]]}function w(t){return[b(t[0]),b(t[1])]}var x={name:"x",handles:["w","e"].map(C),input:function(t,e){return null==t?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},k={name:"y",handles:["n","s"].map(C),input:function(t,e){return null==t?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},E=(["n","w","e","s","nw","ne","sw","se"].map(C),{overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"}),S={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},O={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},T={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},A={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function C(t){return{type:t}}function M(t){return!t.ctrlKey&&!t.button}function P(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function j(){return navigator.maxTouchPoints||"ontouchstart"in this}function L(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function N(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function D(t){var e=t.__brush;return e?e.dim.output(e.selection):null}function q(){return function(t){var e,n=P,b=M,D=j,q=!0,R=(0,i.Z)("start","brush","end"),U=6;function z(e){var n=e.property("__brush",F).selectAll(".overlay").data([C("overlay")]);n.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",E.overlay).merge(n).each((function(){var t=L(this).extent;(0,o.Z)(this).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1])})),e.selectAll(".selection").data([C("selection")]).enter().append("rect").attr("class","selection").attr("cursor",E.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var i=e.selectAll(".handle").data(t.handles,(function(t){return t.type}));i.exit().remove(),i.enter().append("rect").attr("class",(function(t){return"handle handle--"+t.type})).attr("cursor",(function(t){return E[t.type]})),e.each(Z).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",B).filter(D).on("touchstart.brush",B).on("touchmove.brush",Y).on("touchend.brush touchcancel.brush",V).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function Z(){var t=(0,o.Z)(this),e=L(this).selection;e?(t.selectAll(".selection").style("display",null).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1]),t.selectAll(".handle").style("display",null).attr("x",(function(t){return"e"===t.type[t.type.length-1]?e[1][0]-U/2:e[0][0]-U/2})).attr("y",(function(t){return"s"===t.type[0]?e[1][1]-U/2:e[0][1]-U/2})).attr("width",(function(t){return"n"===t.type||"s"===t.type?e[1][0]-e[0][0]+U:U})).attr("height",(function(t){return"e"===t.type||"w"===t.type?e[1][1]-e[0][1]+U:U}))):t.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function I(t,e,n){var i=t.__brush.emitter;return!i||n&&i.clean?new H(t,e,n):i}function H(t,e,n){this.that=t,this.args=e,this.state=t.__brush,this.active=0,this.clean=n}function B(n){if((!e||n.touches)&&b.apply(this,arguments)){var i,a,l,u,w,C,M,P,j,D,R,U=this,z=n.target.__data__.type,H="selection"===(q&&n.metaKey?z="overlay":z)?f:q&&n.altKey?v:_,B=t===k?null:T[z],Y=t===x?null:A[z],V=L(U),F=V.extent,G=V.selection,W=F[0][0],X=F[0][1],K=F[1][0],J=F[1][1],$=0,Q=0,tt=B&&Y&&q&&n.shiftKey,et=Array.from(n.touches||[n],(t=>{const e=t.identifier;return(t=(0,s.Z)(t,U)).point0=t.slice(),t.identifier=e,t}));(0,c.e1)(U);var nt=I(U,arguments,!0).beforestart();if("overlay"===z){G&&(j=!0);const e=[et[0],et[1]||et[0]];V.selection=G=[[i=t===k?W:g(e[0][0],e[1][0]),l=t===x?X:g(e[0][1],e[1][1])],[w=t===k?K:y(e[0][0],e[1][0]),M=t===x?J:y(e[0][1],e[1][1])]],et.length>1&&st(n)}else i=G[0][0],l=G[0][1],w=G[1][0],M=G[1][1];a=i,u=l,C=w,P=M;var it=(0,o.Z)(U).attr("pointer-events","none"),rt=it.selectAll(".overlay").attr("cursor",E[z]);if(n.touches)nt.moved=ot,nt.ended=ct;else{var at=(0,o.Z)(n.view).on("mousemove.brush",ot,!0).on("mouseup.brush",ct,!0);q&&at.on("keydown.brush",lt,!0).on("keyup.brush",ut,!0),(0,r.Z)(n.view)}Z.call(U),nt.start(n,H.name)}function ot(t){for(const e of t.changedTouches||[t])for(const t of et)t.identifier===e.identifier&&(t.cur=(0,s.Z)(e,U));if(tt&&!D&&!R&&1===et.length){const t=et[0];m(t.cur[0]-t[0])>m(t.cur[1]-t[1])?R=!0:D=!0}for(const t of et)t.cur&&(t[0]=t.cur[0],t[1]=t.cur[1]);j=!0,h(t),st(t)}function st(t){const e=et[0],n=e.point0;var r;switch($=e[0]-n[0],Q=e[1]-n[1],H){case p:case f:B&&($=y(W-i,g(K-w,$)),a=i+$,C=w+$),Y&&(Q=y(X-l,g(J-M,Q)),u=l+Q,P=M+Q);break;case _:et[1]?(B&&(a=y(W,g(K,et[0][0])),C=y(W,g(K,et[1][0])),B=1),Y&&(u=y(X,g(J,et[0][1])),P=y(X,g(J,et[1][1])),Y=1)):(B<0?($=y(W-i,g(K-i,$)),a=i+$,C=w):B>0&&($=y(W-w,g(K-w,$)),a=i,C=w+$),Y<0?(Q=y(X-l,g(J-l,Q)),u=l+Q,P=M):Y>0&&(Q=y(X-M,g(J-M,Q)),u=l,P=M+Q));break;case v:B&&(a=y(W,g(K,i-$*B)),C=y(W,g(K,w+$*B))),Y&&(u=y(X,g(J,l-Q*Y)),P=y(X,g(J,M+Q*Y)))}C<a&&(B*=-1,r=i,i=w,w=r,r=a,a=C,C=r,z in S&&rt.attr("cursor",E[z=S[z]])),P<u&&(Y*=-1,r=l,l=M,M=r,r=u,u=P,P=r,z in O&&rt.attr("cursor",E[z=O[z]])),V.selection&&(G=V.selection),D&&(a=G[0][0],C=G[1][0]),R&&(u=G[0][1],P=G[1][1]),G[0][0]===a&&G[0][1]===u&&G[1][0]===C&&G[1][1]===P||(V.selection=[[a,u],[C,P]],Z.call(U),nt.brush(t,H.name))}function ct(t){if(d(t),t.touches){if(t.touches.length)return;e&&clearTimeout(e),e=setTimeout((function(){e=null}),500)}else(0,r.D)(t.view,j),at.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);it.attr("pointer-events","all"),rt.attr("cursor",E.overlay),V.selection&&(G=V.selection),N(G)&&(V.selection=null,Z.call(U)),nt.end(t,H.name)}function lt(t){switch(t.keyCode){case 16:tt=B&&Y;break;case 18:H===_&&(B&&(w=C-$*B,i=a+$*B),Y&&(M=P-Q*Y,l=u+Q*Y),H=v,st(t));break;case 32:H!==_&&H!==v||(B<0?w=C-$:B>0&&(i=a-$),Y<0?M=P-Q:Y>0&&(l=u-Q),H=p,rt.attr("cursor",E.selection),st(t));break;default:return}h(t)}function ut(t){switch(t.keyCode){case 16:tt&&(D=R=tt=!1,st(t));break;case 18:H===v&&(B<0?w=C:B>0&&(i=a),Y<0?M=P:Y>0&&(l=u),H=_,st(t));break;case 32:H===p&&(t.altKey?(B&&(w=C-$*B,i=a+$*B),Y&&(M=P-Q*Y,l=u+Q*Y),H=v):(B<0?w=C:B>0&&(i=a),Y<0?M=P:Y>0&&(l=u),H=_),rt.attr("cursor",E[z]),st(t));break;default:return}h(t)}}function Y(t){I(this,arguments).moved(t)}function V(t){I(this,arguments).ended(t)}function F(){var e=this.__brush||{selection:null};return e.extent=w(n.apply(this,arguments)),e.dim=t,e}return z.move=function(e,n,i){e.tween?e.on("start.brush",(function(t){I(this,arguments).beforestart().start(t)})).on("interrupt.brush end.brush",(function(t){I(this,arguments).end(t)})).tween("brush",(function(){var e=this,i=e.__brush,r=I(e,arguments),o=i.selection,s=t.input("function"==typeof n?n.apply(this,arguments):n,i.extent),c=(0,a.Z)(o,s);function l(t){i.selection=1===t&&null===s?null:c(t),Z.call(e),r.brush()}return null!==o&&null!==s?l:l(1)})):e.each((function(){var e=this,r=arguments,a=e.__brush,o=t.input("function"==typeof n?n.apply(e,r):n,a.extent),s=I(e,r).beforestart();(0,c.e1)(e),a.selection=null===o?null:o,Z.call(e),s.start(i).brush(i).end(i)}))},z.clear=function(t,e){z.move(t,null,e)},H.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(t,e){return this.starting?(this.starting=!1,this.emit("start",t,e)):this.emit("brush",t),this},brush:function(t,e){return this.emit("brush",t,e),this},end:function(t,e){return 0==--this.active&&(delete this.state.emitter,this.emit("end",t,e)),this},emit:function(e,n,i){var r=(0,o.Z)(this.that).datum();R.call(e,this.that,new u(e,{sourceEvent:n,target:z,selection:t.output(this.state.selection),mode:i,dispatch:R}),r)}},z.extent=function(t){return arguments.length?(n="function"==typeof t?t:l(w(t)),z):n},z.filter=function(t){return arguments.length?(b="function"==typeof t?t:l(!!t),z):b},z.touchable=function(t){return arguments.length?(D="function"==typeof t?t:l(!!t),z):D},z.handleSize=function(t){return arguments.length?(U=+t,z):U},z.keyModifiers=function(t){return arguments.length?(q=!!t,z):q},z.on=function(){var t=R.on.apply(R,arguments);return t===R?z:t},z}(x)}},8849:(t,e,n)=>{function i(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function r(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function a(){}n.d(e,{ZP:()=>w,B8:()=>S});var o=.7,s=1/o,c="\\s*([+-]?\\d+)\\s*",l="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",u="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",d=/^#([0-9a-f]{3,8})$/,h=new RegExp("^rgb\\("+[c,c,c]+"\\)$"),f=new RegExp("^rgb\\("+[u,u,u]+"\\)$"),p=new RegExp("^rgba\\("+[c,c,c,l]+"\\)$"),_=new RegExp("^rgba\\("+[u,u,u,l]+"\\)$"),v=new RegExp("^hsl\\("+[l,u,u]+"\\)$"),m=new RegExp("^hsla\\("+[l,u,u,l]+"\\)$"),y={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function g(){return this.rgb().formatHex()}function b(){return this.rgb().formatRgb()}function w(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=d.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?x(e):3===n?new O(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?k(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?k(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=h.exec(t))?new O(e[1],e[2],e[3],1):(e=f.exec(t))?new O(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=p.exec(t))?k(e[1],e[2],e[3],e[4]):(e=_.exec(t))?k(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=v.exec(t))?M(e[1],e[2]/100,e[3]/100,1):(e=m.exec(t))?M(e[1],e[2]/100,e[3]/100,e[4]):y.hasOwnProperty(t)?x(y[t]):"transparent"===t?new O(NaN,NaN,NaN,0):null}function x(t){return new O(t>>16&255,t>>8&255,255&t,1)}function k(t,e,n,i){return i<=0&&(t=e=n=NaN),new O(t,e,n,i)}function E(t){return t instanceof a||(t=w(t)),t?new O((t=t.rgb()).r,t.g,t.b,t.opacity):new O}function S(t,e,n,i){return 1===arguments.length?E(t):new O(t,e,n,null==i?1:i)}function O(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}function T(){return"#"+C(this.r)+C(this.g)+C(this.b)}function A(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function C(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function M(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new j(t,e,n,i)}function P(t){if(t instanceof j)return new j(t.h,t.s,t.l,t.opacity);if(t instanceof a||(t=w(t)),!t)return new j;if(t instanceof j)return t;var e=(t=t.rgb()).r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),o=Math.max(e,n,i),s=NaN,c=o-r,l=(o+r)/2;return c?(s=e===o?(n-i)/c+6*(n<i):n===o?(i-e)/c+2:(e-n)/c+4,c/=l<.5?o+r:2-o-r,s*=60):c=l>0&&l<1?0:s,new j(s,c,l,t.opacity)}function j(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}function L(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}i(a,w,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:g,formatHex:g,formatHsl:function(){return P(this).formatHsl()},formatRgb:b,toString:b}),i(O,S,r(a,{brighter:function(t){return t=null==t?s:Math.pow(s,t),new O(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?o:Math.pow(o,t),new O(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:T,formatHex:T,formatRgb:A,toString:A})),i(j,(function(t,e,n,i){return 1===arguments.length?P(t):new j(t,e,n,null==i?1:i)}),r(a,{brighter:function(t){return t=null==t?s:Math.pow(s,t),new j(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?o:Math.pow(o,t),new j(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new O(L(t>=240?t-240:t+120,r,i),L(t,r,i),L(t<120?t+240:t-120,r,i),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}))},6057:(t,e,n)=>{n.d(e,{Z:()=>l});var i={value:()=>{}};function r(){for(var t,e=0,n=arguments.length,i={};e<n;++e){if(!(t=arguments[e]+"")||t in i||/[\s.]/.test(t))throw new Error("illegal type: "+t);i[t]=[]}return new a(i)}function a(t){this._=t}function o(t,e){return t.trim().split(/^|\s+/).map((function(t){var n="",i=t.indexOf(".");if(i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function s(t,e){for(var n,i=0,r=t.length;i<r;++i)if((n=t[i]).name===e)return n.value}function c(t,e,n){for(var r=0,a=t.length;r<a;++r)if(t[r].name===e){t[r]=i,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}a.prototype=r.prototype={constructor:a,on:function(t,e){var n,i=this._,r=o(t+"",i),a=-1,l=r.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++a<l;)if(n=(t=r[a]).type)i[n]=c(i[n],t.name,e);else if(null==e)for(n in i)i[n]=c(i[n],t.name,null);return this}for(;++a<l;)if((n=(t=r[a]).type)&&(n=s(i[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new a(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,i,r=new Array(n),a=0;a<n;++a)r[a]=arguments[a+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=0,n=(i=this._[t]).length;a<n;++a)i[a].value.apply(e,r)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,a=i.length;r<a;++r)i[r].value.apply(e,n)}};const l=r},848:(t,e,n)=>{n.d(e,{Z:()=>o,D:()=>s});var i=n(3838);const r={capture:!0,passive:!1};function a(t){t.preventDefault(),t.stopImmediatePropagation()}function o(t){var e=t.document.documentElement,n=(0,i.Z)(t).on("dragstart.drag",a,r);"onselectstart"in e?n.on("selectstart.drag",a,r):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function s(t,e){var n=t.document.documentElement,o=(0,i.Z)(t).on("dragstart.drag",null);e&&(o.on("click.drag",a,r),setTimeout((function(){o.on("click.drag",null)}),0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}},5368:(t,e,n)=>{n.d(e,{Z:()=>r});var i=n(8613);function r(t){return(t=(0,i.V)(Math.abs(t)))?t[1]:NaN}},8613:(t,e,n)=>{function i(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function r(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]}n.d(e,{Z:()=>i,V:()=>r})},5831:(t,e,n)=>{function i(t,e){return function(n,i){for(var r=n.length,a=[],o=0,s=t[0],c=0;r>0&&s>0&&(c+s+1>i&&(s=Math.max(1,i-c)),a.push(n.substring(r-=s,r+s)),!((c+=s+1)>i));)s=t[o=(o+1)%t.length];return a.reverse().join(e)}}n.d(e,{Z:()=>i})},3148:(t,e,n)=>{function i(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}n.d(e,{Z:()=>i})},1281:(t,e,n)=>{n.d(e,{y:()=>i,Z:()=>a});var i,r=n(8613);function a(t,e){var n=(0,r.V)(t,e);if(!n)return t+"";var a=n[0],o=n[1],s=o-(i=3*Math.max(-8,Math.min(8,Math.floor(o/3))))+1,c=a.length;return s===c?a:s>c?a+new Array(s-c+1).join("0"):s>0?a.slice(0,s)+"."+a.slice(s):"0."+new Array(1-s).join("0")+(0,r.V)(t,Math.max(0,e+s-1))[0]}},2035:(t,e,n)=>{n.d(e,{Z:()=>r});var i=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function r(t){if(!(e=i.exec(t)))throw new Error("invalid format: "+t);var e;return new a({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function a(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}r.prototype=a.prototype,a.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type}},2403:(t,e,n)=>{function i(t){t:for(var e,n=t.length,i=1,r=-1;i<n;++i)switch(t[i]){case".":r=e=i;break;case"0":0===r&&(r=i),e=i;break;default:if(!+t[i])break t;r>0&&(r=0)}return r>0?t.slice(0,r)+t.slice(e+1):t}n.d(e,{Z:()=>i})},6485:(t,e,n)=>{n.d(e,{Z:()=>o});var i=n(8613),r=n(1281);function a(t,e){var n=(0,i.V)(t,e);if(!n)return t+"";var r=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+r:r.length>a+1?r.slice(0,a+1)+"."+r.slice(a+1):r+new Array(a-r.length+2).join("0")}const o={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:i.Z,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>a(100*t,e),r:a,s:r.Z,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)}},5225:(t,e,n)=>{function i(t){return t}n.d(e,{Z:()=>i})},5590:(t,e,n)=>{function i(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}n.d(e,{Z:()=>i})},5665:(t,e,n)=>{function i(t){var e=0,n=t.children,i=n&&n.length;if(i)for(;--i>=0;)e+=n[i].value;else e=1;t.value=e}function r(){return this.eachAfter(i)}n.d(e,{Z:()=>r})},6543:(t,e,n)=>{function i(){return Array.from(this)}n.d(e,{Z:()=>i})},2839:(t,e,n)=>{function i(t,e){let n=-1;for(const i of this)t.call(e,i,++n,this);return this}n.d(e,{Z:()=>i})},2853:(t,e,n)=>{function i(t,e){for(var n,i,r,a=this,o=[a],s=[],c=-1;a=o.pop();)if(s.push(a),n=a.children)for(i=0,r=n.length;i<r;++i)o.push(n[i]);for(;a=s.pop();)t.call(e,a,++c,this);return this}n.d(e,{Z:()=>i})},7889:(t,e,n)=>{function i(t,e){for(var n,i,r=this,a=[r],o=-1;r=a.pop();)if(t.call(e,r,++o,this),n=r.children)for(i=n.length-1;i>=0;--i)a.push(n[i]);return this}n.d(e,{Z:()=>i})},733:(t,e,n)=>{function i(t,e){let n=-1;for(const i of this)if(t.call(e,i,++n,this))return i}n.d(e,{Z:()=>i})},8686:(t,e,n)=>{function*i(){var t,e,n,i,r=this,a=[r];do{for(t=a.reverse(),a=[];r=t.pop();)if(yield r,e=r.children)for(n=0,i=e.length;n<i;++n)a.push(e[n])}while(a.length)}n.d(e,{Z:()=>i})},2905:(t,e,n)=>{function i(){var t=[];return this.eachBefore((function(e){e.children||t.push(e)})),t}n.d(e,{Z:()=>i})},1038:(t,e,n)=>{function i(){var t=this,e=[];return t.each((function(n){n!==t&&e.push({source:n.parent,target:n})})),e}n.d(e,{Z:()=>i})},8162:(t,e,n)=>{function i(t){for(var e=this,n=function(t,e){if(t===e)return t;var n=t.ancestors(),i=e.ancestors(),r=null;for(t=n.pop(),e=i.pop();t===e;)r=t,t=n.pop(),e=i.pop();return r}(e,t),i=[e];e!==n;)e=e.parent,i.push(e);for(var r=i.length;t!==n;)i.splice(r,0,t),t=t.parent;return i}n.d(e,{Z:()=>i})},5709:(t,e,n)=>{function i(t){return this.eachBefore((function(e){e.children&&e.children.sort(t)}))}n.d(e,{Z:()=>i})},3833:(t,e,n)=>{function i(t){return this.eachAfter((function(e){for(var n=+t(e.data)||0,i=e.children,r=i&&i.length;--r>=0;)n+=i[r].value;e.value=n}))}n.d(e,{Z:()=>i})},173:(t,e,n)=>{n.d(e,{Z:()=>u});var i=n(2290);function r(t,e){return t.parent===e.parent?1:2}function a(t){var e=t.children;return e?e[0]:t.t}function o(t){var e=t.children;return e?e[e.length-1]:t.t}function s(t,e,n){var i=n/(e.i-t.i);e.c-=i,e.s+=n,t.c+=i,e.z+=n,e.m+=n}function c(t,e,n){return t.a.parent===e.parent?t.a:n}function l(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}function u(){var t=r,e=1,n=1,i=null;function u(r){var a=function(t){for(var e,n,i,r,a,o=new l(t,0),s=[o];e=s.pop();)if(i=e._.children)for(e.children=new Array(a=i.length),r=a-1;r>=0;--r)s.push(n=e.children[r]=new l(i[r],r)),n.parent=e;return(o.parent=new l(null,0)).children=[o],o}(r);if(a.eachAfter(d),a.parent.m=-a.z,a.eachBefore(h),i)r.eachBefore(f);else{var o=r,s=r,c=r;r.eachBefore((function(t){t.x<o.x&&(o=t),t.x>s.x&&(s=t),t.depth>c.depth&&(c=t)}));var u=o===s?1:t(o,s)/2,p=u-o.x,_=e/(s.x+u+p),v=n/(c.depth||1);r.eachBefore((function(t){t.x=(t.x+p)*_,t.y=t.depth*v}))}return r}function d(e){var n=e.children,i=e.parent.children,r=e.i?i[e.i-1]:null;if(n){!function(t){for(var e,n=0,i=0,r=t.children,a=r.length;--a>=0;)(e=r[a]).z+=n,e.m+=n,n+=e.s+(i+=e.c)}(e);var l=(n[0].z+n[n.length-1].z)/2;r?(e.z=r.z+t(e._,r._),e.m=e.z-l):e.z=l}else r&&(e.z=r.z+t(e._,r._));e.parent.A=function(e,n,i){if(n){for(var r,l=e,u=e,d=n,h=l.parent.children[0],f=l.m,p=u.m,_=d.m,v=h.m;d=o(d),l=a(l),d&&l;)h=a(h),(u=o(u)).a=e,(r=d.z+_-l.z-f+t(d._,l._))>0&&(s(c(d,e,i),e,r),f+=r,p+=r),_+=d.m,f+=l.m,v+=h.m,p+=u.m;d&&!o(u)&&(u.t=d,u.m+=_-p),l&&!a(h)&&(h.t=l,h.m+=f-v,i=e)}return i}(e,r,e.parent.A||i[0])}function h(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function f(t){t.x*=e,t.y=t.depth*n}return u.separation=function(e){return arguments.length?(t=e,u):t},u.size=function(t){return arguments.length?(i=!1,e=+t[0],n=+t[1],u):i?null:[e,n]},u.nodeSize=function(t){return arguments.length?(i=!0,e=+t[0],n=+t[1],u):i?[e,n]:null},u}l.prototype=Object.create(i.NB.prototype)},2954:(t,e,n)=>{n.d(e,{Z:()=>i});const i=t=>()=>t},8063:(t,e,n)=>{function i(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}n.d(e,{Z:()=>i})},187:(t,e,n)=>{n.d(e,{ZP:()=>s});var i=n(8849);function r(t,e,n,i,r){var a=t*t,o=a*t;return((1-3*t+3*a-o)*e+(4-6*a+3*o)*n+(1+3*t+3*a-3*o)*i+o*r)/6}var a=n(2954);function o(t,e){var n=e-t;return n?function(t,e){return function(n){return t+n*e}}(t,n):(0,a.Z)(isNaN(t)?e:t)}const s=function t(e){var n=function(t){return 1==(t=+t)?o:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}(e,n,t):(0,a.Z)(isNaN(e)?n:e)}}(e);function r(t,e){var r=n((t=(0,i.B8)(t)).r,(e=(0,i.B8)(e)).r),a=n(t.g,e.g),s=n(t.b,e.b),c=o(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=a(e),t.b=s(e),t.opacity=c(e),t+""}}return r.gamma=t,r}(1);function c(t){return function(e){var n,r,a=e.length,o=new Array(a),s=new Array(a),c=new Array(a);for(n=0;n<a;++n)r=(0,i.B8)(e[n]),o[n]=r.r||0,s[n]=r.g||0,c[n]=r.b||0;return o=t(o),s=t(s),c=t(c),r.opacity=1,function(t){return r.r=o(t),r.g=s(t),r.b=c(t),r+""}}}c((function(t){var e=t.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),a=t[i],o=t[i+1],s=i>0?t[i-1]:2*a-o,c=i<e-1?t[i+2]:2*o-a;return r((n-i/e)*e,s,a,o,c)}})),c((function(t){var e=t.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*e),a=t[(i+e-1)%e],o=t[i%e],s=t[(i+1)%e],c=t[(i+2)%e];return r((n-i/e)*e,a,o,s,c)}}))},6773:(t,e,n)=>{n.d(e,{Z:()=>o});var i=n(8063),r=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,a=new RegExp(r.source,"g");function o(t,e){var n,o,s,c=r.lastIndex=a.lastIndex=0,l=-1,u=[],d=[];for(t+="",e+="";(n=r.exec(t))&&(o=a.exec(e));)(s=o.index)>c&&(s=e.slice(c,s),u[l]?u[l]+=s:u[++l]=s),(n=n[0])===(o=o[0])?u[l]?u[l]+=o:u[++l]=o:(u[++l]=null,d.push({i:l,x:(0,i.Z)(n,o)})),c=a.lastIndex;return c<e.length&&(s=e.slice(c),u[l]?u[l]+=s:u[++l]=s),u.length<2?d[0]?function(t){return function(e){return t(e)+""}}(d[0].x):function(t){return function(){return t}}(e):(e=d.length,function(t){for(var n,i=0;i<e;++i)u[(n=d[i]).i]=n.x(t);return u.join("")})}},8684:(t,e,n)=>{n.d(e,{z:()=>s,X:()=>c});var i,r=180/Math.PI,a={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function o(t,e,n,i,a,o){var s,c,l;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(l=t*n+e*i)&&(n-=t*l,i-=e*l),(c=Math.sqrt(n*n+i*i))&&(n/=c,i/=c,l/=c),t*i<e*n&&(t=-t,e=-e,l=-l,s=-s),{translateX:a,translateY:o,rotate:Math.atan2(e,t)*r,skewX:Math.atan(l)*r,scaleX:s,scaleY:c}}function s(t){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?a:o(e.a,e.b,e.c,e.d,e.e,e.f)}function c(t){return null==t?a:(i||(i=document.createElementNS("http://www.w3.org/2000/svg","g")),i.setAttribute("transform",t),(t=i.transform.baseVal.consolidate())?o((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):a)}},9487:(t,e,n)=>{n.d(e,{Z:()=>h});var i=n(8849),r=n(187);function a(t,e){var n,i=e?e.length:0,r=t?Math.min(i,t.length):0,a=new Array(r),o=new Array(i);for(n=0;n<r;++n)a[n]=h(t[n],e[n]);for(;n<i;++n)o[n]=e[n];return function(t){for(n=0;n<r;++n)o[n]=a[n](t);return o}}function o(t,e){var n=new Date;return t=+t,e=+e,function(i){return n.setTime(t*(1-i)+e*i),n}}var s=n(8063);function c(t,e){var n,i={},r={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?i[n]=h(t[n],e[n]):r[n]=e[n];return function(t){for(n in i)r[n]=i[n](t);return r}}var l=n(6773),u=n(2954);function d(t,e){e||(e=[]);var n,i=t?Math.min(e.length,t.length):0,r=e.slice();return function(a){for(n=0;n<i;++n)r[n]=t[n]*(1-a)+e[n]*a;return r}}function h(t,e){var n,h,f=typeof e;return null==e||"boolean"===f?(0,u.Z)(e):("number"===f?s.Z:"string"===f?(n=(0,i.ZP)(e))?(e=n,r.ZP):l.Z:e instanceof i.ZP?r.ZP:e instanceof Date?o:(h=e,!ArrayBuffer.isView(h)||h instanceof DataView?Array.isArray(e)?a:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?c:s.Z:d))(t,e)}},1714:(t,e,n)=>{n.d(e,{Z:()=>i});const i=function(t){for(var e=t.length/6|0,n=new Array(e),i=0;i<e;)n[i]="#"+t.slice(6*i,6*++i);return n}("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928")},5242:(t,e,n)=>{n.d(e,{JG:()=>m,ZP:()=>y});var i=n(9757),r=n(477);const a=(0,r.Z)(i.Z),o=a.right,s=(a.left,(0,r.Z)((function(t){return null===t?NaN:+t})).center,o);function c(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var l=n(9487),u=n(8063);function d(t){return+t}var h=[0,1];function f(t){return t}function p(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:(n=isNaN(e)?NaN:.5,function(){return n});var n}function _(t,e,n){var i=t[0],r=t[1],a=e[0],o=e[1];return r<i?(i=p(r,i),a=n(o,a)):(i=p(i,r),a=n(a,o)),function(t){return a(i(t))}}function v(t,e,n){var i=Math.min(t.length,e.length)-1,r=new Array(i),a=new Array(i),o=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<i;)r[o]=p(t[o],t[o+1]),a[o]=n(e[o],e[o+1]);return function(e){var n=s(t,e,1,i)-1;return a[n](r[n](e))}}function m(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function y(){return function(){var t,e,n,i,r,a,o=h,s=h,p=l.Z,m=f;function y(){var t,e,n,c=Math.min(o.length,s.length);return m!==f&&(t=o[0],e=o[c-1],t>e&&(n=t,t=e,e=n),m=function(n){return Math.max(t,Math.min(e,n))}),i=c>2?v:_,r=a=null,g}function g(e){return null==e||isNaN(e=+e)?n:(r||(r=i(o.map(t),s,p)))(t(m(e)))}return g.invert=function(n){return m(e((a||(a=i(s,o.map(t),u.Z)))(n)))},g.domain=function(t){return arguments.length?(o=Array.from(t,d),y()):o.slice()},g.range=function(t){return arguments.length?(s=Array.from(t),y()):s.slice()},g.rangeRound=function(t){return s=Array.from(t),p=c,y()},g.clamp=function(t){return arguments.length?(m=!!t||f,y()):m!==f},g.interpolate=function(t){return arguments.length?(p=t,y()):p},g.unknown=function(t){return arguments.length?(n=t,g):n},function(n,i){return t=n,e=i,y()}}()(f,f)}},4182:(t,e,n)=>{function i(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}n.d(e,{o:()=>i})},9937:(t,e,n)=>{n.d(e,{Z:()=>f});var i,r,a,o,s=n(3896),c=n(5242),l=n(4182),u=n(2035),d=n(5368);function h(t){var e=t.domain;return t.ticks=function(t){var n=e();return(0,s.ZP)(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var i=e();return function(t,e,n,i){var o,c=(0,s.ly)(t,e,n);switch((i=(0,u.Z)(null==i?",f":i)).type){case"s":var l=Math.max(Math.abs(t),Math.abs(e));return null!=i.precision||isNaN(o=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor((0,d.Z)(e)/3)))-(0,d.Z)(Math.abs(t)))}(c,l))||(i.precision=o),a(i,l);case"":case"e":case"g":case"p":case"r":null!=i.precision||isNaN(o=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,(0,d.Z)(e)-(0,d.Z)(t))+1}(c,Math.max(Math.abs(t),Math.abs(e))))||(i.precision=o-("e"===i.type));break;case"f":case"%":null!=i.precision||isNaN(o=function(t){return Math.max(0,-(0,d.Z)(Math.abs(t)))}(c))||(i.precision=o-2*("%"===i.type))}return r(i)}(i[0],i[i.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var i,r,a=e(),o=0,c=a.length-1,l=a[o],u=a[c],d=10;for(u<l&&(r=l,l=u,u=r,r=o,o=c,c=r);d-- >0;){if((r=(0,s.G9)(l,u,n))===i)return a[o]=l,a[c]=u,e(a);if(r>0)l=Math.floor(l/r)*r,u=Math.ceil(u/r)*r;else{if(!(r<0))break;l=Math.ceil(l*r)/r,u=Math.floor(u*r)/r}i=r}return t},t}function f(){var t=(0,c.ZP)();return t.copy=function(){return(0,c.JG)(t,f())},l.o.apply(t,arguments),h(t)}o={thousands:",",grouping:[3],currency:["$",""]},i=(0,n(2150).Z)(o),r=i.format,a=i.formatPrefix},2112:(t,e,n)=>{n.d(e,{Z:()=>Z});var i=n(477),r=n(3896),a=n(1262),o=n(2576),s=(0,o.Z)((function(){}),(function(t,e){t.setTime(+t+e)}),(function(t,e){return e-t}));s.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?(0,o.Z)((function(e){e.setTime(Math.floor(e/t)*t)}),(function(e,n){e.setTime(+e+n*t)}),(function(e,n){return(n-e)/t})):s:null};const c=s;s.range;var l=(0,o.Z)((function(t){t.setTime(t-t.getMilliseconds())}),(function(t,e){t.setTime(+t+e*a.Ym)}),(function(t,e){return(e-t)/a.Ym}),(function(t){return t.getUTCSeconds()}));const u=l;l.range;var d=(0,o.Z)((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*a.Ym)}),(function(t,e){t.setTime(+t+e*a.yB)}),(function(t,e){return(e-t)/a.yB}),(function(t){return t.getMinutes()}));const h=d;d.range;var f=(0,o.Z)((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*a.Ym-t.getMinutes()*a.yB)}),(function(t,e){t.setTime(+t+e*a.Y2)}),(function(t,e){return(e-t)/a.Y2}),(function(t){return t.getHours()}));const p=f;f.range;var _=n(6199),v=n(5235),m=(0,o.Z)((function(t){t.setDate(1),t.setHours(0,0,0,0)}),(function(t,e){t.setMonth(t.getMonth()+e)}),(function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())}),(function(t){return t.getMonth()}));const y=m;m.range;var g=n(8887),b=(0,o.Z)((function(t){t.setUTCSeconds(0,0)}),(function(t,e){t.setTime(+t+e*a.yB)}),(function(t,e){return(e-t)/a.yB}),(function(t){return t.getUTCMinutes()}));const w=b;b.range;var x=(0,o.Z)((function(t){t.setUTCMinutes(0,0,0)}),(function(t,e){t.setTime(+t+e*a.Y2)}),(function(t,e){return(e-t)/a.Y2}),(function(t){return t.getUTCHours()}));const k=x;x.range;var E=n(4834),S=n(1416),O=(0,o.Z)((function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCMonth(t.getUTCMonth()+e)}),(function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())}),(function(t){return t.getUTCMonth()}));const T=O;O.range;var A=n(5762);function C(t,e,n,o,s,l){const d=[[u,1,a.Ym],[u,5,5*a.Ym],[u,15,15*a.Ym],[u,30,30*a.Ym],[l,1,a.yB],[l,5,5*a.yB],[l,15,15*a.yB],[l,30,30*a.yB],[s,1,a.Y2],[s,3,3*a.Y2],[s,6,6*a.Y2],[s,12,12*a.Y2],[o,1,a.UD],[o,2,2*a.UD],[n,1,a.iM],[e,1,a.jz],[e,3,3*a.jz],[t,1,a.qz]];function h(e,n,o){const s=Math.abs(n-e)/o,l=(0,i.Z)((([,,t])=>t)).right(d,s);if(l===d.length)return t.every((0,r.ly)(e/a.qz,n/a.qz,o));if(0===l)return c.every(Math.max((0,r.ly)(e,n,o),1));const[u,h]=d[s/d[l-1][2]<d[l][2]/s?l-1:l];return u.every(h)}return[function(t,e,n){const i=e<t;i&&([t,e]=[e,t]);const r=n&&"function"==typeof n.range?n:h(t,e,n),a=r?r.range(t,+e+1):[];return i?a.reverse():a},h]}const[M,P]=C(A.Z,T,S.Ox,E.Z,k,w),[j,L]=C(g.Z,y,v.OM,_.Z,p,h);var N=n(2138),D=n(5242),q=n(4182);function R(t){return new Date(t)}function U(t){return t instanceof Date?+t:+new Date(+t)}function z(t,e,n,i,r,a,o,s,c,l){var u=(0,D.ZP)(),d=u.invert,h=u.domain,f=l(".%L"),p=l(":%S"),_=l("%I:%M"),v=l("%I %p"),m=l("%a %d"),y=l("%b %d"),g=l("%B"),b=l("%Y");function w(t){return(c(t)<t?f:s(t)<t?p:o(t)<t?_:a(t)<t?v:i(t)<t?r(t)<t?m:y:n(t)<t?g:b)(t)}return u.invert=function(t){return new Date(d(t))},u.domain=function(t){return arguments.length?h(Array.from(t,U)):h().map(R)},u.ticks=function(e){var n=h();return t(n[0],n[n.length-1],null==e?10:e)},u.tickFormat=function(t,e){return null==e?w:l(e)},u.nice=function(t){var n=h();return t&&"function"==typeof t.range||(t=e(n[0],n[n.length-1],null==t?10:t)),t?h(function(t,e){var n,i=0,r=(t=t.slice()).length-1,a=t[i],o=t[r];return o<a&&(n=i,i=r,r=n,n=a,a=o,o=n),t[i]=e.floor(a),t[r]=e.ceil(o),t}(n,t)):u},u.copy=function(){return(0,D.JG)(u,z(t,e,n,i,r,a,o,s,c,l))},u}function Z(){return q.o.apply(z(j,L,g.Z,y,v.OM,_.Z,p,h,u,N.i$).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}},9165:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(4708),r=n(3838);function a(t){return(0,r.Z)((0,i.Z)(t).call(document.documentElement))}},4708:(t,e,n)=>{n.d(e,{Z:()=>s});var i=n(1663),r=n(1226);function a(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===r.P&&e.documentElement.namespaceURI===r.P?e.createElement(t):e.createElementNS(n,t)}}function o(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function s(t){var e=(0,i.Z)(t);return(e.local?o:a)(e)}},4421:(t,e,n)=>{function i(t){return function(){return this.matches(t)}}function r(t){return function(e){return e.matches(t)}}n.d(e,{Z:()=>i,P:()=>r})},1663:(t,e,n)=>{n.d(e,{Z:()=>r});var i=n(1226);function r(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),i.Z.hasOwnProperty(e)?{space:i.Z[e],local:t}:t}},1226:(t,e,n)=>{n.d(e,{P:()=>i,Z:()=>r});var i="http://www.w3.org/1999/xhtml";const r={svg:"http://www.w3.org/2000/svg",xhtml:i,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"}},3466:(t,e,n)=>{function i(t,e){if(t=function(t){let e;for(;e=t.sourceEvent;)t=e;return t}(t),void 0===e&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,[(i=i.matrixTransform(e.getScreenCTM().inverse())).x,i.y]}if(e.getBoundingClientRect){var r=e.getBoundingClientRect();return[t.clientX-r.left-e.clientLeft,t.clientY-r.top-e.clientTop]}}return[t.pageX,t.pageY]}n.d(e,{Z:()=>i})},3838:(t,e,n)=>{n.d(e,{Z:()=>r});var i=n(8390);function r(t){return"string"==typeof t?new i.Y1([[document.querySelector(t)]],[document.documentElement]):new i.Y1([[t]],i.Jz)}},7911:(t,e,n)=>{n.d(e,{Z:()=>r});var i=n(4708);function r(t){var e="function"==typeof t?t:(0,i.Z)(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))}},7405:(t,e,n)=>{n.d(e,{Z:()=>u});var i=n(1663);function r(t){return function(){this.removeAttribute(t)}}function a(t){return function(){this.removeAttributeNS(t.space,t.local)}}function o(t,e){return function(){this.setAttribute(t,e)}}function s(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function c(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function l(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function u(t,e){var n=(0,i.Z)(t);if(arguments.length<2){var u=this.node();return n.local?u.getAttributeNS(n.space,n.local):u.getAttribute(n)}return this.each((null==e?n.local?a:r:"function"==typeof e?n.local?l:c:n.local?s:o)(n,e))}},5772:(t,e,n)=>{function i(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}n.d(e,{Z:()=>i})},5016:(t,e,n)=>{function i(t){return t.trim().split(/^|\s+/)}function r(t){return t.classList||new a(t)}function a(t){this._node=t,this._names=i(t.getAttribute("class")||"")}function o(t,e){for(var n=r(t),i=-1,a=e.length;++i<a;)n.add(e[i])}function s(t,e){for(var n=r(t),i=-1,a=e.length;++i<a;)n.remove(e[i])}function c(t){return function(){o(this,t)}}function l(t){return function(){s(this,t)}}function u(t,e){return function(){(e.apply(this,arguments)?o:s)(this,t)}}function d(t,e){var n=i(t+"");if(arguments.length<2){for(var a=r(this.node()),o=-1,s=n.length;++o<s;)if(!a.contains(n[o]))return!1;return!0}return this.each(("function"==typeof e?u:e?c:l)(n,e))}n.d(e,{Z:()=>d}),a.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}}},5122:(t,e,n)=>{function i(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function r(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function a(t){return this.select(t?r:i)}n.d(e,{Z:()=>a})},9954:(t,e,n)=>{n.d(e,{Z:()=>l});var i=n(8390),r=n(2270);function a(t){return function(){return t}}function o(t,e,n,i,a,o){for(var s,c=0,l=e.length,u=o.length;c<u;++c)(s=e[c])?(s.__data__=o[c],i[c]=s):n[c]=new r.F(t,o[c]);for(;c<l;++c)(s=e[c])&&(a[c]=s)}function s(t,e,n,i,a,o,s){var c,l,u,d=new Map,h=e.length,f=o.length,p=new Array(h);for(c=0;c<h;++c)(l=e[c])&&(p[c]=u=s.call(l,l.__data__,c,e)+"",d.has(u)?a[c]=l:d.set(u,l));for(c=0;c<f;++c)u=s.call(t,o[c],c,o)+"",(l=d.get(u))?(i[c]=l,l.__data__=o[c],d.delete(u)):n[c]=new r.F(t,o[c]);for(c=0;c<h;++c)(l=e[c])&&d.get(p[c])===l&&(a[c]=l)}function c(t){return t.__data__}function l(t,e){if(!arguments.length)return Array.from(this,c);var n=e?s:o,r=this._parents,l=this._groups;"function"!=typeof t&&(t=a(t));for(var d=l.length,h=new Array(d),f=new Array(d),p=new Array(d),_=0;_<d;++_){var v=r[_],m=l[_],y=m.length,g=u(t.call(v,v&&v.__data__,_,r)),b=g.length,w=f[_]=new Array(b),x=h[_]=new Array(b),k=p[_]=new Array(y);n(v,m,w,x,k,g,e);for(var E,S,O=0,T=0;O<b;++O)if(E=w[O]){for(O>=T&&(T=O+1);!(S=x[T])&&++T<b;);E._next=S||null}}return(h=new i.Y1(h,r))._enter=f,h._exit=p,h}function u(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}},5667:(t,e,n)=>{function i(t){return arguments.length?this.property("__data__",t):this.node().__data__}n.d(e,{Z:()=>i})},3790:(t,e,n)=>{n.d(e,{Z:()=>s});var i=n(9920);function r(t,e,n){var r=(0,i.Z)(t),a=r.CustomEvent;"function"==typeof a?a=new a(e,n):(a=r.document.createEvent("Event"),n?(a.initEvent(e,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(e,!1,!1)),t.dispatchEvent(a)}function a(t,e){return function(){return r(this,t,e)}}function o(t,e){return function(){return r(this,t,e.apply(this,arguments))}}function s(t,e){return this.each(("function"==typeof e?o:a)(t,e))}},6347:(t,e,n)=>{function i(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var r,a=e[n],o=0,s=a.length;o<s;++o)(r=a[o])&&t.call(r,r.__data__,o,a);return this}n.d(e,{Z:()=>i})},7844:(t,e,n)=>{function i(){return!this.node()}n.d(e,{Z:()=>i})},2270:(t,e,n)=>{n.d(e,{Z:()=>a,F:()=>o});var i=n(1586),r=n(8390);function a(){return new r.Y1(this._enter||this._groups.map(i.Z),this._parents)}function o(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}o.prototype={constructor:o,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}}},6790:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(1586),r=n(8390);function a(){return new r.Y1(this._exit||this._groups.map(i.Z),this._parents)}},5777:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8390),r=n(4421);function a(t){"function"!=typeof t&&(t=(0,r.Z)(t));for(var e=this._groups,n=e.length,a=new Array(n),o=0;o<n;++o)for(var s,c=e[o],l=c.length,u=a[o]=[],d=0;d<l;++d)(s=c[d])&&t.call(s,s.__data__,d,c)&&u.push(s);return new i.Y1(a,this._parents)}},655:(t,e,n)=>{function i(){this.innerHTML=""}function r(t){return function(){this.innerHTML=t}}function a(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function o(t){return arguments.length?this.each(null==t?i:("function"==typeof t?a:r)(t)):this.node().innerHTML}n.d(e,{Z:()=>o})},2504:(t,e,n)=>{n.d(e,{Z:()=>o});var i=n(4708),r=n(3010);function a(){return null}function o(t,e){var n="function"==typeof t?t:(0,i.Z)(t),o=null==e?a:"function"==typeof e?e:(0,r.Z)(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)}))}},3536:(t,e,n)=>{function*i(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i,r=t[e],a=0,o=r.length;a<o;++a)(i=r[a])&&(yield i)}n.d(e,{Z:()=>i})},1474:(t,e,n)=>{function i(t,e,n){var i=this.enter(),r=this,a=this.exit();return"function"==typeof t?(i=t(i))&&(i=i.selection()):i=i.append(t+""),null!=e&&(r=e(r))&&(r=r.selection()),null==n?a.remove():n(a),i&&r?i.merge(r).order():r}n.d(e,{Z:()=>i})},6017:(t,e,n)=>{function i(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function r(){return this.each(i)}n.d(e,{Z:()=>r})},6359:(t,e,n)=>{n.d(e,{Z:()=>r});var i=n(8390);function r(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,a=n.length,o=r.length,s=Math.min(a,o),c=new Array(a),l=0;l<s;++l)for(var u,d=n[l],h=r[l],f=d.length,p=c[l]=new Array(f),_=0;_<f;++_)(u=d[_]||h[_])&&(p[_]=u);for(;l<a;++l)c[l]=n[l];return new i.Y1(c,this._parents)}},838:(t,e,n)=>{function i(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,a=i.length;r<a;++r){var o=i[r];if(o)return o}return null}n.d(e,{Z:()=>i})},426:(t,e,n)=>{function i(){return Array.from(this)}n.d(e,{Z:()=>i})},2017:(t,e,n)=>{function i(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}function r(t){return function(){var e=this.__on;if(e){for(var n,i=0,r=-1,a=e.length;i<a;++i)n=e[i],t.type&&n.type!==t.type||n.name!==t.name?e[++r]=n:this.removeEventListener(n.type,n.listener,n.options);++r?e.length=r:delete this.__on}}}function a(t,e,n){return function(){var i,r=this.__on,a=function(t){return function(e){t.call(this,e,this.__data__)}}(e);if(r)for(var o=0,s=r.length;o<s;++o)if((i=r[o]).type===t.type&&i.name===t.name)return this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),void(i.value=e);this.addEventListener(t.type,a,n),i={type:t.type,name:t.name,value:e,listener:a,options:n},r?r.push(i):this.__on=[i]}}function o(t,e,n){var o,s,c=i(t+""),l=c.length;if(!(arguments.length<2)){for(u=e?a:r,o=0;o<l;++o)this.each(u(c[o],e,n));return this}var u=this.node().__on;if(u)for(var d,h=0,f=u.length;h<f;++h)for(o=0,d=u[h];o<l;++o)if((s=c[o]).type===d.type&&s.name===d.name)return d.value}n.d(e,{Z:()=>o})},4729:(t,e,n)=>{function i(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i,r=t[e],a=r.length-1,o=r[a];--a>=0;)(i=r[a])&&(o&&4^i.compareDocumentPosition(o)&&o.parentNode.insertBefore(i,o),o=i);return this}n.d(e,{Z:()=>i})},9714:(t,e,n)=>{function i(t){return function(){delete this[t]}}function r(t,e){return function(){this[t]=e}}function a(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function o(t,e){return arguments.length>1?this.each((null==e?i:"function"==typeof e?a:r)(t,e)):this.node()[t]}n.d(e,{Z:()=>o})},1903:(t,e,n)=>{function i(){this.nextSibling&&this.parentNode.appendChild(this)}function r(){return this.each(i)}n.d(e,{Z:()=>r})},8349:(t,e,n)=>{function i(){var t=this.parentNode;t&&t.removeChild(this)}function r(){return this.each(i)}n.d(e,{Z:()=>r})},486:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8390),r=n(3010);function a(t){"function"!=typeof t&&(t=(0,r.Z)(t));for(var e=this._groups,n=e.length,a=new Array(n),o=0;o<n;++o)for(var s,c,l=e[o],u=l.length,d=a[o]=new Array(u),h=0;h<u;++h)(s=l[h])&&(c=t.call(s,s.__data__,h,l))&&("__data__"in s&&(c.__data__=s.__data__),d[h]=c);return new i.Y1(a,this._parents)}},8271:(t,e,n)=>{n.d(e,{Z:()=>o});var i=n(8390);function r(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}var a=n(9701);function o(t){t="function"==typeof t?function(t){return function(){return r(t.apply(this,arguments))}}(t):(0,a.Z)(t);for(var e=this._groups,n=e.length,o=[],s=[],c=0;c<n;++c)for(var l,u=e[c],d=u.length,h=0;h<d;++h)(l=u[h])&&(o.push(t.call(l,l.__data__,h,u)),s.push(l));return new i.Y1(o,s)}},4735:(t,e,n)=>{n.d(e,{Z:()=>o});var i=n(4421),r=Array.prototype.find;function a(){return this.firstElementChild}function o(t){return this.select(null==t?a:function(t){return function(){return r.call(this.children,t)}}("function"==typeof t?t:(0,i.P)(t)))}},467:(t,e,n)=>{n.d(e,{Z:()=>o});var i=n(4421),r=Array.prototype.filter;function a(){return Array.from(this.children)}function o(t){return this.selectAll(null==t?a:function(t){return function(){return r.call(this.children,t)}}("function"==typeof t?t:(0,i.P)(t)))}},6909:(t,e,n)=>{function i(){let t=0;for(const e of this)++t;return t}n.d(e,{Z:()=>i})},9548:(t,e,n)=>{n.d(e,{Z:()=>r});var i=n(8390);function r(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=a);for(var n=this._groups,r=n.length,o=new Array(r),s=0;s<r;++s){for(var c,l=n[s],u=l.length,d=o[s]=new Array(u),h=0;h<u;++h)(c=l[h])&&(d[h]=c);d.sort(e)}return new i.Y1(o,this._parents).order()}function a(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}},1586:(t,e,n)=>{function i(t){return new Array(t.length)}n.d(e,{Z:()=>i})},2627:(t,e,n)=>{n.d(e,{Z:()=>s,S:()=>c});var i=n(9920);function r(t){return function(){this.style.removeProperty(t)}}function a(t,e,n){return function(){this.style.setProperty(t,e,n)}}function o(t,e,n){return function(){var i=e.apply(this,arguments);null==i?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function s(t,e,n){return arguments.length>1?this.each((null==e?r:"function"==typeof e?o:a)(t,e,null==n?"":n)):c(this.node(),t)}function c(t,e){return t.style.getPropertyValue(e)||(0,i.Z)(t).getComputedStyle(t,null).getPropertyValue(e)}},8386:(t,e,n)=>{function i(){this.textContent=""}function r(t){return function(){this.textContent=t}}function a(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function o(t){return arguments.length?this.each(null==t?i:("function"==typeof t?a:r)(t)):this.node().textContent}n.d(e,{Z:()=>o})},3010:(t,e,n)=>{function i(){}function r(t){return null==t?i:function(){return this.querySelector(t)}}n.d(e,{Z:()=>r})},9701:(t,e,n)=>{function i(){return[]}function r(t){return null==t?i:function(){return this.querySelectorAll(t)}}n.d(e,{Z:()=>r})},9920:(t,e,n)=>{function i(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}n.d(e,{Z:()=>i})},9786:(t,e,n)=>{function i(t){return t<0?-1:1}function r(t,e,n){var r=t._x1-t._x0,a=e-t._x1,o=(t._y1-t._y0)/(r||a<0&&-0),s=(n-t._y1)/(a||r<0&&-0),c=(o*a+s*r)/(r+a);return(i(o)+i(s))*Math.min(Math.abs(o),Math.abs(s),.5*Math.abs(c))||0}function a(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function o(t,e,n){var i=t._x0,r=t._y0,a=t._x1,o=t._y1,s=(a-i)/3;t._context.bezierCurveTo(i+s,r+s*e,a-s,o-s*n,a,o)}function s(t){this._context=t}function c(t){this._context=t}function l(t){return new s(t)}n.d(e,{Z:()=>l}),s.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:o(this,this._t0,a(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,o(this,a(this,n=r(this,t,e)),n);break;default:o(this,this._t0,n=r(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(function(t){this._context=new c(t)}.prototype=Object.create(s.prototype)).point=function(t,e){s.prototype.point.call(this,e,t)},c.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,i,r,a){this._context.bezierCurveTo(e,t,i,n,a,r)}}},4643:(t,e,n)=>{function i(t,e){this._context=t,this._t=e}function r(t){return new i(t,1)}n.d(e,{cD:()=>r}),i.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}}this._x=t,this._y=e}}},4753:(t,e,n)=>{n.d(e,{Z:()=>_});const i=Math.PI,r=2*i,a=1e-6,o=r-a;function s(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function c(){return new s}s.prototype=c.prototype={constructor:s,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,i){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+i)},bezierCurveTo:function(t,e,n,i,r,a){this._+="C"+ +t+","+ +e+","+ +n+","+ +i+","+(this._x1=+r)+","+(this._y1=+a)},arcTo:function(t,e,n,r,o){t=+t,e=+e,n=+n,r=+r,o=+o;var s=this._x1,c=this._y1,l=n-t,u=r-e,d=s-t,h=c-e,f=d*d+h*h;if(o<0)throw new Error("negative radius: "+o);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(f>a)if(Math.abs(h*l-u*d)>a&&o){var p=n-s,_=r-c,v=l*l+u*u,m=p*p+_*_,y=Math.sqrt(v),g=Math.sqrt(f),b=o*Math.tan((i-Math.acos((v+f-m)/(2*y*g)))/2),w=b/g,x=b/y;Math.abs(w-1)>a&&(this._+="L"+(t+w*d)+","+(e+w*h)),this._+="A"+o+","+o+",0,0,"+ +(h*p>d*_)+","+(this._x1=t+x*l)+","+(this._y1=e+x*u)}else this._+="L"+(this._x1=t)+","+(this._y1=e)},arc:function(t,e,n,s,c,l){t=+t,e=+e,l=!!l;var u=(n=+n)*Math.cos(s),d=n*Math.sin(s),h=t+u,f=e+d,p=1^l,_=l?s-c:c-s;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+h+","+f:(Math.abs(this._x1-h)>a||Math.abs(this._y1-f)>a)&&(this._+="L"+h+","+f),n&&(_<0&&(_=_%r+r),_>o?this._+="A"+n+","+n+",0,1,"+p+","+(t-u)+","+(e-d)+"A"+n+","+n+",0,1,"+p+","+(this._x1=h)+","+(this._y1=f):_>a&&(this._+="A"+n+","+n+",0,"+ +(_>=i)+","+p+","+(this._x1=t+n*Math.cos(c))+","+(this._y1=e+n*Math.sin(c))))},rect:function(t,e,n,i){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +i+"h"+-n+"Z"},toString:function(){return this._}};const l=c;function u(t){return function(){return t}}function d(t){this._context=t}function h(t){return new d(t)}function f(t){return t[0]}function p(t){return t[1]}function _(t,e){var n=u(!0),i=null,r=h,a=null;function o(o){var s,c,u,d=(o=function(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}(o)).length,h=!1;for(null==i&&(a=r(u=l())),s=0;s<=d;++s)!(s<d&&n(c=o[s],s,o))===h&&((h=!h)?a.lineStart():a.lineEnd()),h&&a.point(+t(c,s,o),+e(c,s,o));if(u)return a=null,u+""||null}return t="function"==typeof t?t:void 0===t?f:u(t),e="function"==typeof e?e:void 0===e?p:u(e),o.x=function(e){return arguments.length?(t="function"==typeof e?e:u(+e),o):t},o.y=function(t){return arguments.length?(e="function"==typeof t?t:u(+t),o):e},o.defined=function(t){return arguments.length?(n="function"==typeof t?t:u(!!t),o):n},o.curve=function(t){return arguments.length?(r=t,null!=i&&(a=r(i)),o):r},o.context=function(t){return arguments.length?(null==t?i=a=null:a=r(i=t),o):i},o}Array.prototype.slice,d.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}}},2138:(t,e,n)=>{var i,r,a;n.d(e,{i$:()=>r}),a={dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},i=(0,n(7238).Z)(a),r=i.format,i.parse,i.utcFormat,i.utcParse},6199:(t,e,n)=>{n.d(e,{Z:()=>o});var i=n(2576),r=n(1262),a=(0,i.Z)((t=>t.setHours(0,0,0,0)),((t,e)=>t.setDate(t.getDate()+e)),((t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*r.yB)/r.UD),(t=>t.getDate()-1));const o=a;a.range},1262:(t,e,n)=>{n.d(e,{Ym:()=>i,yB:()=>r,Y2:()=>a,UD:()=>o,iM:()=>s,jz:()=>c,qz:()=>l});const i=1e3,r=60*i,a=60*r,o=24*a,s=7*o,c=30*o,l=365*o},2576:(t,e,n)=>{n.d(e,{Z:()=>a});var i=new Date,r=new Date;function a(t,e,n,o){function s(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return s.floor=function(e){return t(e=new Date(+e)),e},s.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},s.round=function(t){var e=s(t),n=s.ceil(t);return t-e<n-t?e:n},s.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},s.range=function(n,i,r){var a,o=[];if(n=s.ceil(n),r=null==r?1:Math.floor(r),!(n<i&&r>0))return o;do{o.push(a=new Date(+n)),e(n,r),t(n)}while(a<n&&n<i);return o},s.filter=function(n){return a((function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)}),(function(t,i){if(t>=t)if(i<0)for(;++i<=0;)for(;e(t,-1),!n(t););else for(;--i>=0;)for(;e(t,1),!n(t););}))},n&&(s.count=function(e,a){return i.setTime(+e),r.setTime(+a),t(i),t(r),Math.floor(n(i,r))},s.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?s.filter(o?function(e){return o(e)%t==0}:function(e){return s.count(0,e)%t==0}):s:null}),s}},4834:(t,e,n)=>{n.d(e,{Z:()=>o});var i=n(2576),r=n(1262),a=(0,i.Z)((function(t){t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+e)}),(function(t,e){return(e-t)/r.UD}),(function(t){return t.getUTCDate()-1}));const o=a;a.range},1416:(t,e,n)=>{n.d(e,{Ox:()=>o,l6:()=>s,hB:()=>u});var i=n(2576),r=n(1262);function a(t){return(0,i.Z)((function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+7*e)}),(function(t,e){return(e-t)/r.iM}))}var o=a(0),s=a(1),c=a(2),l=a(3),u=a(4),d=a(5),h=a(6);o.range,s.range,c.range,l.range,u.range,d.range,h.range},5762:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(2576),r=(0,i.Z)((function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)}),(function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()}));r.every=function(t){return isFinite(t=Math.floor(t))&&t>0?(0,i.Z)((function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})):null};const a=r;r.range},5235:(t,e,n)=>{n.d(e,{OM:()=>o,wA:()=>s,bL:()=>u});var i=n(2576),r=n(1262);function a(t){return(0,i.Z)((function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+7*e)}),(function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*r.yB)/r.iM}))}var o=a(0),s=a(1),c=a(2),l=a(3),u=a(4),d=a(5),h=a(6);o.range,s.range,c.range,l.range,u.range,d.range,h.range},8887:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(2576),r=(0,i.Z)((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,e){t.setFullYear(t.getFullYear()+e)}),(function(t,e){return e.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()}));r.every=function(t){return isFinite(t=Math.floor(t))&&t>0?(0,i.Z)((function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,n){e.setFullYear(e.getFullYear()+n*t)})):null};const a=r;r.range},1739:(t,e,n)=>{n.d(e,{zO:()=>f,B7:()=>_,HT:()=>v});var i,r,a=0,o=0,s=0,c=0,l=0,u=0,d="object"==typeof performance&&performance.now?performance:Date,h="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function f(){return l||(h(p),l=d.now()+u)}function p(){l=0}function _(){this._call=this._time=this._next=null}function v(t,e,n){var i=new _;return i.restart(t,e,n),i}function m(){l=(c=d.now())+u,a=o=0;try{!function(){f(),++a;for(var t,e=i;e;)(t=l-e._time)>=0&&e._call.call(void 0,t),e=e._next;--a}()}finally{a=0,function(){for(var t,e,n=i,a=1/0;n;)n._call?(a>n._time&&(a=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:i=e);r=t,g(a)}(),l=0}}function y(){var t=d.now(),e=t-c;e>1e3&&(u-=e,c=t)}function g(t){a||(o&&(o=clearTimeout(o)),t-l>24?(t<1/0&&(o=setTimeout(m,t-d.now()-u)),s&&(s=clearInterval(s))):(s||(c=d.now(),s=setInterval(y,1e3)),a=1,h(m)))}_.prototype=v.prototype={constructor:_,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?f():+n)+(null==e?0:+e),this._next||r===this||(r?r._next=this:i=this,r=this),this._call=t,this._time=n,g()},stop:function(){this._call&&(this._call=null,this._time=1/0,g())}}},8640:(t,e,n)=>{n.d(e,{Z:()=>r});var i=n(3390);function r(t,e){var n,r,a,o=t.__transition,s=!0;if(o){for(a in e=null==e?null:e+"",o)(n=o[a]).name===e?(r=n.state>i.KE&&n.state<i.wS,n.state=i.Ku,n.timer.stop(),n.on.call(r?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete o[a]):s=!1;s&&delete t.__transition}}},1689:(t,e,n)=>{n.d(e,{Z:()=>r});var i=n(8640);function r(t){return this.each((function(){(0,i.Z)(this,t)}))}},6786:(t,e,n)=>{n.d(e,{Z:()=>c});var i=n(6365),r=n(3390),a=n(1739),o={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function s(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function c(t){var e,n;t instanceof i.uT?(e=t._id,t=t._name):(e=(0,i.pZ)(),(n=o).time=(0,a.zO)(),t=null==t?null:t+"");for(var c=this._groups,l=c.length,u=0;u<l;++u)for(var d,h=c[u],f=h.length,p=0;p<f;++p)(d=h[p])&&(0,r.ZP)(d,t,e,p,h,n||s(d,e));return new i.uT(c,this._parents,t,e)}},5114:(t,e,n)=>{n.d(e,{Z:()=>f});var i=n(3465),r=n(1663),a=n(9040),o=n(4548);function s(t){return function(){this.removeAttribute(t)}}function c(t){return function(){this.removeAttributeNS(t.space,t.local)}}function l(t,e,n){var i,r,a=n+"";return function(){var o=this.getAttribute(t);return o===a?null:o===i?r:r=e(i=o,n)}}function u(t,e,n){var i,r,a=n+"";return function(){var o=this.getAttributeNS(t.space,t.local);return o===a?null:o===i?r:r=e(i=o,n)}}function d(t,e,n){var i,r,a;return function(){var o,s,c=n(this);if(null!=c)return(o=this.getAttribute(t))===(s=c+"")?null:o===i&&s===r?a:(r=s,a=e(i=o,c));this.removeAttribute(t)}}function h(t,e,n){var i,r,a;return function(){var o,s,c=n(this);if(null!=c)return(o=this.getAttributeNS(t.space,t.local))===(s=c+"")?null:o===i&&s===r?a:(r=s,a=e(i=o,c));this.removeAttributeNS(t.space,t.local)}}function f(t,e){var n=(0,r.Z)(t),f="transform"===n?i.w:o.Z;return this.attrTween(t,"function"==typeof e?(n.local?h:d)(n,f,(0,a.x)(this,"attr."+t,e)):null==e?(n.local?c:s)(n):(n.local?u:l)(n,f,e))}},8061:(t,e,n)=>{n.d(e,{Z:()=>c});var i=n(1663);function r(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function a(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function o(t,e){var n,i;function r(){var r=e.apply(this,arguments);return r!==i&&(n=(i=r)&&a(t,r)),n}return r._value=e,r}function s(t,e){var n,i;function a(){var a=e.apply(this,arguments);return a!==i&&(n=(i=a)&&r(t,a)),n}return a._value=e,a}function c(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var r=(0,i.Z)(t);return this.tween(n,(r.local?o:s)(r,e))}},6882:(t,e,n)=>{n.d(e,{Z:()=>o});var i=n(3390);function r(t,e){return function(){(0,i.S1)(this,t).delay=+e.apply(this,arguments)}}function a(t,e){return e=+e,function(){(0,i.S1)(this,t).delay=e}}function o(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?r:a)(e,t)):(0,i.U2)(this.node(),e).delay}},4786:(t,e,n)=>{n.d(e,{Z:()=>o});var i=n(3390);function r(t,e){return function(){(0,i.t8)(this,t).duration=+e.apply(this,arguments)}}function a(t,e){return e=+e,function(){(0,i.t8)(this,t).duration=e}}function o(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?r:a)(e,t)):(0,i.U2)(this.node(),e).duration}},3353:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(3390);function r(t,e){if("function"!=typeof e)throw new Error;return function(){(0,i.t8)(this,t).ease=e}}function a(t){var e=this._id;return arguments.length?this.each(r(e,t)):(0,i.U2)(this.node(),e).ease}},5778:(t,e,n)=>{n.d(e,{Z:()=>r});var i=n(3390);function r(t){if("function"!=typeof t)throw new Error;return this.each(function(t,e){return function(){var n=e.apply(this,arguments);if("function"!=typeof n)throw new Error;(0,i.t8)(this,t).ease=n}}(this._id,t))}},5355:(t,e,n)=>{n.d(e,{Z:()=>r});var i=n(3390);function r(){var t,e,n=this,r=n._id,a=n.size();return new Promise((function(o,s){var c={value:s},l={value:function(){0==--a&&o()}};n.each((function(){var n=(0,i.t8)(this,r),a=n.on;a!==t&&((e=(t=a).copy())._.cancel.push(c),e._.interrupt.push(c),e._.end.push(l)),n.on=e})),0===a&&o()}))}},9579:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(4421),r=n(6365);function a(t){"function"!=typeof t&&(t=(0,i.Z)(t));for(var e=this._groups,n=e.length,a=new Array(n),o=0;o<n;++o)for(var s,c=e[o],l=c.length,u=a[o]=[],d=0;d<l;++d)(s=c[d])&&t.call(s,s.__data__,d,c)&&u.push(s);return new r.uT(a,this._parents,this._name,this._id)}},4548:(t,e,n)=>{n.d(e,{Z:()=>s});var i=n(8849),r=n(8063),a=n(187),o=n(6773);function s(t,e){var n;return("number"==typeof e?r.Z:e instanceof i.ZP?a.ZP:(n=(0,i.ZP)(e))?(e=n,a.ZP):o.Z)(t,e)}},9858:(t,e,n)=>{n.d(e,{Z:()=>r});var i=n(6365);function r(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,a=n.length,o=Math.min(r,a),s=new Array(r),c=0;c<o;++c)for(var l,u=e[c],d=n[c],h=u.length,f=s[c]=new Array(h),p=0;p<h;++p)(l=u[p]||d[p])&&(f[p]=l);for(;c<r;++c)s[c]=e[c];return new i.uT(s,this._parents,this._name,this._id)}},7349:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(3390);function r(t,e,n){var r,a,o=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}(e)?i.S1:i.t8;return function(){var i=o(this,t),s=i.on;s!==r&&(a=(r=s).copy()).on(e,n),i.on=a}}function a(t,e){var n=this._id;return arguments.length<2?(0,i.U2)(this.node(),n).on.on(t):this.each(r(n,t,e))}},9935:(t,e,n)=>{function i(){return this.on("end.remove",(t=this._id,function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}));var t}n.d(e,{Z:()=>i})},3390:(t,e,n)=>{n.d(e,{Ku:()=>u,wS:()=>l,KE:()=>c,ZP:()=>d,U2:()=>p,S1:()=>h,t8:()=>f});var i=n(6057),r=n(1739);function a(t,e,n){var i=new r.B7;return e=null==e?0:+e,i.restart((n=>{i.stop(),t(n+e)}),e,n),i}var o=(0,i.Z)("start","end","cancel","interrupt"),s=[],c=2,l=5,u=6;function d(t,e,n,i,d,h){var f=t.__transition;if(f){if(n in f)return}else t.__transition={};!function(t,e,n){var i,o=t.__transition;function s(r){var l,f,p,_;if(1!==n.state)return h();for(l in o)if((_=o[l]).name===n.name){if(3===_.state)return a(s);4===_.state?(_.state=u,_.timer.stop(),_.on.call("interrupt",t,t.__data__,_.index,_.group),delete o[l]):+l<e&&(_.state=u,_.timer.stop(),_.on.call("cancel",t,t.__data__,_.index,_.group),delete o[l])}if(a((function(){3===n.state&&(n.state=4,n.timer.restart(d,n.delay,n.time),d(r))})),n.state=c,n.on.call("start",t,t.__data__,n.index,n.group),n.state===c){for(n.state=3,i=new Array(p=n.tween.length),l=0,f=-1;l<p;++l)(_=n.tween[l].value.call(t,t.__data__,n.index,n.group))&&(i[++f]=_);i.length=f+1}}function d(e){for(var r=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(h),n.state=l,1),a=-1,o=i.length;++a<o;)i[a].call(t,r);n.state===l&&(n.on.call("end",t,t.__data__,n.index,n.group),h())}function h(){for(var i in n.state=u,n.timer.stop(),delete o[e],o)return;delete t.__transition}o[e]=n,n.timer=(0,r.HT)((function(t){n.state=1,n.timer.restart(s,n.delay,n.time),n.delay<=t&&s(t-n.delay)}),0,n.time)}(t,n,{name:e,index:i,group:d,on:o,tween:s,time:h.time,delay:h.delay,duration:h.duration,ease:h.ease,timer:null,state:0})}function h(t,e){var n=p(t,e);if(n.state>0)throw new Error("too late; already scheduled");return n}function f(t,e){var n=p(t,e);if(n.state>3)throw new Error("too late; already running");return n}function p(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}},4417:(t,e,n)=>{n.d(e,{Z:()=>o});var i=n(3010),r=n(6365),a=n(3390);function o(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=(0,i.Z)(t));for(var o=this._groups,s=o.length,c=new Array(s),l=0;l<s;++l)for(var u,d,h=o[l],f=h.length,p=c[l]=new Array(f),_=0;_<f;++_)(u=h[_])&&(d=t.call(u,u.__data__,_,h))&&("__data__"in u&&(d.__data__=u.__data__),p[_]=d,(0,a.ZP)(p[_],e,n,_,p,(0,a.U2)(u,n)));return new r.uT(c,this._parents,e,n)}},5174:(t,e,n)=>{n.d(e,{Z:()=>o});var i=n(9701),r=n(6365),a=n(3390);function o(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=(0,i.Z)(t));for(var o=this._groups,s=o.length,c=[],l=[],u=0;u<s;++u)for(var d,h=o[u],f=h.length,p=0;p<f;++p)if(d=h[p]){for(var _,v=t.call(d,d.__data__,p,h),m=(0,a.U2)(d,n),y=0,g=v.length;y<g;++y)(_=v[y])&&(0,a.ZP)(_,e,n,y,v,m);c.push(v),l.push(d)}return new r.uT(c,l,e,n)}},3836:(t,e,n)=>{n.d(e,{Z:()=>r});var i=n(8390).ZP.prototype.constructor;function r(){return new i(this._groups,this._parents)}},8508:(t,e,n)=>{n.d(e,{Z:()=>l});var i=n(3465),r=n(2627),a=n(3390),o=n(9040),s=n(4548);function c(t){return function(){this.style.removeProperty(t)}}function l(t,e,n){var l="transform"==(t+="")?i.Y:s.Z;return null==e?this.styleTween(t,function(t,e){var n,i,a;return function(){var o=(0,r.S)(this,t),s=(this.style.removeProperty(t),(0,r.S)(this,t));return o===s?null:o===n&&s===i?a:a=e(n=o,i=s)}}(t,l)).on("end.style."+t,c(t)):"function"==typeof e?this.styleTween(t,function(t,e,n){var i,a,o;return function(){var s=(0,r.S)(this,t),c=n(this),l=c+"";return null==c&&(this.style.removeProperty(t),l=c=(0,r.S)(this,t)),s===l?null:s===i&&l===a?o:(a=l,o=e(i=s,c))}}(t,l,(0,o.x)(this,"style."+t,e))).each(function(t,e){var n,i,r,o,s="style."+e,l="end."+s;return function(){var u=(0,a.t8)(this,t),d=u.on,h=null==u.value[s]?o||(o=c(e)):void 0;d===n&&r===h||(i=(n=d).copy()).on(l,r=h),u.on=i}}(this._id,t)):this.styleTween(t,function(t,e,n){var i,a,o=n+"";return function(){var s=(0,r.S)(this,t);return s===o?null:s===i?a:a=e(i=s,n)}}(t,l,e),n).on("end.style."+t,null)}},5109:(t,e,n)=>{function i(t,e,n){return function(i){this.style.setProperty(t,e.call(this,i),n)}}function r(t,e,n){var r,a;function o(){var o=e.apply(this,arguments);return o!==a&&(r=(a=o)&&i(t,o,n)),r}return o._value=e,o}function a(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==e)return this.tween(i,null);if("function"!=typeof e)throw new Error;return this.tween(i,r(t,e,null==n?"":n))}n.d(e,{Z:()=>a})},5699:(t,e,n)=>{n.d(e,{Z:()=>r});var i=n(9040);function r(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}((0,i.x)(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))}},4987:(t,e,n)=>{function i(t){return function(e){this.textContent=t.call(this,e)}}function r(t){var e,n;function r(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&i(r)),e}return r._value=t,r}function a(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,r(t))}n.d(e,{Z:()=>a})},4085:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(6365),r=n(3390);function a(){for(var t=this._name,e=this._id,n=(0,i.pZ)(),a=this._groups,o=a.length,s=0;s<o;++s)for(var c,l=a[s],u=l.length,d=0;d<u;++d)if(c=l[d]){var h=(0,r.U2)(c,e);(0,r.ZP)(c,t,n,d,l,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new i.uT(a,this._parents,t,n)}},9040:(t,e,n)=>{n.d(e,{Z:()=>o,x:()=>s});var i=n(3390);function r(t,e){var n,r;return function(){var a=(0,i.t8)(this,t),o=a.tween;if(o!==n)for(var s=0,c=(r=n=o).length;s<c;++s)if(r[s].name===e){(r=r.slice()).splice(s,1);break}a.tween=r}}function a(t,e,n){var r,a;if("function"!=typeof n)throw new Error;return function(){var o=(0,i.t8)(this,t),s=o.tween;if(s!==r){a=(r=s).slice();for(var c={name:e,value:n},l=0,u=a.length;l<u;++l)if(a[l].name===e){a[l]=c;break}l===u&&a.push(c)}o.tween=a}}function o(t,e){var n=this._id;if(t+="",arguments.length<2){for(var o,s=(0,i.U2)(this.node(),n).tween,c=0,l=s.length;c<l;++c)if((o=s[c]).name===t)return o.value;return null}return this.each((null==e?r:a)(n,t,e))}function s(t,e,n){var r=t._id;return t.each((function(){var t=(0,i.t8)(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)})),function(t){return(0,i.U2)(t,r).value[e]}}},2714:(t,e,n)=>{function i(t,e,n){this.k=t,this.x=e,this.y=n}n.d(e,{wx:()=>i,yR:()=>r}),i.prototype={constructor:i,scale:function(t){return 1===t?this:new i(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new i(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var r=new i(1,0,0);i.prototype},6734:(t,e,n)=>{n.d(e,{Z:()=>w});var i=n(6057),r=n(848);function a(t){return((t=Math.exp(t))+1/t)/2}const o=function t(e,n,i){function r(t,r){var o,s,c=t[0],l=t[1],u=t[2],d=r[0],h=r[1],f=r[2],p=d-c,_=h-l,v=p*p+_*_;if(v<1e-12)s=Math.log(f/u)/e,o=function(t){return[c+t*p,l+t*_,u*Math.exp(e*t*s)]};else{var m=Math.sqrt(v),y=(f*f-u*u+i*v)/(2*u*n*m),g=(f*f-u*u-i*v)/(2*f*n*m),b=Math.log(Math.sqrt(y*y+1)-y),w=Math.log(Math.sqrt(g*g+1)-g);s=(w-b)/e,o=function(t){var i,r=t*s,o=a(b),d=u/(n*m)*(o*(i=e*r+b,((i=Math.exp(2*i))-1)/(i+1))-function(t){return((t=Math.exp(t))-1/t)/2}(b));return[c+d*p,l+d*_,u*o/a(e*r+b)]}}return o.duration=1e3*s*e/Math.SQRT2,o}return r.rho=function(e){var n=Math.max(.001,+e),i=n*n;return t(n,i,i*i)},r}(Math.SQRT2,2,4);var s=n(3838),c=n(3466),l=n(404);const u=t=>()=>t;function d(t,{sourceEvent:e,target:n,transform:i,dispatch:r}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:r}})}var h=n(2714);function f(t){t.stopImmediatePropagation()}function p(t){t.preventDefault(),t.stopImmediatePropagation()}function _(t){return!(t.ctrlKey&&"wheel"!==t.type||t.button)}function v(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t).hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]:[[0,0],[t.clientWidth,t.clientHeight]]}function m(){return this.__zoom||h.yR}function y(t){return-t.deltaY*(1===t.deltaMode?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function g(){return navigator.maxTouchPoints||"ontouchstart"in this}function b(t,e,n){var i=t.invertX(e[0][0])-n[0][0],r=t.invertX(e[1][0])-n[1][0],a=t.invertY(e[0][1])-n[0][1],o=t.invertY(e[1][1])-n[1][1];return t.translate(r>i?(i+r)/2:Math.min(0,i)||Math.max(0,r),o>a?(a+o)/2:Math.min(0,a)||Math.max(0,o))}function w(){var t,e,n,a=_,w=v,x=b,k=y,E=g,S=[0,1/0],O=[[-1/0,-1/0],[1/0,1/0]],T=250,A=o,C=(0,i.Z)("start","zoom","end"),M=500,P=0,j=10;function L(t){t.property("__zoom",m).on("wheel.zoom",Z,{passive:!1}).on("mousedown.zoom",I).on("dblclick.zoom",H).filter(E).on("touchstart.zoom",B).on("touchmove.zoom",Y).on("touchend.zoom touchcancel.zoom",V).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function N(t,e){return(e=Math.max(S[0],Math.min(S[1],e)))===t.k?t:new h.wx(e,t.x,t.y)}function D(t,e,n){var i=e[0]-n[0]*t.k,r=e[1]-n[1]*t.k;return i===t.x&&r===t.y?t:new h.wx(t.k,i,r)}function q(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function R(t,e,n,i){t.on("start.zoom",(function(){U(this,arguments).event(i).start()})).on("interrupt.zoom end.zoom",(function(){U(this,arguments).event(i).end()})).tween("zoom",(function(){var t=this,r=arguments,a=U(t,r).event(i),o=w.apply(t,r),s=null==n?q(o):"function"==typeof n?n.apply(t,r):n,c=Math.max(o[1][0]-o[0][0],o[1][1]-o[0][1]),l=t.__zoom,u="function"==typeof e?e.apply(t,r):e,d=A(l.invert(s).concat(c/l.k),u.invert(s).concat(c/u.k));return function(t){if(1===t)t=u;else{var e=d(t),n=c/e[2];t=new h.wx(n,s[0]-e[0]*n,s[1]-e[1]*n)}a.zoom(null,t)}}))}function U(t,e,n){return!n&&t.__zooming||new z(t,e)}function z(t,e){this.that=t,this.args=e,this.active=0,this.sourceEvent=null,this.extent=w.apply(t,e),this.taps=0}function Z(t,...e){if(a.apply(this,arguments)){var n=U(this,e).event(t),i=this.__zoom,r=Math.max(S[0],Math.min(S[1],i.k*Math.pow(2,k.apply(this,arguments)))),o=(0,c.Z)(t);if(n.wheel)n.mouse[0][0]===o[0]&&n.mouse[0][1]===o[1]||(n.mouse[1]=i.invert(n.mouse[0]=o)),clearTimeout(n.wheel);else{if(i.k===r)return;n.mouse=[o,i.invert(o)],(0,l.e1)(this),n.start()}p(t),n.wheel=setTimeout(s,150),n.zoom("mouse",x(D(N(i,r),n.mouse[0],n.mouse[1]),n.extent,O))}function s(){n.wheel=null,n.end()}}function I(t,...e){if(!n&&a.apply(this,arguments)){var i=t.currentTarget,o=U(this,e,!0).event(t),u=(0,s.Z)(t.view).on("mousemove.zoom",v,!0).on("mouseup.zoom",m,!0),d=(0,c.Z)(t,i),h=t.clientX,_=t.clientY;(0,r.Z)(t.view),f(t),o.mouse=[d,this.__zoom.invert(d)],(0,l.e1)(this),o.start()}function v(t){if(p(t),!o.moved){var e=t.clientX-h,n=t.clientY-_;o.moved=e*e+n*n>P}o.event(t).zoom("mouse",x(D(o.that.__zoom,o.mouse[0]=(0,c.Z)(t,i),o.mouse[1]),o.extent,O))}function m(t){u.on("mousemove.zoom mouseup.zoom",null),(0,r.D)(t.view,o.moved),p(t),o.event(t).end()}}function H(t,...e){if(a.apply(this,arguments)){var n=this.__zoom,i=(0,c.Z)(t.changedTouches?t.changedTouches[0]:t,this),r=n.invert(i),o=n.k*(t.shiftKey?.5:2),l=x(D(N(n,o),i,r),w.apply(this,e),O);p(t),T>0?(0,s.Z)(this).transition().duration(T).call(R,l,i,t):(0,s.Z)(this).call(L.transform,l,i,t)}}function B(n,...i){if(a.apply(this,arguments)){var r,o,s,u,d=n.touches,h=d.length,p=U(this,i,n.changedTouches.length===h).event(n);for(f(n),o=0;o<h;++o)s=d[o],u=[u=(0,c.Z)(s,this),this.__zoom.invert(u),s.identifier],p.touch0?p.touch1||p.touch0[2]===u[2]||(p.touch1=u,p.taps=0):(p.touch0=u,r=!0,p.taps=1+!!t);t&&(t=clearTimeout(t)),r&&(p.taps<2&&(e=u[0],t=setTimeout((function(){t=null}),M)),(0,l.e1)(this),p.start())}}function Y(t,...e){if(this.__zooming){var n,i,r,a,o=U(this,e).event(t),s=t.changedTouches,l=s.length;for(p(t),n=0;n<l;++n)i=s[n],r=(0,c.Z)(i,this),o.touch0&&o.touch0[2]===i.identifier?o.touch0[0]=r:o.touch1&&o.touch1[2]===i.identifier&&(o.touch1[0]=r);if(i=o.that.__zoom,o.touch1){var u=o.touch0[0],d=o.touch0[1],h=o.touch1[0],f=o.touch1[1],_=(_=h[0]-u[0])*_+(_=h[1]-u[1])*_,v=(v=f[0]-d[0])*v+(v=f[1]-d[1])*v;i=N(i,Math.sqrt(_/v)),r=[(u[0]+h[0])/2,(u[1]+h[1])/2],a=[(d[0]+f[0])/2,(d[1]+f[1])/2]}else{if(!o.touch0)return;r=o.touch0[0],a=o.touch0[1]}o.zoom("touch",x(D(i,r,a),o.extent,O))}}function V(t,...i){if(this.__zooming){var r,a,o=U(this,i).event(t),l=t.changedTouches,u=l.length;for(f(t),n&&clearTimeout(n),n=setTimeout((function(){n=null}),M),r=0;r<u;++r)a=l[r],o.touch0&&o.touch0[2]===a.identifier?delete o.touch0:o.touch1&&o.touch1[2]===a.identifier&&delete o.touch1;if(o.touch1&&!o.touch0&&(o.touch0=o.touch1,delete o.touch1),o.touch0)o.touch0[1]=this.__zoom.invert(o.touch0[0]);else if(o.end(),2===o.taps&&(a=(0,c.Z)(a,this),Math.hypot(e[0]-a[0],e[1]-a[1])<j)){var d=(0,s.Z)(this).on("dblclick.zoom");d&&d.apply(this,arguments)}}}return L.transform=function(t,e,n,i){var r=t.selection?t.selection():t;r.property("__zoom",m),t!==r?R(t,e,n,i):r.interrupt().each((function(){U(this,arguments).event(i).start().zoom(null,"function"==typeof e?e.apply(this,arguments):e).end()}))},L.scaleBy=function(t,e,n,i){L.scaleTo(t,(function(){var t=this.__zoom.k,n="function"==typeof e?e.apply(this,arguments):e;return t*n}),n,i)},L.scaleTo=function(t,e,n,i){L.transform(t,(function(){var t=w.apply(this,arguments),i=this.__zoom,r=null==n?q(t):"function"==typeof n?n.apply(this,arguments):n,a=i.invert(r),o="function"==typeof e?e.apply(this,arguments):e;return x(D(N(i,o),r,a),t,O)}),n,i)},L.translateBy=function(t,e,n,i){L.transform(t,(function(){return x(this.__zoom.translate("function"==typeof e?e.apply(this,arguments):e,"function"==typeof n?n.apply(this,arguments):n),w.apply(this,arguments),O)}),null,i)},L.translateTo=function(t,e,n,i,r){L.transform(t,(function(){var t=w.apply(this,arguments),r=this.__zoom,a=null==i?q(t):"function"==typeof i?i.apply(this,arguments):i;return x(h.yR.translate(a[0],a[1]).scale(r.k).translate("function"==typeof e?-e.apply(this,arguments):-e,"function"==typeof n?-n.apply(this,arguments):-n),t,O)}),i,r)},z.prototype={event:function(t){return t&&(this.sourceEvent=t),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(t,e){return this.mouse&&"mouse"!==t&&(this.mouse[1]=e.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=e.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=e.invert(this.touch1[0])),this.that.__zoom=e,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(t){var e=(0,s.Z)(this.that).datum();C.call(t,this.that,new d(t,{sourceEvent:this.sourceEvent,target:L,type:t,transform:this.that.__zoom,dispatch:C}),e)}},L.wheelDelta=function(t){return arguments.length?(k="function"==typeof t?t:u(+t),L):k},L.filter=function(t){return arguments.length?(a="function"==typeof t?t:u(!!t),L):a},L.touchable=function(t){return arguments.length?(E="function"==typeof t?t:u(!!t),L):E},L.extent=function(t){return arguments.length?(w="function"==typeof t?t:u([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),L):w},L.scaleExtent=function(t){return arguments.length?(S[0]=+t[0],S[1]=+t[1],L):[S[0],S[1]]},L.translateExtent=function(t){return arguments.length?(O[0][0]=+t[0][0],O[1][0]=+t[1][0],O[0][1]=+t[0][1],O[1][1]=+t[1][1],L):[[O[0][0],O[0][1]],[O[1][0],O[1][1]]]},L.constrain=function(t){return arguments.length?(x=t,L):x},L.duration=function(t){return arguments.length?(T=+t,L):T},L.interpolate=function(t){return arguments.length?(A=t,L):A},L.on=function(){var t=C.on.apply(C,arguments);return t===C?L:t},L.clickDistance=function(t){return arguments.length?(P=(t=+t)*t,L):Math.sqrt(P)},L.tapDistance=function(t){return arguments.length?(j=+t,L):j},L}}},n={};function i(t){var r=n[t];if(void 0!==r)return r.exports;var a=n[t]={exports:{}};return e[t](a,a.exports,i),a.exports}i.m=e,t=[],i.O=(e,n,r,a)=>{if(!n){var o=1/0;for(u=0;u<t.length;u++){for(var[n,r,a]=t[u],s=!0,c=0;c<n.length;c++)(!1&a||o>=a)&&Object.keys(i.O).every((t=>i.O[t](n[c])))?n.splice(c--,1):(s=!1,a<o&&(o=a));if(s){t.splice(u--,1);var l=r();void 0!==l&&(e=l)}}return e}a=a||0;for(var u=t.length;u>0&&t[u-1][2]>a;u--)t[u]=t[u-1];t[u]=[n,r,a]},i.d=(t,e)=>{for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t={826:0};i.O.j=e=>0===t[e];var e=(e,n)=>{var r,a,[o,s,c]=n,l=0;if(o.some((e=>0!==t[e]))){for(r in s)i.o(s,r)&&(i.m[r]=s[r]);if(c)var u=c(i)}for(e&&e(n);l<o.length;l++)a=o[l],i.o(t,a)&&t[a]&&t[a][0](),t[o[l]]=0;return i.O(u)},n=self.webpackChunkagro_web=self.webpackChunkagro_web||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))})();var r=i.O(void 0,[821,978,882,813],(()=>i(5039)));r=i.O(r)})();