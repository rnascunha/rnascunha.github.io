(()=>{"use strict";var e,t={5039:(e,t,n)=>{function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return l(e)}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function f(e,t,n){return(f=h()?Reflect.construct:function(e,t,n){var i=[null];i.push.apply(i,t);var r=new(Function.bind.apply(e,i));return n&&o(r,n.prototype),r}).apply(null,arguments)}function p(e){var t="function"==typeof Map?new Map:void 0;return(p=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,i)}function i(){return f(e,arguments,d(this).constructor)}return i.prototype=Object.create(e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),o(i,e)})(e)}function _(e){return e.key.length>1}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g;n(7287),n(8805),n(5858),(g=document.createElement("template")).innerHTML='\n<style>\n  :host{\n    box-sizing: border-box;\n    display: inline-flex;\n    justify-content: stretch;\n    align-items: center;\n    border: 1px solid black;\n    border-radius: 5px;\n    font-size: 20px;\n    --close-font-size: 35px;\n    --inner-padding: 5px;\n    --icon-color: black;\n    overflow: hidden;\n    --color-placeholder: rgba(200, 200, 200, 0.9);\n  }\n\n  .icon{\n    box-sizing: border-box;\n    font-size: inherit;\n    padding: var(--inner-padding);\n    margin: 0px;\n    display: inline-flex;\n    flex-direction: column;\n    justify-content: center;\n    border: none;\n    flex: 0 10 auto;\n    max-width: 4ch;\n    color: var(--icon-color);\n  }\n\n  input{\n    box-sizing: border-box;\n    padding: var(--inner-padding);\n    margin: 0px;\n    outline: none;\n    font-size: 20px;\n    /* --input-font-size: 20px; */\n    background-color: inherit;\n    color: inherit;\n    text-align: center;\n    font-family: inherit;\n    flex: 4 1 auto;\n    border: none;\n    min-width: 0;\n    font-family: inherit;\n  }\n\n  .close{\n    box-sizing: border-box;\n    text-align: center;\n    font-family: inherit;\n    font-size: var(--close-font-size, inherit);\n    flex: 0 10 auto;\n    border: none;\n    padding: var(--inner-padding);\n    cursor: pointer;\n    font-family: inherit;\n    max-width: 3ch;\n    color: var(--icon-color);\n  }\n\n  .close:hover{\n    font-weight: bold;\n  }\n\n  ::placeholder { /* Chrome, Firefox, Opera, Safari 10.1+ */\n    color: var(--color-placeholder);\n  }\n\n  :-ms-input-placeholder { /* Internet Explorer 10-11 */\n    color: var(--color-placeholder);\n  }\n\n  ::-webkit-input-placeholder {\n     color: var(--color-placeholder);\n  }\n\n  :-moz-placeholder { /* Firefox 18- */\n     color: var(--color-placeholder);\n  }\n</style>\n<span class=icon><slot name=icon></slot></span>\n<input autocapitalize="none">\n<span class=close>&times</span>',customElements.define("x-input-icon",function(e){s(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=d(t);if(n){var r=d(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return u(this,e)});function o(){var e;i(this,o);var t=(e=r.call(this)).attachShadow({mode:"open"});return t.appendChild(g.content.cloneNode(!0)),e._icon=t.querySelector(".icon"),e._input=t.querySelector("input"),e._close=t.querySelector(".close"),e._close.addEventListener("click",(function(t){e._input.value="",e._input.focus()})),e._input.addEventListener("keydown",(function(e){"Escape"!=e.key||(e.target.value="")})),e.addEventListener=e._input.addEventListener,e}return a(o,[{key:"value",get:function(){return this._input.value},set:function(e){this._input.value=e}},{key:"disabled",get:function(){return this._input.disabled},set:function(e){this._input.disabled=Boolean(e),this._input.disabled?this.setAttribute("disabled",""):this.removeAttribute("disabled")}},{key:"input",get:function(){return this._input}},{key:"focus",value:function(){this._input.focus()}},{key:"connectedCallback",value:function(){this.hasAttribute("type")&&(this._input.type=this.getAttribute("type")),this.hasAttribute("value")&&(this._input.value=this.getAttribute("value")),this.hasAttribute("placeholder")&&(this._input.placeholder=this.getAttribute("placeholder"))}}]),o}(p(HTMLElement))),function(){var e=document.createElement("template");e.innerHTML='\n<style>\n  :host{\n    box-sizing: border-box;\n    display: inline-flex;\n    justify-content: stretch;\n    align-items: center;\n    border: 1px solid black;\n    border-radius: 5px;\n    font-size: 20px;\n    --inner-padding: 5px;\n    --icon-color: black;\n    overflow: hidden;\n  }\n\n  .icon{\n    box-sizing: border-box;\n    font-size: inherit;\n    padding: var(--inner-padding);\n    margin: 0px;\n    display: inline-flex;\n    flex-direction: column;\n    justify-content: center;\n    border: none;\n    flex: 0 10 auto;\n    max-width: 4ch;\n    color: var(--icon-color);\n  }\n\n  #scheme{\n    background-color: inherit;\n    color: inherit;\n    text-align: center;\n    font-family: inherit;\n    font-size: inherit;\n    outline: none;\n    box-sizing: border-box;\n    border: none;\n    margin: 0;\n    padding: 0;\n    align-self: stretch;\n  }\n\n  #scheme:focus{\n    filter: brightness(0.9);\n  }\n\n  input{\n    box-sizing: border-box;\n    margin: 0px;\n    outline: none;\n    font-size: 20px;\n    background-color: inherit;\n    color: inherit;\n    text-align: center;\n    font-family: inherit;\n    border: none;\n    min-width: 0;\n    font-family: inherit;\n  }\n\n  #addr{\n    flex: 4 1 auto;\n  }\n\n  #port{\n    flex: 1 1 auto;\n    max-width: 6ch;\n  }\n\n  .close{\n    box-sizing: border-box;\n    text-align: center;\n    font-family: inherit;\n    font-size: var(--close-font-size, inherit);\n    flex: 0 10 auto;\n    border: none;\n    padding: var(--inner-padding);\n    cursor: pointer;\n    font-family: inherit;\n    max-width: 3ch;\n    color: var(--icon-color);\n  }\n\n  .separator{\n    max-width: 1ch;\n    flex: 0 10 auto;\n  }\n\n  .close:hover{\n    font-weight: bold;\n  }\n\n  ::placeholder { /* Chrome, Firefox, Opera, Safari 10.1+ */\n    color: var(--color-placeholder);\n  }\n\n  :-ms-input-placeholder { /* Internet Explorer 10-11 */\n    color: var(--color-placeholder);\n  }\n\n  ::-webkit-input-placeholder {\n     color: var(--color-placeholder);\n  }\n\n  :-moz-placeholder { /* Firefox 18- */\n     color: var(--color-placeholder);\n  }\n</style>\n<span class=icon><slot name=icon></slot></span>\n<select id="scheme">\n  <option value="ws">ws</option>\n  <option value="wss" selected>wss</option>\n</select>\n<input id=addr placeholder=Address>\n<span class=separator>:</span>\n<input id=port placeholder=Port pattern="[0-9]*" inputmode="numeric">\n<span class=close>&times</span>',customElements.define("x-input-server",function(t){s(c,t);var n,r,o=(n=c,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=d(n);if(r){var i=d(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return u(this,e)});function c(){var t;i(this,c);var n=(t=o.call(this)).attachShadow({mode:"open"});return n.appendChild(e.content.cloneNode(!0)),t._icon=n.querySelector(".icon"),t._scheme=n.querySelector("#scheme"),t._input_addr=n.querySelector("#addr"),t._input_port=n.querySelector("#port"),t._close=n.querySelector(".close"),t._close.addEventListener("click",(function(e){t._input_addr.value="",t._input_port.value="",t._input_addr.focus()})),t._input_port.addEventListener("keydown",(function(e){"Escape"!=e.key?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!_(e))if(e.keyCode>=48&&e.keyCode<=57){var i=e.target.value+e.key;(t&&Number.isInteger(t)&&i&&parseInt(i)<t||n&&Number.isInteger(n)&&i&&parseInt(i)>n)&&e.preventDefault()}else e.preventDefault()}(e,1,65535):e.target.value=""})),t}return a(c,[{key:"scheme",get:function(){return this._scheme.selectedOptions[0].value},set:function(e){this._scheme.querySelector("[value=".concat(e,"]")).selected=!0}},{key:"address",get:function(){return this._input_addr.value},set:function(e){this._input_addr.value=e}},{key:"port",get:function(){return this._input_port.value},set:function(e){this._input_port.value=e}},{key:"input_addr",get:function(){return this._input_addr}},{key:"input_port",get:function(){return this._input_port}},{key:"connectedCallback",value:function(){this.hasAttribute("addr")&&(this._input_addr.value=this.getAttribute("addr")),this.hasAttribute("port")&&(this._input_port.value=this.getAttribute("port"))}}]),c}(p(HTMLElement)))}(),function(){var e=document.createElement("template");e.innerHTML="\n<style>\n  :host{\n    display: inline-block;\n    font-size: 18px;\n    --color-placeholder: rgba(200, 200, 200, 0.9);\n  }\n\n  fieldset{\n    border: 1px solid var(--text-color);\n    border-radius: 10px;\n    box-sizing: border-box;\n  }\n\n  input{\n    width: 100%;\n    margin: 0px;\n    outline: none;\n    font-size: inherit;\n    background-color: inherit;\n    color: inherit;\n    text-align: center;\n    font-family: inherit;\n    /* flex: 4 1 auto; */\n    border: none;\n    min-width: 0;\n    font-family: inherit;\n  }\n\n  ::placeholder { /* Chrome, Firefox, Opera, Safari 10.1+ */\n    color: var(--color-placeholder);\n  }\n\n  :-ms-input-placeholder { /* Internet Explorer 10-11 */\n    color: var(--color-placeholder);\n  }\n\n  ::-webkit-input-placeholder {\n     color: var(--color-placeholder);\n  }\n\n  :-moz-placeholder { /* Firefox 18- */\n     color: var(--color-placeholder);\n  }\n</style>\n<fieldset>\n  <legend><slot name=field>Field</slot></legend>\n  <input>\n</fieldset>",customElements.define("overtext-input",function(t){s(c,t);var n,r,o=(n=c,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=d(n);if(r){var i=d(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return u(this,e)});function c(){var t;i(this,c);var n=(t=o.call(this)).attachShadow({mode:"open"});return n.appendChild(e.content.cloneNode(!0)),t._input=n.querySelector("input"),t._input.addEventListener("keydown",(function(e){"Escape"!=e.key||(e.target.value="")})),t.addEventListener=t._input.addEventListener,t}return a(c,[{key:"value",get:function(){return this._input.value},set:function(e){this._input.value=e}},{key:"disabled",get:function(){return this._input.disabled},set:function(e){this._input.disabled=Boolean(e),this._input.disabled?this.setAttribute("disabled",""):this.removeAttribute("disabled")}},{key:"input",get:function(){return this._input}},{key:"focus",value:function(){this._input.focus()}},{key:"connectedCallback",value:function(){this.hasAttribute("type")&&(this._input.type=this.getAttribute("type")),this.hasAttribute("value")&&(this._input.value=this.getAttribute("value")),this.hasAttribute("placeholder")&&(this._input.placeholder=this.getAttribute("placeholder"))}}]),c}(p(HTMLElement)))}(),function(){var e=document.createElement("template");e.innerHTML='\n<style>\n    :host\n    {\n      display: inline-flex;\n      padding: 0px;\n      margin: 0px;\n      --width-switch: 50px;\n      --height-switch: 30px;\n      --gap-switch: 4px;\n      height: var(--height-switch, 30px);\n      width: var(--width-switch, 50px);\n      justify-content: center;\n      align-items: center;\n      --border: none;\n      --bg-checked: #243d42;\n      --bg-unchecked: #477a85;\n      --color-ball: #e8f5f7;\n    }\n\n    /* disabling input */\n    :host([disabled])\n    {\n      --bg-checked: rgba(40, 40, 40, 0.4);\n      --bg-unchecked: rgba(40, 40, 40, 0.3);\n      --color-ball: lightgrey;\n    }\n\n    :host([disabled]) label\n    {\n      cursor: default;\n    }\n\n    /* hide input */\n    input[type="checkbox"]\n    {\n      width: 0;\n      height: 0;\n      visibility: hidden;\n      display: none;\n    }\n    /* box */\n    label\n    {\n      width: 100%;\n      height: 100%;\n      display:block;\n      background-color: var(--bg-unchecked, #477a85);\n      border-radius: var(--height-switch);\n      border: var(--border, none);\n      position: relative;\n      cursor: pointer;\n      transition: 0.5s;\n      box-shadow: 0 0 50px #477a8550;\n    }\n    /* ball */\n    label::after\n    {\n      content: "";\n      width: calc(var(--height-switch) - var(--gap-switch));\n      height: calc(var(--height-switch) - var(--gap-switch));\n      background-color: var(--color-ball, #e8f5f7);\n      position: absolute;\n      border-radius: var(--height-switch);\n      top: calc(var(--gap-switch) / 2);\n      left: calc(var(--gap-switch) / 2);\n      transition: 0.5s;\n    }\n\n    input:checked + label:after\n    {\n      left: calc(100% - calc(var(--gap-switch) / 2));\n      transform: translateX(-100%);\n    }\n\n    input:checked + label\n    {\n      background-color: var(--bg-checked, #243d42);\n    }\n\n    label:active:after\n    {\n      width: calc(var(--height-switch) * 1.1);\n    }\n</style>\n<input type="checkbox" name="switch" id="switch">\n<label for="switch"></label>\n',customElements.define("check-switch",function(t){s(c,t);var n,r,o=(n=c,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=d(n);if(r){var i=d(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return u(this,e)});function c(){var t;i(this,c);var n=(t=o.call(this)).attachShadow({mode:"open"});return n.appendChild(e.content.cloneNode(!0)),t._input=n.querySelector("#switch"),t}return a(c,[{key:"checked",get:function(){return this._input.checked},set:function(e){this._input.checked=Boolean(e),this._input.checked?this.setAttribute("checked",""):this.removeAttribute("checked")}},{key:"disabled",get:function(){return this._input.disabled},set:function(e){this._input.disabled=Boolean(e),this._input.disabled?this.setAttribute("disabled",""):this.removeAttribute("disabled")}},{key:"input",get:function(){return this._input}},{key:"connectedCallback",value:function(){this.hasAttribute("checked")&&(this.checked=!0),this.hasAttribute("disabled")&&(this.disabled=!0)}}]),c}(p(HTMLElement)))}(),function(){var e=document.createElement("template");e.innerHTML="\n<style>\n    :host\n    {\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      position: fixed;\n      box-sizing: border-box;\n      padding: 0;\n      margin: 0;\n      width: 100%;\n      height: 100%;\n      background-color: rgba(50, 50, 50, 0.5);\n      font-size: 50%;\n      z-index: 1000;\n      overflow: hidden;\n    }\n\n    .icon{\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      width: 50%;\n      height: 50%;\n      font-size: 200px;\n      z-index: 1001;\n      color: rgb(200, 200, 200, 0.9);\n    }\n</style>\n<slot class=icon></slot>",customElements.define("load-screen",function(t){s(c,t);var n,r,o=(n=c,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=d(n);if(r){var i=d(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return u(this,e)});function c(){var t;return i(this,c),(t=o.call(this)).attachShadow({mode:"open"}).appendChild(e.content.cloneNode(!0)),t}return a(c,[{key:"connectedCallback",value:function(){}},{key:"show",value:function(){this.style.display="flex"}},{key:"hide",value:function(){this.style.display="none"}}]),c}(p(HTMLElement)))}(),function(){var e=document.createElement("template");e.innerHTML="\n<style>\n    :host\n    {\n      position: relative;\n    }\n\n    .drop-menu{\n      display: none;\n      position: absolute;\n      float: right;\n      right: 0;\n      background-color: white;\n      color: black;\n      border-radius: 5px;\n      padding: 5px;\n      outline: none;\n    }\n</style>\n<span id=drop-button><slot name=drop-button></slot></span>\n<select class=drop-menu><slot></slot></select>",customElements.define("drop-menu",function(t){s(c,t);var n,r,o=(n=c,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=d(n);if(r){var i=d(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return u(this,e)});function c(){var t;i(this,c);var n=(t=o.call(this)).attachShadow({mode:"open"});return n.appendChild(e.content.cloneNode(!0)),t._button=n.querySelector("#drop-button"),t._menu=n.querySelector(".drop-menu"),t._button.addEventListener("click",(function(e){t._menu.style.display="block"==t._menu.style.display?"none":"block"})),t}return a(c,[{key:"connectedCallback",value:function(){}},{key:"hide",value:function(){this._menu.style.display="none"}}]),c}(p(HTMLElement)))}(),function(){var e=document.createElement("template");e.innerHTML="\n<style>\n    :host\n    {\n      display: none;\n      justify-content: center;\n      align-items: center;\n      position: fixed;\n      box-sizing: border-box;\n      padding: 0;\n      margin: 0;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      background-color: rgba(50, 50, 50, 0.5);\n      z-index: 1002;\n      overflow: hidden;\n      --inner-width: auto;\n      --min-inner-width: auto;\n      --max-inner-width: 50%;\n      --inner-height: auto;\n      --min-inner-height: auto;\n      --max-inner-height: auto;\n    }\n\n    .pop-up{\n      width: var(--inner-width);\n      max-width: var(--max-inner-width);\n      min-width: var(--min-inner-width);\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      z-index: 1003;\n      height: var(--inner-height);\n      min-height: var(--min-inner-height);\n      max-height: var(--max-inner-height);\n    }\n\n    @media only screen and (max-width: 600px) {\n      :host{\n        --max-inner-width: 98%;\n      }\n    }\n</style>\n<slot class=pop-up></slot>",customElements.define("pop-modal",function(t){s(c,t);var n,r,o=(n=c,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=d(n);if(r){var i=d(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return u(this,e)});function c(){var t;return i(this,c),(t=o.call(this)).attachShadow({mode:"open"}).appendChild(e.content.cloneNode(!0)),t.addEventListener("click",(function(e){e.target==l(t)&&t.dispatchEvent(new Event("cancel"))})),t}return a(c,[{key:"connectedCallback",value:function(){this.hasAttribute("show")&&this.show()}},{key:"show",value:function(){this.style.display="flex"}},{key:"hide",value:function(){this.style.display="none"}},{key:"delete",value:function(){this.parentNode.removeChild(this)}}]),c}(p(HTMLElement)))}(),function(){var e=document.createElement("template");e.innerHTML="\n<style>\n    :host\n    {\n      width: 100%;\n      display: flex;\n      font-size: 20px;\n      align-items: center;\n    }\n\n    :host(:hover)\n    {\n        background-color: var(--primary-color);\n    }\n\n    .icon{\n      width: 7%;\n      text-align: center;\n      display: inline-block;\n    }\n\n    .text{\n      font-weight: bold;\n      width: 30%;\n      padding-left: 10px;\n      display: inline-block;\n    }\n\n    .value{\n      width: 100%;\n      text-align: center;\n      vertical-align: middle;\n      display: inline-block;\n      word-break: break-word;\n      flex-grow: 4;\n      /* shine effect */\n      position: relative;\n      overflow: hidden;\n    }\n</style>\n<slot class=icon name=icon></slot>\n<slot class=text name=name></slot>\n<slot class=value></slot>",customElements.define("detail-line",function(t){s(c,t);var n,r,o=(n=c,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=d(n);if(r){var i=d(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return u(this,e)});function c(){var t;return i(this,c),(t=o.call(this)).attachShadow({mode:"open"}).appendChild(e.content.cloneNode(!0)),t}return a(c,[{key:"connectedCallback",value:function(){}}]),c}(p(HTMLElement)))}(),function(){var e=document.createElement("template");e.innerHTML="\n<style>\n    :host\n    {\n      display: inline-flex;\n      flex-direction: column;\n      width: 100%;\n      border-radius: 15px;\n      overflow: hidden;\n    }\n\n    .title{\n      font-size: 22px;\n      text-decoration: underline;\n      width: 100%;\n      text-align: center;\n      background-color: var(--primary-color-dark);\n      padding: 5px;\n      cursor: pointer;\n    }\n\n    .content{\n      width: 100%;\n      text-align: center;\n      vertical-align: middle;\n      display: block;\n    }\n</style>\n<slot class=title name=title></slot>\n<slot class=content></slot>",customElements.define("expand-menu",function(t){s(c,t);var n,r,o=(n=c,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=d(n);if(r){var i=d(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return u(this,e)});function c(){var t;i(this,c);var n=(t=o.call(this)).attachShadow({mode:"open"});return n.appendChild(e.content.cloneNode(!0)),t._content=n.querySelector(".content"),n.querySelector(".title").addEventListener("click",(function(e){t.toggle()})),t}return a(c,[{key:"connectedCallback",value:function(){this.hasAttribute("show")?this.show():this.hasAttribute("hide")&&this.hide()}},{key:"show",value:function(){this.removeAttribute("hide"),this.setAttribute("show",""),this._content.style.display="block"}},{key:"hide",value:function(){this.removeAttribute("show"),this.setAttribute("hide",""),this._content.style.display="none"}},{key:"toggle",value:function(){"none"==this._content.style.display?this.show():this.hide()}}]),c}(p(HTMLElement)))}(),function(){var e=document.createElement("template");e.innerHTML="\n<style>\n    :host\n    {\n      display: inline-flex;\n      flex-direction: column;\n      width: 100%;\n      border-radius: 15px;\n      overflow: hidden;\n    }\n\n\n    .header{\n        display: flex;\n        /* justify-content: center;\n        align-content: center; */\n        font-size: 22px;\n        width: 100%;\n        padding: 5px;\n    }\n\n    .icon\n    {\n      width: 7%;\n    }\n\n    .title{\n      width: 100%;\n      /* text-decoration: underline; */\n      text-align: center;\n      display: inline-block;\n      /* background-color: var(--primary-color-dark); */\n      /* cursor: pointer; */\n    }\n\n    ::slotted(.div)\n    {\n      width: 100%;\n    }\n\n    .content{\n      width: 100%;\n      text-align: center;\n      vertical-align: middle;\n      display: block;\n    }\n</style>\n<div class=header>\n  <slot class=icon name=icon></slot>\n  <slot class=title name=title></slot>\n</div>\n<slot class=content></slot>",customElements.define("detail-command",function(t){s(c,t);var n,r,o=(n=c,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=d(n);if(r){var i=d(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return u(this,e)});function c(){var t;return i(this,c),(t=o.call(this)).attachShadow({mode:"open"}).appendChild(e.content.cloneNode(!0)),t}return a(c,[{key:"connectedCallback",value:function(){}}]),c}(p(HTMLElement)))}(),function(){var e=document.createElement("template");e.innerHTML="\n<style>\n  :host{\n    display: inline-flex;\n    width: 100%;\n    align-items: center;\n    border-radius: 10px;\n    overflow: hidden;\n    background-color: rgba(150, 150, 150, 0.5);\n  }\n\n  .index{\n    font-weight: bold;\n    padding: 0px 2px;\n    display: inline-block;\n    min-width: 13px;\n  }\n\n  .buttons{\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n  }\n\n  .buttons button\n  {\n    cursor: pointer;\n    width: 100%;\n    color: var(--text-color);\n    background-color: var(--primary-color-dark);\n    font-family: var(--font-family);\n    padding: 6px 3px;\n    flex-grow: 4;\n  }\n\n  :host([disabled]) .buttons button\n  {\n    pointer-events: none;\n    border-style: none;\n  }\n\n  .buttons button:hover\n  {\n     font-weight: bold;\n  }\n\n  .buttons button:active\n  {\n    transform: translateY(2px);\n  }\n\n  .result\n  {\n    display: inline-block;\n    padding: 0px 4px;\n    font-size: 20px;\n  }\n\n  .result *{\n    background-color: white;\n    border-radius: 10px;\n  }\n\n  .on{\n    color: lawngreen;\n  }\n\n  .off{\n    color: red;\n  }\n\n  :host([data-on='false']) .on\n  {\n    display: none;\n  }\n\n  :host([data-on='false']) .off\n  {\n    display: inline-block;\n  }\n\n  :host([data-on='true']) .off\n  {\n    display: none;\n  }\n\n  :host([data-on='true']) .on\n  {\n    display: inline-block;\n  }\n</style>\n<div class=index></div>\n<div class=buttons>\n  <button data-on=true>ON</button>\n  <button data-on=false>OFF</button>\n</div>\n<div class=result data-on=false>\n  <slot class=on name=on></slot>\n  <slot class=off name=off></slot>\n</div>",customElements.define("btn-on-off",function(t){s(c,t);var n,r,o=(n=c,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=d(n);if(r){var i=d(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return u(this,e)});function c(){var t;i(this,c);var n=(t=o.call(this)).attachShadow({mode:"open"});return n.appendChild(e.content.cloneNode(!0)),t._buttons=n.querySelector(".buttons"),t._index=+t.dataset.index,t.state=!1,n.querySelector(".index").textContent=t._index,t._buttons.addEventListener("click",(function(e){t.dispatchEvent(new CustomEvent("command",{bubbles:!0,detail:{type:"ac_load",index:t._index,on:e.target.dataset.on}}))})),t}return a(c,[{key:"connectedCallback",value:function(){}},{key:"state",set:function(e){this.dataset.on=Boolean(e)}},{key:"disabled",get:function(){return this.hasAttribute("disabled")},set:function(e){e?this.setAttribute("disabled",""):this.removeAttribute("disabled")}}]),c}(p(HTMLElement)))}(),function(){var e=document.createElement("template");e.innerHTML="\n<style>\n  :host{\n    display: inline-flex;\n    width: 100%;\n    border-radius: 10px;\n    overflow: hidden;\n    height: 100%;\n  }\n</style>\n<slot></slot>",customElements.define("array-command",function(t){s(c,t);var n,r,o=(n=c,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=d(n);if(r){var i=d(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return u(this,e)});function c(){var t;return i(this,c),(t=o.call(this)).attachShadow({mode:"open"}).appendChild(e.content.cloneNode(!0)),t.addEventListener("click",(function(e){"index"in e.target.dataset&&t.dispatchEvent(new CustomEvent("command",{bubbles:!0,detail:{type:t.dataset.type,index:e.target.dataset.index}}))})),t}return a(c,[{key:"connectedCallback",value:function(){}}]),c}(p(HTMLElement)))}();var b=function(){function e(){i(this,e)}return a(e,null,[{key:"to",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=re.raw(t),r=n.hasOwnProperty("prefix")?n.prefix:"\\x",a=n.hasOwnProperty("suffix")?n.suffix:"";n.pad_size=n.hasOwnProperty("pad_size")?n.pad_size:2,n.pad_char=n.hasOwnProperty("pad_char")?n.pad_char:"0";var o="";return i.forEach((function(t){o+=e.is_ascii_int(t)?String.fromCharCode(t):r+re._set_data_opt(re.to_hex_string(t),n)+a})),o}},{key:"from",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};console.assert("string"==typeof e,"Argument must be a string");var n=y(y({},{escaped_string:!0}),t),i=[];if(n.escaped_string)i=ie(e);else{i=[];for(var r=0,a=e.length;r<a;r++)i.push(e.charCodeAt(r))}return i}},{key:"is_ascii_int",value:function(e){return e>=32&&e<126}},{key:"is_printable",value:function(e){return e>=" "&&e<"~"}},{key:"is_ascii_char",value:function(e){return 1===e.length}},{key:"is_ascii_string",value:function(t){for(var n=0,i=t.length;n<i;n++)if(!e.is_ascii_char(t[n]))return!1;return!0}},{key:"clear_no_digit_char",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t=y(y({},{allowed:" "}),t),e.replace(new RegExp("[^0-9".concat(t.allowed,"]"),"g"),"")}},{key:"num_bytes",value:function(){return 1}}]),e}();function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var k=function(){function e(){i(this,e)}return a(e,null,[{key:"to",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=x(x({},{sep:" ",aggregate:2,pad_size:2,pad_char:"0"}),n),re._set_arr_option(e.to_arr(t,n),n)}},{key:"to_arr",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=re.raw(e);t=x(x({},{sep:" ",aggregate:2,pad_size:2,pad_char:"0"}),t);var i=[];return n.forEach((function(e){i.push(re._set_data_opt(re.to_hex_string(e,t.uppercase),t))})),i}},{key:"from",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};console.assert("string"==typeof t,"Argument must be a string");var i=x(x({},{separator:" ",padding:!0}),n);if(t=re._separator(t,i.separator,e.clear_no_hex_char,""),!e.is_hex_string(t))throw new ne(Q.INVALID_CHAR,t);if(!i.padding&&t.length%2)throw new ne(Q.INVALID_SIZE,t.length%2);var r=t.match(/[\da-fA-F]{1,2}/gi).map((function(e){return parseInt(e,16)}));return r}},{key:"clear_no_hex_char",value:function(e){return e.replace(/[^0-9a-f]/gi,"")}},{key:"is_hex_char",value:function(e){return e>="0"&&e<="9"||e>="a"&&e<="f"||e>="A"&&e<="F"}},{key:"is_hex_string",value:function(t){for(var n=0,i=t.length;n<i;n++)if(!e.is_hex_char(t[n]))return!1;return!0}},{key:"num_bytes",value:function(){return 1}}]),e}();function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var O=function(){function e(){i(this,e)}return a(e,null,[{key:"to",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=S(S({},{sep:" ",aggregate:0,pad_size:8,pad_char:"0"}),n),re._set_arr_option(e.to_arr(t,n),n)}},{key:"to_arr",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=re.raw(t);n=S(S({},{sep:" ",aggregate:0,pad_size:8,pad_char:"0"}),n);var r=[];return i.forEach((function(t){r.push(re._set_data_opt(e.to_binary_string(t),n))})),r}},{key:"from",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};console.assert("string"==typeof t,"Argument must be a string");var i=S(S({},{separator:" ",padding:!0}),n);if(t=re._separator(t,i.separator,e.clear_no_binary_char,""),!e.is_binary_string(t))throw new ne(Q.INVALID_CHAR,t);if(!i.padding&&t.length%8)throw new ne(Q.INVALID_SIZE,t.length%8);var r=t.match(/[01]{1,8}/gi).map((function(e){return parseInt(e,2)}));return r}},{key:"to_binary_string",value:function(e){if(!("number"==typeof e&&e>=0&&e<=255))throw new ne(Q.WRONG_ARGUMENT,e);return e.toString(2)}},{key:"clear_no_binary_char",value:function(e){return e.replace(/[^01]/g,"")}},{key:"is_binary_char",value:function(e){return"1"===e||"0"===e}},{key:"is_binary_string",value:function(t){for(var n=0,i=t.length;n<i;n++)if(!e.is_binary_char(t[n]))return!1;return!0}},{key:"num_bytes",value:function(){return 1}}]),e}();function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var C=function(){function e(){i(this,e)}return a(e,null,[{key:"to",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=A(A({},{sep:" ",aggregate:0,pad_size:0,pad_char:" "}),n),re._set_arr_option(e.to_arr(t,n),n)}},{key:"to_arr",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=re.raw(e);t=A(A({},{sep:" ",aggregate:0,pad_size:0,pad_char:" "}),t);var i=[],r=new Int8Array(n);return r.forEach((function(e){i.push(re._set_data_opt(e,t))})),i}},{key:"from",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};console.assert("string"==typeof t,"Argument must be a string");var i=A(A({},{separator:" "}),n);if(t=re._separator(t,i.separator,null," "),void 0!==i.separator&&re.invalid_number_char(t))throw new ne(Q.INVALID_CHAR,t);var r=t.match(/[+-]{0,1}[0-9]+/gi);if(!r)throw new ne(Q.WRONG_ARGUMENT,t);if(r=r.map((function(e){return parseInt(e,10)})),!e.is_int8_array(r))throw new ne(Q.OUT_OF_BOUND,r);var a=[],o=new Uint8Array(r);return o.forEach((function(e){return a.push(e)})),a}},{key:"is_int8_num",value:function(e){return e>=-128&&e<=127}},{key:"is_int8_array",value:function(t){return t.every((function(t){return e.is_int8_num(t)}))}},{key:"num_bytes",value:function(){return 1}}]),e}();function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var q=function(){function e(){i(this,e)}return a(e,null,[{key:"to",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=P(P({},{sep:" ",aggregate:0,pad_size:0,pad_char:" "}),n),re._set_arr_option(e.to_arr(t,n),n)}},{key:"to_arr",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=re.raw(e);t=P(P({},{sep:" ",aggregate:0,pad_size:0,pad_char:" "}),t);var i=[],r=new Uint8Array(n);return r.forEach((function(e){i.push(re._set_data_opt(e,t))})),i}},{key:"from",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};console.assert("string"==typeof t,"Argument must be a string");var i=P(P({},{separator:" "}),n);if(t=re._separator(t,i.separator,null," "),void 0!==i.separator&&re.invalid_number_char(t))throw new ne(Q.INVALID_CHAR,t);var r=t.match(/[+-]{0,1}[0-9]+/gi);if(!r)throw new ne(Q.WRONG_ARGUMENT,t);if(r=r.map((function(e){return parseInt(e,10)})),!e.is_uint8_array(r))throw new ne(Q.OUT_OF_BOUND,r);return r}},{key:"is_uint8_num",value:function(e){return e>=0&&e<=255}},{key:"is_uint8_array",value:function(t){return t.every((function(t){return e.is_uint8_num(t)}))}},{key:"num_bytes",value:function(){return 1}}]),e}();function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var N=function(){function e(){i(this,e)}return a(e,null,[{key:"to",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return i=D(D({},{sep:" ",aggregate:0,pad_size:0,pad_char:" "}),i),re._set_arr_option(e.to_arr(t,n,i),i)}},{key:"to_arr",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=re.raw(e);n=D(D({},{padding:!0,sep:" ",aggregate:0,pad_size:0,pad_char:" "}),n);var r=[],a=new DataView(new Uint8Array(i).buffer),o=a.byteLength%2;if(!n.padding&&o)throw new ne(Q.INVALID_SIZE,o);for(var s=a.byteLength/2-o,c=0;c<s;c++)r.push(re._set_data_opt(a.getInt16(2*c,t),n));if(o){var l=new ArrayBuffer(2),u=new Uint8Array(l);u.set(i.slice(-o),2-o),r.push(re._set_data_opt(new DataView(u.buffer).getInt16(0,t),n))}return r}},{key:"from",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};console.assert("string"==typeof t,"Argument must be a string");var r=D(D({},{separator:" "}),i);if(t=re._separator(t,r.separator,null," "),void 0!==r.separator&&re.invalid_number_char(t))throw new ne(Q.INVALID_CHAR,t);var a=t.match(/[+-]{0,1}[0-9]+/gi);if(!a)throw new ne(Q.WRONG_ARGUMENT,t);if(a=a.map((function(e){return parseInt(e,10)})),!e.is_int16_array(a))throw new ne(Q.OUT_OF_BOUND,a);var o=new ArrayBuffer(2*a.length),s=new DataView(o);a.forEach((function(e,t){s.setInt16(2*t,e,n)}));var c=new Uint8Array(o),l=[];return c.forEach((function(e){return l.push(e)})),l}},{key:"is_int16_array",value:function(t){return t.every((function(t){return e.is_int16_num(t)}))}},{key:"is_int16_num",value:function(e){return e>=-32768&&e<=32767}},{key:"num_bytes_int16",value:function(){return 2}}]),e}();function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var U=function(){function e(){i(this,e)}return a(e,null,[{key:"to",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return i=R(R({},{sep:" ",aggregate:0,pad_size:0,pad_char:" "}),i),re._set_arr_option(e.to_arr(t,n,i),i)}},{key:"to_arr",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=re.raw(e);n=R(R({},{padding:!0,sep:" ",aggregate:0,pad_size:0,pad_char:" "}),n);var r=[],a=new DataView(new Uint8Array(i).buffer),o=a.byteLength%2;if(!n.padding&&o)throw new ne(Q.INVALID_SIZE,o);for(var s=a.byteLength/2-o,c=0;c<s;c++)r.push(re._set_data_opt(a.getUint16(2*c,t),n));if(o){var l=new ArrayBuffer(2),u=new Uint8Array(l);u.set(i.slice(-o),2-o),r.push(re._set_data_opt(new DataView(u.buffer).getInt16(0,t),n))}return r}},{key:"from",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=R(R({},{separator:" "}),i);if(t=re._separator(t,r.separator,null," "),void 0!==r.separator&&re.invalid_number_char(t))throw new ne(Q.INVALID_CHAR,t);var a=t.match(/[+-]{0,1}[0-9]+/gi);if(!a)throw new ne(Q.WRONG_ARGUMENT,t);if(a=a.map((function(e){return parseInt(e,10)})),!e.is_uint16_array(a))throw new ne(Q.OUT_OF_BOUND,a);var o=new ArrayBuffer(2*a.length),s=new DataView(o);a.forEach((function(e,t){s.setUint16(2*t,e,n)}));var c=new Uint8Array(o),l=[];return c.forEach((function(e){return l.push(e)})),l}},{key:"is_uint16_num",value:function(e){return e>=0&&e<=65535}},{key:"is_uint16_array",value:function(t){return t.every((function(t){return e.is_uint16_num(t)}))}},{key:"num_bytes",value:function(){return 2}}]),e}();function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Z=function(){function e(){i(this,e)}return a(e,null,[{key:"to",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return i=z(z({},{sep:" ",aggregate:0,pad_size:0,pad_char:" "}),i),re._set_arr_option(e.to_arr(t,n,i),i)}},{key:"to_arr",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=re.raw(e);n=z(z({},{padding:!0,sep:" ",aggregate:0,pad_size:0,pad_char:" "}),n);var r=[],a=new DataView(new Uint8Array(i).buffer),o=a.byteLength%4;if(!n.padding&&o)throw new ne(Q.INVALID_SIZE,o);for(var s=a.byteLength/4-o,c=0;c<s;c++)r.push(re._set_data_opt(a.getInt32(4*c,t),n));if(o){var l=new ArrayBuffer(4),u=new Uint8Array(l);u.set(i.slice(-o),4-o),r.push(re._set_data_opt(new DataView(u.buffer).getInt32(0,t),n))}return r}},{key:"from",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};console.assert("string"==typeof t,"Argument must be a string");var r=z(z({},{separator:" "}),i);if(t=re._separator(t,r.separator,null," "),void 0!==r.separator&&re.invalid_number_char(t))throw new ne(Q.INVALID_CHAR,t);var a=t.match(/[+-]{0,1}[0-9]+/gi);if(!a)throw new ne(Q.WRONG_ARGUMENT,t);if(a=a.map((function(e){return parseInt(e,10)})),!e.is_int32_array(a))throw new ne(Q.OUT_OF_BOUND,a);var o=new ArrayBuffer(4*a.length),s=new DataView(o);a.forEach((function(e,t){s.setInt32(4*t,e,n)}));var c=new Uint8Array(o),l=[];return c.forEach((function(e){return l.push(e)})),l}},{key:"is_int32_num",value:function(e){return e>=-2147483648&&e<=2147483647}},{key:"is_int32_array",value:function(t){return t.every((function(t){return e.is_int32_num(t)}))}},{key:"num_bytes_int32",value:function(){return 4}}]),e}();function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Y=function(){function e(){i(this,e)}return a(e,null,[{key:"to",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return i=B(B({},{sep:" ",aggregate:0,pad_size:0,pad_char:" "}),i),re._set_arr_option(e.to_arr(t,n,i),i)}},{key:"to_arr",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=re.raw(e);n=B(B({},{padding:!0,sep:" ",aggregate:0,pad_size:0,pad_char:" "}),n);var r=[],a=new DataView(new Uint8Array(i).buffer),o=a.byteLength%4;if(!n.padding&&o)throw new ne(Q.INVALID_SIZE,o);for(var s=a.byteLength/4-o,c=0;c<s;c++)r.push(re._set_data_opt(a.getUint32(4*c,t),n));if(o){var l=new ArrayBuffer(4),u=new Uint8Array(l);u.set(i.slice(-o),4-o),r.push(re._set_data_opt(new DataView(u.buffer).getUint32(0,t),n))}return r}},{key:"from",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};console.assert("string"==typeof t,"Argument must be a string");var r=B(B({},{separator:" "}),i);if(t=re._separator(t,r.separator,null," "),void 0!==r.separator&&re.invalid_number_char(t))throw new ne(Q.INVALID_CHAR,t);var a=t.match(/[+-]{0,1}[0-9]+/gi);if(!a)throw new ne(Q.WRONG_ARGUMENT,t);if(a=a.map((function(e){return parseInt(e,10)})),!e.is_uint32_array(a))throw new ne(Q.OUT_OF_BOUND,a);var o=new ArrayBuffer(4*a.length),s=new DataView(o);a.forEach((function(e,t){s.setUint32(4*t,e,n)}));var c=new Uint8Array(o),l=[];return c.forEach((function(e){return l.push(e)})),l}},{key:"is_uint32_num",value:function(e){return e>=0&&e<=4294967295}},{key:"is_uint32_array",value:function(t){return t.every((function(t){return e.is_uint32_num(t)}))}},{key:"num_bytes",value:function(){return 4}}]),e}();function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function V(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var G=function(){function e(){i(this,e)}return a(e,null,[{key:"to",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return i=V(V({},{sep:" ",aggregate:0,pad_size:0,pad_char:" "}),i),re._set_arr_option(e.to_arr(t,n,i),i)}},{key:"to_arr",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=re.raw(e);n=V(V({},{padding:!0,sep:" ",aggregate:0,pad_size:0,pad_char:" "}),n);var r=[],a=new DataView(new Uint8Array(i).buffer),o=a.byteLength%8;if(!n.padding&&o)throw new ne(Q.INVALID_SIZE,o);for(var s=a.byteLength/8-o,c=0;c<s;c++)r.push(re._set_data_opt(a.getBigInt64(8*c,t),n));if(o){var l=new ArrayBuffer(8),u=new Uint8Array(l);u.set(i.slice(-o),8-o),r.push(re._set_data_opt(new DataView(u.buffer).getBigInt64(0,t),n))}return r}},{key:"from",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};console.assert("string"==typeof t,"Argument must be a string");var r=V(V({},{separator:" "}),i);if(t=re._separator(t,r.separator,null," "),void 0!==r.separator&&re.invalid_number_char(t))throw new ne(Q.INVALID_CHAR,t);var a=t.match(/[-+]{0,1}[0-9]+/gi);if(!a)throw new ne(Q.WRONG_ARGUMENT,t);if(a=a.map((function(e){return parseInt(e,10)})),!e.is_int64_array(a))throw new ne(Q.OUT_OF_BOUND,a);var o=new ArrayBuffer(8*a.length),s=new DataView(o);a.forEach((function(e,t){s.setBigInt64(8*t,BigInt(e),n)}));var c=new Uint8Array(o),l=[];return c.forEach((function(e){return l.push(e)})),l}},{key:"is_int64_num",value:function(e){return e>=-0x8000000000000000&&e<=0x8000000000000000}},{key:"is_int64_array",value:function(t){return t.every((function(t){return e.is_int64_num(t)}))}},{key:"num_bytes_int64",value:function(){return 8}}]),e}();function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function X(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var K=function(){function e(){i(this,e)}return a(e,null,[{key:"to",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return i=X(X({},{sep:" ",aggregate:0,pad_size:0,pad_char:" "}),i),re._set_arr_option(e.to_arr(t,n,i),i)}},{key:"to_arr",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=re.raw(e);n=X(X({},{padding:!0,sep:" ",aggregate:0,pad_size:0,pad_char:" "}),n);var r=[],a=new DataView(new Uint8Array(i).buffer),o=a.byteLength%8;if(!n.padding&&o)throw new ne(Q.INVALID_SIZE,o);for(var s=a.byteLength/8-o,c=0;c<s;c++)r.push(re._set_data_opt(a.getBigUint64(8*c,t),n));if(o){var l=new ArrayBuffer(8),u=new Uint8Array(l);u.set(i.slice(-o),8-o),r.push(re._set_data_opt(new DataView(u.buffer).getBigUint64(0,t),n))}return r}},{key:"from",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};console.assert("string"==typeof t,"Argument must be a string");var r=X(X({},{separator:" "}),i);if(t=re._separator(t,r.separator,null," "),void 0!==r.separator&&re.invalid_number_char(t))throw new ne(Q.INVALID_CHAR,t);var a=t.match(/[-+]{0,1}[0-9]+/gi);if(!a)throw new ne(Q.WRONG_ARGUMENT,t);if(a=a.map((function(e){return parseInt(e,10)})),!e.is_uint64_array(a))throw new ne(Q.OUT_OF_BOUND,a);var o=new ArrayBuffer(8*a.length),s=new DataView(o);a.forEach((function(e,t){s.setBigUint64(8*t,BigInt(e),n)}));var c=new Uint8Array(o),l=[];return c.forEach((function(e){return l.push(e)})),l}},{key:"is_uint64_num",value:function(e){return e>=0&&e<=0x10000000000000000}},{key:"is_uint64_array",value:function(t){return t.every((function(t){return e.is_uint64_num(t)}))}},{key:"num_bytes_uint64",value:function(){return 8}}]),e}(),J={text:{value:"text",name:"Text",long_name:"Text",to:b.to,to_arr:b.to,from:b.from,num_bytes:b.num_bytes,is_valid_char:b.is_ascii_char,clear_invalid_char:function(e){return e}},hex:{value:"hex",name:"Hexa",long_name:"Hexadecimal",to:k.to,to_arr:k.to_arr,from:k.from,num_bytes:k.num_bytes,is_valid_char:k.is_hex_char,clear_invalid_char:k.clear_no_hex_char},binary:{value:"binary",name:"Binary",long_name:"Binary",to:O.to,to_arr:O.to_arr,from:O.from,num_bytes:O.num_bytes,is_valid_char:O.is_binary_char,clear_invalid_char:O.clear_no_binary_char},int8:{value:"int8",name:"Interger8",long_name:"Interger8",to:C.to,to_arr:C.to_arr,from:C.from,num_bytes:C.num_bytes,is_valid_char:C.is_digit_char,clear_invalid_char:O.clear_no_digit_char},uint8:{value:"uint8",name:"UInterger8",long_name:"Unsigned Interger8",to:q.to,to_arr:q.to_arr,from:q.from,num_bytes:q.num_bytes,is_valid_char:q.is_digit_char,clear_invalid_char:q.clear_no_digit_char},int16le:{value:"int16le",name:"Interger16LE",long_name:"Interger16 little endian",to:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return N.to(e,!0,t)},to_arr:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return N.to_arr(e,!0,t)},from:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return N.from(e,!0,t)},num_bytes:N.num_bytes,is_valid_char:N.is_digit_char,clear_invalid_char:N.clear_no_digit_char},int16be:{value:"int16be",name:"Interger16BE",long_name:"Interger16 big endian",to:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return N.to(e,!1,t)},to_arr:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return N.to_arr(e,!1,t)},from:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return N.from(e,!1,t)},num_bytes:N.num_bytes,is_valid_char:N.is_digit_char,clear_invalid_char:N.clear_no_digit_char},uint16le:{value:"uint16le",name:"UInterger16LE",long_name:"Unsigned Interger16 little endian",to:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return U.to(e,!0,t)},to_arr:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return U.to_arr(e,!0,t)},from:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return U.from(e,!0,t)},num_bytes:U.num_bytes,is_valid_char:U.is_digit_char,clear_invalid_char:U.clear_no_digit_char},uint16be:{value:"uint16be",name:"UInterger16BE",long_name:"Unsigned Interger16 big endian",to:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return U.to(e,!1,t)},to_arr:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return U.to_arr(e,!1,t)},from:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return U.from(e,!1,t)},num_bytes:U.num_bytes,is_valid_char:U.is_digit_char,clear_invalid_char:U.clear_no_digit_char},int32le:{value:"int32le",name:"Interger32LE",long_name:"Interger32 little endian",to:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Z.to(e,!0,t)},to_arr:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Z.to_arr(e,!0,t)},from:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Z.from(e,!0,t)},num_bytes:Z.num_bytes,is_valid_char:Z.is_digit_char,clear_invalid_char:Z.clear_no_digit_char},int32be:{value:"int32be",name:"Interger32BE",long_name:"Interger32 big endian",to:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Z.to(e,!1,t)},to_arr:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Z.to_arr(e,!1,t)},from:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Z.from(e,!1,t)},num_bytes:Z.num_bytes,is_valid_char:Z.is_digit_char,clear_invalid_char:Z.clear_no_digit_char},uint32le:{value:"uint32le",name:"UInterger32LE",long_name:"Unsigned Interger32 little endian",to:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Y.to(e,!0,t)},to_arr:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Y.to_arr(e,!0,t)},from:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Y.from(e,!0,t)},num_bytes:Y.num_bytes,is_valid_char:Y.is_digit_char,clear_invalid_char:Y.clear_no_digit_char},uint32be:{value:"uint32be",name:"UInterger32BE",long_name:"Unsigned Interger32 big endian",to:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Y.to(e,!1,t)},to_arr:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Y.to_arr(e,!1,t)},from:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Y.from(e,!1,t)},num_bytes:Y.num_bytes,is_valid_char:Y.is_digit_char,clear_invalid_char:Y.clear_no_digit_char},int64le:{value:"int64le",name:"Interger64LE",long_name:"Interger64 little endian",to:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return G.to(e,!0,t)},to_arr:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return G.to_arr(e,!0,t)},from:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return G.from(e,!0,t)},num_bytes:G.num_bytes,is_valid_char:G.is_digit_char,clear_invalid_char:G.clear_no_digit_char},int64be:{value:"int64be",name:"Interger64BE",long_name:"Interger64 big endian",to:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return G.to(e,!1,t)},to_arr:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return G.to_arr(e,!1,t)},from:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return G.from(e,!1,t)},num_bytes:G.num_bytes,is_valid_char:G.is_digit_char,clear_invalid_char:G.clear_no_digit_char},uint64le:{value:"uint64le",name:"UInterger64LE",long_name:"UInterger64 little endian",to:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return K.to(e,!0,t)},to_arr:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return K.to_arr(e,!0,t)},from:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return K.from(e,!0,t)},num_bytes:K.num_bytes,is_valid_char:K.is_digit_char,clear_invalid_char:K.clear_no_digit_char},uint64be:{value:"uint64be",name:"UInterger64BE",long_name:"UInterger64 big endian",to:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return K.to(e,!1,t)},to_arr:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return K.to_arr(e,!1,t)},from:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return K.from(e,!1,t)},num_bytes:K.num_bytes,is_valid_char:K.is_digit_char,clear_invalid_char:K.clear_no_digit_char}};Object.freeze(J);var $={0:{value:"0",hex:0,name:"Null"},a:{value:"a",hex:7,name:"Alert"},b:{value:"b",hex:8,name:"Backspace"},e:{value:"e",hex:27,name:"Escape"},f:{value:"f",hex:12,name:"Formfeed"},n:{value:"n",hex:10,name:"Newline"},r:{value:"r",hex:13,name:"Carriage Return"},t:{value:"t",hex:9,name:"Horizontal Tab"},v:{value:"v",hex:11,name:"Vertical Tab"},"\\":{value:"\\",hex:92,name:"Backslash"}},Q={UNKNOW_TYPE:{code:1,message:"Unknow type"},OUT_OF_BOUND:{code:2,message:"Value out of bound"},WRONG_ARGUMENT:{code:3,message:"Wrong argument"},INVALID_CHAR:{code:4,message:"Invalid character"},INVALID_SIZE:{code:5,message:"Invalid size to type"}};function ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ne=function(e){s(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=d(t);if(n){var r=d(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return u(this,e)});function o(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return i(this,o),(t=r.call(this,e.message))._code=e.code,t._arg=n,t}return a(o,[{key:"code",get:function(){return this._code}},{key:"arg",get:function(){return this._arg}}]),o}(p(Error));function ie(e){return console.assert("string"==typeof e,"Wrong argument"),e.match(/\\x[0-9a-f]{1,2}|\\[0abefnrtv\\]|.{1}|\n/gi).map((function(e){return 1===e.length?e.charCodeAt(0):(e=e.slice(1))in $?$[e].hex:parseInt(e.slice(1),16)}))}var re=function(){function e(){i(this,e)}return a(e,null,[{key:"raw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=[];return null!=t&&(t instanceof Array||t instanceof Uint8Array)&&e.is_uint8_array(t)&&(n=t instanceof Array?Object.assign([],t):Array.from(t)),n}},{key:"_set_arr_option",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.hasOwnProperty("sep")?t.sep:" ",i=t.hasOwnProperty("aggregate")?t.aggregate:0,r="";return e.forEach((function(e,t){i>1&&t%i!=0||0!=t&&(r+=n),r+=e})),r}},{key:"_set_data_opt",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=""+e;var n=t.hasOwnProperty("pad_size")?t.pad_size:0,i=t.hasOwnProperty("pad_char")?t.pad_char:"0";return e.padStart(n,i)}},{key:"_separator",value:function(e,t,n,i){if(null===t)return e;if(void 0===t)return n?n(e):e;if(t){if(t instanceof RegExp)return e.replace(t,"");if("string"==typeof t)return e.replace(new RegExp("[".concat(t,"]"),"g"),i);throw new ne(Q.WRONG_ARGUMENT,t)}return e}},{key:"invalid_number_char",value:function(e){return/[^\+\-0-9 ]+/.test(e)}},{key:"to_hex_string",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!("number"==typeof e&&e>=0&&e<=255))throw new ne(Q.WRONG_ARGUMENT,e);return t?e.toString(16).toUpperCase():e.toString(16).toLowerCase()}},{key:"is_uint8_num",value:function(e){return e>=0&&e<=255}},{key:"is_uint8_array",value:function(t){return t.every((function(t){return e.is_uint8_num(t)}))}},{key:"clear_no_digit_char",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t=te(te({},{allowed:" "}),t),e.replace(new RegExp("[^0-9".concat(t.allowed,"]"),"g"),"")}}]),e}(),ae=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};i(this,e),this._container=[],null===n?this.raw(t):this.from(t,n,r)}return a(e,[{key:"from",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:J.text.value,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!(t in J))throw new ne(Q.UNKNOW_TYPE,t);if("number"==typeof e&&(e="".concat(e)),"string"!=typeof e)throw new ne(Q.WRONG_ARGUMENT,e);return""===e?(this._container=[],""):(this._container=J[t].from(e,n),J[t].from(e,n))}},{key:"to",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(e in J))throw new ne(Q.UNKNOW_TYPE,e);return J[e].to(this._container,t)}},{key:"to_arr",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(e in J))throw new ne(Q.UNKNOW_TYPE,e);return J[e].to_arr(this._container,t)}},{key:"size",value:function(){return this._container.length}},{key:"raw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null!==t&&(this._container=e.raw(t)),Object.assign([],this._container)}},{key:"is_ascii_string",value:function(){return this._container.every((function(e){return b.is_ascii_int(e)}))}},{key:"raw_str",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.uint8(e)}},{key:"string",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return b.to(this._container,e)}},{key:"string_to_array",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._container=b.from(e,t),this._container}},{key:"hex",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return k.to(this._container,e)}},{key:"hex_arr",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return k.to_arr(this._container,e)}},{key:"string_hex_to_array",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._container=k.from(e,t),this._container}},{key:"binary",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return O.to(this._container,e)}},{key:"binary_arr",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return O.to_arr(this._container,e)}},{key:"string_binary_to_array",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._container=O.from(e,t),this._container}},{key:"int8",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return C.to(this._container,e)}},{key:"int8_arr",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return C.to_arr(this._container,e)}},{key:"string_int8_to_array",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._container=C.from(e,t),this._container}},{key:"uint8",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return q.to(this._container,e)}},{key:"uint8_arr",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return q.to_arr(this._container,e)}},{key:"string_uint8_to_array",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._container=q.from(e,t),this._container}},{key:"int16",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return N.to(this._container,e,t)}},{key:"int16_arr",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return N.to_arr(this._container,e,t)}},{key:"string_int16_to_array",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._container=N.from(e,t,n),this._container}},{key:"uint16",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return U.to(this._container,e,t)}},{key:"uint16_arr",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return U.to_arr(this._container,e,t)}},{key:"string_uint16_to_array",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._container=U.from(e,t,n),this._container}},{key:"int32",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Z.to(this._container,e,t)}},{key:"int32_arr",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Z.to_arr(this._container,e,t)}},{key:"string_int32_to_array",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._container=Z.from(e,t,n),this._container}},{key:"uint32",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Y.to(this._container,e,t)}},{key:"uint32_arr",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Y.to_arr(this._container,e,t)}},{key:"string_uint32_to_array",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._container=Y.from(e,t,n),this._container}},{key:"int64",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return G.to(this._container,e,t)}},{key:"int64_arr",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return G.to_arr(this._container,e,t)}},{key:"string_int64_to_array",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._container=G.from(e,t,n),this._container}},{key:"uint64",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return K.to(this._container,e,t)}},{key:"uint64_arr",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return K.to_arr(this._container,e,t)}},{key:"string_uint64_to_array",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._container=K.from(e,t,n),this._container}}],[{key:"to",value:function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!(n in J))throw new ne(Q.UNKNOW_TYPE,n);var r=e.raw(t);return J[n].to(r,i)}},{key:"parse",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!(t in J))throw new ne(Q.UNKNOW_TYPE,t);if("number"==typeof e&&(e="".concat(e)),"string"!=typeof e)throw new ne(Q.WRONG_ARGUMENT,e);return""===e?[]:J[t].from(e,n)}},{key:"num_bytes",value:function(e){if(!(e in J))throw new ne(Q.UNKNOW_TYPE,e);return J[e].num_bytes()}},{key:"is_valid_char",value:function(e,t){if(!(t in J))throw new ne(Q.UNKNOW_TYPE,t);return J[t].is_valid_char(e)}},{key:"clear_invalid_char",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!(t in J))throw new ne(Q.UNKNOW_TYPE,t);return J[t].clear_invalid_char(e,n)}},{key:"convert",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!(t in J)||!(n in J))throw new ne(Q.UNKNOW_TYPE,[t,n]);var r=J[t].from(e,i);return J[n].to(r,i)}},{key:"raw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return re.raw(e)}},{key:"is_ascii_char",value:function(e){return b.is_ascii_char(e)}},{key:"is_printable",value:function(e){return b.is_printable(e)}}]),e}();function oe(e){document.querySelector("meta[name=theme-color]").setAttribute("content",e)}!function(){var e=document.createElement("template");e.innerHTML="\n<style>\n  :host{\n    display: inline-flex;\n    width: 100%;\n    border-radius: 10px;\n    overflow: hidden;\n    border: 1px solid black;\n  }\n\n  textarea{\n    color: var(--text-color);\n    background-color: var(--primary-color);\n    font-family: var(--font-family);\n    resize: none;\n    outline: none;\n    flex-grow: 4;\n    padding: 5px;\n  }\n\n  .data-type {\n    display: flex;\n    flex-direction: column;\n  }\n\n  button\n  {\n    cursor: pointer;\n    color: var(--text-color);\n    background-color: var(--primary-color-dark);\n    font-family: var(--font-family);\n    padding: 6px 6px;\n    overflow: hidden;\n  }\n\n  button[data-selected='true']{\n    border-style: inset;\n  }\n</style>\n<textarea cols=4 placeholder=Payload></textarea>\n<div class=data-type>\n  <button value=text>Text</button>\n  <button value=hex>Hex</button>\n</div>",customElements.define("binary-data",function(t){s(c,t);var n,r,o=(n=c,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=d(n);if(r){var i=d(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return u(this,e)});function c(){var t;i(this,c);var n=(t=o.call(this)).attachShadow({mode:"open"});return n.appendChild(e.content.cloneNode(!0)),t._payload=n.querySelector("textarea"),t._text=n.querySelector("button[value=text]"),t._hex=n.querySelector("button[value=hex]"),n.querySelector(".data-type").addEventListener("click",(function(e){t._payload.focus(),t[e.target.value]()})),t.text(),t._payload.addEventListener("keydown",(function(e){1!=e.key.length||ae.is_valid_char(e.key,t._format)||e.preventDefault()})),t}return a(c,[{key:"connectedCallback",value:function(){this.hasAttribute("readonly")&&this._payload.setAttribute("readonly","")}},{key:"text",value:function(){"text"!=this._format&&(this._text.dataset.selected="true",this._hex.dataset.selected="false",this._format="text",this._payload.value.length&&(this._payload.value=ae.convert(this._payload.value,"hex","text")))}},{key:"hex",value:function(){"hex"!=this._format&&(this._text.dataset.selected="false",this._hex.dataset.selected="true",this._format="hex",this._payload.value.length&&(this._payload.value=ae.convert(this._payload.value,"text","hex")))}},{key:"value_string",get:function(){return this._payload.value}},{key:"value",get:function(){return ae.parse(this._payload.value,this._format)},set:function(e){this._payload.value=ae.to(e,this._format)}}]),c}(p(HTMLElement)))}(),function(){var e=document.createElement("template");e.innerHTML="\n<style>\n    :host\n    {\n      display: inline-flex;\n      font-size: 15px;\n      align-items: stretch;\n      border: 1px solid black;\n      border-radius: 4px;\n    }\n\n    .name\n    {\n      background-color: var(--primary-color-dark);\n      padding: 3px;\n      font-weight: bold;\n    }\n\n    .value\n    {\n      background-color: var(--primary-color-light);\n      padding: 3px;\n    }\n</style>\n<div class=name></div>\n<div class=value></div>",customElements.define("header-value",function(t){s(c,t);var n,r,o=(n=c,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=d(n);if(r){var i=d(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return u(this,e)});function c(){var t;i(this,c);var n=(t=o.call(this)).attachShadow({mode:"open"});return n.appendChild(e.content.cloneNode(!0)),t._name=n.querySelector(".name"),t._value=n.querySelector(".value"),t}return a(c,[{key:"connectedCallback",value:function(){this.hasAttribute("name")&&(this._name.textContent=this.getAttribute("name"))}},{key:"name",get:function(){return this._name.textContent},set:function(e){this._name.textContent=e}},{key:"value",get:function(){return this._value.textContent},set:function(e){this._value.textContent=e}}]),c}(p(HTMLElement)))}(),function(){var e=document.createElement("template");e.innerHTML="\n<style>\n    :host\n    {\n      display: flex;\n      gap: 2px;\n    }\n\n    input[type=checkbox]\n    {\n      align-self: center;\n    }\n\n    select,\n    input{\n      border-radius: 5px;\n      color: var(--text-color);\n      background-color: var(--primary-color);\n      outline: none;\n      font-family: var(--font-family);\n      font-size: 1em;\n      border-color: rgb(170, 170, 170);\n      text-align: center;\n    }\n\n    select:hover,\n    input:hover\n    {\n      border-color: white;\n    }\n\n    .value{\n      width: 7ch;\n    }\n\n    .close{\n      font-size: 1.7em;\n      cursor: pointer;\n      transform: translateY(-2px);\n    }\n\n    .close:hover{\n      font-weight: bold;\n    }\n\n    /* Chrome, Safari, Edge, Opera */\n    input::-webkit-outer-spin-button,\n    input::-webkit-inner-spin-button {\n      -webkit-appearance: none;\n      margin: 0;\n    }\n\n    /* Firefox */\n    input[type=number] {\n      -moz-appearance: textfield;\n    }\n</style>\n<input type=checkbox checked title='Enable/disable'>\n<select class=sensors></select>\n<select class=op>\n  <option value=less><</option>\n  <option value=less_equal><=</option>\n  <option value=equal>=</option>\n  <option value=greater_equal>>=</option>\n  <option value=greater>></option>\n</select>\n<input class=value type=number value=0>\n<span class=close>&times;</span>",customElements.define("sensor-notify",function(t){s(c,t);var n,r,o=(n=c,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=d(n);if(r){var i=d(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return u(this,e)});function c(){var t;return i(this,c),(t=o.call(this))._shadowRoot=t.attachShadow({mode:"open"}),t._shadowRoot.appendChild(e.content.cloneNode(!0)),t._sensors=t._shadowRoot.querySelector(".sensors"),t._shadowRoot.querySelector(".close").addEventListener("click",(function(e){t.parentNode.removeChild(l(t))})),t}return a(c,[{key:"connectedCallback",value:function(){}},{key:"value",get:function(){var e=this._shadowRoot.querySelector(".sensors").selectedOptions[0].value.split("@");return{enable:this._shadowRoot.querySelector("input[type=checkbox]").checked,sensor:{type:+e[0],index:+e[1]},operation:this._shadowRoot.querySelector(".op").selectedOptions[0].value,value:+this._shadowRoot.querySelector(".value").value}},set:function(e){this._shadowRoot.querySelector("input[type=checkbox]").checked=e.enabled,this._shadowRoot.querySelector(".sensors").value="".concat(e.sensor.type,"@").concat(e.sensor.index),this._shadowRoot.querySelector(".op").value=e.operation,this._shadowRoot.querySelector(".value").value=e.value}},{key:"add_sensor",value:function(e,t){var n=document.createElement("option");n.textContent=e,n.value=t,this._sensors.appendChild(n)}}]),c}(p(HTMLElement)))}();var se=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};i(this,e),this._template=t,this._script=n,this._options=r}return a(e,[{key:"load",value:function(){document.body.innerHTML="","title"in this._options&&(window.document.title=this._options.title),"theme-color"in this._options&&oe(this._options["theme-color"]),document.body.appendChild(this._template.content.cloneNode(!0)),this._script&&this._script.apply(this,arguments)}}]),e}(),ce=new(function(){function e(){i(this,e),this._list={},this._current=null}return a(e,[{key:"current",get:function(){this._current}},{key:"add",value:function(e,t){return"string"==typeof e&&t instanceof se&&!(e in this._list)&&(this._list[e]=t,!0)}},{key:"run",value:function(e){var t;if(!(e in this._list))return!1;for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return(t=this._list[e]).load.apply(t,i),this._current=e,!0}}]),e}());function le(){return navigator.userAgent.match(/\(([^()]*)\)/)[1]}function ue(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function de(e,t){if(e){if("string"==typeof e)return ue(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ue(e,t):void 0}}function he(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(i=n.next()).done)&&(a.push(i.value),!t||a.length!==t);o=!0);}catch(e){s=!0,r=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw r}}return a}}(e,t)||de(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var fe=document.querySelector("#template-login-session"),pe={weekday:"short",year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",hourCycle:"h24"};function _e(e,t,n){var i=t.storage,r=t.registration,a=document.querySelector("#login-load-screen");if(i||a.hide(),!n)return a.hide(),void i.erase("instance","autoconnect");i.load("instance","autoconnect",(function(t){t&&t.autoconnect?((e=new WebSocket(t.server_addr)).onopen=function(n){e.send(JSON.stringify({type:"user",command:"auth_session_id",data:{user:t.username,sessionid:t.sessionid,user_agent:le()}}))},e.onmessage=function(n){var a=JSON.parse(n.data);"user"==a.type&&"authenticate"==a.command&&a.data.authenticated&&ce.run("main",{ws:e,username:t.username,server_addr:t.server_addr,message:a,sessionid:t.sessionid,storage:i,autoconnect:!0,registration:r,policy:a.data.policy})},e.onclose=function(t){a.hide(),e=null},e.onerror=function(e){}):a.hide()}),(function(e){a.hide()}))}function ve(e,t,n){!function(e,t,n){new Promise((function(i,r){e||r(null);var a=[];e.iterate("sessions",null,"next",(function(e){return a.push(e.value),!0}),(function(){a.sort((function(e,t){return e.date.getTime()<t.date.getTime()?1:-1})),a.forEach((function(i){!function(e,t,n,i){var r=fe.content.cloneNode(!0),a=i.server_addr,o=i.username,s=document.createElement("span"),c="".concat(o,"@").concat(a);r.querySelector(".session-info").textContent=c,r.querySelector(".session-last-login").textContent=i.date.toLocaleDateString(void 0,pe);var l=r.querySelector(".session-data"),u=r.querySelector(".session-erase");l.addEventListener("click",(function(e){n.username.value=o;var t=he(a.split("://"),2),r=t[0],s=t[1];n.server.scheme=r;var c=he(s.split(":"),2),l=c[0],u=c[1];n.server.address=l,n.server.port=u,n.autoconnect.checked=i.autoconnect,n.password.value="",n.password.focus()})),u.addEventListener("click",(function(t){s.parentNode.removeChild(s),e.erase("sessions",c)})),s.appendChild(r),t.appendChild(s)}(e,t,n,i)})),i()}))}))}(e,t,n)}var me={1e3:"Normal Closure",1001:"Going Away",1002:"Protocol error",1003:"Unsupported Data",1005:"No Status Rcvd",1006:"Abnormal Closure",1007:"Invalid frame payload data",1008:"Policy Violation",1009:"Message Too Big",1010:"Mandatory Ext.",1011:"Internal Server Error",1015:"TLS handshake",4001:"Invalid value",4003:"Missing field",4005:"Internal error",4100:"User not found",4101:"User is inactive",4102:"User is suspended",4103:"User is deleted",4104:"Password not match",4105:"Session expired"};function ye(e){var t=e.storage,n=e.registration,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=null,a=document.querySelector("#username"),o=document.querySelector("#password"),s=document.querySelector("#server-addr"),c=document.querySelector("#autoconnect"),l=document.querySelector("#connect"),u=document.querySelector("#connect-label"),d=document.querySelector("#error"),h=document.querySelector("#spinner");function f(e){e.send(JSON.stringify({type:"user",command:"authenticate",data:{user:a.value,password:o.value,keep_connected:c.checked,user_agent:le()}}))}function p(e){d.textContent=e,d.style.display=e?"block":"none"}function _(){u.textContent="Connecting...",h.style.display="inline-block",l.disabled=!0}function v(){u.textContent="Connect",h.style.display="none",l.disabled=!1}ve(t,document.querySelector("#sessions"),{username:a,password:o,autoconnect:c,server:s}),_e(r,{storage:t,registration:n},i),p(),a.focus();var m=function(e){if(p(),a.value.length)if(o.value.length)if(s.address.length)if(s.port.length){var i=s.scheme+"://"+s.address+":"+s.port;try{r?f(r):r=new WebSocket(i),_(),r.onopen=function(e){u.textContent="Authenticating...",f(r)},r.onmessage=function(e){var o=JSON.parse(e.data);"user"==o.type&&"authenticate"==o.command&&o.data.authenticated&&ce.run("main",{ws:r,username:a.value,server_addr:i,message:o,sessionid:o.data.sessionid,storage:t,autoconnect:c.checked,registration:n,policy:o.data.policy})},r.onclose=function(e){v(),p("".concat(1006!=e.code&&e.code in me?me[e.code]:"Error connecting")),r=null},r.onerror=function(e){}}catch(e){console.log("catch error",e),p(e),r=null}}else p("Server port not set");else p("Server address not set");else p("Password not set");else p("Username not set")};function y(){document.querySelectorAll(".drop-menu").forEach((function(e){return e.blur()}))}a.addEventListener("keydown",(function(e){"Enter"==e.key&&m(e)})),o.addEventListener("keydown",(function(e){"Enter"==e.key&&m(e)})),l.addEventListener("click",m),document.querySelector("#menu-tool-flasher").addEventListener("click",(function(e){window.open("./tools/flasher.html"),y()}))}function ge(e){return function(e){if(Array.isArray(e))return ue(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||de(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}Object.freeze(me),function(){var e=document.createElement("template");e.innerHTML='<load-screen id=login-load-screen><i class="fas fa-spinner fa-pulse"></i></load-screen>\n<main id=login>\n  <div id=options>\n    <span class=drop-menu tabindex=0 title=Tools>\n      <span class=icon-menu><i class="fas fa-tools"></i></span>\n      <div class=drop-menu-content>\n        <p id=menu-tool-flasher>\n          <i class="fas fa-file-import"></i>\n          <span class=drop-menu-item-text title=\'User menu\'>Flasher</span>\n        </p>\n      </div>\n    </span>\n  </div>\n  <section id=container>\n    <h1>Agro Telemetry</h1>\n    <div id=input-container>\n      <x-input-icon class=login-input id=username placeholder=Username title=Username>\n        <i slot=icon class="fas fa-user"></i>\n      </x-input-icon>\n      <x-input-icon class=login-input id=password placeholder=Password title=password type=password>\n        <i slot=icon class="fas fa-key"></i>\n      </x-input-icon>\n      <x-input-server class=login-input id=server-addr>\n        <i slot=icon class="fas fa-network-wired"></i>\n      </x-input-server>\n      <label><input id=autoconnect type=checkbox> keep connected</label>\n      <button id=connect><span id=connect-label>Connect</span><span id=spinner><i class="fas fa-spinner fa-pulse"></span></i></button>\n      <div id=error></div>\n    </div>\n  </section>\n  <section id=sessions></section>\n</main>\n',ce.add("login",new se(e,ye,{title:"Agro Telemetry - Login","theme-color":"#0064c8"}))}();var be=function(){function e(t,n,r){i(this,e),this._type=t,this._command=n,this._cb=r;for(var a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];this._args=o}return a(e,[{key:"run",value:function(e){this._cb.apply(this,[e].concat(ge(this._args)))}}]),e}(),we=function(){function e(){i(this,e),this._responses={}}return a(e,[{key:"add",value:function(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];this._responses[this._make_index(e,t)]=f(be,[e,t].concat(i))}},{key:"remove",value:function(e,t){delete this._responses[this._make_index(e,t)]}},{key:"run",value:function(e){if("type"in e&&"command"in e){var t=this._make_index(e.type,e.command);t in this._responses?this._responses[t].run(e):console.warn("No handler register to ".concat(t,"."))}else console.error("Invalid message",e)}},{key:"_make_index",value:function(e,t){return"".concat(e,"@").concat(t)}}]),e}(),xe=function(){function e(t){var n=t.type,r=t.index,a=t.data;i(this,e),this._type=n,this._index=r,this._data=[],a&&this.add({type:n,index:r,data:a})}return a(e,[{key:"type",get:function(){return this._type}},{key:"index",get:function(){return this._index}},{key:"data",get:function(){return this._data}},{key:"add",value:function(e){e.type,e.index;var t=e.data;Array.isArray(t)?this._data=t.map((function(e){return e.time=new Date(1e3*e.time),e})):(t.time=new Date(1e3*t.time),this._data.push(t))}},{key:"last_data",value:function(){return this._data[this._data.length-1]}},{key:"has_data",value:function(e){var t=this;return e.find((function(e){return e.type==t._type&&e.index==t._index}))}}]),e}(),ke=function(){function e(){i(this,e),this._list={}}return a(e,[{key:"list",get:function(){return this._list}},{key:"size",get:function(){return Object.keys(this._list)}},{key:"sensor",value:function(t,n){return this._list[e.make_index(t,n)]}},{key:"last_data",value:function(e,t){var n=this.sensor(e,t);return n?n.last_data():null}},{key:"process",value:function(t){var n=this;t.forEach((function(t){var i=e.make_index(t.type,t.index);i in n._list?n._list[i].add(t):n._list[i]=new xe(t)}))}}],[{key:"make_index",value:function(e,t){return"".concat(e,"@").concat(t)}}]),e}();function Ee(e){setTimeout((function(){return e.classList.add("shine-active")}),0),setTimeout((function(){return e.classList.remove("shine-active")}),700)}var Se=function(){function e(t){i(this,e),this._container=t}return a(e,[{key:"update",value:function(e,t){var n=this;this._container.innerHTML="",["mac","name","firmware_version","hardware_version","endpoint","connected"].forEach((function(i){switch(i){case"name":n._make_cell(e.name?e.name:e.mac,i in t);break;case"endpoint":n._make_cell(e.endpoint.addr,"endpoint"in t),n._make_cell(e.endpoint.port,"endpoint"in t);break;case"channel":n._make_cell("".concat(e.channel,"/").concat(e.channel_config),"channel"in t);break;case"children":n._make_cell(e.children.join(" "),"children"in t);break;case"connected":n._container.dataset.connected=e[i];break;default:n._make_cell(e[i],i in t)}}))}},{key:"_make_cell",value:function(e,t){var n=document.createElement("td");n.classList.add("shine"),n.textContent=e,this._container.appendChild(n),t&&Ee(n)}}]),e}();function Oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oe(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ae=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};i(this,e),this._id=t,this._mac=n,this._name=n,this._version_fw=null,this._version_hw=null,this._endpoint={addr:"0.0.0.0",port:0},this._connected=!1,this._ch_config=null,this._ch_conn=null,this._children=[],this._children_table=[],this._layer=-1,this._mac_ap=null,this._net_id=null,this._parent=null,this._has_rtc=!1,this._has_temp_sensor=!1,this._sensors=new ke,this._rtc=null,this._fuse=null,this._ota_version=null,this._uptime=null,this._reset_reason=null,this._custom_responses=[],this._views=r}return a(e,[{key:"id",get:function(){return this._id}},{key:"mac",get:function(){return this._mac}},{key:"name",get:function(){return this._name}},{key:"firmware_version",get:function(){return this._version_fw}},{key:"hardware_version",get:function(){return this._version_hw}},{key:"endpoint",get:function(){return this._endpoint}},{key:"connected",get:function(){return this._connected}},{key:"channel_config",get:function(){return this._ch_config}},{key:"channel",get:function(){return this._ch_conn}},{key:"children",get:function(){return this._children},set:function(e){this._children=e}},{key:"children_table",get:function(){return this._children_table}},{key:"layer",get:function(){return this._layer}},{key:"mac_ap",get:function(){return this._mac_ap}},{key:"net_id",get:function(){return this._net_id}},{key:"parent",get:function(){return this._parent}},{key:"has_rtc",get:function(){return this._has_rtc}},{key:"has_temp_sensor",get:function(){return this._has_temp_sensor}},{key:"sensor_list",get:function(){return this._sensors}},{key:"time",get:function(){return this._rtc}},{key:"fuse",get:function(){return this._fuse}},{key:"ota_version",get:function(){return this._ota_version}},{key:"uptime",get:function(){return this._uptime}},{key:"reset_reason",get:function(){return this._reset_reason}},{key:"custom_responses",get:function(){return this._custom_responses}},{key:"set_connected",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.process({connected:Boolean(e)},t)}},{key:"process",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];["name","version_fw","version_hw","endpoint","connected","ch_config","ch_conn","children_table","net_id","parent","layer","mac_ap","has_rtc","has_temp_sensor","rtc","fuse","ota_version","uptime","reset_reason"].forEach((function(n){n in e&&(t["_".concat(n)]=e[n])})),"sensor"in e&&this._sensors.process(e.sensor),n&&this.update_view(e)}},{key:"add_custom_response",value:function(e){this._custom_responses.push(Te(Te({},e),{time:new Date}))}},{key:"register_view",value:function(e,t){this._views[e]=t}},{key:"delete_view",value:function(e){delete this._views[e]}},{key:"update_view",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;Object.values(this._views).forEach((function(n){return n.update(e,t)}))}}]),e}(),Ce=function(){function e(t){i(this,e),this._list={},this._container=t}return a(e,[{key:"size",get:function(){return Object.keys(this._list).length}},{key:"list",get:function(){return this._list}},{key:"process",value:function(e){switch(e.command){case"data":case"list":case"edit":case"custom_response":this.add(e);break;default:console.warn("Data type '".concat(e.command,"' not recognized!"))}}},{key:"set_connected",value:function(e){Object.values(this._list).forEach((function(t){t.set_connected(!e.find((function(e){return e==t.mac})),!0)}))}},{key:"add",value:function(e){var t=this;e&&e.data&&(Array.isArray(e.data)?e.data.forEach((function(n){t._add_device(n,e.command)})):this._add_device(e.data,e.command))}},{key:"remove",value:function(e){delete this._list[e]}},{key:"_add_device",value:function(e,t){var n;switch(e.device in this._list?n=this._list[e.device]:(this.size||this._clear_view(),n=new Ae(e.id,e.device,{device_table:new Se(this._make_line(e.device))}),this._list[e.device]=n),t){case"custom_response":n.add_custom_response(e);break;default:n.process(e,!0)}}},{key:"_make_line",value:function(e){var t=document.createElement("tr");return t.dataset.device=e,this._container.appendChild(t),t}},{key:"_clear_view",value:function(){this._container.innerHTML=""}}]),e}();function Me(e){return"".concat(e.getDate()).padStart(2,"0")+"/"+"".concat(e.getMonth()+1).padStart(2,"0")+"/"+"".concat(e.getFullYear()).padStart(4,"0")+" "+"".concat(e.getHours()).padStart(2,"0")+":"+"".concat(e.getMinutes()).padStart(2,"0")}function Pe(e){return"".concat(e.getDate()).padStart(2,"0")+"/"+"".concat(e.getMonth()+1).padStart(2,"0")+"/"+"".concat(e.getFullYear()).padStart(4,"0")+" "+"".concat(e.getHours()).padStart(2,"0")+":"+"".concat(e.getMinutes()).padStart(2,"0")+":"+"".concat(e.getSeconds()).padStart(2,"0")}function qe(e,t,n){return!!t&&(e in t&&Ee(n),!0)}function Le(e,t){var n;return"normal"==t?(n=e.time?"".concat(e.time.value," (").concat(e.time.time-e.time.value,") "):"<time> (<lag>) ",n+=e.fuse?"(".concat(e.fuse,")"):"(<fuse>)"):(n=e.time?"".concat(Pe(new Date(1e3*e.time.value))," (").concat(e.time.time-e.time.value,") "):"<time> (<lag>) ",n+=e.fuse?"(".concat(function(e){var t=e<0;e=t?-e:e;var n=Math.floor(e/3600),i=e%60,r=e-3600*n-60*i;return(t?"-":"")+"".concat(n).padStart(2,"0")+":"+"".concat(i).padStart(2,"0")+(r?":"+"".concat(r).padStart(2,"0"):"")}(e.fuse),")"):"(<fuse>)"),n}function De(e,t){return e.uptime?"normal"==t?"".concat(e.uptime.value):(s=(n=e.uptime.value)%1e3,l=(c=Math.floor(n/1e3))%1e3,i=(c=Math.floor(c/1e3))%60,r=(c=Math.floor(c/60))%60,a=(c=Math.floor(c/60))%24,o=Math.floor(c/24),"".concat(o,"d")+"".concat(a).padStart(2,"0")+"h"+"".concat(r).padStart(2,"0")+"m"+"".concat(i).padStart(2,"0")+"s"+"".concat(l).padStart(3,"0")+"."+"".concat(s).padStart(3,"0")):"<uptime>";var n,i,r,a,o,s,c,l}var Ne={USER:"user",DEVICE:"device",REPORT:"report",IMAGE:"image",APP:"app",SENSOR:"sensor",NOTIFY:"notify"};Object.freeze(Ne);var je={USER_GROUP_POLICIES:"user_group_policies",NOTIFY_KEY:"notify_key",LOGOUT:"logout",ADD_USER:"add_user",EDIT_USER:"edit_user",DELETE_USER:"delete_user",ADD_GROUP:"add_group",DELETE_GROUP:"delete_group",PUSH_SUBSCRIBE:"push_subscribe",PUSH_UNSUBSCRIBE:"push_unsubscribe"};Object.freeze(je);var Re={LIST:"list",DATA:"data",TREE:"tree",EDIT:"edit",REQUEST:"request",CUSTOM_RESPONSE:"custom_response"};Object.freeze(Re);var Ue={LIST:"list",ADD:"add",EDIT:"edit",REMOVE:"remove",EXPORT:"export"};Object.freeze(Ue);var Ie="device",ze="image",Ze="warning",He={0:{value:0,name:"integer",title:"Integer"},1:{value:1,name:"unsigned",title:"Unsigned"},2:{value:2,name:"float",title:"Float"}},Be="credential_list",Ye=document.createElement("template");Ye.innerHTML='<div id=main-device-detail>\n  <h1 class=detail-title>11:22:33:44:55:66</h1>\n  <div class=detail-content>\n    <detail-line>\n      <i class="fas fa-link" slot=icon></i>\n      <span slot=name>Status</span>\n      <span class=\'detail-connected shine\'></span>\n    </detail-line>\n    <expand-menu>\n      <h2 slot=title>General</h2>\n      <detail-line>\n        <i class="fas fa-fingerprint" slot=icon></i>\n        <div slot=name>ID</div>\n        <div class=\'detail-id shine\'></div>\n      </detail-line>\n      <detail-line>\n        <i class="fas fa-signature" slot=icon></i>\n        <div slot=name>Name</div>\n        <span class=\'detail-name-container detail-value shine\'>\n          <span class=detail-name></span>\n          <span class=detail-edit-name><i class="fas fa-edit"></i></span>\n        </span>\n      </detail-line>\n      <detail-line>\n        <i class="fas fa-code" slot=icon></i>\n        <div slot=name>Firmware</div>\n        <div class=\'detail-fw shine\'></div>\n      </detail-line>\n      <detail-line>\n        <i class="fas fa-microchip" slot=icon></i>\n        <div slot=name>Hardware</div>\n        <div class=\'detail-hw shine\'></div>\n      </detail-line>\n      <detail-line>\n        <i class="fas fa-at" slot=icon></i>\n        <div slot=name>Endpoint</div>\n        <div class=\'detail-endpoint shine\'></div>\n      </detail-line>\n    </expand-menu>\n    <expand-menu>\n      <h2 slot=title>Mesh Network</h2>\n      <detail-line>\n        <i class="fas fa-layer-group" slot=icon></i>\n        <div slot=name>Layer</div>\n        <div class=\'detail-layer shine\'></div>\n      </detail-line>\n      <detail-line>\n        <i class="fas fa-sort-up" slot=icon></i>\n        <div slot=name>Parent</div>\n        <div class=\'detail-parent shine\'></div>\n      </detail-line>\n      <detail-line>\n        <i class="fas fa-sitemap" slot=icon></i>\n        <div slot=name>Net ID</div>\n        <div class=\'detail-netid shine\'></div>\n      </detail-line>\n      <detail-line>\n        <i class="fas fa-sliders-h" slot=icon></i>\n        <div slot=name>Channel</div>\n        <div class=\'detail-channel shine\'></div>\n      </detail-line>\n      <detail-line>\n        <i class="fas fa-wifi" slot=icon></i>\n        <div slot=name>MAC AP</div>\n        <div class=\'detail-macap shine\'></div>\n      </detail-line>\n      <detail-line>\n        <i class="fas fa-baby" slot=icon></i>\n        <div slot=name>Children</div>\n        <div class=\'detail-children shine\'></div>\n      </detail-line>\n    </expand-menu>\n    <expand-menu>\n      <h2 slot=title>Configuration</h2>\n      <detail-line>\n        <i class="fas fa-clock" slot=icon></i>\n        <div slot=name>RTC</div>\n        <div class=\'detail-has-rtc shine\'></div>\n      </detail-line>\n      <detail-line>\n        <i class="fas fa-thermometer-half" slot=icon></i>\n        <div slot=name>Temperature Sensor</div>\n        <div class=\'detail-has-temp shine\'></div>\n      </detail-line>\n    </expand-menu>\n    <expand-menu class=detail-device-commands>\n      <h2 slot=title>Commands</h2>\n      <label class=detail-device-command-force><input type=checkbox> Force</label>\n      <detail-line>\n        <i class="fas fa-bullseye" slot=icon></i>\n        <div slot=name>AC Load</div>\n        <span class=detail-ac-load>\n          <btn-on-off data-index=1>\n            <span slot=on><i class="fas fa-check-circle"></i></span>\n            <span slot=off><i class="fas fa-times-circle"></i></span>\n          </btn-on-off>\n          <btn-on-off data-index=2>\n            <span slot=on><i class="fas fa-check-circle"></i></span>\n            <span slot=off><i class="fas fa-times-circle"></i></span>\n          </btn-on-off>\n          <btn-on-off data-index=3>\n            <span slot=on><i class="fas fa-check-circle"></i></span>\n            <span slot=off><i class="fas fa-times-circle"></i></span>\n          </btn-on-off>\n        </span>\n      </detail-line>\n      <detail-line>\n        <i class="fas fa-cube" slot=icon></i>\n        <div slot=name>Packets</div>\n        <array-command class=\'detail-command\' data-type=packet>\n          <button data-index=\'board\'>Board</button>\n          <button data-index=\'config\'>Config</button>\n          <button data-index=\'sensors\'>Sensors</button>\n          <button data-index=\'route\'>Route</button>\n          <button data-index=\'full_config\'>Full Config</button>\n        </array-command>\n      </detail-line>\n    </expand-menu>\n  </div>\n</div>\n';var Fe=function(){function e(t,n){var r=this;i(this,e);var a=Ye.content.firstElementChild.cloneNode(!0);this._title=a.querySelector(".detail-title"),this._connected=a.querySelector(".detail-connected"),this._id=a.querySelector(".detail-id"),this._name=a.querySelector(".detail-name"),this._fw=a.querySelector(".detail-fw"),this._hw=a.querySelector(".detail-hw"),this._endpoint=a.querySelector(".detail-endpoint"),this._layer=a.querySelector(".detail-layer"),this._parent=a.querySelector(".detail-parent"),this._netid=a.querySelector(".detail-netid"),this._channel=a.querySelector(".detail-channel"),this._macap=a.querySelector(".detail-macap"),this._children=a.querySelector(".detail-children"),this._has_rtc=a.querySelector(".detail-has-rtc"),this._has_temp=a.querySelector(".detail-has-temp"),this._commands=a.querySelector(".detail-device-commands"),this._commands_gpios_out=this._commands.querySelectorAll("btn-on-off"),this._force=this._commands.querySelector(".detail-device-command-force input"),this._force.addEventListener("change",(function(e){r._commands.dataset.disabled=!r._force.checked})),this._name.addEventListener("edited",(function(e){r._name.contentEditable=!1,n.send(Ne.DEVICE,Re.EDIT,{device:r._title.textContent,name:r._name.textContent})})),a.querySelector(".detail-edit-name").addEventListener("click",(function(e){r._name.contentEditable=!0,r._name.focus()})),this._name.addEventListener("blur",(function(e){r._name.contentEditable=!1,n.send(Ne.DEVICE,Re.EDIT,{device:r._title.textContent,name:r._name.textContent})})),this._commands.addEventListener("command",(function(e){if(!e.target.disabled&&"true"!=r._commands.dataset.disabled)switch(e.detail.type){case"ac_load":n.send(Ne.DEVICE,Re.REQUEST,{request:"ac".concat(e.detail.index,"_").concat("true"==e.detail.on?"on":"off"),device:r._title.textContent});case"packet":n.send(Ne.DEVICE,Re.REQUEST,{request:e.detail.index,device:r._title.textContent});break;default:console.warn("command not found",e.detail)}})),t.innerHTML="",t.appendChild(a)}return a(e,[{key:"disable_commands",value:function(e){this._commands.dataset.disabled=e}},{key:"update",value:function(e,t){this._title.textContent=e.mac,this._connected.textContent=e.connected?"connected":"disconnected",qe("connected",t,this._connected),this.disable_commands(!e.connected),this._id.textContent=e.id,qe("id",t,this._id),this._name.textContent=e.name,qe("name",t,this._name),this._fw.textContent=e.firmware_version,qe("version_fw",t,this._fw),this._hw.textContent=e.hardware_version,qe("version_hw",t,this._hw),this._endpoint.textContent=e.endpoint.addr+":"+e.endpoint.port,qe("endpoint",t,this._endpoint),this._layer.textContent=e.layer,qe("layer",t,this._layer),this._parent.textContent=e.parent,qe("parent",t,this._parent),this._netid.textContent=e.net_id,qe("net_id",t,this._netid),this._channel.textContent="".concat(e.channel," / ").concat(e.channel_config),qe("ch_conn",t,this._channel),this._macap.textContent=e.mac_ap,qe("mac_ap",t,this._macap),this._children.textContent=e.children_table.join(" | "),qe("children_table",t,this._children),this._has_rtc.textContent=e.has_rtc,qe("has_rtc",t,this._has_rtc),this._has_temp.textContent=e.has_temp_sensor,qe("has_temp_sensor",t,this._has_temp),this._commands_gpios_out.forEach((function(t){var n=e.sensor_list.last_data(5,0);n&&(t.state=n.value&1<<+t.dataset.index+8-1)}))}}]),e}();function Ve(e,t,n){return JSON.stringify({type:e,command:t,data:n})}var Ge=n(3422);function We(e,t){return t&&e.name?e.name:e.mac}var Xe=function(){function e(t,n){i(this,e),this._unconnected=[],this._endpoints=[],this._tree=[],this._view=[new Ke(t),new Je(n)],this._show_name=!1}return a(e,[{key:"unconnected",get:function(){return this._unconnected}},{key:"endpoints",get:function(){return this._endpoints}},{key:"tree",get:function(){return this._tree}},{key:"get_endpoint",value:function(e){var t=this._unconnected.find((function(t){return t==e}));if(t)return!1;if(!(t=this._tree.find((function(t){return t.device==e}))))return!1;if(t.layer<=0)return!1;for(;1!=t.layer;)if(!(t=this._tree.find((function(e){return e.device==t.parent}))))return!1;var n=this._endpoints.find((function(e){return e.device}));return!!n&&n.endpoint}},{key:"process",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._unconnected=[],e.data.unconnected.forEach((function(e){e in t.device_list.list&&n._unconnected.push(t.device_list.list[e]),t.device_list.list[e].children=[]})),this._endpoints=[],e.data.endpoints.forEach((function(e){e.device in t.device_list.list&&n._endpoints.push(t.device_list.list[e.device])})),this._tree=[],e.data.tree.forEach((function(e){e.device in t.device_list.list?(n._tree.push(t.device_list.list[e.device]),t.device_list.list[e.device].children=e.children):-1!=e.layer&&0!=e.layer||n._tree.push({mac:e.device,layer:e.layer,children:e.children})})),i&&this.update_view(t,this._show_name)}},{key:"update_view",value:function(e,t){var n=this;this._show_name=void 0===t?this._show_name:t,this._view.forEach((function(t){return t.update(n,e,n._show_name)}))}}]),e}(),Ke=function(){function e(t){i(this,e),this._endpoints=t.querySelector("#net-devices-endpoints"),this._unconnected=t.querySelector("#net-devices-unconnected"),this._tree=t.querySelector("#net-devices-tree")}return a(e,[{key:"update",value:function(e,t,n){this._update_unconnected(e,n),this._update_endpoints(e,n),this._update_tree(e,n)}},{key:"_update_unconnected",value:function(e,t){var n=this;e.unconnected.length?(this._unconnected.innerHTML="",e.unconnected.forEach((function(e){var i=document.createElement("tr"),r=document.createElement("td");r.dataset.device=e.mac,r.textContent=$e(e,t),i.appendChild(r),n._unconnected.appendChild(i)}))):this._unconnected.innerHTML="<tr><td><em>No devices unconnected</em></td></tr>"}},{key:"_update_endpoints",value:function(e,t){var n=this;e.endpoints.length?(this._endpoints.innerHTML="",e.endpoints.forEach((function(e){var i=document.createElement("tr"),r=document.createElement("td"),a=document.createElement("td");r.dataset.device=e.mac,r.textContent=$e(e,t),a.textContent="".concat(e.endpoint.addr,":").concat(e.endpoint.port),i.appendChild(r),i.appendChild(a),n._endpoints.appendChild(i)}))):this._endpoints.innerHTML="<tr><td colspan=2><em>No endpoints avaiable</em></td></tr>"}},{key:"_update_tree",value:function(e,t){var n=this;e.tree.length?(this._tree.innerHTML="",e.tree.forEach((function(i){var r=document.createElement("tr"),a=document.createElement("td"),o=document.createElement("td"),s=document.createElement("td"),c=document.createElement("td");a.textContent=-1!=i.layer?i.layer:"-",s.textContent=-1!=i.layer?$e(i,t):"daemon",o.textContent=-1==i.layer?"-":0==i.layer?"daemon":Qe(i.parent,e.tree,t),c.style.width="100%",i.children.forEach((function(n,r,a){var o=document.createElement("span");o.textContent=Qe(n,e.tree,t),i.layer>-1&&(o.dataset.device=n),c.appendChild(o),a.length-1&&c.appendChild(document.createElement("br"))})),i.layer>0&&(s.dataset.device=i.mac),i.layer>1&&(o.dataset.device=i.parent),r.appendChild(a),r.appendChild(s),r.appendChild(o),r.appendChild(c),n._tree.appendChild(r)}))):this._tree.innerHTML="<tr><td colspan=5><em>No devices connected</em></td></tr>"}}]),e}(),Je=function(){function e(t){i(this,e),this._container=t}return a(e,[{key:"update",value:function(e,t,n){!function(e,t,n,i){t.innerHTML="";var r=t.offsetWidth-50-90,a=Ge.G_s().size([260,r]),o=Ge.bT9(e,(function(e){return e.children}));o=a(o);var s=Ge.Ue8("svg");s.attr("viewBox","0 0 "+(r+50+90)+" 300").attr("preserveAspectRatio","xMaxYMin meet");var c=s.append("g").attr("transform","translate(50,20)"),l=c.selectAll(".link").data(o.descendants().slice(1)).enter().append("g").attr("class","link");l.append("path").attr("d",(function(e){return"M"+e.y+","+e.x+"C"+(e.y+e.parent.y)/2+","+e.x+" "+(e.y+e.parent.y)/2+","+e.parent.x+" "+e.parent.y+","+e.parent.x})),l.append("text").attr("transform",(function(e){return"translate("+(e.y+e.parent.y)/2+","+(e.x+e.parent.x)/2+")"})).attr("dy",".35em").attr("text-anchor","middle").text((function(e){return function(e,t){var n=t.sensor_type_list.get_name("rssi");if(!n||-1==e.layer||0==e.layer)return null;var i=e.sensor_list.last_data(n.id,0);return i?i.value:null}(e.data.device,n)||""}));var u=c.selectAll(".node").data(o.descendants()).enter().append("g").attr("class",(function(e){return"node"+(e.children?" node--internal":" node--leaf")})).attr("transform",(function(e){return"translate("+e.y+","+e.x+")"}));u.append("circle").attr("r",10).attr("class",(function(e){switch(e.data.device.layer){case-1:return"node--daemon";case 0:return"node--router";case 1:return"node--root";default:return"node--non-root"}})).on("click",(function(e,t){n.open_device_detail(t.data.device.mac)})),u.append("text").each((function(){var e=Ge.Ys(this),t=e.datum().data.device;switch(e.style("text-anchor","middle"),t.layer){case-1:e.attr("dy",-13).text("daemon");break;case 0:e.text(null).append("tspan").attr("dy",-13).text(t.mac),e.append("tspan").attr("dy",-13).attr("x",0).text("router");break;case 1:e.text(null).append("tspan").attr("dy",-13).text(We(t,i)),e.append("tspan").attr("dy",-13).attr("x",0).text("root [".concat(function(e){return 1!=e.layer?null:"".concat(e.endpoint.addr,":").concat(e.endpoint.port)}(t),"]"));break;default:e.attr("dy",-13).text(We(t,i))}})),t.appendChild(s.node())}(this._make_data(e.tree),this._container,t,n)}},{key:"_make_data",value:function(e){return this._make_node("00:00:00:00:00:00",e)}},{key:"_make_node",value:function(e,t){var n=this,i=t.find((function(t){return t.mac==e}));if(!i)return{};var r={device:i,children:[]};return i.children.forEach((function(e){return r.children.push(n._make_node(e,t))})),r}}]),e}();function $e(e,t){return t&&e.name?e.name:e.mac}function Qe(e,t,n){if(!n)return e;var i=t.find((function(t){return t.mac==e||t.mac_ap==e}));return i&&i.name?i.name:e}var et=["id","name","version","size","project","time","date","idf_version","hash","magic_number","secure_version","description","uploader","date_upload"],tt=function(){function e(t){var n=t.id,r=t.name,a=t.hash,o=t.magic_number,s=t.project,c=t.secure_version,l=t.size,u=t.time,d=t.date,h=t.version,f=t.idf_version,p=t.description,_=t.uploader,v=t.date_upload;i(this,e),this._id=n,this._name=r,this._hash=a,this._magic_number=o,this._project=s,this._secure_version=c,this._size=l,this._time=u,this._date=d,this._version=h,this._idf_version=f,this._description=p,this._uploader=_,this._date_upload=v}return a(e,[{key:"id",get:function(){return this._id}},{key:"name",get:function(){return this._name}},{key:"hash",get:function(){return this._hash}},{key:"magic_number",get:function(){return this._magic_number}},{key:"project",get:function(){return this._project}},{key:"secure_version",get:function(){return this._secure_version}},{key:"size",get:function(){return this._size}},{key:"time",get:function(){return this._time}},{key:"date",get:function(){return this._date}},{key:"version",get:function(){return this._version}},{key:"idf_version",get:function(){return this._idf_version}},{key:"description",get:function(){return this._description}},{key:"uploader",get:function(){return this._uploader}},{key:"date_upload",get:function(){return this._date_upload}}]),e}(),nt=function(){function e(t){i(this,e),this._list={},this._view=new it(t)}return a(e,[{key:"list",get:function(){return this._list}},{key:"size",get:function(){return Object.keys(this._list).length}},{key:"exist",value:function(e){return e in this._list}},{key:"process",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._list={},e.data.forEach((function(e){return n._list[e.name]=new tt(e)})),i&&this.update_view()}},{key:"update_view",value:function(){this._view.update(this)}}]),e}(),it=function(){function e(t){i(this,e),this._container=t}return a(e,[{key:"update",value:function(e){var t=this;e.size?(this._container.innerHTML="",Object.values(e.list).sort((function(e,t){return e.id-t.id})).forEach((function(e){var n=document.createElement("tr");n.dataset.image=e.name,et.forEach((function(t){switch(t){case"project":case"time":case"date":case"hash":case"magic_number":case"secure_version":case"description":case"uploader":case"date_upload":case"idf_version":break;default:var i=document.createElement("td");i.textContent=e[t],n.appendChild(i)}}));var i=document.createElement("td");i.innerHTML='<i class="fas fa-file-download image-download"></i>',i.title="Download image",i.classList.add("image-download"),n.appendChild(i);var r=document.createElement("td");r.innerHTML="&times;",r.title="Delete image",r.classList.add("image-close"),n.appendChild(r),t._container.appendChild(n)}))):this._container.innerHTML="<tr>\n        <td colspan=20>\n          <em>No images uploaded</em>\n        </td>\n      </tr>"}}]),e}(),rt=document.createElement("template");rt.innerHTML='<div id=main-image-detail class=image-app-detail>\n  <h1 class=detail-title>image.bin</h1>\n  <div class=detail-content>\n    <div class=detail-general>\n      <h2>Details</h2>\n      <detail-line>\n        <i class="fas fa-fingerprint" slot=icon></i>\n        <div slot=name>ID</div>\n        <div class=\'detail-id shine\'></div>\n      </detail-line>\n      <detail-line>\n        <i class="fas fa-code" slot=icon></i>\n        <div slot=name>Version</div>\n        <div class=\'detail-version shine\'></div>\n      </detail-line>\n      <detail-line>\n        <i class="fas fa-expand-arrows-alt" slot=icon></i>\n        <div slot=name>Size</div>\n        <div class=\'detail-size shine\'></div>\n      </detail-line>\n      <detail-line>\n        <i class="fas fa-project-diagram" slot=icon></i>\n        <div slot=name>Project</div>\n        <div class=\'detail-project shine\'></div>\n      </detail-line>\n      <detail-line>\n        <i class="fas fa-clock" slot=icon></i>\n        <div slot=name>Time</div>\n        <div class=\'detail-time shine\'></div>\n      </detail-line>\n      <detail-line>\n        <i class="fas fa-calendar-alt" slot=icon></i>\n        <div slot=name>Date</div>\n        <div class=\'detail-date shine\'></div>\n      </detail-line>\n      <detail-line>\n        <i class="fas fa-info" slot=icon></i>\n        <div slot=name>IDF Version</div>\n        <div class=\'detail-idf-version shine\'></div>\n      </detail-line>\n      <detail-line>\n        <i class="fas fa-hashtag" slot=icon></i>\n        <div slot=name>Hash</div>\n        <div class=\'detail-hash shine\'></div>\n      </detail-line>\n      <detail-line>\n        <i class="fas fa-magic" slot=icon></i>\n        <div slot=name>Magic word</div>\n        <div class=\'detail-magic-word shine\'></div>\n      </detail-line>\n      <detail-line>\n        <i class="fas fa-shield-alt" slot=icon></i>\n        <div slot=name>Secure version</div>\n        <div class=\'detail-secure-version shine\'></div>\n      </detail-line>\n      <detail-line>\n        <i class="fas fa-user-tag" slot=icon></i>\n        <div slot=name>Uploader</div>\n        <div class=\'detail-uploader shine\'></div>\n      </detail-line>\n      <detail-line>\n        <i class="fas fa-calendar-day" slot=icon></i>\n        <div slot=name>Upload date</div>\n        <div class=\'detail-upload-date shine\'></div>\n      </detail-line>\n    </div>\n    <div class=detail-line-description>\n      <h2>\n        <span class=detail-icon><i class="fas fa-audio-description"></i></span>\n        <span class=detail-text>Description</span>\n        <span class=detail-edit-description><i class="fas fa-edit"></i></span>\n      </h2>\n      <div class=detail-description contenteditable="false"></div>\n    </div>\n  </div>\n</div>\n';var at=function(){function e(t,n){var r=this;i(this,e);var a=rt.content.firstElementChild.cloneNode(!0);this._name=a.querySelector(".detail-title"),this._id=a.querySelector(".detail-id"),this._version=a.querySelector(".detail-version"),this._size=a.querySelector(".detail-size"),this._project=a.querySelector(".detail-project"),this._time=a.querySelector(".detail-time"),this._date=a.querySelector(".detail-date"),this._idf_version=a.querySelector(".detail-idf-version"),this._hash=a.querySelector(".detail-hash"),this._magic_number=a.querySelector(".detail-magic-word"),this._secure_version=a.querySelector(".detail-secure-version"),this._description=a.querySelector(".detail-description"),this._uploader=a.querySelector(".detail-uploader"),this._date_upload=a.querySelector(".detail-upload-date"),a.querySelector(".detail-edit-description").addEventListener("click",(function(e){r._description.contentEditable=!0,r._description.focus()})),this._description.addEventListener("blur",(function(e){r._description.contentEditable=!1,n.send(Ne.IMAGE,"edit",{name:r._name.textContent,description:r._description.innerText})})),t.innerHTML="",t.appendChild(a)}return a(e,[{key:"update",value:function(e){var t=this;et.forEach((function(n){switch(n){case"date_upload":t["_".concat(n)].textContent=Me(new Date(1e3*e[n]));break;case"description":t["_".concat(n)].innerText=e[n];break;default:t["_".concat(n)].textContent=e[n]}}))}}]),e}(),ot=["id","name","version","size","hash","description","uploader","date_upload"],st=function(){function e(t){var n=t.id,r=t.name,a=t.version,o=t.size,s=t.hash,c=t.description,l=t.uploader,u=t.date_upload;i(this,e),this._id=n,this._name=r,this._version=a,this._size=o,this._hash=s,this._description=c,this._uploader=l,this._date_upload=u}return a(e,[{key:"id",get:function(){return this._id}},{key:"name",get:function(){return this._name}},{key:"version",get:function(){return this._version}},{key:"size",get:function(){return this._size}},{key:"hash",get:function(){return this._hash}},{key:"description",get:function(){return this._description}},{key:"uploader",get:function(){return this._uploader}},{key:"date_upload",get:function(){return this._date_upload}}]),e}(),ct=function(){function e(t){i(this,e),this._list={},this._view=new lt(t)}return a(e,[{key:"list",get:function(){return this._list}},{key:"size",get:function(){return Object.keys(this._list).length}},{key:"process",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._list={},Object.values(e.data).forEach((function(e){return n._list[e.name]=new st(e)})),i&&this.update_view()}},{key:"update_view",value:function(){this._view.update(this)}}]),e}(),lt=function(){function e(t){i(this,e),this._container=t}return a(e,[{key:"update",value:function(e){var t=this;e.size?(this._container.innerHTML="",Object.values(e.list).forEach((function(e){var n=document.createElement("tr");n.dataset.app=e.name,ot.forEach((function(t){switch(t){case"hash":case"description":case"uploader":case"date_upload":break;default:var i=document.createElement("td");i.textContent=e[t],n.appendChild(i)}}));var i=document.createElement("td");i.innerHTML='<i class="fas fa-file-download app-download"></i>',i.title="Download app",i.classList.add("app-download"),n.appendChild(i);var r=document.createElement("td");r.innerHTML="&times;",r.title="Delete app",r.classList.add("app-close"),n.appendChild(r),t._container.appendChild(n)}))):this._container.innerHTML="<tr><td colspan=20><em>No app uploaded</em></td></tr>"}}]),e}(),ut=document.createElement("template");ut.innerHTML='<div id=main-app-detail class=image-app-detail>\n  <h1 class=detail-title>app.elf</h1>\n  <div class=detail-content>\n    <div class=detail-general>\n      <h2>Details</h2>\n      <detail-line>\n        <i class="fas fa-fingerprint" slot=icon></i>\n        <div slot=name>ID</div>\n        <div class=\'detail-id shine\'></div>\n      </detail-line>\n      <detail-line>\n        <i class="fas fa-code" slot=icon></i>\n        <div slot=name>Version</div>\n        <div class=\'detail-version shine\'></div>\n      </detail-line>\n      <detail-line>\n        <i class="fas fa-expand-arrows-alt" slot=icon></i>\n        <div slot=name>Size</div>\n        <div class=\'detail-size shine\'></div>\n      </detail-line>\n      <detail-line>\n        <i class="fas fa-hashtag" slot=icon></i>\n        <div slot=name>Hash</div>\n        <div class=\'detail-hash shine\'></div>\n      </detail-line>\n      <detail-line>\n        <i class="fas fa-user-tag" slot=icon></i>\n        <div slot=name>Uploader</div>\n        <div class=\'detail-uploader shine\'></div>\n      </detail-line>\n      <detail-line>\n        <i class="fas fa-calendar-day" slot=icon></i>\n        <div slot=name>Upload date</div>\n        <div class=\'detail-upload-date shine\'></div>\n      </detail-line>\n    </div>\n    <div class=detail-line-description>\n      <h2>\n        <span class=detail-icon><i class="fas fa-audio-description"></i></span>\n        <span class=detail-text>Description</span>\n        <span class=detail-edit-description><i class="fas fa-edit"></i></span>\n      </h2>\n      <div class=detail-description contenteditable="false"></div>\n    </div>\n  </div>\n</div>\n';var dt=function(){function e(t,n){var r=this;i(this,e);var a=ut.content.firstElementChild.cloneNode(!0);this._name=a.querySelector(".detail-title"),this._id=a.querySelector(".detail-id"),this._version=a.querySelector(".detail-version"),this._size=a.querySelector(".detail-size"),this._hash=a.querySelector(".detail-hash"),this._description=a.querySelector(".detail-description"),this._uploader=a.querySelector(".detail-uploader"),this._date_upload=a.querySelector(".detail-upload-date"),a.querySelector(".detail-edit-description").addEventListener("click",(function(e){r._description.contentEditable=!0,r._description.focus()})),this._description.addEventListener("blur",(function(e){r._description.contentEditable=!1,n.send(Ne.APP,"edit",{name:r._name.textContent,description:r._description.innerText})})),t.innerHTML="",t.appendChild(a)}return a(e,[{key:"update",value:function(e){var t=this;ot.forEach((function(n){switch(n){case"date_upload":t["_".concat(n)].textContent=Me(new Date(1e3*e[n]));break;case"description":t["_".concat(n)].innerText=e[n];break;default:t["_".concat(n)].textContent=e[n]}}))}}]),e}(),ht=function(){function e(t){var n=t.id,r=t.name,a=t.long_name,o=t.type,s=t.unit,c=t.unit_name,l=t.add_change,u=t.description;i(this,e),this._id=n,this._name=r,this._long_name=a,this._type=o,this._unit=s,this._unit_name=c,this._add_change=l,this._description=u}return a(e,[{key:"id",get:function(){return this._id}},{key:"name",get:function(){return this._name}},{key:"long_name",get:function(){return this._long_name}},{key:"type",get:function(){return this._type}},{key:"unit",get:function(){return this._unit}},{key:"unit_name",get:function(){return this._unit_name}},{key:"add_change",get:function(){return this._add_change}},{key:"description",get:function(){return this._description}}]),e}(),ft=function(){function e(){i(this,e),this._list={},this._view=null}return a(e,[{key:"size",get:function(){return Object.keys(this._list).length}},{key:"list",get:function(){return this._list}},{key:"process",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];!("data"in e)&&Array.isArray(e.data)||(this._list={},e.data.forEach((function(e){return t.add(e)})),n&&this.update_view())}},{key:"add",value:function(e){"name"in e&&(this._list[e.name]=new ht(e))}},{key:"remove",value:function(e){delete this._list[e]}},{key:"has_name",value:function(e){return e in this._list}},{key:"get_name",value:function(e){return this._list[e]}},{key:"has_id",value:function(e){return Object.values(this._list).find((function(t){return t.id==e}))}},{key:"get_id",value:function(e){return Object.values(this._list).find((function(t){return t.id==e}))}},{key:"register_view",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this._view=e?new pt(e):null}},{key:"update_view",value:function(){this._view&&this._view.update(this)}}]),e}();document.createElement("template").innerHTML="";var pt=function(){function e(t){i(this,e),this._container=t}return a(e,[{key:"update",value:function(e){var t=this;e.size?(this._container.innerHTML="",Object.values(e.list).sort((function(e,t){return e.id-t.id})).forEach((function(e){var n=document.createElement("tr");n.dataset.sensor=e.name,["id","name","long_name","type","unit_name"].forEach((function(t){var i=document.createElement("td");i.textContent=e[t],"type"==t&&(i.textContent+=e[t]in He?" ".concat(He[e[t]].name):""),n.appendChild(i)}));var i=document.createElement("td"),r=document.createElement("td");i.innerHTML='<i class="fas fa-edit"></i>',i.classList.add("edit-data"),r.innerHTML="&times;",r.classList.add("delete-data"),n.appendChild(i),n.appendChild(r),t._container.appendChild(n)}))):this._container.innerHTML="<tr><td colspan=20><em>No sensors configured</em></td></tr>"}}]),e}(),_t=function(){function e(t,n,r,a,o,s){i(this,e),this._ws=t,this._logged=n,this._server_addr=r,this._registration=a,this._is_subscribed=!1,this._storage=o,this._device_list=new Ce(s.containers.device_table),this._response_handler=new we,this._tree=new Xe(s.containers.tree_container,s.containers.tree_graph),this._images=new nt(s.containers.image_table),this._apps=new ct(s.containers.app_table),this._sensor_types=new ft,this._detail=s.containers.detail,this._main_content=s.containers.main_content,this._register_ws_events()}return a(e,[{key:"ws",get:function(){return this._ws}},{key:"logged_user",get:function(){return this._logged}},{key:"username",get:function(){return this._logged.info.username}},{key:"session_id",get:function(){return this._logged.session_id}},{key:"policy",get:function(){return this._logged.policy}},{key:"notify",get:function(){return this._logged.notify}},{key:"server_addr",get:function(){return this._server_addr}},{key:"registration",get:function(){return this._registration}},{key:"is_subscribed",get:function(){return this._is_subscribed},set:function(e){this._is_subscribed=Boolean(e)}},{key:"device_list",get:function(){return this._device_list}},{key:"tree",get:function(){return this._tree}},{key:"image_list",get:function(){return this._images}},{key:"app_list",get:function(){return this._apps}},{key:"sensor_type_list",get:function(){return this._sensor_types}},{key:"detail",get:function(){return this._detail}},{key:"main_container",get:function(){return this._main_content}},{key:"add_handler",value:function(e,t){for(var n,i=arguments.length,r=new Array(i>2?i-2:0),a=2;a<i;a++)r[a-2]=arguments[a];(n=this._response_handler).add.apply(n,[e,t].concat(r))}},{key:"remove_handler",value:function(e,t){this._response_handler.remove(e,t)}},{key:"send",value:function(e,t,n){this._ws.send(Ve(e,t,n))}},{key:"send_image",value:function(e){return this._send_binary_data(e,1)}},{key:"send_app",value:function(e){return this._send_binary_data(e,2)}},{key:"report",value:function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";this._ws.send(Ve(Ne.REPORT,e,{type:t,reference:n,message:i,arg:r}))}},{key:"open_device_detail",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.device_list.list[e];if(!n)return!1;this._detail.clear();var i=new Fe(this._detail.content,this);return n.register_view("detail",i),i.update(n),t&&this._detail.show(),this._detail.register_close("detail",(function(e){e.delete_view("detail")}),n),this._detail}},{key:"open_image_detail",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.image_list.list[e];if(!n)return!1;this._detail.clear();var i=new at(this._detail.content,this);return i.update(n),t&&this._detail.show(),this._detail}},{key:"open_app_detail",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.app_list.list[e];if(!n)return!1;this._detail.clear();var i=new dt(this._detail.content,this);return i.update(n),t&&this._detail.show(),this._detail}},{key:"_send_binary_data",value:function(e,t){var n=this,i=new FileReader,r=new ArrayBuffer;i.loadend=function(){},i.onload=function(i){r=i.target.result,n._ws.send(n._make_binary_data(e.name,e.size,r,t))},i.readAsArrayBuffer(e)}},{key:"_make_binary_data",value:function(e,t,n,i){var r=new Uint8Array(2+e.length+t),a=(new TextEncoder).encode(e);return r.set(new Uint8Array([i]),0),r.set(new Uint8Array([e.length]),1),r.set(a,2),r.set(new Uint8Array(n),2+a.length),r.buffer}},{key:"_register_ws_events",value:function(){var e=this;this._ws.binaryType="arraybuffer",this._ws.onmessage=function(t){if("string"==typeof t.data)try{var n=JSON.parse(t.data);e._response_handler.run(n)}catch(e){console.error("Error parsing message",t.data,e)}else e._read_binary_data(t.data)},this._ws.onclose=function(t){ce.run("login",{storage:e._storage,registration:e._registration},!1)}}},{key:"_read_binary_data",value:function(e){var t=new Uint8Array(e),n=(t.slice(0,1)[0],new Uint16Array(t.slice(1,3))[0]);!function(e,t){var n=new Blob([t],arguments.length>2&&void 0!==arguments[2]?arguments[2]:{type:"application/octet-stream"});if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveBlob(n,e);else{var i=window.document.createElement("a");i.href=window.URL.createObjectURL(n),i.download=e,document.body.appendChild(i),i.click(),document.body.removeChild(i)}}((new TextDecoder).decode(new Uint8Array(t.slice(3,3+n))),new Uint8Array(t.slice(3+n)))}}]),e}(),vt=function(){function e(){i(this,e),this._list=[],this._list_device={},this._list_sensor={}}return a(e,[{key:"list",get:function(){return this._list}},{key:"device_list",get:function(){return this._list_device}},{key:"sensor_list",get:function(){return this._list_sensor}},{key:"has",value:function(e){return this._list.find((function(t){return t==e}))}},{key:"set",value:function(e){var t=this;Array.isArray(e)&&(this._list=[],e.forEach((function(e){return t._list.push(e.name)})))}},{key:"set_device",value:function(e){var t=this;this._list_device={},e.forEach((function(e){t._list_device[e.id]=e.notify}))}},{key:"set_sensors",value:function(e){Array.isArray(e)?this._set_all_sensors(e):this._set_device_sensors(e)}},{key:"_set_all_sensors",value:function(e){var t=this;this._list_sensor={},e.forEach((function(e){e.id in t._list_sensor||(t._list_sensor[e.id]={}),t._list_sensor[e.id]["".concat(e.type,"@").concat(e.index)]=e.notify}))}},{key:"_set_device_sensors",value:function(e){var t=this;delete this._list_sensor[e.id],this._list_sensor[e.id]={},e.sensors.forEach((function(n){t._list_sensor[e.id]["".concat(n.type,"@").concat(n.index)]=n.notify}))}}]),e}(),mt={INVALID:{value:-1,name:"invalid"},ACTIVE:{value:0,name:"active"},INACTIVE:{value:1,name:"inactive"},SUSPENDED:{value:2,name:"suspended"},DELETED:{value:3,name:"deleted"}},yt=["root","system"],gt=function(){function e(t,n,r,a,o,s){i(this,e),this._id=t,this._username=n,this._name=r,this._email=a,this._status=s,this._telegram_chat_id=o}return a(e,[{key:"id",get:function(){return this._id}},{key:"username",get:function(){return this._username}},{key:"name",get:function(){return this._name}},{key:"email",get:function(){return this._email}},{key:"status",get:function(){return this._status}},{key:"telegram_chat_id",get:function(){return this._telegram_chat_id}},{key:"status_string",get:function(){return e.status_string(this._status)}},{key:"update",value:function(e,t,n,i){this._username=e,this._name=t,this._email=n,this._telegram_chat_id=i}},{key:"get_table_view",value:function(){var e=document.createElement("tr");return e.dataset.id=this._id,e.innerHTML="<td>".concat(this._id,"</td>")+"<td>".concat(this._username,"</td>")+"<td>".concat(this._name,"</td>")+"<td>".concat(this._email,"</td>")+"<td>".concat(this.status_string,"</td>")+"<td class=delete-data data-id=".concat(this._id,">&times;</td>"),e}}],[{key:"status_string",value:function(e){var t=Object.values(mt).find((function(t){return t.value==e}));return t?t.name:""}},{key:"check_username",value:function(e){return e.length?yt.find((function(t){return t==e}))?{err:!0,message:"Username '".concat(e,"' is not allowed")}:e.length<4?{err:!0,message:"'username' minimum length: ".concat(4)}:e.length>12?{err:!0,message:"'username' maximum length: ".concat(12)}:-1!=e.indexOf(" ")?{err:!0,message:"'username' can't have space (' ') character"}:{err:!1}:{err:!0,message:"Empty 'username' not allowed"}}},{key:"check_password",value:function(e){return e.length?e.length<6?{err:!0,message:"'password' minimum length: ".concat(6)}:{err:!1}:{err:!0,message:"Empty 'password' not allowed"}}}]),e}(),bt=function(){function e(t){i(this,e),this._list={},this._view=new wt(this,t)}return a(e,[{key:"list",get:function(){return this._list}},{key:"size",get:function(){return Object.keys(this._list).length}},{key:"add",value:function(e,t,n,i,r,a){var o=arguments.length>6&&void 0!==arguments[6]&&arguments[6];this._list[e]=new gt(e,t,n,i,r,a),o&&this.update_view()}},{key:"update",value:function(e,t,n,i,r){var a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];e in this._list&&(this._list[e].update(t,n,i,r),a&&this.update_view())}},{key:"remove",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];delete this._list[e],t&&this.update_view()}},{key:"get_user",value:function(e){return this._list[e]}},{key:"get_user_by_username",value:function(e){return Object.values(this._list).find((function(t){return t.username==e}))}},{key:"check_username",value:function(e){var t=gt.check_username(e);return t.err?t:this.get_user_by_username(e)?{err:!0,message:"'".concat(e,"' is already been used")}:{err:!1}}},{key:"update_view",value:function(){this._view.update_view()}}]),e}(),wt=function(){function e(t,n){i(this,e),this._model=t,this._container=n,this.update_view()}return a(e,[{key:"update_view",value:function(){var e=this;this._container.innerHTML="",this._model.size?Object.values(this._model.list).forEach((function(t){e._container.appendChild(t.get_table_view())})):this._container.innerHTML="<tr><td colspan=6><em>No users avaiable</em></td></tr>"}}]),e}(),xt=function(){function e(t,n,r,a,o,s,c,l){i(this,e),this._info=new gt(t,n,r,a,o,s),this._session_id=c,this._policy=l,this._notify=new vt}return a(e,[{key:"id",get:function(){return this._info.id}},{key:"info",get:function(){return this._info}},{key:"session_id",get:function(){return this._session_id}},{key:"policy",get:function(){return this._policy}},{key:"notify",get:function(){return this._notify}}]),e}(),kt=function(){function e(){i(this,e)}return a(e,null,[{key:"can",value:function(e,t){return 0==e.id||e.policy&t}},{key:"hide_user_admin_element",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body;e.querySelectorAll(".is-admin").forEach((function(e){e.style.display="none"}))}},{key:"show_user_admin_element",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body;e.querySelectorAll(".is-admin").forEach((function(e){e.style.display=""}))}}]),e}(),Et={user_admin:1,view_device:2,edit_device:4,get_resource:8,post_resource:16,put_resource:32,delete_resource:64,view_image:128,upload_image:256,install_image:512,upload_app:1024,install_app:2048};Object.freeze(Et);var St=function(){function e(){i(this,e);var t=document.querySelector("#main #notify-disabled"),n=document.querySelector("#main #notify-enable");this._notify_disabled=t,this._notify_enable=n}return a(e,[{key:"addEventListener",value:function(e,t){this._notify_disabled.addEventListener(e,(function(e){t(e)})),this._notify_enable.addEventListener(e,(function(e){t(e)}))}},{key:"enable",value:function(){this._notify_enable.removeAttribute("disabled"),this._notify_disabled.removeAttribute("disabled","true"),this._notify_enable.title="Notify is supported"}},{key:"disable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._notify_enable.setAttribute("disabled",""),this._notify_disabled.setAttribute("disabled",""),this._notify_disabled.title=e?"Notify was denied":"Notify isn't supported"}},{key:"check",value:function(){this._notify_enable.setAttribute("checked",""),this._notify_disabled.setAttribute("checked",""),this._notify_enable.title="Notify is enabled"}},{key:"uncheck",value:function(){this._notify_enable.removeAttribute("checked"),this._notify_disabled.removeAttribute("checked"),this._notify_disabled.title="Notify is disabled"}}]),e}(),Ot=function(){function e(t,n,r,a,o){var s=this;i(this,e),this._ws=t,this._user=n,this._app_key=function(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=window.atob(t),i=new Uint8Array(n.length),r=0;r<n.length;++r)i[r]=n.charCodeAt(r);return i}(r),this._registration=a,this._is_subscribed=!1,this._subscription=null,this._container=o,o.addEventListener("click",(function(e){s._is_subscribed?s.unsubscribe():s.subscribe()}))}return a(e,[{key:"is_subscribed",get:function(){return this._is_subscribed}},{key:"send_subscribe",value:function(){this._is_subscribed&&this._ws.send(JSON.stringify({type:"user",command:"push_subscribe",data:{user:this._user,user_agent:le(),subscription:this._subscription}}))}},{key:"send_unsubscribe",value:function(){this._ws.send(JSON.stringify({type:"user",command:"push_unsubscribe",data:{user:this._user,user_agent:le()}}))}},{key:"get_subscription",value:function(){var e=this;if(this._registration)return this._registration.pushManager.getSubscription().then((function(t){return e._subscription=t,e._is_subscribed=!(null===t),e.send_subscribe(),e._update_container(),e._is_subscribed}))}},{key:"subscribe",value:function(){var e=this;this._registration&&this._registration.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:this._app_key}).then((function(t){e._is_subscribed=!0,e._subscription=t,e.send_subscribe(),e._update_container()})).catch((function(t){console.log("Failed to subscribe the user: ",t),e._update_container()}))}},{key:"unsubscribe",value:function(){var e=this;this._subscription.unsubscribe().catch((function(e){console.log("Error unsubscribing",e)})).then((function(){e._is_subscribed=!1,e.send_unsubscribe(),e._update_container()}))}},{key:"_update_container",value:function(){if("denied"===Notification.permission)return this._container.disable(!0),void this.send_unsubscribe();this._container.enable(),this._is_subscribed?this._container.check():this._container.uncheck()}}],[{key:"support",value:function(){return"serviceWorker"in navigator&&"PushManager"in window}}]),e}();function Tt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];t.innerHTML="",Object.values(e.list).forEach((function(e){var i=document.createElement("label"),r=document.createElement("input"),a=document.createElement("span");i.classList.add("group-user-check"),r.type="checkbox",r.value=e.id,a.textContent=e.name,n.find((function(t){return t.id==e.id}))&&(r.checked=!0),i.appendChild(r),i.appendChild(a),t.appendChild(i)}))}function At(e){var t=[];return e.querySelectorAll("input").forEach((function(e){e.checked&&t.push(+e.value)})),t}var Ct=null;var Mt=null;var Pt=function(){function e(t,n,r,a){i(this,e),this._id=t,this._name=n,this._description=r,this._members=a}return a(e,[{key:"size",get:function(){return this._members.length}},{key:"id",get:function(){return this._id}},{key:"name",get:function(){return this._name}},{key:"description",get:function(){return this._description}},{key:"members",get:function(){return this._members}},{key:"add_user",value:function(e){this._members.find((function(t){return t==e}))||this._members.push(e)}},{key:"contain",value:function(e){return!!this._members.find((function(t){return t==e}))}},{key:"remove_user",value:function(e){this._members=this._members.filter((function(t){return t!=e}))}},{key:"get_table_view",value:function(e){var t=document.createElement("tr");t.dataset.id=this._id;var n=[];return this._members.forEach((function(t){var i=e.get_user(t);n.push(i?i.username:"id:".concat(t))})),t.innerHTML="<td>".concat(this._id,"</td>")+"<td>".concat(this._name,"</td>")+"<td>".concat(this._description,"</td>")+"<td>".concat(this.size,"</td>")+"<td>".concat(n.join(" / "),"</td>"),t}}]),e}(),qt=function(){function e(t,n){i(this,e),this._list={},this._user_list=t,this._view=new Lt(this,n)}return a(e,[{key:"size",get:function(){return Object.keys(this._list).length}},{key:"list",get:function(){return this._list}},{key:"add",value:function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this._list[e]=new Pt(e,t,n,i),r&&this.update_view()}},{key:"set_user_group",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.remove_all_user(e,!1),this.add_user_to_groups(e,t,!1),n&&this.update_view()}},{key:"contain_user",value:function(e){return Object.values(this._list).filter((function(t){return t.contain(e)}))}},{key:"add_user_to_groups",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t.forEach((function(t){t in n._list&&n._list[t].add_user(e)})),i&&this.update_view()}},{key:"remove",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];delete this._list[e],t&&this.update_view()}},{key:"remove_all_user",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Object.values(this._list).forEach((function(t){return t.remove_user(e)})),t&&this.update_view()}},{key:"get_group",value:function(e){return this._list[e]}},{key:"update_view",value:function(){this._view.update_view(this._user_list)}}]),e}(),Lt=function(){function e(t,n){i(this,e),this._model=t,this._container=n}return a(e,[{key:"update_view",value:function(e){var t=this;this._container.innerHTML="",this._model.size?Object.values(this._model.list).forEach((function(n){t._container.appendChild(n.get_table_view(e))})):this._container.innerHTML="<tr><td colspan=6><em>No groups avaiable</em></td></tr>"}}]),e}(),Dt=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;i(this,e),this._template=t,this._script_init=n,this._script_end=r}return a(e,[{key:"load",value:function(e){if(e.appendChild(this._template.content.cloneNode(!0)),this._script_init){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];this._script_init.apply(this,[e].concat(n))}}},{key:"terminate",value:function(e){if(this._script_end){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];this._script_end.apply(this,[e].concat(n))}}}]),e}(),Nt=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;i(this,e),this._container=t.content.firstElementChild.cloneNode(!0),this._script_init=n,this._script_end=r,this._run_once=a}return a(e,[{key:"container",get:function(){return this._container}},{key:"install",value:function(){if(this._run_once){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._run_once.apply(this,[this._container].concat(t))}}},{key:"load",value:function(e){if(e.appendChild(this._container),this._script_init){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];this._script_init.apply(this,[e].concat(n))}}},{key:"terminate",value:function(e){if(this._script_end){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];this._script_end.apply(this,[e].concat(n))}e.removeChild(this._container)}}]),e}(),jt=function(){function e(t){i(this,e),this._container=t,this._list={},this._current_name=null}return a(e,[{key:"current",get:function(){return this._current_name}},{key:"container",get:function(){return this._container}},{key:"add",value:function(e,t){return"string"==typeof e&&(t instanceof Dt||t instanceof Nt)&&!(e in this._list)&&void(this._list[e]=t)}},{key:"run",value:function(e){if(this._current_name!=e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var r,a;this._current_name&&(r=this._list[this._current_name]).terminate.apply(r,[this._container].concat(n)),this._current_name=null,this._container.innerHTML="",e in this._list&&((a=this._list[e]).load.apply(a,[this._container].concat(n)),this._current_name=e)}}}]),e}();function Rt(e,t,n){var i=t.querySelector("#admin-user-tbody"),r=t.querySelector("#admin-group-tbody");n.users=new bt(i),n.groups=new qt(n.users,r),function(e,t,n){t.forEach((function(t){e.users.add(t.id,t.username,t.name,t.email,t.telegram_chat_id,t.status,!1)})),e.users.update_view(),Ct&&n.removeEventListener("click",Ct),Ct=function(t){if(t.target.classList.contains("delete-data"))document.body.appendChild(function(e,t){var n=document.createElement("template");n.innerHTML="<div class=popup-container>\n  <h1 class=popup-header>\n    <i class=\"fas fa-user-slash\"></i>\n    <span class=popup-title>Delete User</span>\n  </h1>\n  <div class=popup-content>\n    <span class=popup-content-text>\n      <p>Delete user '<span class=user-name></span>'?</p>\n      <p>Any permission or policy related to this user will also be deleted!</p>\n    </span>\n    <div class=popup-option-container>\n      <span class=popup-option id=option-yes>Yes</span>\n      <span class=popup-option id=option-no>No</span>\n    </div>\n  </div>\n</div>\n";var i=document.createElement("pop-modal"),r=n.content.cloneNode(!0),a=e.users.get_user(t);r.querySelector(".user-name").textContent=a.username,i.appendChild(r),i.addEventListener("cancel",(function(e){i.delete()}));var o=i.querySelector("#option-yes"),s=i.querySelector("#option-no");return i.addEventListener("click",(function(t){t.target!=s?t.target==o&&(e.send(Ne.USER,je.DELETE_USER,{id:a.id}),i.delete()):i.delete()})),i.show(),i}(e,t.target.dataset.id));else{var n=t.composedPath()[1];"id"in n.dataset&&document.body.appendChild(function(e,t){var n=document.createElement("template");n.innerHTML='<div class=popup-container>\n  <h1 class=popup-header>\n    <i class="fas fa-user-edit"></i>\n    <span class=popup-title>Edit User</span>\n  </h1>\n  <div class=popup-content>\n    <span class=popup-content-text>\n      <div>\n        <span title=\'User ID\'>\n          <span><i class="fas fa-fingerprint"></i></span>\n          <span id=user-id></span>\n        </span>\n        <span title=Username>\n          <span><i class="fas fa-user"></i></span>\n          <span id=username></span>\n        </span>\n        <span title=Name>\n          <span><i class="fas fa-signature"></i></span>\n          <span id=name></span>\n        </span>\n        <span title=Email>\n          <span><i class="fas fa-envelope-open-text"></i></span>\n          <span id=email></span>\n        </span>\n        <span title=\'Telegram Chat ID\'>\n          <span><i slot=icon class="fab fa-telegram-plane"></i></span>\n          <span id=telegram-chat-id></span>\n        </span>\n      </div>\n      <fieldset id=group-user-fieldset>\n        <legend>Groups</legend>\n        <div id=add-user-group-list></div>\n      </fieldset>\n    </span>\n    <div>\n      <div class=popup-error></div>\n      <div class=popup-option-container>\n        <span class=popup-option id=option-yes>Change</span>\n        <span class=popup-option id=option-cancel>Cancel</span>\n      </div>\n  </div>\n  </div>\n</div>\n';var i=document.createElement("pop-modal"),r=e.users.get_user(t);i.classList.add("popup-modal"),i.appendChild(n.content.cloneNode(!0)),i.addEventListener("cancel",(function(e){i.delete()}));var a=i.querySelector("#user-id"),o=i.querySelector("#username"),s=i.querySelector("#name"),c=i.querySelector("#email"),l=i.querySelector("#telegram-chat-id"),u=i.querySelector("#option-yes"),d=i.querySelector("#option-cancel"),h=i.querySelector("#add-user-group-list");return a.textContent=r.id,o.textContent=r.username,s.textContent=r.name,c.textContent=r.email?r.email:"<no email>",l.textContent=r.telegram_chat_id?r.telegram_chat_id:"<no chat ID>",Tt(e.groups,h,e.groups.contain_user(r.id)),i.addEventListener("click",(function(t){t.target!=d?t.target==u&&(e.send(Ne.USER,je.EDIT_USER,{id:r.id,username:r.username,name:r.name,email:r.email,telegram_chat_id:r.telegram_chat_id,groups:At(h)}),i.delete()):i.delete()})),i.show(),i}(e,n.dataset.id))}},n.addEventListener("click",Ct)}(n,e.data.users,t.querySelector("#admin-user-tbody")),function(e,t,n){n.innerHTML="",t.forEach((function(t){e.groups.add(t.id,t.name,t.description,t.members,!1)})),e.groups.update_view(),Mt&&n.removeEventListener("click",Mt),Mt=function(t){t.target.classList.contains("delete-data")&&document.body.appendChild(function(e,t){var n=document.createElement("pop-modal"),i=delete_template.content.cloneNode(!0);i.querySelector(".group-name").textContent=t.name,n.appendChild(i),n.addEventListener("cancel",(function(e){n.delete()}));var r=n.querySelector("#option-yes"),a=n.querySelector("#option-no");return n.addEventListener("click",(function(i){i.target!=a?i.target==r&&(e.send(Ne.USER,je.DELETE_GROUP,{id:t.id}),n.delete()):n.delete()})),n.show(),n}(e,e.groups.get_group(t.target.dataset.id)))},n.addEventListener("click",Mt)}(n,e.data.groups,t.querySelector("#admin-group-tbody"))}function Ut(e,t,n){Object.entries(e.data).forEach((function(e){var n=he(e,2),i=n[0],r=n[1];switch(i){case"mail":var a=t.querySelector("#notify-mail");a.querySelector("#notify-mail-check").checked=r.enable,a.querySelector("#notify-mail-server").value=r.server,a.querySelector("#notify-mail-port").value=r.port,a.querySelector("#notify-mail-user").value=r.user,a.querySelector("#notify-mail-password").value=r.password;break;case"telegram":var o=t.querySelector("#notify-telegram");o.querySelector("#notify-telegram-check").checked=r.enable,o.querySelector(".input-text").value=r.token;break;case"push":t.querySelector("#notify-push").querySelector("#notify-push-check").checked=r.enable}}))}function It(e,t){t.add_handler(Ne.USER,je.USER_GROUP_POLICIES,Rt,e,t),t.add_handler(Ne.USER,je.ADD_USER,(function(e){var n=e.data;t.users.add(n.id,n.username,n.name,n.email,n.telegram_chat_id,n.status,!0),"groups"in n&&Array.isArray(n.groups)&&t.groups.add_user_to_groups(n.id,n.groups,!0)})),t.add_handler(Ne.USER,je.DELETE_USER,(function(e){t.users.remove(e.data.id,!0),t.groups.remove_all_user(e.data.id,!0)})),t.add_handler(Ne.USER,je.EDIT_USER,(function(e){t.users.update(e.data.id,e.data.username,e.data.name,e.data.email,!0),t.groups.set_user_group(e.data.id,e.data.groups,!0)})),t.add_handler(Ne.NOTIFY,Be,Ut,e,t),t.send(Ne.USER,je.USER_GROUP_POLICIES),t.send(Ne.NOTIFY,Be),e.querySelector("#admin-user-add").addEventListener("click",(function(e){document.body.appendChild(function(e){var t=document.createElement("template");t.innerHTML='<div class=popup-container>\n  <h1 class=popup-header>\n    <i class="fas fa-user"></i>\n    <span class=popup-title>Add User</span>\n  </h1>\n  <div class=popup-content>\n    <span class=popup-content-text>\n      <x-input-icon class=add-input id=username placeholder=Username* title=Username>\n        <i slot=icon class="fas fa-user"></i>\n      </x-input-icon>\n      <x-input-icon class=add-input id=name placeholder=Name title=Name>\n        <i slot=icon class="fas fa-signature"></i>\n      </x-input-icon>\n      <x-input-icon class=add-input id=password placeholder=Password* title=Password type=password>\n        <i slot=icon class="fas fa-key"></i>\n      </x-input-icon>\n      <x-input-icon class=add-input id=email placeholder=Email title=email>\n        <i slot=icon class="fas fa-envelope-open-text"></i>\n      </x-input-icon>\n      <x-input-icon class=add-input id=telegram-chat-id placeholder=\'Telegram Chat ID\' title=\'Telegram Chat ID\'>\n        <i slot=icon class="fab fa-telegram-plane"></i>\n      </x-input-icon>\n      <fieldset id=group-user-fieldset>\n        <legend>Groups</legend>\n        <div id=add-user-group-list></div>\n      </fieldset>\n    </span>\n    <div>\n      <div class=popup-error></div>\n      <div class=popup-option-container>\n        <span class=popup-option id=option-yes>Add</span>\n        <span class=popup-option id=option-cancel>Cancel</span>\n      </div>\n  </div>\n  </div>\n</div>\n';var n=document.createElement("pop-modal");n.appendChild(t.content.cloneNode(!0)),n.addEventListener("cancel",(function(e){n.delete()}));var i=n.querySelector("#username"),r=n.querySelector("#name"),a=n.querySelector("#password"),o=n.querySelector("#email"),s=n.querySelector("#telegram-chat-id"),c=n.querySelector("#option-yes"),l=n.querySelector("#option-cancel"),u=n.querySelector("#add-user-group-list"),d=n.querySelector(".popup-error");return Tt(e.groups,u),n.addEventListener("click",(function(t){if(t.target!=l){if(t.target==c){var h=e.users.check_username(i.value);if(h.err)return void(d.textContent=h.message);if((h=gt.check_password(a.value)).err)return void(d.textContent=h.message);e.send(Ne.USER,je.ADD_USER,{username:i.value,name:r.value?r.value:i.value,password:a.value,email:o.value,telegram_chat_id:s.value,groups:At(u)}),n.delete()}}else n.delete()})),n.show(),n}(t,t.groups))})),e.querySelector("#notify-update-credentials").addEventListener("click",(function(n){var i={},r=e.querySelector("#notify-mail"),a={};a.enable=r.querySelector("#notify-mail-check").checked,a.server=r.querySelector("#notify-mail-server").value,a.port=r.querySelector("#notify-mail-port").value,a.user=r.querySelector("#notify-mail-user").value,a.password=r.querySelector("#notify-mail-password").value,i.mail=a;var o=e.querySelector("#notify-telegram"),s={};s.enable=o.querySelector("#notify-telegram-check").checked,s.token=o.querySelector(".input-text").value,i.telegram=s;var c={enable:e.querySelector("#notify-push").querySelector("#notify-push-check").checked};i.push=c,t.send(Ne.NOTIFY,"update_credential",i)})),e.querySelector("#mail-option-container").addEventListener("click",(function(t){for(var n=t.target;!("comp"in n.dataset);)if((n=n.parentNode)==e)return;var i={google:{server:"smtp.gmail.com",port:"465"},yahoo:{server:"smtp.mail.yahoo.com",port:"465"}};if(n.dataset.comp in i){var r=e.querySelector("#notify-mail");r.querySelector("#notify-mail-server").value=i[n.dataset.comp].server,r.querySelector("#notify-mail-port").value=i[n.dataset.comp].port}}))}function zt(e,t){t.remove_handler(Ne.USER,je.USER_GROUP_POLICIES),t.remove_handler(Ne.USER,je.ADD_USER),t.remove_handler(Ne.USER,je.DELETE_USER),t.remove_handler(Ne.USER,je.EDIT_USER),t.remove_handler(Ne.NOTIFY,Be)}function Zt(e){var t=document.createElement("template");t.innerHTML="<div id=sensor-type-popup-container class=popup-container>\n  <h1 class=popup-header>\n    <i class=\"fas fa-weight-hanging\"></i>\n    <span class=popup-title></span>\n  </h1>\n  <div class=popup-content>\n    <div class=input-line>\n      <overtext-input placeholder=ID class='sensor-type-short sensor-type-id'>\n        <span slot=field>ID</span>\n      </overtext-input>\n      <overtext-input placeholder='Name ID' class='sensor-type-long sensor-type-name-id'>\n        <span slot=field>Name ID</span>\n      </overtext-input>\n    </div>\n    <overtext-input placeholder=Name class=sensor-type-name>\n      <span slot=field>Name</span>\n    </overtext-input>\n    <div class=input-line>\n      <overtext-input placeholder='Unit' class='sensor-type-short sensor-type-unit'>\n        <span slot=field>Unit</span>\n      </overtext-input>\n      <overtext-input placeholder='Unit Name' class='sensor-type-long sensor-type-unit-name'>\n        <span slot=field>Unit Name</span>\n      </overtext-input>\n    </div>\n    <div>\n      <select class='hide-first-opiton sensor-type-unit-type'></select>\n      <label title='A new value will only be inserted when a different value from previouly be received'><input class=sensor-type-add-change type=checkbox> Insert only at change</label>\n    </div>\n    <fieldset>\n      <legend>Description</legend>\n      <div name=\"name\" class=sensor-type-description contenteditable=\"true\"></div>\n    </fieldset>\n    <div>\n      <div class=popup-error></div>\n      <div class=popup-option-container>\n        <span class=popup-option id=option-yes></span>\n        <span class=popup-option id=option-cancel></span>\n      </div>\n    </div>\n  </div>\n</div>\n";var n=document.createElement("pop-modal"),i=document.importNode(t.content.firstElementChild,!0);i.classList.add("sensor-type-".concat(e,"-new")),n.appendChild(i);var r=n.querySelector(".sensor-type-unit-type");return r.innerHTML='<option value="">Unit Type</option>',Object.values(He).forEach((function(e){var t=document.createElement("option");t.value=e.value,t.textContent=e.title,r.appendChild(t)})),n.addEventListener("cancel",(function(e){n.delete()})),n.querySelector("#option-cancel").addEventListener("click",(function(e){n.delete()})),n.show(),n}function Ht(e){return{error:e.querySelector(".popup-error"),description:e.querySelector(".sensor-type-description"),unit_type:e.querySelector(".sensor-type-unit-type"),unit_name:e.querySelector(".sensor-type-unit-name"),unit:e.querySelector(".sensor-type-unit"),name:e.querySelector(".sensor-type-name"),name_id:e.querySelector(".sensor-type-name-id"),id:e.querySelector(".sensor-type-id"),add_change:e.querySelector(".sensor-type-add-change")}}function Bt(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!n){if(e.id.value=e.id.value.trim(),!e.id.value.length||n)return e.error.textContent="ID field can't be empty",!1;if(t.has_id(+e.id.value))return e.error.textContent="ID '".concat(e.id.value,"' already exits"),!1;if(e.name_id.value=e.name_id.value.trim(),!e.name_id.value.length)return e.error.textContent="Name ID field can't be empty",!1;if(t.has_name(e.name_id.value))return e.error.textContent="Name ID '".concat(e.name_id.value,"' already exits"),!1}return e.name.value=e.name.value.trim(),e.name.value.length||(e.name.value=e.name_id.value),e.unit.value=e.unit.value.trim(),e.unit.value.length?(e.unit_name.value=e.unit_name.value.trim(),e.unit_name.value.length||(e.unit_name.value=e.unit.value),!(!n&&""==e.unit_type.selectedOptions[0].value&&(e.error.textContent="Unit type field not selected",1))):(e.error.textContent="Unit field can't be empty",!1)}function Yt(e,t){var n=e.querySelector("#sensor-type-tbody");t.sensor_type_list.register_view(n),t.sensor_type_list.update_view(),e.querySelector(".sensor-type-add-new-button").addEventListener("click",(function(e){var n=Zt("add");!function(e,t){var n=Ht(e);n.id.addEventListener("keydown",(function(e){e.key.length>1||(e.key<"0"||e.key>"9")&&e.preventDefault()})),n.name_id.addEventListener("keydown",(function(e){" "==e.key&&e.preventDefault()})),e.querySelector("#option-yes").addEventListener("click",(function(i){Bt(n,t.sensor_type_list)&&(t.send(Ne.SENSOR,Ue.ADD,{id:+n.id.value,name:n.name_id.value,long_name:n.name.value,unit:n.unit.value,unit_name:n.unit_name.value,unit_type:+n.unit_type.selectedOptions[0].value,description:n.description.innerText,add_change:n.add_change.checked}),e.delete())}))}(n,t),document.body.appendChild(n)})),n.addEventListener("click",(function(e){for(var i=e.composedPath(),r=null,a=0,o="show";i[a]!=n;){if("sensor"in i[a].dataset){r=i[a].dataset.sensor;break}i[a].classList.contains("edit-data")?o="edit":i[a].classList.contains("delete-data")&&(o="delete"),a++}if(r)if("delete"!=o){var s=Zt(o);"edit"==o?function(e,t,n){var i=Ht(e);i.id.disabled=!0,i.name_id.disabled=!0,i.unit_type.disabled=!0,i.id.value=t.id,i.name_id.value=t.name,i.name.value=t.long_name,i.unit.value=t.unit,i.unit_name.value=t.unit_name,i.unit_type.selectedIndex=t.type+1,i.description.innerText=t.description,i.add_change.checked=t.add_change,e.querySelector("#option-yes").addEventListener("click",(function(t){Bt(i,n.sensor_type_list,!0)&&(n.send(Ne.SENSOR,Ue.EDIT,{id:+i.id.value,name:i.name_id.value,long_name:i.name.value,unit:i.unit.value,unit_name:i.unit_name.value,unit_type:+i.unit_type.selectedOptions[0].value,description:i.description.innerText,add_change:i.add_change.checked}),e.delete())}))}(s,t.sensor_type_list.list[r],t):function(e,t){var n=Ht(e);Object.entries(n).forEach((function(e){var t=he(e,2);t[0],t[1].disabled=!0})),n.description.contentEditable=!1,n.id.value=t.id,n.name_id.value=t.name,n.name.value=t.long_name,n.unit.value=t.unit,n.unit_name.value=t.unit_name,n.unit_type.selectedIndex=t.type+1,n.description.innerText=t.description,n.add_change.checked=t.add_change}(s,t.sensor_type_list.list[r]),document.body.appendChild(s)}else t.send(Ne.SENSOR,Ue.REMOVE,{name:r})}))}function Ft(e,t){t.sensor_type_list.register_view()}function Vt(e,t){}function Gt(e,t){}var Wt={0:{value:0,string:"not determined",short_string:"ESP_RST_UNKNOWN"},1:{value:1,string:"power-on event",short_string:"ESP_RST_POWERON"},2:{value:2,string:"external pin",short_string:"ESP_RST_EXT"},3:{value:3,string:"software reset",short_string:"ESP_RST_SW"},4:{value:4,string:"exception/panic",short_string:"ESP_RST_PANIC"},5:{value:5,string:"interrupt watchdog",short_string:"ESP_RST_INT_WDT"},6:{value:6,string:"task watchdog",short_string:"ESP_RST_TASK_WDT"},7:{value:7,string:"other watchdogs",short_string:"ESP_RST_WDT"},8:{value:8,string:"exiting deep sleep",short_string:"ESP_RST_DEEPSLEEP"},9:{value:9,string:"brownout",short_string:"ESP_RST_BROWNOUT"},10:{value:10,string:"over SDIO",short_string:"ESP_RST_BROWNOUT"}};function Xt(e){return e in Wt?Wt[e].string:"not recognized"}function Kt(e,t){var n=e.index?"-".concat(e.index):"";return t?"".concat(t.long_name).concat(n):"Sensor ".concat(e.type).concat(n)}function Jt(e,t){if(!t||"gpios"!=t.name)return e;var n=15&e,i=e>>4&15;return"Out:"+(e>>8&7).toString(2).padStart(3,"0")+"\nIn:"+i.toString(2).padStart(4,"0")+" WL:"+n.toString(2).padStart(4,"0")}function $t(e,t,n,i){Object.values(t.sensor_list.list).forEach((function(t){if(e.querySelector(".description-sensor-".concat(t.type,"-").concat(t.index))){if(i&&t.has_data(i)){var r=e.querySelector(".detail-value-".concat(t.type,"-").concat(t.index)),a=n.sensor_type_list.get_id(t.type);r.innerText=Jt(t.last_data().value,a),Ee(r)}}else e.appendChild(function(e,t){var n=document.createElement("detail-line");n.classList.add("description-sensor-".concat(e.type,"-").concat(e.index),"description-sensor"),n.dataset.sensor="".concat(e.type,"@").concat(e.index);var i=document.createElement("i");i.classList.add("fas","fa-thermometer"),i.slot="icon",n.appendChild(i);var r=document.createElement("div");r.slot="name";var a=t.get_id(e.type);r.textContent=Kt(e,a),n.appendChild(r);var o=document.createElement("div");return o.innerText=Jt(e.last_data().value,a),o.classList.add("detail-value-".concat(e.type,"-").concat(e.index),"shine"),n.appendChild(o),n}(t,n.sensor_type_list))}))}function Qt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function en(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qt(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function tn(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};switch(e){case"top_axis":return en(en({},{margin:{top:40,right:20,bottom:10,left:60},axis:{top:{label:"Time",format:Ge.i$Z("%H:%M")},left:{label:"".concat(Kt(t,n)," (").concat(n.unit,")")}},dot:{fill:"green",stroke:"green"},path:{stroke:"green"}}),i);case"digital":return en(en({},{margin:{top:20,right:20,bottom:20,left:30},height:110,domain_y:[0,1],curve:Ge.jsv,axis:{bottom:{format:Ge.i$Z("%H:%M"),bottom:"Time"},left:{label:n.long_name,values:[]}}}),i);default:return en(en({},{margin:{top:20,right:20,bottom:40,left:60},axis:{bottom:{label:"Time",format:Ge.i$Z("%H:%M")},left:{label:"".concat(Kt(t,n)," (").concat(n.unit,")")}}}),i)}}function nn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function rn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nn(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Object.freeze(Wt);var an={margin:{top:20,right:20,bottom:40,left:50},width:!1,height:300,curve:Ge.FdL,tooltip:{time_format:"%H:%M:%S"},axis:{bottom:{format:Ge.i$Z("%H:%M"),label:"Time"},left:{label:"Value"}},zoom:{max:1/0},brush:{height:80,margin:{bottom:30,top:0}},old_brush:!1,path:!1,dot:!1},on=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,e),this._options=rn(rn({},an),r),this._width=t.offsetWidth-this._options.margin.left-this._options.margin.right,this._height=this._options.height-this._options.margin.top-this._options.margin.bottom,this._options.tooltip&&(this._tooltip=Ge.Ys(t).append("div").attr("class","tooltip").style("opacity",0),"time_format"in this._options.tooltip&&(this._tooltipFormatTime=Ge.i$Z(this._options.tooltip.time_format))),this._x=Ge.Xf().range([0,this._width]),this._y=Ge.BYU().range([this._height,0]),this._valueline=Ge.jvg().curve(this._options.curve).x((function(e){return n._x(e.time)})).y((function(e){return n._y(e.value)}));var a=Ge.Ys(t).append("svg").attr("viewBox","0 0 "+(this._width+this._options.margin.left+this._options.margin.right)+" "+(this._height+this._options.margin.top+this._options.margin.bottom+(this._options.brush?this._options.brush.height+this._options.brush.margin.top+this._options.brush.margin.bottom:0))).attr("preserveAspectRatio","xMidYMid meet");this._svg=a.append("g").attr("transform","translate("+this._options.margin.left+","+this._options.margin.top+")");var o=this._options.axis;o&&(this._create_axis(Object.keys(o)),this._create_labels(o)),this._options.zoom||this._options.brush||this._options.old_brush?(this._x2=Ge.Xf().range(this._x.range()),this._svg.append("defs").append("svg:clipPath").attr("id","clip").append("svg:rect").attr("width",this._width).attr("height",this._height+10).attr("x",0).attr("y",-5),this._area=this._svg.append("g").attr("clip-path","url(#clip)"),this._transform=null):this._area=this._svg,this._options.zoom&&(this._zoom=Ge.sPX().scaleExtent([1,this._options.zoom.max]).translateExtent([[0,0],[this._width,this._height]]).extent([[0,0],[this._width,this._height]]).on("zoom",this._zoomed.bind(this)),this._area.append("rect").attr("class","zoom").attr("width",this._width).attr("height",this._height+10).attr("x",0).attr("y",-5).call(this._zoom)),this._options.brush&&(this._y2=Ge.BYU().range([this._options.brush.height,0]),this._valueline2=Ge.jvg().curve(this._options.curve).x((function(e){return n._x2(e.time)})).y((function(e){return n._y2(e.value)})),this._brush=Ge.Yud().extent([[0,0],[this._width,this._options.brush.height]]).on("brush end",this._brushed.bind(this)),this._svg2=a.append("g").attr("transform","translate("+this._options.margin.left+","+(this._options.brush.margin.top+this._options.height)+")"),this._create_axis(["bottom"],this._options.brush.height,this._svg2),this._svg2.append("g").attr("class","brush").call(this._brush).call(this._brush.move,this._x.range())),this._options.old_brush&&(this._old_brush=Ge.Yud().extent([[0,0],[this._width,this._height]]).on("end",this._old_brushed.bind(this)),this._area.append("g").attr("class","brush").call(this._old_brush),this._cleared=!1)}return a(e,[{key:"set_brush_selection",value:function(e){if(this._options.brush){var t=this._area.selectAll(".line").data()[0];if(t.length<e)this._svg2.select(".brush").call(this._brush.move,this._x.range());else{var n=t[t.length-e];this._update_brush_selection([this._x2(n.time),this._x2.range()[1]])}}}},{key:"update",value:function(e){var t=this;if(this._options.zoom||this._options.brush||this._options.old_brush)if(this._x2.domain(Ge.Wem(e,(function(e){return e.time}))),this._options.brush){var n=Ge.mN7(this._svg2.select(".brush").node());this._transform=n.map(this._x2.invert,this._x2),this._x.domain(this._transform)}else this._x.domain(this._transform?this._transform:this._x2.domain());else this._x.domain(Ge.Wem(e,(function(e){return e.time})));this._y.domain("domain_y"in this._options?this._options.domain_y:Ge.Wem(e,(function(e){return e.value}))),this._options.brush&&this._y2.domain(this._y.domain()),this._area.selectAll(".line").data([e],(function(e){return e.time})).join((function(e){return e.append("path").classed("line",!0).call(t._style.bind(t),t._options.path)})).transition().attr("d",this._valueline),this._area.selectAll("circle").data(e).join((function(e){return e.append("circle").classed("circle",!0).call(t._style.bind(t),t._options.dot).call(t._set_tooltips.bind(t))})).transition().attr("r",5).attr("cx",(function(e){return t._x(e.time)})).attr("cy",(function(e){return t._y(e.value)})),this._update_axis(this._options.axis),this._update_brush(e)}},{key:"_update_brush",value:function(e){var t=this;this._options.brush&&(this._svg2.selectAll(".line-brush").data([e],(function(e){return e.time})).join((function(e){return e.append("path").classed("line-brush",!0).call(t._style.bind(t),t._options.path)})).transition().attr("d",this._valueline2),this._svg2.select(".bottom--axis").call(this._format_axis(Ge.LLu(this._x2),{format:Ge.i$Z("%H:%M")})))}},{key:"_set_tooltips",value:function(e){var t=this;this._tooltip&&e.on("mouseover",(function(e,n){t._tooltip.transition().duration(200).style("opacity",.9),t._tooltip.html(t._tooltipFormatTime(n.time)+"<br/>"+n.value).style("left",e.offsetX-25+"px").style("top",e.offsetY-30+"px")})).on("mouseout",(function(e){t._tooltip.transition().duration(500).style("opacity",0)}))}},{key:"_create_axis",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e&&Array.isArray(e)&&(i||(i=this._svg),e.forEach((function(e){switch(e){case"top":case"left":case"right":i.append("g").attr("class","axis ".concat(e,"--axis"));break;case"bottom":i.append("g").attr("class","axis ".concat(e,"--axis")).attr("transform","translate(0,"+(n||t._height)+")")}})))}},{key:"_update_axis",value:function(e){var t=this;Object.entries(e).forEach((function(e){var n=he(e,2),i=n[0],r=n[1],a=t._svg.select(".".concat(i,"--axis"));if(!a.empty())switch(i){case"top":a.call(t._format_axis(Ge.F5q(t._x),r));break;case"bottom":a.call(t._format_axis(Ge.LLu(t._x),r));break;case"left":a.call(t._format_axis(Ge.y4O(t._y),r));break;case"right":a.call(t._format_axis(Ge.Khx(t._y),r))}}))}},{key:"_format_axis",value:function(e,t){return"format"in t&&e.tickFormat(t.format),"values"in t&&e.tickValues(t.values),e}},{key:"_create_labels",value:function(e){"top"in e&&"label"in e.top&&this._label_top(e.top.label),"left"in e&&"label"in e.left&&this._label_left(e.left.label),"bottom"in e&&"label"in e.bottom&&this._label_bottom(e.bottom.label)}},{key:"_label_top",value:function(e){this._svg.append("text").attr("class","label top--label").attr("transform","translate("+this._width/2+" ,"+(0-this._options.margin.top/2)+")").style("text-anchor","middle").text(e)}},{key:"_label_left",value:function(e){this._svg.append("text").attr("transform","rotate(-90)").attr("y",0-this._options.margin.left).attr("x",0-this._height/2).attr("class","label left--label").attr("dy","1em").style("text-anchor","middle").text(e)}},{key:"_label_bottom",value:function(e){this._svg.append("text").attr("class","label bottom--label").attr("y",this._height+this._options.margin.bottom/2).attr("dy","1em").attr("x",this._width/2).style("text-anchor","middle").text(e)}},{key:"_style",value:function(e,t){t&&("class"in t&&e.classed(t.class,!0),"stroke"in t&&e.style("stroke",t.stroke),"fill"in t&&e.style("fill",t.fill))}},{key:"_update_chart",value:function(){var e=this;this._area.selectAll(".line").transition().attr("d",this._valueline),this._area.selectAll("circle").transition().attr("r",5).attr("cx",(function(t){return e._x(t.time)})).attr("cy",(function(t){return e._y(t.value)})),this._update_axis(this._options.axis)}},{key:"_zoomed",value:function(e){if(this._transform=e.transform.rescaleX(this._x2).domain(),this._x.domain(this._transform),this._update_chart(),this._options.brush){var t=e.transform;this._svg2.select(".brush").call(this._brush.move,this._x.range().map(t.invertX,t))}}},{key:"_update_brush_selection",value:function(e){this._transform=e.map(this._x2.invert,this._x2),this._x.domain(this._transform),this._svg.select(".zoom").call(this._zoom.transform,Ge.CRH.scale(this._width/(e[1]-e[0])).translate(-e[0],0)),this._update_chart()}},{key:"_brushed",value:function(e){e.mode&&this._update_brush_selection(e.selection||this._x2.range())}},{key:"_old_brushed",value:function(e){if(this._cleared)this._cleared=!1;else{var t=e.selection;t&&t[0]==this._x.domain()[0]&&t[1]==this._x.domain()[1]||(this._transform=t?"handle"==e.mode?[this._x.invert(t[0]),this._x.invert(t[1])]:t.map(this._x2.invert,this._x2):this._x2.domain(),this._x.domain(this._transform),this._update_chart(),t&&(this._cleared=!0,this._svg.select(".brush").call(this._old_brush.move,null)))}}}]),e}();function sn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function cn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sn(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ln=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};i(this,e),this._outputs=[];for(var a=1;a<=3;a++){var o=document.createElement("div");o.classList.add("detail-device-graph-output","chart-line-graph"),t.appendChild(o);var s=new on(o,cn(cn(cn({},tn("digital",n,{long_name:"AC Load "+a})),{dot:{fill:Ge.xHP[a-1],stroke:Ge.xHP[a-1]},path:{stroke:Ge.xHP[a-1]}}),r));this._outputs.push(s)}this._inputs=[];for(var c=1;c<=8;c++){var l=document.createElement("div");l.classList.add("detail-device-graph-input","chart-line-graph"),t.appendChild(l);var u=new on(l,cn(cn(cn({},tn("digital",n,{long_name:"Input "+c})),{dot:{fill:Ge.xHP[c+3-1],stroke:Ge.xHP[c+3-1]},path:{stroke:Ge.xHP[c+3-1]}}),r));this._inputs.push(u)}}return a(e,[{key:"set_brush_selection",value:function(e){this._inputs.forEach((function(t){return t.set_brush_selection(e)})),this._outputs.forEach((function(t){return t.set_brush_selection(e)}))}},{key:"update",value:function(e){this._outputs.forEach((function(t,n){t.update(e.map((function(e){return{time:e.time,value:e.value>>n+8&1}})))})),this._inputs.forEach((function(t,n){t.update(e.map((function(e){return{time:e.time,value:e.value>>n&1}})))}))}}]),e}();function un(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return n?"rssi"==n.name?new on(e,tn("top_axis",t,n,i)):"gpios"!=n.name?new on(e,tn("normal",t,n,i)):new ln(e,t,i):new on(e,tn("normal",t,{long_name:"Value",unit:"num"},i))}function dn(e,t,n){var i=e.sensor_list.sensor(t.type,t.index).data;return n?i.slice(n):i}function hn(e,t,n,i,r){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;Object.values(n.sensor_list.list).forEach((function(s){var c=fn(s);if(c in e)r&&s.has_data(r)&&e[c].update(dn(n,s,o));else{var l=document.createElement("div");l.classList.add(".description-sensor-graph-".concat(s.type,"-").concat(s.index)),5!=s.type&&l.classList.add("chart-line-graph"),t.appendChild(l);var u=un(l,s,i.sensor_type_list.get_id(s.type),a);u&&(e[c]=u,e[c].update(dn(n,s,o)))}}))}function fn(e){return"".concat(e.type,"@").concat(e.index)}var pn=document.createElement("template");pn.innerHTML="<div id=sensor-description-content class=popup-container>\n  <span class=close>&times;</span>\n  <h1 class='sensor-description-title popup-title'></h1>\n  <div class=inner-container>\n    <section class=sensor-header>\n      <fieldset>\n        <legend>Export Data</legend>\n        <input class='sensor-export-init input-common' type=datetime-local> > <input class='sensor-export-end  input-common' type=datetime-local>\n        <button class='button-normal sensor-export-btn'>Export</button>\n      </fieldset>\n    </section>\n    <section class=sensor-data-container>\n      <div class=outer-table>\n        <table>\n          <thead>\n            <tr><th>Date</th><th>Value</th></tr>\n          </thead>\n          <tbody class=sensor-data-tbody>\n          </tbody>\n        </table>\n      </div>\n      <div class='sensor-graph chart-line-graph'></div>\n    </section>\n  </div>\n</div>\n";var _n=function(){function e(t,n,r,a){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};i(this,e),this._sensor=r,this._sensor_type=n.sensor_type_list.get_id(r.type);var s=pn.content.cloneNode(!0);s.querySelector(".close").addEventListener("click",(function(e){t.delete()})),s.querySelector(".sensor-description-title").textContent=Kt(this._sensor,this._sensor_type),this._table_tbody=s.querySelector(".sensor-data-tbody");var c=s.querySelector(".sensor-graph"),l=s.querySelector(".sensor-export-init"),u=s.querySelector(".sensor-export-end");s.querySelector(".sensor-export-btn").addEventListener("click",(function(e){n.send(Ne.SENSOR,Ue.EXPORT,{type:r.type,index:r.index,device_id:a.id,output:"csv",init:Math.floor(l.value?new Date(l.value).getTime()/1e3:0),end:Math.floor(u.value?new Date(u.value).getTime()/1e3:Date.now()/1e3)})})),t.appendChild(s),vn(this._table_tbody,this._sensor.data,this._sensor_type),this._graph=un(c,this._sensor,this._sensor_type,o)}return a(e,[{key:"sensor",get:function(){return this._sensor}},{key:"graph",get:function(){return this._graph}},{key:"update",value:function(){var e,t,n,i;this._graph.update(this._sensor.data),e=this._table_tbody,t=this._sensor.data,n=this._sensor_type,i=Ge.i$Z("%d/%m/%y %H:%M:%S"),Ge.Ys(e).selectAll("tr").data(t).join("tr").selectAll("td").data((function(e){return[i(e.time),Jt(e.value,n)]})).enter().append("td").text((function(e){return e}))}}]),e}();function vn(e,t){t.length?e.innerHTML="":e.innerHTML="<tr><td colspan=2>No data yet</td></tr>"}var mn=function(){function e(t){var n=this;i(this,e),this._type=t.querySelector(".custom-request-type"),this._made=t.querySelector(".custom-request-made"),this._payload=t.querySelector(".custom-request-payload"),this._path=t.querySelector(".custom-request-path"),t.querySelector(".custom-request-button").addEventListener("click",(function(e){if(0!=n._type.selectedIndex){var i=n._split_path();t.dispatchEvent(new CustomEvent("command",{bubbles:!0,detail:{type:"custom",method:n._type.selectedOptions[0].value,resource:i.path,query:i.query,payload:n._payload.value}})),n._made.textContent="".concat(n._type.selectedOptions[0].value,": ").concat(n._path.value.trim()," [").concat(n._payload.value.length,"]")}else n._made.textContent="Error! Request 'type' not set"}))}return a(e,[{key:"_split_path",value:function(){var e=he(this._path.value.trim().split("?"),2),t=e[0],n=e[1];return{path:t.split("/").filter((function(e){return e.length})),query:n?n.split("&").filter((function(e){return e.length})):[]}}}]),e}();function yn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function gn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yn(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function bn(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=document.createElement("sensor-notify");Object.values(e.sensor_list.list).forEach((function(e){var n=t.sensor_type_list.get_id(e.type);r.add_sensor(Kt(e,n),"".concat(e.type,"@").concat(e.index))})),i&&(r.value=i),n.querySelector(".notify-sensor-list").appendChild(r)}function wn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function xn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wn(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var kn=document.createElement("template");kn.innerHTML="<div id=main-device-description>\n  <h1 class=detail-title>\n    <span class=device-title>11:22:33:44:55:66</span>\n    <span class=device-notify><i class=\"fas fa-flag\"></i></span>\n  </h1>\n  <div class=detail-content>\n    <detail-line>\n      <i class=\"fas fa-link\" slot=icon></i>\n      <span slot=name>Status</span>\n      <span class='detail-connected shine'></span>\n    </detail-line>\n    <expand-menu>\n      <h2 slot=title>General</h2>\n      <detail-line>\n        <i class=\"fas fa-fingerprint\" slot=icon></i>\n        <div slot=name>ID</div>\n        <div class='detail-id shine'></div>\n      </detail-line>\n      <detail-line>\n        <i class=\"fas fa-signature\" slot=icon></i>\n        <div slot=name>Name</div>\n        <span class='detail-name-container detail-value shine'>\n          <span class=detail-name></span>\n          <span class=detail-edit-name><i class=\"fas fa-edit\"></i></span>\n        </span>\n      </detail-line>\n      <detail-line>\n        <i class=\"fas fa-code\" slot=icon></i>\n        <div slot=name>Firmware</div>\n        <div class='detail-fw shine'></div>\n      </detail-line>\n      <detail-line>\n        <i class=\"fas fa-microchip\" slot=icon></i>\n        <div slot=name>Hardware</div>\n        <div class='detail-hw shine'></div>\n      </detail-line>\n      <detail-line>\n        <i class=\"fas fa-at\" slot=icon></i>\n        <div slot=name>Endpoint</div>\n        <div class='detail-endpoint shine'></div>\n      </detail-line>\n    </expand-menu>\n    <expand-menu>\n      <h2 slot=title>Mesh Network</h2>\n      <detail-line>\n        <i class=\"fas fa-layer-group\" slot=icon></i>\n        <div slot=name>Layer</div>\n        <div class='detail-layer shine'></div>\n      </detail-line>\n      <detail-line>\n        <i class=\"fas fa-sort-up\" slot=icon></i>\n        <div slot=name>Parent</div>\n        <div class='detail-parent shine'></div>\n      </detail-line>\n      <detail-line>\n        <i class=\"fas fa-sitemap\" slot=icon></i>\n        <div slot=name>Net ID</div>\n        <div class='detail-netid shine'></div>\n      </detail-line>\n      <detail-line>\n        <i class=\"fas fa-sliders-h\" slot=icon></i>\n        <div slot=name>Channel</div>\n        <div class='detail-channel shine'></div>\n      </detail-line>\n      <detail-line>\n        <i class=\"fas fa-wifi\" slot=icon></i>\n        <div slot=name>MAC AP</div>\n        <div class='detail-macap shine'></div>\n      </detail-line>\n      <detail-line>\n        <i class=\"fas fa-baby\" slot=icon></i>\n        <div slot=name>Children</div>\n        <div class='detail-children shine'></div>\n      </detail-line>\n    </expand-menu>\n    <expand-menu>\n      <h2 slot=title>Configuration</h2>\n      <detail-line>\n        <i class=\"fas fa-clock\" slot=icon></i>\n        <div slot=name>RTC</div>\n        <div class='detail-has-rtc shine'></div>\n      </detail-line>\n      <detail-line>\n        <i class=\"fas fa-thermometer-half\" slot=icon></i>\n        <div slot=name>Temperature Sensor</div>\n        <div class='detail-has-temp shine'></div>\n      </detail-line>\n    </expand-menu>\n    <expand-menu>\n      <h2 slot=title>Sensors</h2>\n      <div class=description-sensor-content></div>\n    </expand-menu>\n    <expand-menu class=detail-device-commands>\n      <h2 slot=title>Commands</h2>\n      <label class=detail-device-command-force><input type=checkbox> Force</label>\n      <div class=device-command-list-container>\n        <detail-command class=detail-ac-load-container>\n          <i class=\"fas fa-bullseye\" slot=icon></i>\n          <div slot=title>AC Load</div>\n          <span class=detail-ac-load>\n            <btn-on-off data-index=1>\n              <span slot=on><i class=\"fas fa-check-circle\"></i></span>\n              <span slot=off><i class=\"fas fa-times-circle\"></i></span>\n            </btn-on-off>\n            <btn-on-off data-index=2>\n              <span slot=on><i class=\"fas fa-check-circle\"></i></span>\n              <span slot=off><i class=\"fas fa-times-circle\"></i></span>\n            </btn-on-off>\n            <btn-on-off data-index=3>\n              <span slot=on><i class=\"fas fa-check-circle\"></i></span>\n              <span slot=off><i class=\"fas fa-times-circle\"></i></span>\n            </btn-on-off>\n          </span>\n        </detail-command>\n        <detail-command id=detail-packet>\n          <i class=\"fas fa-cube\" slot=icon></i>\n          <div slot=title>Packets</div>\n          <array-command class='detail-command' data-type=packet>\n            <button data-index='board'>Board</button>\n            <button data-index='config'>Config</button>\n            <button data-index='sensors'>Sensors</button>\n            <button data-index='route'>Route</button>\n            <button data-index='full_config'>Full Config</button>\n          </array-command>\n        </detail-command>\n        <detail-command id=detail-time>\n          <i class=\"fas fa-clock\" slot=icon></i>\n          <div slot=title title=Time>Time</div>\n          <span class='detail-command detail-command-time'>\n            <div class=detail-time-value-container>\n              <div class='detail-time-value shine' title='<time> <lag> <fuse>' data-format=normal></div>\n              <div class='detail-time-switch' title='switch time format'><i class=\"fas fa-exchange-alt\"></i></div>\n            </div>\n            <div class=detail-time-command-container>\n              <div class=detail-time-index>Time</div>\n              <array-command class=detail-time-command data-type=time>\n                <button data-index=get_rtc>Get</button>\n                <button data-index=update_rtc>Update</button>\n              </array-command>\n            </div>\n            <div class=detail-time-command-container>\n              <div class=detail-time-index>Fuse</div>\n              <array-command class=detail-time-command data-type=fuse>\n                <button data-index=get_fuse>Get</button>\n                <button data-index=update_fuse>Update</button>\n              </array-command>\n            </div>\n          </span>\n        </detail-command>\n        <detail-command id=detail-ota>\n          <i class=\"fas fa-cloud-upload-alt\" slot=icon></i>\n          <div slot=title title='Update Over the Air'>OTA</div>\n          <span class='detail-command'>\n              <div class='detail-ota-version shine'></div>\n              <array-command data-type=ota>\n                <button data-index=get_ota_version>Get</button>\n                <select class=detail-select-ota-image></select>\n                <button data-index=update_ota>Update</button>\n              </array-command>\n          </span>\n        </detail-command>\n        <detail-command id=detail-system>\n          <i class=\"fas fa-cogs\" slot=icon></i>\n          <div slot=title>System</div>\n          <array-command class=detail-command data-type=system>\n            <div class=inner-command>\n              <div class='inner-value detail-reset-reason shine'>Reason</div>\n              <button data-index=reset_reason>Reset reason</button>\n            </div>\n            <div class=inner-command>\n              <div class='inner-value inner-value-uptime'>\n                <div class='detail-uptime shine' title='microseconds since boot' data-format=normal></div>\n                <div class='detail-uptime-switch' title='switch time format'><i class=\"fas fa-exchange-alt\"></i></div>\n              </div>\n              <button data-index=uptime>Uptime</button>\n            </div>\n            <div class=inner-command>\n              <button data-index=reset>Reset</button>\n              <button data-index=waive_root>Waive root</button>\n            </div>\n          </array-command>\n        </detail-command>\n        <detail-command id=detail-custom>\n          <i class=\"fas fa-hat-wizard\" slot=icon></i>\n          <div slot=title>Custom</div>\n          <div class=detail-command>\n            <div class=inner-command>\n              <select class=custom-request-type>\n                <option>Type</option>\n                <option value=get>GET</option>\n                <option value=post>POST</option>\n                <option value=put>PUT</option>\n                <option value=delete>DELETE</option>\n              </select>\n              <input placeholder='Resource path, e.g, /path/to/resource?query=1' class=custom-request-path autocapitalize=\"none\">\n            </div>\n            <binary-data class=custom-request-payload></binary-data>\n            <div class=inner-command>\n              <div class=custom-request-made></div>\n              <button class=custom-request-button>Request</button>\n              <button class=custom-response-button>Responses</button>\n            </div>\n          </div>\n        </detail-command>\n      </div>\n    </expand-menu>\n    <expand-menu class=detail-device-graph>\n      <h2 slot=title>Graph</h2>\n      <div class=detail-device-graph-container></div>\n    </expand-menu>\n  </div>\n</div>\n";var En=function(){function e(t,n,r){var a=this;i(this,e);var o=kn.content.firstElementChild.cloneNode(!0);this._instance=r,this._title=o.querySelector(".device-title"),this._connected=o.querySelector(".detail-connected"),this._id=o.querySelector(".detail-id"),this._name=o.querySelector(".detail-name"),this._fw=o.querySelector(".detail-fw"),this._hw=o.querySelector(".detail-hw"),this._endpoint=o.querySelector(".detail-endpoint"),this._layer=o.querySelector(".detail-layer"),this._parent=o.querySelector(".detail-parent"),this._net_id=o.querySelector(".detail-netid"),this._channel=o.querySelector(".detail-channel"),this._mac_ap=o.querySelector(".detail-macap"),this._children=o.querySelector(".detail-children"),this._has_rtc=o.querySelector(".detail-has-rtc"),this._has_temp_sensor=o.querySelector(".detail-has-temp"),this._sensors=o.querySelector(".description-sensor-content"),this._sensor_description=null,$t(this._sensors,n,r),this._commands=o.querySelector(".detail-device-commands"),this._force=this._commands.querySelector(".detail-device-command-force input"),this._commands_gpios_out=this._commands.querySelectorAll("btn-on-off"),this._time=this._commands.querySelector(".detail-time-value"),this._ota_version=this._commands.querySelector(".detail-ota-version"),this._ota_select_image=this._commands.querySelector(".detail-select-ota-image"),this._uptime=this._commands.querySelector(".detail-uptime"),this._reset_reason=this._commands.querySelector(".detail-reset-reason"),this._custom_request=new mn(this._commands.querySelector("#detail-custom")),this._force.addEventListener("change",(function(e){a.disable_commands(!a._force.checked)})),o.querySelector(".detail-edit-name").addEventListener("click",(function(e){a._name.contentEditable=!0,a._name.focus()})),this._name.addEventListener("blur",(function(e){a._name.contentEditable=!1,r.send(Ne.DEVICE,Re.EDIT,{device:a._title.textContent,name:a._name.textContent})})),this._commands.addEventListener("command",(function(e){if(!e.target.disabled&&"true"!=a._commands.dataset.disabled)switch(e.detail.type){case"ac_load":r.send(Ne.DEVICE,Re.REQUEST,{request:"ac".concat(e.detail.index,"_").concat("true"==e.detail.on?"on":"off"),device:a._title.textContent});break;case"packet":r.send(Ne.DEVICE,Re.REQUEST,{request:e.detail.index,device:a._title.textContent});break;case"time":r.send(Ne.DEVICE,Re.REQUEST,{request:e.detail.index,device:a._title.textContent});case"fuse":r.send(Ne.DEVICE,Re.REQUEST,{request:e.detail.index,device:a._title.textContent,payload:60*-(new Date).getTimezoneOffset()});break;case"ota":if(!e.detail.index)return;if("update_ota"==e.detail.index&&!a._ota_select_image.selectedOptions[0].value)return void r.report(Ie,Ze,a._title.textContent,"Image not selected");r.send(Ne.DEVICE,Re.REQUEST,{request:e.detail.index,device:a._title.textContent,image:a._ota_select_image.selectedOptions[0].value});break;case"system":r.send(Ne.DEVICE,Re.REQUEST,{request:e.detail.index,device:a._title.textContent});break;case"custom":r.send(Ne.DEVICE,Re.REQUEST,xn(xn({},{request:"custom",device:a._title.textContent}),e.detail));break;default:console.warn("command not found",e.detail)}})),this._commands.querySelector(".detail-time-switch").addEventListener("click",(function(e){a._time.dataset.format="normal"==a._time.dataset.format?"clock":"normal",a._time.textContent=Le(n,a._time.dataset.format)})),this._commands.querySelector(".detail-uptime-switch").addEventListener("click",(function(e){a._uptime.dataset.format="normal"==a._uptime.dataset.format?"clock":"normal",a._uptime.textContent=De(n,a._uptime.dataset.format)})),this._commands.querySelector(".custom-response-button").addEventListener("click",(function(e){var t=document.createElement("pop-modal");t.classList.add("custom-response-modal"),t.innerHTML="<div class=custom-response-container>\n  <h1><span>Responses [</span><span class=custom-response-device></span>]</h1>\n  <div class=custom-response-responses>\n    <em>No custom response received yet...<em>\n  </div>\n</div>\n",function(e,t){if(t.querySelector(".custom-response-device").textContent=e.mac,e.custom_responses.length){var n=t.querySelector(".custom-response-responses");n.innerHTML="";var i=document.createElement("template");i.innerHTML="<div>\n  <hr>\n  <div class=custom-response-header>\n    <header-value class=custom-response-type name=Type></header-value>\n    <header-value class=custom-response-path name=Path></header-value>\n    <header-value class=custom-response-status name=Status></header-value>\n    <header-value class=custom-response-code name=Code></header-value>\n    <header-value class=custom-response-transaction name=Transaction></header-value>\n    <header-value class=custom-response-time name=Time></header-value>\n  </div>\n  <binary-data class=custom-response-payload readonly></binary-data>\n</div>\n",e.custom_responses.forEach((function(e){var t=document.importNode(i.content.firstElementChild,!0);t.querySelector(".custom-response-type").value=e.type,t.querySelector(".custom-response-status").value=e.success?"success":"fail",t.querySelector(".custom-response-code").value=e.code,t.querySelector(".custom-response-path").value=function(e){return"/"+e.resource.join("/")+(e.query.length?"?".concat(e.query.join("&")):"")}(e),t.querySelector(".custom-response-transaction").value=e.trans_status,t.querySelector(".custom-response-payload").value=e.payload,t.querySelector(".custom-response-time").value=Pe(e.time),n.prepend(t)}))}}(n,t),document.body.appendChild(t),t.show(),t.addEventListener("cancel",(function(e){e.target.delete()}))}));var s=document.createElement("option");s.textContent=r.image_list.size?"select image":"no image",s.value="",this._ota_select_image.appendChild(s),Object.values(r.image_list.list).forEach((function(e){e.version!=n.firmware_version&&((s=document.createElement("option")).value=e.name,s.textContent="".concat(e.version," (").concat(e.name,")"),a._ota_select_image.appendChild(s))})),this._sensors.addEventListener("click",(function(e){for(var t=e.target;t!=a._sensors&&!("sensor"in t.dataset);)t=t.parentNode;if("sensor"in t.dataset){var i=document.createElement("pop-modal");i.id="sensor-description-popup",i.addEventListener("cancel",(function(e){a._sensor_description=null,i.delete()})),document.body.appendChild(i),i.show();var o=he(t.dataset.sensor.split("@"),2),s=o[0],c=o[1];s=+s,c=+c,r.sensor_type_list.get_id(s);var l=n.sensor_list.sensor(s,c);a._sensor_description=new _n(i,r,l,n),a._sensor_description.update(),a._sensor_description.graph.set_brush_selection(20)}})),o.querySelector(".device-notify").addEventListener("click",(function(e){return function(e,t){var n=document.createElement("pop-modal");n.classList.add("popup-modal","pop-modal-notify"),n.innerHTML="<div class='popup-container device-notify-popup'>\n  <span class=popup-header>\n    <span><i class=\"fas fa-flag\"></i></span>\n    <h1 class=popup-title>Notification</h1>\n  </span>\n  <div class=popup-content>\n    <fieldset class=notify-device>\n      <legend>Device</legend>\n      <label><input type=checkbox value=connect> Connect</label>\n      <label><input type=checkbox value=disconnect> Disconnect</label>\n      <label><input type=checkbox value=updated> Update</label>\n      <label><input type=checkbox value=app_installed> App installed</label>\n    </fieldset>\n    <fieldset class=notify-sensor>\n      <legend><span>Sensor </span><span class=add-notify-sensor><i class=\"fas fa-plus-square\"></i></span></legend>\n      <span class=notify-sensor-list></span>\n    </fieldset>\n  </div>\n  <div class=notify-footer><button class='button-normal notify-device-btn'>Apply</button></div>\n</div>\n",n.querySelectorAll(".notify-device input").forEach((function(n){var i=t.notify.device_list;e.id in i&&i[e.id].find((function(e){return e==n.value}))&&(n.checked=!0)})),e.id in t.notify.sensor_list&&Object.entries(t.notify.sensor_list[e.id]).forEach((function(i){var r=he(i,2),a=r[0],o=r[1],s=he(a.split("@"),2),c=s[0],l=s[1];o.forEach((function(i){bn(e,t,n,gn(gn({},i),{sensor:{type:c,index:l}}))}))})),n.querySelector(".add-notify-sensor").addEventListener("click",(function(i){return bn(e,t,n)})),n.querySelector(".notify-device-btn").addEventListener("click",(function(i){var r=[];n.querySelectorAll(".notify-device input").forEach((function(e){return e.checked?r.push(e.value):null})),t.send(Ne.NOTIFY,"device_set",{id:e.id,device:e.mac,notify:r});var a=[];n.querySelectorAll("sensor-notify").forEach((function(e){a.push(e.value)})),t.send(Ne.NOTIFY,"sensor_set",{id:e.id,mac:e.mac,sensors:a})})),document.body.appendChild(n),n.show(),n.addEventListener("cancel",(function(e){e.target.delete()}))}(n,r)})),t.innerHTML="",t.appendChild(o),this._graphs={},this._graphs_container=o.querySelector(".detail-device-graph-container"),hn(this._graphs,this._graphs_container,n,r,null,{zoom:!1,brush:!1},-20);var c=n.sensor_list.last_data(5,0);c&&this._commands_gpios_out.forEach((function(e){e.state=c.value&1<<+e.dataset.index+8-1}))}return a(e,[{key:"disable_commands",value:function(e){this._commands.dataset.disabled=e,this._commands_gpios_out.forEach((function(t){t.disabled=e}))}},{key:"update",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this._title.textContent=e.mac,this._connected.textContent=e.connected?"connected":"disconnected",qe("connected",t,this._connected),this.disable_commands(!e.connected),["id","name","fw","hw","endpoint","layer","parent","net_id","channel","mac_ap","children_table","has_rtc","has_temp_sensor"].forEach((function(r){switch(r){case"fw":case"hw":(qe("version_".concat(r),t,n["_".concat(r)])||i)&&(n["_".concat(r)].textContent="fw"==r?e.firmware_version:e.hardware_version);break;case"endpoint":(qe("endpoint",t,n._endpoint)||i)&&(n._endpoint.textContent=e.endpoint.addr+":"+e.endpoint.port);break;case"channel":(qe("ch_conn",t,n._channel)||i)&&(n._channel.textContent="".concat(e.channel," / ").concat(e.channel_config));break;case"children_table":(qe("children_table",t,n._children)||i)&&(n._children.textContent=e.children_table.join(" | "));break;case"name":0==n._name.contentEditable&&(qe(r,t,n["_".concat(r)])||i)&&(n["_".concat(r)].textContent=e[r]);break;default:(qe(r,t,n["_".concat(r)])||i)&&(n["_".concat(r)].textContent=e[r])}})),this._time.textContent=Le(e,this._time.dataset.format),qe("rtc",t,this._time),qe("fuse",t,this._time),this._ota_version.textContent=e.ota_version?e.ota_version:"<ota version>",qe("ota_version",t,this._ota_version),this._uptime.textContent=De(e,this._uptime.dataset.format),qe("uptime",t,this._uptime),this._reset_reason.textContent=e.reset_reason?"[".concat(e.reset_reason,"] ").concat(Xt(e.reset_reason)):"<reset_reason>",qe("reset_reason",t,this._reset_reason),t&&"sensor"in t||i){$t(this._sensors,e,this._instance,t.sensor);var r=e.sensor_list.last_data(5,0);r&&this._commands_gpios_out.forEach((function(e){e.state=r.value&1<<+e.dataset.index+8-1})),this._sensor_description&&this._sensor_description.update(),hn(this._graphs,this._graphs_container,e,this._instance,t.sensor,{zoom:!1},-20)}}}]),e}();function Sn(e,t){}function On(e,t){}function Tn(e,t){var n=e.querySelector("#main-device-description");e.querySelector("#main-device-tbody").addEventListener("click",(function(e){var i=e.composedPath()[1].dataset.device;if(i&&i in t.device_list.list){n.innerHTML="";var r=t.device_list.list[i],a=new En(n,r,t);r.register_view("description",a),a.update(r,{},!0),window.location.hash="main-device-description",setTimeout((function(){window.location.hash=""}),1e3)}}))}function An(e,t){t.tree.update_view(t)}function Cn(e,t){}function Mn(e,t){e.querySelector("#net-devices-tree").addEventListener("click",(function(e){var n=e.target.dataset.device;n&&t.open_device_detail(n)})),e.querySelector("#net-devices-unconnected").addEventListener("click",(function(e){var n=e.target.dataset.device;n&&t.open_device_detail(n)})),e.querySelector("#net-devices-endpoints").addEventListener("click",(function(e){var n=e.target.dataset.device;n&&t.open_device_detail(n)})),e.querySelector("#net-container-check-name").addEventListener("change",(function(e){t.tree.update_view(t,e.target.checked)}))}function Pn(e,t){}function qn(e,t){}function Ln(e,t){}function Dn(e,t){}function Nn(e,t){var n=16777216;e.querySelector(".file-input").addEventListener("change",(function(e){var i=e.target.files;if(i.length){if(i[0].name.length>30)return t.report(ze,Ze,"upload image","Invalid name size [".concat(i[0].name,"]"),"size=".concat(i[0].name.length,"/max=").concat(30)),void(e.target.value="");if(i[0].size>n)return t.report(ze,Ze,"upload image","File too big [".concat(i[0].name,"]"),"size=".concat(i[0].size,"/max=").concat(n)),void(e.target.value="");t.send_image(i[0]),e.target.value=""}})),e.querySelector("#image-main-container").addEventListener("click",(function(e){for(var n=e.target;"TD"!=n.tagName;)if("TR"==(n=n.parentNode).tagName)return;"image"in n.parentNode.dataset&&(n.classList.contains("image-close")?t.send(Ne.IMAGE,"delete",[n.parentNode.dataset.image]):n.classList.contains("image-download")?t.send(Ne.IMAGE,"download",{name:n.parentNode.dataset.image}):t.open_image_detail(n.parentNode.dataset.image))}))}function jn(e,t){}function Rn(e,t){}function Un(e,t){var n=524288;e.querySelector(".file-input").addEventListener("change",(function(e){var i=e.target.files;if(i.length){if(i[0].name.length>12)return t.report(report_commands.APP,report_types.warning,"upload app","Invalid name size [".concat(i[0].name,"]"),"size=".concat(i[0].name.length,"/max=").concat(12)),void(e.target.value="");if(i[0].size>n)return t.report(report_commands.APP,report_types.warning,"upload app","File too big [".concat(i[0].name,"]"),"size=".concat(i[0].size,"/max=").concat(n)),void(e.target.value="");t.send_app(i[0]),e.target.value=""}})),e.querySelector("#app-main-container").addEventListener("click",(function(e){for(var n=e.target;"TD"!=n.tagName;)if("TR"==(n=n.parentNode).tagName)return;"app"in n.parentNode.dataset&&(n.classList.contains("app-close")?t.send(Ne.APP,"delete",[n.parentNode.dataset.app]):n.classList.contains("app-download")?t.send(Ne.APP,"download",{name:n.parentNode.dataset.app}):t.open_app_detail(n.parentNode.dataset.app))}))}function In(e,t){var n=e.querySelector("#notification-status");Ot.support()?t.is_subscribed?(n.textContent="Push notification is enabled",n.classList.add("enabled"),n.classList.remove("not-supported","disabled")):(n.textContent="Push notification is disabled",n.classList.add("disabled"),n.classList.remove("not-supported","enabled")):(n.textContent="Push notificaiton is not supported by your browser.",n.classList.add("not-supported"),n.classList.remove("enabled","disabled"))}function zn(e,t){var n=e.querySelector("#notification-content");t.notify.list.forEach((function(e){n.querySelector("input[value=".concat(e,"]")).checked=!0})),In(e,t),e.querySelector("#notification-apply").addEventListener("click",(function(e){var i=[];n.querySelectorAll("input[type=checkbox]").forEach((function(e){return e.checked?i.push({name:e.value}):null})),t.send(Ne.NOTIFY,"general_set",i)}))}function Zn(e,t){}var Hn=document.createElement("template");function Bn(e,t){return("000000000"+e).substr(-t)}Hn.innerHTML="<div id=report-history-content>\n  <h1>Report History</h1>\n  <div id=report-history-table-container>\n    <table>\n      <thead>\n        <tr><th>Time</th><th>Type</th><th>Report</th></tr>\n      </thead>\n      <tbody>\n        <tr><td colspan=3><em>No reports yet!</em></td></tr>\n      </tbody>\n    </table>\n  </div>\n</div>";var Yn=function(){function e(t,n){i(this,e),this._list=[],this._container=t,this._pop_container=n,this._pop_text=n.querySelector("span"),this.init_view(),this._inner_container=t.querySelector("#report-history-table-container"),this._tbody=t.querySelector("tbody")}return a(e,[{key:"add",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];!this._list.length&&(!Array.isArray(e)||Array.isArray(e)&&e.length)&&this.clear_view(),Array.isArray(e)?this._list=this._list.concat(e):this._list.push(e),t&&this.update_view(e)}},{key:"clear_view",value:function(){this._tbody.innerHTML=""}},{key:"init_view",value:function(e){var t=this;this._container.addEventListener("cancel",(function(e){t.hide()})),this._container.appendChild(Hn.content.cloneNode(!0)),this._pop_container.querySelector("#report-pop-close").addEventListener("click",(function(e){t._pop_container.style.display="none"}))}},{key:"update_view",value:function(e){var t=this;Array.isArray(e)?e.forEach((function(e){return t._update_line(e)})):(this._update_line(e),this._update_pop(e))}},{key:"show",value:function(){this._container.show(),this._inner_container.scrollTop=this._inner_container.scrollHeight}},{key:"hide",value:function(){this._container.hide()}},{key:"_update_line",value:function(e){var t=document.createElement("tr"),n=document.createElement("td"),i=document.createElement("td"),r=document.createElement("td"),a=this._make_message(e),o="time"in e?new Date(e.time):new Date;n.textContent="".concat(o.getHours(),":").concat(Bn(o.getMinutes(),2),":").concat(Bn(o.getSeconds(),2),".").concat(Bn(o.getMilliseconds(),3)),i.textContent=e.type,r.textContent=a,t.appendChild(n),t.appendChild(i),t.appendChild(r),t.classList.add("report-".concat(e.type)),this._tbody.appendChild(t)}},{key:"_update_pop",value:function(e){var t=this._make_message(e);this._pop_container.classList.remove("report-error","report-warning","report-success","report-info"),this._pop_text.textContent=t,this._pop_container.classList.add("report-".concat(e.type)),this._pop_container.style.display="block",Ee(this._pop_container)}},{key:"_make_message",value:function(e){var t="";return"reference"in e&&(t="[".concat(e.reference,"]: ")),t+=e.message,"arg"in e&&(t+=" [".concat(e.arg,"]")),t}}]),e}(),Fn=function(){function e(){var t=this;i(this,e),this._detail=document.querySelector("#detail-container"),this._content=this._detail.querySelector("#detail-content"),this._close=this._detail.querySelector(".detail-close"),this._close_cb={},this._close_args={},this._close.addEventListener("click",(function(e){t.hide()}))}return a(e,[{key:"container",get:function(){return this._detail}},{key:"content",get:function(){return this._content}},{key:"close",get:function(){return this._close}},{key:"show",value:function(){this._detail.classList.add("show-container")}},{key:"hide",value:function(){this._detail.classList.remove("show-container"),this.clear()}},{key:"clear",value:function(){var e=this;Object.entries(this._close_cb).forEach((function(t){var n=he(t,2),i=n[0];n[1].apply(void 0,ge(e._close_args[i])),delete e._close_cb[name],delete e._close_args[name]}))}},{key:"register_close",value:function(e,t){this._close_cb[e]=t;for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];this._close_args[e]=i}}]),e}();function Vn(){document.querySelectorAll(".drop-menu").forEach((function(e){return e.blur()}))}function Gn(e,t){Ot.support()&&new Ot(t.ws,t.username,e.data.key,t.registration,new St).get_subscription().then((function(e){t.is_subscribed=e}))}function Wn(e,t,n){n.is_subscribed=e,"notify"==t.current&&In(t.container,n)}function Xn(e){e.storage&&(e.storage.save("sessions",{index:"".concat(e.username,"@").concat(e.server_addr),username:e.username,server_addr:e.server_addr,autoconnect:e.autoconnect,date:new Date}),e.storage.save_key("instance",{username:e.username,server_addr:e.server_addr,autoconnect:e.autoconnect,sessionid:e.sessionid,date:new Date},"autoconnect"));var t=function(){var e=document.createElement("template");return e.innerHTML="<div id=device-container class=main-container>\n  <div id=device-main-container>\n    <h1>Devices</h1>\n    <div class=table-container>\n      <table>\n        <thead>\n          <tr>\n            <th colspan=3>General</th>\n            <th colspan=2>Version</th>\n            <th colspan=2>Endpoint</th>\n            \x3c!-- <th colspan=6>Network</th> --\x3e\n            \x3c!-- <th colspan=2>Config</th> --\x3e\n          </tr>\n          <tr>\n            \x3c!-- <th>#</th> --\x3e\n            \x3c!-- <th>ID</th> --\x3e\n            <th>MAC</th>\n            <th>Name</th>\n            <th>Firmware</th>\n            <th>Hardware</th>\n            <th>Address</th>\n            <th>Port</th>\n            \x3c!-- <th>Layer</th>\n            <th>Parent</th>\n            <th>Net ID</th>\n            <th>Channel</th>\n            <th>MAC AP</th>\n            <th>Children</th> --\x3e\n            \x3c!-- <th>RTC</th>\n            <th>Temp</th> --\x3e\n          </tr>\n        </thead>\n        <tbody id=main-device-tbody>\n          <tr>\n            <td colspan=20>\n              <em>No devices connected</em>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n    <div id=main-device-description></div>\n  </div>\n</div>\n",new Nt(e,Sn,On,Tn)}(),n=function(){var e=document.createElement("template");return e.innerHTML="<div id=net-container class=main-container>\n  <h1>Net</h1>\n  <label><input type=checkbox id=net-container-check-name> Show names</label>\n  <div id=net-container-tree></div>\n  <div id=net-container-list>\n    <div>\n      <h2>Unconnected</h2>\n      <table>\n        <thead>\n          <tr><th>Devices</th></tr>\n        </thead>\n        <tbody id=net-devices-unconnected>\n          <tr><td><em>No devices unconnected</em></td></tr>\n        </tbody>\n      </table>\n    </div>\n    <div>\n      <table>\n        <h2>Endpoints</h2>\n        <thead>\n          <tr><th>Device</th><th>Endpoint</th></tr>\n        </thead>\n        <tbody id=net-devices-endpoints>\n          <tr><td colspan=2><em>No endpoints avaiable</em></td></tr>\n        </tbody>\n      </table>\n    </div>\n    <div>\n      <table>\n        <h2>Tree</h2>\n        <thead>\n          <tr><th>#</th><th>Device</th><th>Parent</th><th>Children</th></tr>\n        </thead>\n        <tbody id=net-devices-tree>\n          <tr><td colspan=5><em>No devices connected</em></td></tr>\n        </tbody>\n      </table>\n    </div>\n  </div>\n</div>\n",new Nt(e,An,Cn,Mn)}(),i=function(){var e=document.createElement("template");return e.innerHTML="<div id=image-container class=main-container>\n  <h1>Images</h1>\n  <div id=image-header>\n    <label class=image-upload-container title='Upload image'>\n      <input type=file class=file-input accept='.bin'>\n      <i class=\"fas fa-file-upload\"></i>\n      <span>Upload</span>\n    </label>\n  </div>\n  <div id=image-main-container>\n    <table>\n      <thead>\n        <tr>\n          <th>ID</th>\n          <th>Name</th>\n          <th>Version</th>\n          <th>Size</th>\n          \x3c!-- <th>Project</th> --\x3e\n          \x3c!-- <th>Time</th> --\x3e\n          \x3c!-- <th>Date</th> --\x3e\n          \x3c!-- <th>IDF Version</th> --\x3e\n          \x3c!-- <th>Hash</th> --\x3e\n          \x3c!-- <th>Magic word</th> --\x3e\n          \x3c!-- <th>Secure version</th> --\x3e\n          <th>#</th>\n          <th>X</th>\n        </tr>\n      </thead>\n      <tbody id=main-image-tbody>\n        <tr>\n          <td colspan=20>\n            <em>No images uploaded</em>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n</div>\n",new Nt(e,Ln,Dn,Nn)}(),r=function(){var e=document.createElement("template");return e.innerHTML="<div class=main-container>\n    <h1>This is the main dashboard</h1>\n</div>\n",new Dt(e,Vt,Gt)}(),a=function(){var e=document.createElement("template");return e.innerHTML="<div>\n    <h1>This is the main JOBs dashboard</h1>\n</div>\n",new Nt(e,Pn,qn)}(),o=function(){var e=document.createElement("template");return e.innerHTML="<div id=app-container class=main-container>\n  <h1>Apps</h1>\n  <div id=app-header>\n    <label class=app-upload-container title='Upload app'>\n      <input type=file class=file-input accept='.elf'>\n      <i class=\"fas fa-file-upload\"></i>\n      <span>Upload</span>\n    </label>\n  </div>\n  <div id=app-main-container>\n    <table>\n      <thead>\n        <tr>\n          <th>ID</th>\n          <th>Name</th>\n          <th>Version</th>\n          <th>Size</th>\n          <th>#</th>\n          <th>X</th>\n        </tr>\n      </thead>\n      <tbody id=main-app-tbody>\n        <tr>\n          <td colspan=20>\n            <em>No app uploaded</em>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n</div>\n",new Nt(e,jn,Rn,Un)}(),s=document.querySelector("#main-content"),c=new _t(e.ws,new xt(e.message.data.id,e.message.data.username,e.message.data.name,e.message.data.email,e.message.data.telegram_chat_id,e.message.data.status,e.sessionid,e.policy),e.server_addr,e.registration,e.storage,{containers:{detail:new Fn,main_content:s,device_table:t.container.querySelector("#main-device-tbody"),tree_container:n.container.querySelector("#net-container-list"),tree_graph:n.container.querySelector("#net-container-tree"),image_table:i.container.querySelector("#main-image-tbody"),app_table:o.container.querySelector("#main-app-tbody")}}),l=new Yn(document.querySelector("#report-history-container"),document.querySelector("#report-pop"));kt.can(c.logged_user,Et.user_admin)?kt.show_user_admin_element():kt.hide_user_admin_element();var u=new jt(s);u.add("main",r),u.add("user_admin",function(){var e=document.createElement("template");return e.innerHTML="<div id=admin-portal-main>\n  <fieldset class=portal-category>\n    <legend>Notification</legend>\n    <div class=portal-line id=notify-push>\n      <span class=portal-icon><i class=\"fas fa-flag\"></i></span>\n      <input type=checkbox title=Enable id=notify-push-check>\n      <label class=portal-title for=notify-push-check>Push Notification</label>\n      \x3c!-- <input class='input-text portal-input' placeholder=\"Private Key\" title='BOT Token'> --\x3e\n      <div class=portal-input></div>\n    </div>\n    <div class=portal-line id=notify-telegram>\n      <span class=portal-icon><i class=\"fab fa-telegram-plane\"></i></span>\n      <input type=checkbox title=Enable id=notify-telegram-check>\n      <label class=portal-title for=notify-telegram-check>Telegram</label>\n      <input class='input-text portal-input' placeholder=\"BOT Token\" title='BOT Token'>\n    </div>\n    <div class=portal-line id=notify-mail>\n      <span class=portal-icon><i class=\"fas fa-envelope\"></i></span>\n      <input type=checkbox title=Enable id=notify-mail-check>\n      <label class=portal-title for=notify-mail-check>Email</label>\n      <div class='portal-input email-input'>\n        <div>\n          <input class='input-text' placeholder=User id=notify-mail-user title=User>\n          <span>:</span>\n          <input class='input-text' placeholder=Password id=notify-mail-password type=password title=Password>\n        </div>\n        <div>\n          <input class='input-text' placeholder='SMTP server' id=notify-mail-server title=Server>\n          <span>:</span>\n          <input type=number class='input-text remove-arrow' placeholder=Port min=1 max=65535  id=notify-mail-port title='Server Port'>\n          <span id=mail-option-container>\n            <span class=mail-option data-comp=google title=Google><i class=\"fab fa-google\"></i></span>\n            <span class=mail-option data-comp=yahoo title=Yahoo><i class=\"fab fa-yahoo\"></i></span>\n          </span>\n        </div>\n      </div>\n    </div>\n    <button class=button-normal id=notify-update-credentials>Apply</button>\n  </fieldset>\n  <fieldset class=portal-category>\n    <legend>Users / Groups</legend>\n    <section>\n      <h1>\n        <span>Users <span>\n        <span class=admin-add-new id=admin-user-add title='Add new user'><i class=\"fas fa-plus-square\"></i><span>\n      </h1>\n      <table>\n        <thead>\n          <tr>\n            <th>ID</th>\n            <th>Username</th>\n            <th>Name</th>\n            <th>Email</th>\n            <th>Status</th>\n            <th>#</th>\n          </tr>\n        </thead>\n        <tbody id=admin-user-tbody>\n          <tr><td colspan=6><em>No users avaiable</em></td></tr>\n        </tbody>\n      </table>\n    </section>\n    <section>\n      <h1>\n        <span>User Groups <span>\n        \x3c!-- <span class=admin-add-new id=admin-group-add title='Add new group'><i class=\"fas fa-plus-square\"></i><span> --\x3e\n      </h1>\n      <table>\n        <thead>\n          <th>ID</th>\n          <th>Name</th>\n          <th>Description</th>\n          <th>Size</th>\n          <th>Members</th>\n          \x3c!-- <th>#</th> --\x3e\n        </thead>\n        <tbody id=admin-group-tbody>\n          <tr><td colspan=6><em>No groups avaiable</em></td></tr>\n        </tbody>\n      </table>\n    </section>\n  </fieldset>\n</div>\n",new Dt(e,It,zt)}()),u.add("device",t),u.add("net",n),u.add("job",a),u.add("image",i),u.add("app",o),u.add("sensor_type",function(){var e=document.createElement("template");return e.innerHTML="<div id=sensor-type-main>\n  <h1>\n    <span>Sensor Types<span>\n    <span class=sensor-type-add-new-button title='Add new sensor'><i class=\"fas fa-plus-square\"></i><span>\n  </h1>\n  <table>\n    <thead>\n      <tr>\n        <th>ID</th>\n        <th>Name ID</th>\n        <th>Name</th>\n        <th>Type</th>\n        \x3c!-- <th>Unit</th> --\x3e\n        <th>Unit Name</th>\n        \x3c!-- <th>Description</th> --\x3e\n        <th>#</th>\n        <th>X</th>\n      </tr>\n    </thead>\n    <tbody id=sensor-type-tbody>\n      <tr><td colspan=20><em>No sensors configured</em></td></tr>\n    </tbody>\n  </table>\n</div>\n",new Dt(e,Yt,Ft)}()),u.add("notify",function(){var e=document.createElement("template");return e.innerHTML="<div id=notification-container class=main-container>\n  <h1>Notificaiton</h1>\n  <div id=notification-status></div>\n  <div id=notification-content>\n    <label><input type=checkbox value=new_device> New device connected</label>\n    <label><input type=checkbox value=device_conn> Device connected</label>\n    <label><input type=checkbox value=device_dis> Device disconnected</label>\n    <label><input type=checkbox value=device_update> Device updated</label>\n    <label><input type=checkbox value=device_app_installed> Device app installed</label>\n    <label><input type=checkbox value=image_add> Image added</label>\n    <label><input type=checkbox value=image_del> Image deleted</label>\n    <label><input type=checkbox value=app_add> App added</label>\n    <label><input type=checkbox value=add_del> App deleted</label>\n    <label><input type=checkbox value=job_run> Job running</label>\n      <label><input type=checkbox value=job_stop> Job stopped</label>\n  </div>\n  <button id=notification-apply class=button-normal>Apply</button>\n</div>\n",new Dt(e,zn,Zn)}()),t.install(c),n.install(c),i.install(c),o.install(c),c.add_handler(Ne.USER,je.NOTIFY_KEY,Gn,c),c.add_handler(Ne.USER,je.PUSH_UNSUBSCRIBE,(function(e){return Wn(!1,u,c)})),c.add_handler(Ne.USER,je.PUSH_SUBSCRIBE,(function(e){return Wn(!0,u,c)})),c.add_handler(Ne.DEVICE,Re.LIST,(function(e){c.device_list.process(e)})),c.add_handler(Ne.DEVICE,Re.DATA,(function(e){c.device_list.process(e)})),c.add_handler(Ne.DEVICE,Re.EDIT,(function(e){c.device_list.process(e)})),c.add_handler(Ne.DEVICE,Re.TREE,(function(e){c.tree.process(e,c,!0),c.device_list.set_connected(e.data.unconnected,!0),function(e,t){t.data.tree.forEach((function(t){var n=e.tree.get_endpoint(t.device);n&&e.device_list.process({type:Ne.DEVICE,command:Re.DATA,data:{device:t.device,endpoint:n}},!0)}))}(c,e)})),c.add_handler(Ne.DEVICE,Re.CUSTOM_RESPONSE,(function(e){c.device_list.process(e)})),c.add_handler(Ne.SENSOR,Ue.LIST,(function(e){c.sensor_type_list.process(e,!0)})),c.add_handler(Ne.IMAGE,"list",(function(e){c.image_list.process(e,c,!0)})),c.add_handler(Ne.APP,"list",(function(e){c.app_list.process(e,c,!0)})),c.add_handler(Ne.REPORT,Ie,(function(e){l.add(e.data,!0)})),c.add_handler(Ne.REPORT,"list",(function(e){l.add(e.data,!0)})),c.add_handler(Ne.REPORT,ze,(function(e){l.add(e.data,!0)})),c.add_handler(Ne.REPORT,"app",(function(e){l.add(e.data,!0)})),c.add_handler(Ne.REPORT,"notify",(function(e){l.add(e.data,!0)})),c.add_handler(Ne.NOTIFY,"general_list",(function(e){c.notify.set(e.data)})),c.add_handler(Ne.NOTIFY,"device_list",(function(e){c.notify.set_device(e.data)})),c.add_handler(Ne.NOTIFY,"sensor_list",(function(e){c.notify.set_sensors(e.data)})),document.querySelector("#menu-username").textContent=e.username,document.querySelector("#admin-portal").addEventListener("click",(function(e){u.run("user_admin",c),Vn()})),document.querySelector("#menu-report-history").addEventListener("click",(function(e){l.show(),Vn()})),document.querySelector("#menu-sensor-type").addEventListener("click",(function(e){u.run("sensor_type",c),Vn()})),document.querySelector("#notification-menu").addEventListener("click",(function(e){u.run("notify",c),Vn()})),document.querySelector("#menu-tool-flasher").addEventListener("click",(function(e){window.open("./tools/flasher.html"),Vn()})),document.querySelector("#title").addEventListener("click",(function(e){u.run("main",c)})),u.run("main",c),document.querySelector("#main-disconnect").addEventListener("click",(function(t){document.querySelector("#main-load-screen").show(),c.send(Ne.USER,je.LOGOUT,{username:e.username,sessionid:e.sessionid})}));var d=document.querySelector("#main-side-menu");document.querySelector("#main-menu").addEventListener("click",(function(e){d.classList.toggle("show-menu")})),document.querySelector("#main-dashboard").addEventListener("click",(function(e){u.run("main",c)})),document.querySelector("#main-dashboard-device").addEventListener("click",(function(e){u.run("device",c)})),document.querySelector("#main-dashboard-net").addEventListener("click",(function(e){u.run("net",c)})),document.querySelector("#main-dashboard-job").addEventListener("click",(function(e){u.run("job",c)})),document.querySelector("#main-dashboard-image").addEventListener("click",(function(e){u.run("image",c)})),document.querySelector("#main-dashboard-app").addEventListener("click",(function(e){u.run("app",c)}))}!function(){var e=document.createElement("template");e.innerHTML='<main id=main>\n  <pop-modal id=report-history-container></pop-modal>\n  <div id=report-pop style=display:none class=shine>\n      <div>\n        <span id=report-pop-text>Data</span>\n        <span id=report-pop-close>&times</span>\n      </div>\n  </div>\n  <load-screen id=main-load-screen><i class="fas fa-spinner fa-pulse"></i></load-screen>\n  <section id=header>\n    <div id=menu>\n      <span id=main-menu class=icon-menu><i class="fas fa-bars"></i></span>\n      <x-input-icon id=search-bar placeholder=search title=Username>\n      <i slot=icon class="fas fa-search"></i>\n      </x-input-icon>\n    </div>\n    <div id=title></div>\n    <div id=options>\n      <span class=drop-menu tabindex=0 title=Tools>\n        <span class=icon-menu><i class="fas fa-tools"></i></span>\n        <div class=drop-menu-content>\n          <p id=menu-tool-flasher>\n            <i class="fas fa-file-import"></i>\n            <span class=drop-menu-item-text title=\'User menu\'>Flasher</span>\n          </p>\n        </div>\n      </span>\n      <span class=icon-menu id=notify-disabled disabled><i class="fas fa-bell-slash"></i></span>\n      <span class=icon-menu id=notify-enable disabled><i class="fas fa-bell"></i></span>\n      <span class=drop-menu tabindex=0>\n        <span class=icon-menu><i class="fas fa-cog"></i></span>\n        <div class=drop-menu-content>\n          <p id=menu-report-history>\n            <i class="fas fa-clipboard-list"></i>\n            <span class=drop-menu-item-text>Report History</span>\n          </p>\n          <p id=menu-sensor-type>\n            <i class="fas fa-ruler"></i>\n            <span class=drop-menu-item-text>Sensor Types</span>\n          </p>\n          <p>option3</p>\n          <p>option3</p>\n          <p>option3</p>\n          <p>option3</p>\n        </div>\n      </span>\n      <span class=drop-menu tabindex=0>\n        <span class=icon-menu><i class="fas fa-user"></i></span>\n        <div class=drop-menu-content>\n          <p>\n            <i class="fas fa-signature"></i>\n            <span id=menu-username title=\'User menu\'>my name</span>\n            <span id=main-disconnect title=\'Logout\' class=icon-hover><i class="fas fa-power-off"></i></span>\n          </p>\n          <p id=notification-menu>\n            <i class="fas fa-flag"></i>\n            <span class=drop-menu-item-text>Notification</span>\n          </p>\n          <p id=admin-portal class=is-admin>\n            <i class="fas fa-users-cog"></i>\n            <span class=drop-menu-item-text id=admin-portal-label>Admin portal</span>\n          </p>\n        </div>\n      </span>\n    </div>\n  </section>\n  <section id=main-main>\n    <div id=main-side-menu>\n      <ul>\n        <li id=main-dashboard>\n          <span class=side-menu-icon><i class="fas fa-poll"></i></span>\n          <span class=side-menu-text>Dashboard</span>\n        </li>\n        <li id=main-dashboard-device>\n          <span class=side-menu-icon><i class="fas fa-broadcast-tower"></i></span>\n          <span class=side-menu-text>Device</span>\n        </li>\n        <li id=main-dashboard-net>\n          <span class=side-menu-icon><i class="fas fa-network-wired"></i></span>\n          <span class=side-menu-text>Net</span>\n        </li>\n        <li id=main-dashboard-job>\n          <span class=side-menu-icon><i class="fas fa-tasks"></i></span>\n          <span class=side-menu-text>Jobs</span>\n        </li>\n        <li id=main-dashboard-image>\n          <span class=side-menu-icon><i class="fas fa-sd-card"></i></span>\n          <span class=side-menu-text>Image</span>\n        </li>\n        <li id=main-dashboard-app>\n          <span class=side-menu-icon><i class="fas fa-pager"></i></span>\n          <span class=side-menu-text>Apps</span>\n        </li>\n      </ul>\n    </div>\n    <div id=main-content></div>\n    <div id=detail-container>\n      <span class=detail-close>&times</span>\n      <div id=detail-content></div>\n    </div>\n  </section>\n</main>\n',ce.add("main",new se(e,Xn,{title:"Agro Telemetry","theme-color":"#0a1496"}))}();var Kn=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return e.apply(void 0,i.concat(n))}},Jn=function(){function e(t,n,r){var a=this;if(i(this,e),this._db=null,!indexedDB)return console.error("Storage IndexDB not supported"),null;var o=indexedDB.open(t,n);o.onerror=this._open_error.bind(this),o.onsuccess=this._open.bind(this),o.onblocked=this._blocked.bind(this),o.onupgradeneeded=function(e){a._onupgrade(e,r)},this._on_open=null}return a(e,[{key:"on_open",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return this._on_open=Kn.apply(void 0,[e].concat(n)),this}},{key:"add",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(this._db){var i=this._db.transaction(e,"readwrite");i.onerror=function(e){null!=n&&error_cb(e),e.stopImmediatePropagation()},i.objectStore(e).add(t)}}},{key:"save",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(this._db){var r=this._db.transaction(e,"readwrite").objectStore(e).put(t);r.onsuccess=function(e){null!==n&&n(e)},r.onerror=function(e){null!==i&&i(e)}}}},{key:"save_key",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(this._db){var a=this._db.transaction(e,"readwrite").objectStore(e).put(t,n);a.onsuccess=function(e){null!==i&&i(e)},a.onerror=function(e){null!==r&&r(e)}}}},{key:"load",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(this._db){var r=this._db.transaction(e).objectStore(e).get(t);r.onsuccess=function(e){n(e.target.result)},i&&(r.onerror=function(e){i(e)})}}},{key:"erase",value:function(e,t){this._db.transaction(e,"readwrite").objectStore(e).delete(t)}},{key:"clear",value:function(e){this._db.transaction(e,"readwrite").objectStore(e).clear()}},{key:"iterate",value:function(e,t,n,i,r){for(var a=arguments.length,o=new Array(a>5?a-5:0),s=5;s<a;s++)o[s-5]=arguments[s];this._db.transaction(e).objectStore(e).openCursor(t,n).onsuccess=function(e){var t=e.target.result;t?i.apply(void 0,[t].concat(o))&&t.continue():r&&r.apply(void 0,o)}}},{key:"_open",value:function(e){var t=this;this._db=e.target.result,this._db.onerror=function(e){console.error("DB error",e.target.error.code,e.target.error.message)},this._db.onversionchange=function(e){t._db.close(),console.log("A new version of this page is ready. Please reload or close this tab!")},this._on_open&&this._on_open(e.target)}},{key:"_onupgrade",value:function(e,t){var n=this;console.assert(t instanceof Array,'Argument "scheme" must be of type Array'),this._db=e.target.result,t.forEach((function(e){n._db.createObjectStore(e.name,e.options)}))}},{key:"_blocked",value:function(e){console.log("Please close all other tabs with this site open!")}},{key:"_open_error",value:function(e){console.error("Error opening db",e.target.error.code,e.target.error.message,e)}}],[{key:"support",value:function(){return!!window.indexedDB}}]),e}();Promise.all([function(){if(Jn.support()){var e=[{name:"instance"},{name:"sessions",options:{keyPath:"index"}}];return new Promise((function(t,n){var i=new Jn("agro",1,e).on_open();i.on_open((function(){return t(i)}))}))}return Promise.resolve(!1)}(),"serviceWorker"in navigator?navigator.serviceWorker.register("sw.js"):Promise.resolve(!1)]).then((function(e){ce.run("login",{storage:e[0],registration:e[1]})}))},9757:(e,t,n)=>{function i(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}n.d(t,{Z:()=>i})},477:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(9757);function r(e){let t=e,n=e,r=e;function a(e,t,i=0,a=e.length){if(i<a){if(0!==n(t,t))return a;do{const n=i+a>>>1;r(e[n],t)<0?i=n+1:a=n}while(i<a)}return i}return 1===e.length&&(t=(t,n)=>e(t)-n,n=i.Z,r=(t,n)=>(0,i.Z)(e(t),n)),{left:a,center:function(e,n,i=0,r=e.length){const o=a(e,n,i,r-1);return o>i&&t(e[o-1],n)>-t(e[o],n)?o-1:o},right:function(e,t,i=0,a=e.length){if(i<a){if(0!==n(t,t))return a;do{const n=i+a>>>1;r(e[n],t)<=0?i=n+1:a=n}while(i<a)}return i}}}},9089:(e,t,n)=>{function i(e,t){let n,i;if(void 0===t)for(const t of e)null!=t&&(void 0===n?t>=t&&(n=i=t):(n>t&&(n=t),i<t&&(i=t)));else{let r=-1;for(let a of e)null!=(a=t(a,++r,e))&&(void 0===n?a>=a&&(n=i=a):(n>a&&(n=a),i<a&&(i=a)))}return[n,i]}n.d(t,{Z:()=>i})},3896:(e,t,n)=>{n.d(t,{ZP:()=>o,G9:()=>s,ly:()=>c});var i=Math.sqrt(50),r=Math.sqrt(10),a=Math.sqrt(2);function o(e,t,n){var i,r,a,o,c=-1;if(n=+n,(e=+e)==(t=+t)&&n>0)return[e];if((i=t<e)&&(r=e,e=t,t=r),0===(o=s(e,t,n))||!isFinite(o))return[];if(o>0){let n=Math.round(e/o),i=Math.round(t/o);for(n*o<e&&++n,i*o>t&&--i,a=new Array(r=i-n+1);++c<r;)a[c]=(n+c)*o}else{o=-o;let n=Math.round(e*o),i=Math.round(t*o);for(n/o<e&&++n,i/o>t&&--i,a=new Array(r=i-n+1);++c<r;)a[c]=(n+c)/o}return i&&a.reverse(),a}function s(e,t,n){var o=(t-e)/Math.max(0,n),s=Math.floor(Math.log(o)/Math.LN10),c=o/Math.pow(10,s);return s>=0?(c>=i?10:c>=r?5:c>=a?2:1)*Math.pow(10,s):-Math.pow(10,-s)/(c>=i?10:c>=r?5:c>=a?2:1)}function c(e,t,n){var o=Math.abs(t-e)/Math.max(0,n),s=Math.pow(10,Math.floor(Math.log(o)/Math.LN10)),c=o/s;return c>=i?s*=10:c>=r?s*=5:c>=a&&(s*=2),t<e?-s:s}},4752:(e,t,n)=>{function i(e){return e}n.d(t,{LL:()=>f,y4:()=>p,Kh:()=>h,F5:()=>d});var r=1e-6;function a(e){return"translate("+e+",0)"}function o(e){return"translate(0,"+e+")"}function s(e){return t=>+e(t)}function c(e,t){return t=Math.max(0,e.bandwidth()-2*t)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function l(){return!this.__axis}function u(e,t){var n=[],u=null,d=null,h=6,f=6,p=3,_="undefined"!=typeof window&&window.devicePixelRatio>1?0:.5,v=1===e||4===e?-1:1,m=4===e||2===e?"x":"y",y=1===e||3===e?a:o;function g(a){var o=null==u?t.ticks?t.ticks.apply(t,n):t.domain():u,g=null==d?t.tickFormat?t.tickFormat.apply(t,n):i:d,b=Math.max(h,0)+p,w=t.range(),x=+w[0]+_,k=+w[w.length-1]+_,E=(t.bandwidth?c:s)(t.copy(),_),S=a.selection?a.selection():a,O=S.selectAll(".domain").data([null]),T=S.selectAll(".tick").data(o,t).order(),A=T.exit(),C=T.enter().append("g").attr("class","tick"),M=T.select("line"),P=T.select("text");O=O.merge(O.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),T=T.merge(C),M=M.merge(C.append("line").attr("stroke","currentColor").attr(m+"2",v*h)),P=P.merge(C.append("text").attr("fill","currentColor").attr(m,v*b).attr("dy",1===e?"0em":3===e?"0.71em":"0.32em")),a!==S&&(O=O.transition(a),T=T.transition(a),M=M.transition(a),P=P.transition(a),A=A.transition(a).attr("opacity",r).attr("transform",(function(e){return isFinite(e=E(e))?y(e+_):this.getAttribute("transform")})),C.attr("opacity",r).attr("transform",(function(e){var t=this.parentNode.__axis;return y((t&&isFinite(t=t(e))?t:E(e))+_)}))),A.remove(),O.attr("d",4===e||2===e?f?"M"+v*f+","+x+"H"+_+"V"+k+"H"+v*f:"M"+_+","+x+"V"+k:f?"M"+x+","+v*f+"V"+_+"H"+k+"V"+v*f:"M"+x+","+_+"H"+k),T.attr("opacity",1).attr("transform",(function(e){return y(E(e)+_)})),M.attr(m+"2",v*h),P.attr(m,v*b).text(g),S.filter(l).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",2===e?"start":4===e?"end":"middle"),S.each((function(){this.__axis=E}))}return g.scale=function(e){return arguments.length?(t=e,g):t},g.ticks=function(){return n=Array.from(arguments),g},g.tickArguments=function(e){return arguments.length?(n=null==e?[]:Array.from(e),g):n.slice()},g.tickValues=function(e){return arguments.length?(u=null==e?null:Array.from(e),g):u&&u.slice()},g.tickFormat=function(e){return arguments.length?(d=e,g):d},g.tickSize=function(e){return arguments.length?(h=f=+e,g):h},g.tickSizeInner=function(e){return arguments.length?(h=+e,g):h},g.tickSizeOuter=function(e){return arguments.length?(f=+e,g):f},g.tickPadding=function(e){return arguments.length?(p=+e,g):p},g.offset=function(e){return arguments.length?(_=+e,g):_},g}function d(e){return u(1,e)}function h(e){return u(2,e)}function f(e){return u(3,e)}function p(e){return u(4,e)}},5528:(e,t,n)=>{n.d(t,{mN:()=>N,Yu:()=>j});var i=n(6057),r=n(848),a=n(9487),o=n(3838),s=n(3466),c=n(404);const l=e=>()=>e;function u(e,{sourceEvent:t,target:n,selection:i,mode:r,dispatch:a}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:i,enumerable:!0,configurable:!0},mode:{value:r,enumerable:!0,configurable:!0},_:{value:a}})}function d(e){e.stopImmediatePropagation()}function h(e){e.preventDefault(),e.stopImmediatePropagation()}var f={name:"drag"},p={name:"space"},_={name:"handle"},v={name:"center"};const{abs:m,max:y,min:g}=Math;function b(e){return[+e[0],+e[1]]}function w(e){return[b(e[0]),b(e[1])]}var x={name:"x",handles:["w","e"].map(C),input:function(e,t){return null==e?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},k={name:"y",handles:["n","s"].map(C),input:function(e,t){return null==e?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},E=(["n","w","e","s","nw","ne","sw","se"].map(C),{overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"}),S={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},O={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},T={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},A={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function C(e){return{type:e}}function M(e){return!e.ctrlKey&&!e.button}function P(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function q(){return navigator.maxTouchPoints||"ontouchstart"in this}function L(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function D(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function N(e){var t=e.__brush;return t?t.dim.output(t.selection):null}function j(){return function(e){var t,n=P,b=M,N=q,j=!0,R=(0,i.Z)("start","brush","end"),U=6;function I(t){var n=t.property("__brush",V).selectAll(".overlay").data([C("overlay")]);n.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",E.overlay).merge(n).each((function(){var e=L(this).extent;(0,o.Z)(this).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1])})),t.selectAll(".selection").data([C("selection")]).enter().append("rect").attr("class","selection").attr("cursor",E.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var i=t.selectAll(".handle").data(e.handles,(function(e){return e.type}));i.exit().remove(),i.enter().append("rect").attr("class",(function(e){return"handle handle--"+e.type})).attr("cursor",(function(e){return E[e.type]})),t.each(z).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",B).filter(N).on("touchstart.brush",B).on("touchmove.brush",Y).on("touchend.brush touchcancel.brush",F).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function z(){var e=(0,o.Z)(this),t=L(this).selection;t?(e.selectAll(".selection").style("display",null).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1]),e.selectAll(".handle").style("display",null).attr("x",(function(e){return"e"===e.type[e.type.length-1]?t[1][0]-U/2:t[0][0]-U/2})).attr("y",(function(e){return"s"===e.type[0]?t[1][1]-U/2:t[0][1]-U/2})).attr("width",(function(e){return"n"===e.type||"s"===e.type?t[1][0]-t[0][0]+U:U})).attr("height",(function(e){return"e"===e.type||"w"===e.type?t[1][1]-t[0][1]+U:U}))):e.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function Z(e,t,n){var i=e.__brush.emitter;return!i||n&&i.clean?new H(e,t,n):i}function H(e,t,n){this.that=e,this.args=t,this.state=e.__brush,this.active=0,this.clean=n}function B(n){if((!t||n.touches)&&b.apply(this,arguments)){var i,a,l,u,w,C,M,P,q,N,R,U=this,I=n.target.__data__.type,H="selection"===(j&&n.metaKey?I="overlay":I)?f:j&&n.altKey?v:_,B=e===k?null:T[I],Y=e===x?null:A[I],F=L(U),V=F.extent,G=F.selection,W=V[0][0],X=V[0][1],K=V[1][0],J=V[1][1],$=0,Q=0,ee=B&&Y&&j&&n.shiftKey,te=Array.from(n.touches||[n],(e=>{const t=e.identifier;return(e=(0,s.Z)(e,U)).point0=e.slice(),e.identifier=t,e}));(0,c.e1)(U);var ne=Z(U,arguments,!0).beforestart();if("overlay"===I){G&&(q=!0);const t=[te[0],te[1]||te[0]];F.selection=G=[[i=e===k?W:g(t[0][0],t[1][0]),l=e===x?X:g(t[0][1],t[1][1])],[w=e===k?K:y(t[0][0],t[1][0]),M=e===x?J:y(t[0][1],t[1][1])]],te.length>1&&se(n)}else i=G[0][0],l=G[0][1],w=G[1][0],M=G[1][1];a=i,u=l,C=w,P=M;var ie=(0,o.Z)(U).attr("pointer-events","none"),re=ie.selectAll(".overlay").attr("cursor",E[I]);if(n.touches)ne.moved=oe,ne.ended=ce;else{var ae=(0,o.Z)(n.view).on("mousemove.brush",oe,!0).on("mouseup.brush",ce,!0);j&&ae.on("keydown.brush",le,!0).on("keyup.brush",ue,!0),(0,r.Z)(n.view)}z.call(U),ne.start(n,H.name)}function oe(e){for(const t of e.changedTouches||[e])for(const e of te)e.identifier===t.identifier&&(e.cur=(0,s.Z)(t,U));if(ee&&!N&&!R&&1===te.length){const e=te[0];m(e.cur[0]-e[0])>m(e.cur[1]-e[1])?R=!0:N=!0}for(const e of te)e.cur&&(e[0]=e.cur[0],e[1]=e.cur[1]);q=!0,h(e),se(e)}function se(e){const t=te[0],n=t.point0;var r;switch($=t[0]-n[0],Q=t[1]-n[1],H){case p:case f:B&&($=y(W-i,g(K-w,$)),a=i+$,C=w+$),Y&&(Q=y(X-l,g(J-M,Q)),u=l+Q,P=M+Q);break;case _:te[1]?(B&&(a=y(W,g(K,te[0][0])),C=y(W,g(K,te[1][0])),B=1),Y&&(u=y(X,g(J,te[0][1])),P=y(X,g(J,te[1][1])),Y=1)):(B<0?($=y(W-i,g(K-i,$)),a=i+$,C=w):B>0&&($=y(W-w,g(K-w,$)),a=i,C=w+$),Y<0?(Q=y(X-l,g(J-l,Q)),u=l+Q,P=M):Y>0&&(Q=y(X-M,g(J-M,Q)),u=l,P=M+Q));break;case v:B&&(a=y(W,g(K,i-$*B)),C=y(W,g(K,w+$*B))),Y&&(u=y(X,g(J,l-Q*Y)),P=y(X,g(J,M+Q*Y)))}C<a&&(B*=-1,r=i,i=w,w=r,r=a,a=C,C=r,I in S&&re.attr("cursor",E[I=S[I]])),P<u&&(Y*=-1,r=l,l=M,M=r,r=u,u=P,P=r,I in O&&re.attr("cursor",E[I=O[I]])),F.selection&&(G=F.selection),N&&(a=G[0][0],C=G[1][0]),R&&(u=G[0][1],P=G[1][1]),G[0][0]===a&&G[0][1]===u&&G[1][0]===C&&G[1][1]===P||(F.selection=[[a,u],[C,P]],z.call(U),ne.brush(e,H.name))}function ce(e){if(d(e),e.touches){if(e.touches.length)return;t&&clearTimeout(t),t=setTimeout((function(){t=null}),500)}else(0,r.D)(e.view,q),ae.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);ie.attr("pointer-events","all"),re.attr("cursor",E.overlay),F.selection&&(G=F.selection),D(G)&&(F.selection=null,z.call(U)),ne.end(e,H.name)}function le(e){switch(e.keyCode){case 16:ee=B&&Y;break;case 18:H===_&&(B&&(w=C-$*B,i=a+$*B),Y&&(M=P-Q*Y,l=u+Q*Y),H=v,se(e));break;case 32:H!==_&&H!==v||(B<0?w=C-$:B>0&&(i=a-$),Y<0?M=P-Q:Y>0&&(l=u-Q),H=p,re.attr("cursor",E.selection),se(e));break;default:return}h(e)}function ue(e){switch(e.keyCode){case 16:ee&&(N=R=ee=!1,se(e));break;case 18:H===v&&(B<0?w=C:B>0&&(i=a),Y<0?M=P:Y>0&&(l=u),H=_,se(e));break;case 32:H===p&&(e.altKey?(B&&(w=C-$*B,i=a+$*B),Y&&(M=P-Q*Y,l=u+Q*Y),H=v):(B<0?w=C:B>0&&(i=a),Y<0?M=P:Y>0&&(l=u),H=_),re.attr("cursor",E[I]),se(e));break;default:return}h(e)}}function Y(e){Z(this,arguments).moved(e)}function F(e){Z(this,arguments).ended(e)}function V(){var t=this.__brush||{selection:null};return t.extent=w(n.apply(this,arguments)),t.dim=e,t}return I.move=function(t,n,i){t.tween?t.on("start.brush",(function(e){Z(this,arguments).beforestart().start(e)})).on("interrupt.brush end.brush",(function(e){Z(this,arguments).end(e)})).tween("brush",(function(){var t=this,i=t.__brush,r=Z(t,arguments),o=i.selection,s=e.input("function"==typeof n?n.apply(this,arguments):n,i.extent),c=(0,a.Z)(o,s);function l(e){i.selection=1===e&&null===s?null:c(e),z.call(t),r.brush()}return null!==o&&null!==s?l:l(1)})):t.each((function(){var t=this,r=arguments,a=t.__brush,o=e.input("function"==typeof n?n.apply(t,r):n,a.extent),s=Z(t,r).beforestart();(0,c.e1)(t),a.selection=null===o?null:o,z.call(t),s.start(i).brush(i).end(i)}))},I.clear=function(e,t){I.move(e,null,t)},H.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(e,t){return this.starting?(this.starting=!1,this.emit("start",e,t)):this.emit("brush",e),this},brush:function(e,t){return this.emit("brush",e,t),this},end:function(e,t){return 0==--this.active&&(delete this.state.emitter,this.emit("end",e,t)),this},emit:function(t,n,i){var r=(0,o.Z)(this.that).datum();R.call(t,this.that,new u(t,{sourceEvent:n,target:I,selection:e.output(this.state.selection),mode:i,dispatch:R}),r)}},I.extent=function(e){return arguments.length?(n="function"==typeof e?e:l(w(e)),I):n},I.filter=function(e){return arguments.length?(b="function"==typeof e?e:l(!!e),I):b},I.touchable=function(e){return arguments.length?(N="function"==typeof e?e:l(!!e),I):N},I.handleSize=function(e){return arguments.length?(U=+e,I):U},I.keyModifiers=function(e){return arguments.length?(j=!!e,I):j},I.on=function(){var e=R.on.apply(R,arguments);return e===R?I:e},I}(x)}},8849:(e,t,n)=>{function i(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function r(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function a(){}n.d(t,{ZP:()=>w,B8:()=>S});var o=.7,s=1/o,c="\\s*([+-]?\\d+)\\s*",l="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",u="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",d=/^#([0-9a-f]{3,8})$/,h=new RegExp("^rgb\\("+[c,c,c]+"\\)$"),f=new RegExp("^rgb\\("+[u,u,u]+"\\)$"),p=new RegExp("^rgba\\("+[c,c,c,l]+"\\)$"),_=new RegExp("^rgba\\("+[u,u,u,l]+"\\)$"),v=new RegExp("^hsl\\("+[l,u,u]+"\\)$"),m=new RegExp("^hsla\\("+[l,u,u,l]+"\\)$"),y={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function g(){return this.rgb().formatHex()}function b(){return this.rgb().formatRgb()}function w(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=d.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?x(t):3===n?new O(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?k(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?k(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=h.exec(e))?new O(t[1],t[2],t[3],1):(t=f.exec(e))?new O(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=p.exec(e))?k(t[1],t[2],t[3],t[4]):(t=_.exec(e))?k(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=v.exec(e))?M(t[1],t[2]/100,t[3]/100,1):(t=m.exec(e))?M(t[1],t[2]/100,t[3]/100,t[4]):y.hasOwnProperty(e)?x(y[e]):"transparent"===e?new O(NaN,NaN,NaN,0):null}function x(e){return new O(e>>16&255,e>>8&255,255&e,1)}function k(e,t,n,i){return i<=0&&(e=t=n=NaN),new O(e,t,n,i)}function E(e){return e instanceof a||(e=w(e)),e?new O((e=e.rgb()).r,e.g,e.b,e.opacity):new O}function S(e,t,n,i){return 1===arguments.length?E(e):new O(e,t,n,null==i?1:i)}function O(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}function T(){return"#"+C(this.r)+C(this.g)+C(this.b)}function A(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function C(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function M(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new q(e,t,n,i)}function P(e){if(e instanceof q)return new q(e.h,e.s,e.l,e.opacity);if(e instanceof a||(e=w(e)),!e)return new q;if(e instanceof q)return e;var t=(e=e.rgb()).r/255,n=e.g/255,i=e.b/255,r=Math.min(t,n,i),o=Math.max(t,n,i),s=NaN,c=o-r,l=(o+r)/2;return c?(s=t===o?(n-i)/c+6*(n<i):n===o?(i-t)/c+2:(t-n)/c+4,c/=l<.5?o+r:2-o-r,s*=60):c=l>0&&l<1?0:s,new q(s,c,l,e.opacity)}function q(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}function L(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}i(a,w,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:g,formatHex:g,formatHsl:function(){return P(this).formatHsl()},formatRgb:b,toString:b}),i(O,S,r(a,{brighter:function(e){return e=null==e?s:Math.pow(s,e),new O(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?o:Math.pow(o,e),new O(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:T,formatHex:T,formatRgb:A,toString:A})),i(q,(function(e,t,n,i){return 1===arguments.length?P(e):new q(e,t,n,null==i?1:i)}),r(a,{brighter:function(e){return e=null==e?s:Math.pow(s,e),new q(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?o:Math.pow(o,e),new q(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,r=2*n-i;return new O(L(e>=240?e-240:e+120,r,i),L(e,r,i),L(e<120?e+240:e-120,r,i),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}))},6057:(e,t,n)=>{n.d(t,{Z:()=>l});var i={value:()=>{}};function r(){for(var e,t=0,n=arguments.length,i={};t<n;++t){if(!(e=arguments[t]+"")||e in i||/[\s.]/.test(e))throw new Error("illegal type: "+e);i[e]=[]}return new a(i)}function a(e){this._=e}function o(e,t){return e.trim().split(/^|\s+/).map((function(e){var n="",i=e.indexOf(".");if(i>=0&&(n=e.slice(i+1),e=e.slice(0,i)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}}))}function s(e,t){for(var n,i=0,r=e.length;i<r;++i)if((n=e[i]).name===t)return n.value}function c(e,t,n){for(var r=0,a=e.length;r<a;++r)if(e[r].name===t){e[r]=i,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}a.prototype=r.prototype={constructor:a,on:function(e,t){var n,i=this._,r=o(e+"",i),a=-1,l=r.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++a<l;)if(n=(e=r[a]).type)i[n]=c(i[n],e.name,t);else if(null==t)for(n in i)i[n]=c(i[n],e.name,null);return this}for(;++a<l;)if((n=(e=r[a]).type)&&(n=s(i[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new a(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,i,r=new Array(n),a=0;a<n;++a)r[a]=arguments[a+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=0,n=(i=this._[e]).length;a<n;++a)i[a].value.apply(t,r)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],r=0,a=i.length;r<a;++r)i[r].value.apply(t,n)}};const l=r},848:(e,t,n)=>{n.d(t,{Z:()=>o,D:()=>s});var i=n(3838);const r={capture:!0,passive:!1};function a(e){e.preventDefault(),e.stopImmediatePropagation()}function o(e){var t=e.document.documentElement,n=(0,i.Z)(e).on("dragstart.drag",a,r);"onselectstart"in t?n.on("selectstart.drag",a,r):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function s(e,t){var n=e.document.documentElement,o=(0,i.Z)(e).on("dragstart.drag",null);t&&(o.on("click.drag",a,r),setTimeout((function(){o.on("click.drag",null)}),0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}},5368:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(8613);function r(e){return(e=(0,i.V)(Math.abs(e)))?e[1]:NaN}},8613:(e,t,n)=>{function i(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function r(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,i=e.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+e.slice(n+1)]}n.d(t,{Z:()=>i,V:()=>r})},5831:(e,t,n)=>{function i(e,t){return function(n,i){for(var r=n.length,a=[],o=0,s=e[0],c=0;r>0&&s>0&&(c+s+1>i&&(s=Math.max(1,i-c)),a.push(n.substring(r-=s,r+s)),!((c+=s+1)>i));)s=e[o=(o+1)%e.length];return a.reverse().join(t)}}n.d(t,{Z:()=>i})},3148:(e,t,n)=>{function i(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}n.d(t,{Z:()=>i})},1281:(e,t,n)=>{n.d(t,{y:()=>i,Z:()=>a});var i,r=n(8613);function a(e,t){var n=(0,r.V)(e,t);if(!n)return e+"";var a=n[0],o=n[1],s=o-(i=3*Math.max(-8,Math.min(8,Math.floor(o/3))))+1,c=a.length;return s===c?a:s>c?a+new Array(s-c+1).join("0"):s>0?a.slice(0,s)+"."+a.slice(s):"0."+new Array(1-s).join("0")+(0,r.V)(e,Math.max(0,t+s-1))[0]}},2035:(e,t,n)=>{n.d(t,{Z:()=>r});var i=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function r(e){if(!(t=i.exec(e)))throw new Error("invalid format: "+e);var t;return new a({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function a(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}r.prototype=a.prototype,a.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type}},2403:(e,t,n)=>{function i(e){e:for(var t,n=e.length,i=1,r=-1;i<n;++i)switch(e[i]){case".":r=t=i;break;case"0":0===r&&(r=i),t=i;break;default:if(!+e[i])break e;r>0&&(r=0)}return r>0?e.slice(0,r)+e.slice(t+1):e}n.d(t,{Z:()=>i})},6485:(e,t,n)=>{n.d(t,{Z:()=>o});var i=n(8613),r=n(1281);function a(e,t){var n=(0,i.V)(e,t);if(!n)return e+"";var r=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+r:r.length>a+1?r.slice(0,a+1)+"."+r.slice(a+1):r+new Array(a-r.length+2).join("0")}const o={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:i.Z,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>a(100*e,t),r:a,s:r.Z,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)}},5225:(e,t,n)=>{function i(e){return e}n.d(t,{Z:()=>i})},5590:(e,t,n)=>{function i(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}n.d(t,{Z:()=>i})},216:(e,t,n)=>{function i(e){var t=0,n=e.children,i=n&&n.length;if(i)for(;--i>=0;)t+=n[i].value;else t=1;e.value=t}function r(){return this.eachAfter(i)}n.d(t,{Z:()=>r})},6543:(e,t,n)=>{function i(){return Array.from(this)}n.d(t,{Z:()=>i})},2839:(e,t,n)=>{function i(e,t){let n=-1;for(const i of this)e.call(t,i,++n,this);return this}n.d(t,{Z:()=>i})},2853:(e,t,n)=>{function i(e,t){for(var n,i,r,a=this,o=[a],s=[],c=-1;a=o.pop();)if(s.push(a),n=a.children)for(i=0,r=n.length;i<r;++i)o.push(n[i]);for(;a=s.pop();)e.call(t,a,++c,this);return this}n.d(t,{Z:()=>i})},7889:(e,t,n)=>{function i(e,t){for(var n,i,r=this,a=[r],o=-1;r=a.pop();)if(e.call(t,r,++o,this),n=r.children)for(i=n.length-1;i>=0;--i)a.push(n[i]);return this}n.d(t,{Z:()=>i})},733:(e,t,n)=>{function i(e,t){let n=-1;for(const i of this)if(e.call(t,i,++n,this))return i}n.d(t,{Z:()=>i})},8686:(e,t,n)=>{function*i(){var e,t,n,i,r=this,a=[r];do{for(e=a.reverse(),a=[];r=e.pop();)if(yield r,t=r.children)for(n=0,i=t.length;n<i;++n)a.push(t[n])}while(a.length)}n.d(t,{Z:()=>i})},2905:(e,t,n)=>{function i(){var e=[];return this.eachBefore((function(t){t.children||e.push(t)})),e}n.d(t,{Z:()=>i})},1038:(e,t,n)=>{function i(){var e=this,t=[];return e.each((function(n){n!==e&&t.push({source:n.parent,target:n})})),t}n.d(t,{Z:()=>i})},8162:(e,t,n)=>{function i(e){for(var t=this,n=function(e,t){if(e===t)return e;var n=e.ancestors(),i=t.ancestors(),r=null;for(e=n.pop(),t=i.pop();e===t;)r=e,e=n.pop(),t=i.pop();return r}(t,e),i=[t];t!==n;)t=t.parent,i.push(t);for(var r=i.length;e!==n;)i.splice(r,0,e),e=e.parent;return i}n.d(t,{Z:()=>i})},5709:(e,t,n)=>{function i(e){return this.eachBefore((function(t){t.children&&t.children.sort(e)}))}n.d(t,{Z:()=>i})},3833:(e,t,n)=>{function i(e){return this.eachAfter((function(t){for(var n=+e(t.data)||0,i=t.children,r=i&&i.length;--r>=0;)n+=i[r].value;t.value=n}))}n.d(t,{Z:()=>i})},173:(e,t,n)=>{n.d(t,{Z:()=>u});var i=n(2290);function r(e,t){return e.parent===t.parent?1:2}function a(e){var t=e.children;return t?t[0]:e.t}function o(e){var t=e.children;return t?t[t.length-1]:e.t}function s(e,t,n){var i=n/(t.i-e.i);t.c-=i,t.s+=n,e.c+=i,t.z+=n,t.m+=n}function c(e,t,n){return e.a.parent===t.parent?e.a:n}function l(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}function u(){var e=r,t=1,n=1,i=null;function u(r){var a=function(e){for(var t,n,i,r,a,o=new l(e,0),s=[o];t=s.pop();)if(i=t._.children)for(t.children=new Array(a=i.length),r=a-1;r>=0;--r)s.push(n=t.children[r]=new l(i[r],r)),n.parent=t;return(o.parent=new l(null,0)).children=[o],o}(r);if(a.eachAfter(d),a.parent.m=-a.z,a.eachBefore(h),i)r.eachBefore(f);else{var o=r,s=r,c=r;r.eachBefore((function(e){e.x<o.x&&(o=e),e.x>s.x&&(s=e),e.depth>c.depth&&(c=e)}));var u=o===s?1:e(o,s)/2,p=u-o.x,_=t/(s.x+u+p),v=n/(c.depth||1);r.eachBefore((function(e){e.x=(e.x+p)*_,e.y=e.depth*v}))}return r}function d(t){var n=t.children,i=t.parent.children,r=t.i?i[t.i-1]:null;if(n){!function(e){for(var t,n=0,i=0,r=e.children,a=r.length;--a>=0;)(t=r[a]).z+=n,t.m+=n,n+=t.s+(i+=t.c)}(t);var l=(n[0].z+n[n.length-1].z)/2;r?(t.z=r.z+e(t._,r._),t.m=t.z-l):t.z=l}else r&&(t.z=r.z+e(t._,r._));t.parent.A=function(t,n,i){if(n){for(var r,l=t,u=t,d=n,h=l.parent.children[0],f=l.m,p=u.m,_=d.m,v=h.m;d=o(d),l=a(l),d&&l;)h=a(h),(u=o(u)).a=t,(r=d.z+_-l.z-f+e(d._,l._))>0&&(s(c(d,t,i),t,r),f+=r,p+=r),_+=d.m,f+=l.m,v+=h.m,p+=u.m;d&&!o(u)&&(u.t=d,u.m+=_-p),l&&!a(h)&&(h.t=l,h.m+=f-v,i=t)}return i}(t,r,t.parent.A||i[0])}function h(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function f(e){e.x*=t,e.y=e.depth*n}return u.separation=function(t){return arguments.length?(e=t,u):e},u.size=function(e){return arguments.length?(i=!1,t=+e[0],n=+e[1],u):i?null:[t,n]},u.nodeSize=function(e){return arguments.length?(i=!0,t=+e[0],n=+e[1],u):i?[t,n]:null},u}l.prototype=Object.create(i.NB.prototype)},2954:(e,t,n)=>{n.d(t,{Z:()=>i});const i=e=>()=>e},8063:(e,t,n)=>{function i(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}n.d(t,{Z:()=>i})},187:(e,t,n)=>{n.d(t,{ZP:()=>s});var i=n(8849);function r(e,t,n,i,r){var a=e*e,o=a*e;return((1-3*e+3*a-o)*t+(4-6*a+3*o)*n+(1+3*e+3*a-3*o)*i+o*r)/6}var a=n(2954);function o(e,t){var n=t-e;return n?function(e,t){return function(n){return e+n*t}}(e,n):(0,a.Z)(isNaN(e)?t:e)}const s=function e(t){var n=function(e){return 1==(e=+e)?o:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}(t,n,e):(0,a.Z)(isNaN(t)?n:t)}}(t);function r(e,t){var r=n((e=(0,i.B8)(e)).r,(t=(0,i.B8)(t)).r),a=n(e.g,t.g),s=n(e.b,t.b),c=o(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=a(t),e.b=s(t),e.opacity=c(t),e+""}}return r.gamma=e,r}(1);function c(e){return function(t){var n,r,a=t.length,o=new Array(a),s=new Array(a),c=new Array(a);for(n=0;n<a;++n)r=(0,i.B8)(t[n]),o[n]=r.r||0,s[n]=r.g||0,c[n]=r.b||0;return o=e(o),s=e(s),c=e(c),r.opacity=1,function(e){return r.r=o(e),r.g=s(e),r.b=c(e),r+""}}}c((function(e){var t=e.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),a=e[i],o=e[i+1],s=i>0?e[i-1]:2*a-o,c=i<t-1?e[i+2]:2*o-a;return r((n-i/t)*t,s,a,o,c)}})),c((function(e){var t=e.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*t),a=e[(i+t-1)%t],o=e[i%t],s=e[(i+1)%t],c=e[(i+2)%t];return r((n-i/t)*t,a,o,s,c)}}))},6773:(e,t,n)=>{n.d(t,{Z:()=>o});var i=n(8063),r=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,a=new RegExp(r.source,"g");function o(e,t){var n,o,s,c=r.lastIndex=a.lastIndex=0,l=-1,u=[],d=[];for(e+="",t+="";(n=r.exec(e))&&(o=a.exec(t));)(s=o.index)>c&&(s=t.slice(c,s),u[l]?u[l]+=s:u[++l]=s),(n=n[0])===(o=o[0])?u[l]?u[l]+=o:u[++l]=o:(u[++l]=null,d.push({i:l,x:(0,i.Z)(n,o)})),c=a.lastIndex;return c<t.length&&(s=t.slice(c),u[l]?u[l]+=s:u[++l]=s),u.length<2?d[0]?function(e){return function(t){return e(t)+""}}(d[0].x):function(e){return function(){return e}}(t):(t=d.length,function(e){for(var n,i=0;i<t;++i)u[(n=d[i]).i]=n.x(e);return u.join("")})}},8684:(e,t,n)=>{n.d(t,{z:()=>s,X:()=>c});var i,r=180/Math.PI,a={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function o(e,t,n,i,a,o){var s,c,l;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(l=e*n+t*i)&&(n-=e*l,i-=t*l),(c=Math.sqrt(n*n+i*i))&&(n/=c,i/=c,l/=c),e*i<t*n&&(e=-e,t=-t,l=-l,s=-s),{translateX:a,translateY:o,rotate:Math.atan2(t,e)*r,skewX:Math.atan(l)*r,scaleX:s,scaleY:c}}function s(e){const t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?a:o(t.a,t.b,t.c,t.d,t.e,t.f)}function c(e){return null==e?a:(i||(i=document.createElementNS("http://www.w3.org/2000/svg","g")),i.setAttribute("transform",e),(e=i.transform.baseVal.consolidate())?o((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):a)}},9487:(e,t,n)=>{n.d(t,{Z:()=>h});var i=n(8849),r=n(187);function a(e,t){var n,i=t?t.length:0,r=e?Math.min(i,e.length):0,a=new Array(r),o=new Array(i);for(n=0;n<r;++n)a[n]=h(e[n],t[n]);for(;n<i;++n)o[n]=t[n];return function(e){for(n=0;n<r;++n)o[n]=a[n](e);return o}}function o(e,t){var n=new Date;return e=+e,t=+t,function(i){return n.setTime(e*(1-i)+t*i),n}}var s=n(8063);function c(e,t){var n,i={},r={};for(n in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)n in e?i[n]=h(e[n],t[n]):r[n]=t[n];return function(e){for(n in i)r[n]=i[n](e);return r}}var l=n(6773),u=n(2954);function d(e,t){t||(t=[]);var n,i=e?Math.min(t.length,e.length):0,r=t.slice();return function(a){for(n=0;n<i;++n)r[n]=e[n]*(1-a)+t[n]*a;return r}}function h(e,t){var n,h,f=typeof t;return null==t||"boolean"===f?(0,u.Z)(t):("number"===f?s.Z:"string"===f?(n=(0,i.ZP)(t))?(t=n,r.ZP):l.Z:t instanceof i.ZP?r.ZP:t instanceof Date?o:(h=t,!ArrayBuffer.isView(h)||h instanceof DataView?Array.isArray(t)?a:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?c:s.Z:d))(e,t)}},1714:(e,t,n)=>{n.d(t,{Z:()=>i});const i=function(e){for(var t=e.length/6|0,n=new Array(t),i=0;i<t;)n[i]="#"+e.slice(6*i,6*++i);return n}("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928")},5242:(e,t,n)=>{n.d(t,{JG:()=>m,ZP:()=>y});var i=n(9757),r=n(477);const a=(0,r.Z)(i.Z),o=a.right,s=(a.left,(0,r.Z)((function(e){return null===e?NaN:+e})).center,o);function c(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var l=n(9487),u=n(8063);function d(e){return+e}var h=[0,1];function f(e){return e}function p(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:(n=isNaN(t)?NaN:.5,function(){return n});var n}function _(e,t,n){var i=e[0],r=e[1],a=t[0],o=t[1];return r<i?(i=p(r,i),a=n(o,a)):(i=p(i,r),a=n(a,o)),function(e){return a(i(e))}}function v(e,t,n){var i=Math.min(e.length,t.length)-1,r=new Array(i),a=new Array(i),o=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<i;)r[o]=p(e[o],e[o+1]),a[o]=n(t[o],t[o+1]);return function(t){var n=s(e,t,1,i)-1;return a[n](r[n](t))}}function m(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function y(){return function(){var e,t,n,i,r,a,o=h,s=h,p=l.Z,m=f;function y(){var e,t,n,c=Math.min(o.length,s.length);return m!==f&&(e=o[0],t=o[c-1],e>t&&(n=e,e=t,t=n),m=function(n){return Math.max(e,Math.min(t,n))}),i=c>2?v:_,r=a=null,g}function g(t){return null==t||isNaN(t=+t)?n:(r||(r=i(o.map(e),s,p)))(e(m(t)))}return g.invert=function(n){return m(t((a||(a=i(s,o.map(e),u.Z)))(n)))},g.domain=function(e){return arguments.length?(o=Array.from(e,d),y()):o.slice()},g.range=function(e){return arguments.length?(s=Array.from(e),y()):s.slice()},g.rangeRound=function(e){return s=Array.from(e),p=c,y()},g.clamp=function(e){return arguments.length?(m=!!e||f,y()):m!==f},g.interpolate=function(e){return arguments.length?(p=e,y()):p},g.unknown=function(e){return arguments.length?(n=e,g):n},function(n,i){return e=n,t=i,y()}}()(f,f)}},4182:(e,t,n)=>{function i(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}n.d(t,{o:()=>i})},9937:(e,t,n)=>{n.d(t,{Z:()=>f});var i,r,a,o,s=n(3896),c=n(5242),l=n(4182),u=n(2035),d=n(5368);function h(e){var t=e.domain;return e.ticks=function(e){var n=t();return(0,s.ZP)(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var i=t();return function(e,t,n,i){var o,c=(0,s.ly)(e,t,n);switch((i=(0,u.Z)(null==i?",f":i)).type){case"s":var l=Math.max(Math.abs(e),Math.abs(t));return null!=i.precision||isNaN(o=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor((0,d.Z)(t)/3)))-(0,d.Z)(Math.abs(e)))}(c,l))||(i.precision=o),a(i,l);case"":case"e":case"g":case"p":case"r":null!=i.precision||isNaN(o=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,(0,d.Z)(t)-(0,d.Z)(e))+1}(c,Math.max(Math.abs(e),Math.abs(t))))||(i.precision=o-("e"===i.type));break;case"f":case"%":null!=i.precision||isNaN(o=function(e){return Math.max(0,-(0,d.Z)(Math.abs(e)))}(c))||(i.precision=o-2*("%"===i.type))}return r(i)}(i[0],i[i.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var i,r,a=t(),o=0,c=a.length-1,l=a[o],u=a[c],d=10;for(u<l&&(r=l,l=u,u=r,r=o,o=c,c=r);d-- >0;){if((r=(0,s.G9)(l,u,n))===i)return a[o]=l,a[c]=u,t(a);if(r>0)l=Math.floor(l/r)*r,u=Math.ceil(u/r)*r;else{if(!(r<0))break;l=Math.ceil(l*r)/r,u=Math.floor(u*r)/r}i=r}return e},e}function f(){var e=(0,c.ZP)();return e.copy=function(){return(0,c.JG)(e,f())},l.o.apply(e,arguments),h(e)}o={thousands:",",grouping:[3],currency:["$",""]},i=(0,n(2150).Z)(o),r=i.format,a=i.formatPrefix},2112:(e,t,n)=>{n.d(t,{Z:()=>z});var i=n(477),r=n(3896),a=n(1262),o=n(2576),s=(0,o.Z)((function(){}),(function(e,t){e.setTime(+e+t)}),(function(e,t){return t-e}));s.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?(0,o.Z)((function(t){t.setTime(Math.floor(t/e)*e)}),(function(t,n){t.setTime(+t+n*e)}),(function(t,n){return(n-t)/e})):s:null};const c=s;s.range;var l=(0,o.Z)((function(e){e.setTime(e-e.getMilliseconds())}),(function(e,t){e.setTime(+e+t*a.Ym)}),(function(e,t){return(t-e)/a.Ym}),(function(e){return e.getUTCSeconds()}));const u=l;l.range;var d=(0,o.Z)((function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*a.Ym)}),(function(e,t){e.setTime(+e+t*a.yB)}),(function(e,t){return(t-e)/a.yB}),(function(e){return e.getMinutes()}));const h=d;d.range;var f=(0,o.Z)((function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*a.Ym-e.getMinutes()*a.yB)}),(function(e,t){e.setTime(+e+t*a.Y2)}),(function(e,t){return(t-e)/a.Y2}),(function(e){return e.getHours()}));const p=f;f.range;var _=n(6199),v=n(5235),m=(0,o.Z)((function(e){e.setDate(1),e.setHours(0,0,0,0)}),(function(e,t){e.setMonth(e.getMonth()+t)}),(function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())}),(function(e){return e.getMonth()}));const y=m;m.range;var g=n(8887),b=(0,o.Z)((function(e){e.setUTCSeconds(0,0)}),(function(e,t){e.setTime(+e+t*a.yB)}),(function(e,t){return(t-e)/a.yB}),(function(e){return e.getUTCMinutes()}));const w=b;b.range;var x=(0,o.Z)((function(e){e.setUTCMinutes(0,0,0)}),(function(e,t){e.setTime(+e+t*a.Y2)}),(function(e,t){return(t-e)/a.Y2}),(function(e){return e.getUTCHours()}));const k=x;x.range;var E=n(4834),S=n(1416),O=(0,o.Z)((function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCMonth(e.getUTCMonth()+t)}),(function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())}),(function(e){return e.getUTCMonth()}));const T=O;O.range;var A=n(5762);function C(e,t,n,o,s,l){const d=[[u,1,a.Ym],[u,5,5*a.Ym],[u,15,15*a.Ym],[u,30,30*a.Ym],[l,1,a.yB],[l,5,5*a.yB],[l,15,15*a.yB],[l,30,30*a.yB],[s,1,a.Y2],[s,3,3*a.Y2],[s,6,6*a.Y2],[s,12,12*a.Y2],[o,1,a.UD],[o,2,2*a.UD],[n,1,a.iM],[t,1,a.jz],[t,3,3*a.jz],[e,1,a.qz]];function h(t,n,o){const s=Math.abs(n-t)/o,l=(0,i.Z)((([,,e])=>e)).right(d,s);if(l===d.length)return e.every((0,r.ly)(t/a.qz,n/a.qz,o));if(0===l)return c.every(Math.max((0,r.ly)(t,n,o),1));const[u,h]=d[s/d[l-1][2]<d[l][2]/s?l-1:l];return u.every(h)}return[function(e,t,n){const i=t<e;i&&([e,t]=[t,e]);const r=n&&"function"==typeof n.range?n:h(e,t,n),a=r?r.range(e,+t+1):[];return i?a.reverse():a},h]}const[M,P]=C(A.Z,T,S.Ox,E.Z,k,w),[q,L]=C(g.Z,y,v.OM,_.Z,p,h);var D=n(2138),N=n(5242),j=n(4182);function R(e){return new Date(e)}function U(e){return e instanceof Date?+e:+new Date(+e)}function I(e,t,n,i,r,a,o,s,c,l){var u=(0,N.ZP)(),d=u.invert,h=u.domain,f=l(".%L"),p=l(":%S"),_=l("%I:%M"),v=l("%I %p"),m=l("%a %d"),y=l("%b %d"),g=l("%B"),b=l("%Y");function w(e){return(c(e)<e?f:s(e)<e?p:o(e)<e?_:a(e)<e?v:i(e)<e?r(e)<e?m:y:n(e)<e?g:b)(e)}return u.invert=function(e){return new Date(d(e))},u.domain=function(e){return arguments.length?h(Array.from(e,U)):h().map(R)},u.ticks=function(t){var n=h();return e(n[0],n[n.length-1],null==t?10:t)},u.tickFormat=function(e,t){return null==t?w:l(t)},u.nice=function(e){var n=h();return e&&"function"==typeof e.range||(e=t(n[0],n[n.length-1],null==e?10:e)),e?h(function(e,t){var n,i=0,r=(e=e.slice()).length-1,a=e[i],o=e[r];return o<a&&(n=i,i=r,r=n,n=a,a=o,o=n),e[i]=t.floor(a),e[r]=t.ceil(o),e}(n,e)):u},u.copy=function(){return(0,N.JG)(u,I(e,t,n,i,r,a,o,s,c,l))},u}function z(){return j.o.apply(I(q,L,g.Z,y,v.OM,_.Z,p,h,u,D.i$).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}},9165:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(4708),r=n(3838);function a(e){return(0,r.Z)((0,i.Z)(e).call(document.documentElement))}},4708:(e,t,n)=>{n.d(t,{Z:()=>s});var i=n(1663),r=n(1226);function a(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===r.P&&t.documentElement.namespaceURI===r.P?t.createElement(e):t.createElementNS(n,e)}}function o(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function s(e){var t=(0,i.Z)(e);return(t.local?o:a)(t)}},4421:(e,t,n)=>{function i(e){return function(){return this.matches(e)}}function r(e){return function(t){return t.matches(e)}}n.d(t,{Z:()=>i,P:()=>r})},1663:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(1226);function r(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),i.Z.hasOwnProperty(t)?{space:i.Z[t],local:e}:e}},1226:(e,t,n)=>{n.d(t,{P:()=>i,Z:()=>r});var i="http://www.w3.org/1999/xhtml";const r={svg:"http://www.w3.org/2000/svg",xhtml:i,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"}},3466:(e,t,n)=>{function i(e,t){if(e=function(e){let t;for(;t=e.sourceEvent;)e=t;return e}(e),void 0===t&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,[(i=i.matrixTransform(t.getScreenCTM().inverse())).x,i.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}n.d(t,{Z:()=>i})},3838:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(8390);function r(e){return"string"==typeof e?new i.Y1([[document.querySelector(e)]],[document.documentElement]):new i.Y1([[e]],i.Jz)}},7911:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(4708);function r(e){var t="function"==typeof e?e:(0,i.Z)(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))}},7405:(e,t,n)=>{n.d(t,{Z:()=>u});var i=n(1663);function r(e){return function(){this.removeAttribute(e)}}function a(e){return function(){this.removeAttributeNS(e.space,e.local)}}function o(e,t){return function(){this.setAttribute(e,t)}}function s(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function c(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function l(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function u(e,t){var n=(0,i.Z)(e);if(arguments.length<2){var u=this.node();return n.local?u.getAttributeNS(n.space,n.local):u.getAttribute(n)}return this.each((null==t?n.local?a:r:"function"==typeof t?n.local?l:c:n.local?s:o)(n,t))}},5772:(e,t,n)=>{function i(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}n.d(t,{Z:()=>i})},5016:(e,t,n)=>{function i(e){return e.trim().split(/^|\s+/)}function r(e){return e.classList||new a(e)}function a(e){this._node=e,this._names=i(e.getAttribute("class")||"")}function o(e,t){for(var n=r(e),i=-1,a=t.length;++i<a;)n.add(t[i])}function s(e,t){for(var n=r(e),i=-1,a=t.length;++i<a;)n.remove(t[i])}function c(e){return function(){o(this,e)}}function l(e){return function(){s(this,e)}}function u(e,t){return function(){(t.apply(this,arguments)?o:s)(this,e)}}function d(e,t){var n=i(e+"");if(arguments.length<2){for(var a=r(this.node()),o=-1,s=n.length;++o<s;)if(!a.contains(n[o]))return!1;return!0}return this.each(("function"==typeof t?u:t?c:l)(n,t))}n.d(t,{Z:()=>d}),a.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}}},5122:(e,t,n)=>{function i(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function r(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function a(e){return this.select(e?r:i)}n.d(t,{Z:()=>a})},9954:(e,t,n)=>{n.d(t,{Z:()=>l});var i=n(8390),r=n(2270);function a(e){return function(){return e}}function o(e,t,n,i,a,o){for(var s,c=0,l=t.length,u=o.length;c<u;++c)(s=t[c])?(s.__data__=o[c],i[c]=s):n[c]=new r.F(e,o[c]);for(;c<l;++c)(s=t[c])&&(a[c]=s)}function s(e,t,n,i,a,o,s){var c,l,u,d=new Map,h=t.length,f=o.length,p=new Array(h);for(c=0;c<h;++c)(l=t[c])&&(p[c]=u=s.call(l,l.__data__,c,t)+"",d.has(u)?a[c]=l:d.set(u,l));for(c=0;c<f;++c)u=s.call(e,o[c],c,o)+"",(l=d.get(u))?(i[c]=l,l.__data__=o[c],d.delete(u)):n[c]=new r.F(e,o[c]);for(c=0;c<h;++c)(l=t[c])&&d.get(p[c])===l&&(a[c]=l)}function c(e){return e.__data__}function l(e,t){if(!arguments.length)return Array.from(this,c);var n=t?s:o,r=this._parents,l=this._groups;"function"!=typeof e&&(e=a(e));for(var d=l.length,h=new Array(d),f=new Array(d),p=new Array(d),_=0;_<d;++_){var v=r[_],m=l[_],y=m.length,g=u(e.call(v,v&&v.__data__,_,r)),b=g.length,w=f[_]=new Array(b),x=h[_]=new Array(b),k=p[_]=new Array(y);n(v,m,w,x,k,g,t);for(var E,S,O=0,T=0;O<b;++O)if(E=w[O]){for(O>=T&&(T=O+1);!(S=x[T])&&++T<b;);E._next=S||null}}return(h=new i.Y1(h,r))._enter=f,h._exit=p,h}function u(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}},5667:(e,t,n)=>{function i(e){return arguments.length?this.property("__data__",e):this.node().__data__}n.d(t,{Z:()=>i})},3790:(e,t,n)=>{n.d(t,{Z:()=>s});var i=n(9920);function r(e,t,n){var r=(0,i.Z)(e),a=r.CustomEvent;"function"==typeof a?a=new a(t,n):(a=r.document.createEvent("Event"),n?(a.initEvent(t,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}function a(e,t){return function(){return r(this,e,t)}}function o(e,t){return function(){return r(this,e,t.apply(this,arguments))}}function s(e,t){return this.each(("function"==typeof t?o:a)(e,t))}},6347:(e,t,n)=>{function i(e){for(var t=this._groups,n=0,i=t.length;n<i;++n)for(var r,a=t[n],o=0,s=a.length;o<s;++o)(r=a[o])&&e.call(r,r.__data__,o,a);return this}n.d(t,{Z:()=>i})},7844:(e,t,n)=>{function i(){return!this.node()}n.d(t,{Z:()=>i})},2270:(e,t,n)=>{n.d(t,{Z:()=>a,F:()=>o});var i=n(1586),r=n(8390);function a(){return new r.Y1(this._enter||this._groups.map(i.Z),this._parents)}function o(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}o.prototype={constructor:o,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}}},6790:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(1586),r=n(8390);function a(){return new r.Y1(this._exit||this._groups.map(i.Z),this._parents)}},5777:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(8390),r=n(4421);function a(e){"function"!=typeof e&&(e=(0,r.Z)(e));for(var t=this._groups,n=t.length,a=new Array(n),o=0;o<n;++o)for(var s,c=t[o],l=c.length,u=a[o]=[],d=0;d<l;++d)(s=c[d])&&e.call(s,s.__data__,d,c)&&u.push(s);return new i.Y1(a,this._parents)}},655:(e,t,n)=>{function i(){this.innerHTML=""}function r(e){return function(){this.innerHTML=e}}function a(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function o(e){return arguments.length?this.each(null==e?i:("function"==typeof e?a:r)(e)):this.node().innerHTML}n.d(t,{Z:()=>o})},2504:(e,t,n)=>{n.d(t,{Z:()=>o});var i=n(4708),r=n(3010);function a(){return null}function o(e,t){var n="function"==typeof e?e:(0,i.Z)(e),o=null==t?a:"function"==typeof t?t:(0,r.Z)(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)}))}},3536:(e,t,n)=>{function*i(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i,r=e[t],a=0,o=r.length;a<o;++a)(i=r[a])&&(yield i)}n.d(t,{Z:()=>i})},1474:(e,t,n)=>{function i(e,t,n){var i=this.enter(),r=this,a=this.exit();return"function"==typeof e?(i=e(i))&&(i=i.selection()):i=i.append(e+""),null!=t&&(r=t(r))&&(r=r.selection()),null==n?a.remove():n(a),i&&r?i.merge(r).order():r}n.d(t,{Z:()=>i})},6017:(e,t,n)=>{function i(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function r(){return this.each(i)}n.d(t,{Z:()=>r})},6359:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(8390);function r(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,a=n.length,o=r.length,s=Math.min(a,o),c=new Array(a),l=0;l<s;++l)for(var u,d=n[l],h=r[l],f=d.length,p=c[l]=new Array(f),_=0;_<f;++_)(u=d[_]||h[_])&&(p[_]=u);for(;l<a;++l)c[l]=n[l];return new i.Y1(c,this._parents)}},838:(e,t,n)=>{function i(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],r=0,a=i.length;r<a;++r){var o=i[r];if(o)return o}return null}n.d(t,{Z:()=>i})},426:(e,t,n)=>{function i(){return Array.from(this)}n.d(t,{Z:()=>i})},2017:(e,t,n)=>{function i(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}function r(e){return function(){var t=this.__on;if(t){for(var n,i=0,r=-1,a=t.length;i<a;++i)n=t[i],e.type&&n.type!==e.type||n.name!==e.name?t[++r]=n:this.removeEventListener(n.type,n.listener,n.options);++r?t.length=r:delete this.__on}}}function a(e,t,n){return function(){var i,r=this.__on,a=function(e){return function(t){e.call(this,t,this.__data__)}}(t);if(r)for(var o=0,s=r.length;o<s;++o)if((i=r[o]).type===e.type&&i.name===e.name)return this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),void(i.value=t);this.addEventListener(e.type,a,n),i={type:e.type,name:e.name,value:t,listener:a,options:n},r?r.push(i):this.__on=[i]}}function o(e,t,n){var o,s,c=i(e+""),l=c.length;if(!(arguments.length<2)){for(u=t?a:r,o=0;o<l;++o)this.each(u(c[o],t,n));return this}var u=this.node().__on;if(u)for(var d,h=0,f=u.length;h<f;++h)for(o=0,d=u[h];o<l;++o)if((s=c[o]).type===d.type&&s.name===d.name)return d.value}n.d(t,{Z:()=>o})},4729:(e,t,n)=>{function i(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var i,r=e[t],a=r.length-1,o=r[a];--a>=0;)(i=r[a])&&(o&&4^i.compareDocumentPosition(o)&&o.parentNode.insertBefore(i,o),o=i);return this}n.d(t,{Z:()=>i})},9714:(e,t,n)=>{function i(e){return function(){delete this[e]}}function r(e,t){return function(){this[e]=t}}function a(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function o(e,t){return arguments.length>1?this.each((null==t?i:"function"==typeof t?a:r)(e,t)):this.node()[e]}n.d(t,{Z:()=>o})},1903:(e,t,n)=>{function i(){this.nextSibling&&this.parentNode.appendChild(this)}function r(){return this.each(i)}n.d(t,{Z:()=>r})},8349:(e,t,n)=>{function i(){var e=this.parentNode;e&&e.removeChild(this)}function r(){return this.each(i)}n.d(t,{Z:()=>r})},486:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(8390),r=n(3010);function a(e){"function"!=typeof e&&(e=(0,r.Z)(e));for(var t=this._groups,n=t.length,a=new Array(n),o=0;o<n;++o)for(var s,c,l=t[o],u=l.length,d=a[o]=new Array(u),h=0;h<u;++h)(s=l[h])&&(c=e.call(s,s.__data__,h,l))&&("__data__"in s&&(c.__data__=s.__data__),d[h]=c);return new i.Y1(a,this._parents)}},8271:(e,t,n)=>{n.d(t,{Z:()=>o});var i=n(8390);function r(e){return null==e?[]:Array.isArray(e)?e:Array.from(e)}var a=n(9701);function o(e){e="function"==typeof e?function(e){return function(){return r(e.apply(this,arguments))}}(e):(0,a.Z)(e);for(var t=this._groups,n=t.length,o=[],s=[],c=0;c<n;++c)for(var l,u=t[c],d=u.length,h=0;h<d;++h)(l=u[h])&&(o.push(e.call(l,l.__data__,h,u)),s.push(l));return new i.Y1(o,s)}},4735:(e,t,n)=>{n.d(t,{Z:()=>o});var i=n(4421),r=Array.prototype.find;function a(){return this.firstElementChild}function o(e){return this.select(null==e?a:function(e){return function(){return r.call(this.children,e)}}("function"==typeof e?e:(0,i.P)(e)))}},467:(e,t,n)=>{n.d(t,{Z:()=>o});var i=n(4421),r=Array.prototype.filter;function a(){return Array.from(this.children)}function o(e){return this.selectAll(null==e?a:function(e){return function(){return r.call(this.children,e)}}("function"==typeof e?e:(0,i.P)(e)))}},6909:(e,t,n)=>{function i(){let e=0;for(const t of this)++e;return e}n.d(t,{Z:()=>i})},9548:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(8390);function r(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=a);for(var n=this._groups,r=n.length,o=new Array(r),s=0;s<r;++s){for(var c,l=n[s],u=l.length,d=o[s]=new Array(u),h=0;h<u;++h)(c=l[h])&&(d[h]=c);d.sort(t)}return new i.Y1(o,this._parents).order()}function a(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}},1586:(e,t,n)=>{function i(e){return new Array(e.length)}n.d(t,{Z:()=>i})},2627:(e,t,n)=>{n.d(t,{Z:()=>s,S:()=>c});var i=n(9920);function r(e){return function(){this.style.removeProperty(e)}}function a(e,t,n){return function(){this.style.setProperty(e,t,n)}}function o(e,t,n){return function(){var i=t.apply(this,arguments);null==i?this.style.removeProperty(e):this.style.setProperty(e,i,n)}}function s(e,t,n){return arguments.length>1?this.each((null==t?r:"function"==typeof t?o:a)(e,t,null==n?"":n)):c(this.node(),e)}function c(e,t){return e.style.getPropertyValue(t)||(0,i.Z)(e).getComputedStyle(e,null).getPropertyValue(t)}},8386:(e,t,n)=>{function i(){this.textContent=""}function r(e){return function(){this.textContent=e}}function a(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function o(e){return arguments.length?this.each(null==e?i:("function"==typeof e?a:r)(e)):this.node().textContent}n.d(t,{Z:()=>o})},3010:(e,t,n)=>{function i(){}function r(e){return null==e?i:function(){return this.querySelector(e)}}n.d(t,{Z:()=>r})},9701:(e,t,n)=>{function i(){return[]}function r(e){return null==e?i:function(){return this.querySelectorAll(e)}}n.d(t,{Z:()=>r})},9920:(e,t,n)=>{function i(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}n.d(t,{Z:()=>i})},9786:(e,t,n)=>{function i(e){return e<0?-1:1}function r(e,t,n){var r=e._x1-e._x0,a=t-e._x1,o=(e._y1-e._y0)/(r||a<0&&-0),s=(n-e._y1)/(a||r<0&&-0),c=(o*a+s*r)/(r+a);return(i(o)+i(s))*Math.min(Math.abs(o),Math.abs(s),.5*Math.abs(c))||0}function a(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function o(e,t,n){var i=e._x0,r=e._y0,a=e._x1,o=e._y1,s=(a-i)/3;e._context.bezierCurveTo(i+s,r+s*t,a-s,o-s*n,a,o)}function s(e){this._context=e}function c(e){this._context=e}function l(e){return new s(e)}n.d(t,{Z:()=>l}),s.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:o(this,this._t0,a(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,o(this,a(this,n=r(this,e,t)),n);break;default:o(this,this._t0,n=r(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},(function(e){this._context=new c(e)}.prototype=Object.create(s.prototype)).point=function(e,t){s.prototype.point.call(this,t,e)},c.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,i,r,a){this._context.bezierCurveTo(t,e,i,n,a,r)}}},4643:(e,t,n)=>{function i(e,t){this._context=e,this._t=t}function r(e){return new i(e,1)}n.d(t,{cD:()=>r}),i.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}}this._x=e,this._y=t}}},4753:(e,t,n)=>{n.d(t,{Z:()=>_});const i=Math.PI,r=2*i,a=1e-6,o=r-a;function s(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function c(){return new s}s.prototype=c.prototype={constructor:s,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,i){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+i)},bezierCurveTo:function(e,t,n,i,r,a){this._+="C"+ +e+","+ +t+","+ +n+","+ +i+","+(this._x1=+r)+","+(this._y1=+a)},arcTo:function(e,t,n,r,o){e=+e,t=+t,n=+n,r=+r,o=+o;var s=this._x1,c=this._y1,l=n-e,u=r-t,d=s-e,h=c-t,f=d*d+h*h;if(o<0)throw new Error("negative radius: "+o);if(null===this._x1)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(f>a)if(Math.abs(h*l-u*d)>a&&o){var p=n-s,_=r-c,v=l*l+u*u,m=p*p+_*_,y=Math.sqrt(v),g=Math.sqrt(f),b=o*Math.tan((i-Math.acos((v+f-m)/(2*y*g)))/2),w=b/g,x=b/y;Math.abs(w-1)>a&&(this._+="L"+(e+w*d)+","+(t+w*h)),this._+="A"+o+","+o+",0,0,"+ +(h*p>d*_)+","+(this._x1=e+x*l)+","+(this._y1=t+x*u)}else this._+="L"+(this._x1=e)+","+(this._y1=t)},arc:function(e,t,n,s,c,l){e=+e,t=+t,l=!!l;var u=(n=+n)*Math.cos(s),d=n*Math.sin(s),h=e+u,f=t+d,p=1^l,_=l?s-c:c-s;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+h+","+f:(Math.abs(this._x1-h)>a||Math.abs(this._y1-f)>a)&&(this._+="L"+h+","+f),n&&(_<0&&(_=_%r+r),_>o?this._+="A"+n+","+n+",0,1,"+p+","+(e-u)+","+(t-d)+"A"+n+","+n+",0,1,"+p+","+(this._x1=h)+","+(this._y1=f):_>a&&(this._+="A"+n+","+n+",0,"+ +(_>=i)+","+p+","+(this._x1=e+n*Math.cos(c))+","+(this._y1=t+n*Math.sin(c))))},rect:function(e,t,n,i){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +i+"h"+-n+"Z"},toString:function(){return this._}};const l=c;function u(e){return function(){return e}}function d(e){this._context=e}function h(e){return new d(e)}function f(e){return e[0]}function p(e){return e[1]}function _(e,t){var n=u(!0),i=null,r=h,a=null;function o(o){var s,c,u,d=(o=function(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}(o)).length,h=!1;for(null==i&&(a=r(u=l())),s=0;s<=d;++s)!(s<d&&n(c=o[s],s,o))===h&&((h=!h)?a.lineStart():a.lineEnd()),h&&a.point(+e(c,s,o),+t(c,s,o));if(u)return a=null,u+""||null}return e="function"==typeof e?e:void 0===e?f:u(e),t="function"==typeof t?t:void 0===t?p:u(t),o.x=function(t){return arguments.length?(e="function"==typeof t?t:u(+t),o):e},o.y=function(e){return arguments.length?(t="function"==typeof e?e:u(+e),o):t},o.defined=function(e){return arguments.length?(n="function"==typeof e?e:u(!!e),o):n},o.curve=function(e){return arguments.length?(r=e,null!=i&&(a=r(i)),o):r},o.context=function(e){return arguments.length?(null==e?i=a=null:a=r(i=e),o):i},o}Array.prototype.slice,d.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}}},2138:(e,t,n)=>{var i,r,a;n.d(t,{i$:()=>r}),a={dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},i=(0,n(7238).Z)(a),r=i.format,i.parse,i.utcFormat,i.utcParse},6199:(e,t,n)=>{n.d(t,{Z:()=>o});var i=n(2576),r=n(1262),a=(0,i.Z)((e=>e.setHours(0,0,0,0)),((e,t)=>e.setDate(e.getDate()+t)),((e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*r.yB)/r.UD),(e=>e.getDate()-1));const o=a;a.range},1262:(e,t,n)=>{n.d(t,{Ym:()=>i,yB:()=>r,Y2:()=>a,UD:()=>o,iM:()=>s,jz:()=>c,qz:()=>l});const i=1e3,r=60*i,a=60*r,o=24*a,s=7*o,c=30*o,l=365*o},2576:(e,t,n)=>{n.d(t,{Z:()=>a});var i=new Date,r=new Date;function a(e,t,n,o){function s(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return s.floor=function(t){return e(t=new Date(+t)),t},s.ceil=function(n){return e(n=new Date(n-1)),t(n,1),e(n),n},s.round=function(e){var t=s(e),n=s.ceil(e);return e-t<n-e?t:n},s.offset=function(e,n){return t(e=new Date(+e),null==n?1:Math.floor(n)),e},s.range=function(n,i,r){var a,o=[];if(n=s.ceil(n),r=null==r?1:Math.floor(r),!(n<i&&r>0))return o;do{o.push(a=new Date(+n)),t(n,r),e(n)}while(a<n&&n<i);return o},s.filter=function(n){return a((function(t){if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)}),(function(e,i){if(e>=e)if(i<0)for(;++i<=0;)for(;t(e,-1),!n(e););else for(;--i>=0;)for(;t(e,1),!n(e););}))},n&&(s.count=function(t,a){return i.setTime(+t),r.setTime(+a),e(i),e(r),Math.floor(n(i,r))},s.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?s.filter(o?function(t){return o(t)%e==0}:function(t){return s.count(0,t)%e==0}):s:null}),s}},4834:(e,t,n)=>{n.d(t,{Z:()=>o});var i=n(2576),r=n(1262),a=(0,i.Z)((function(e){e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+t)}),(function(e,t){return(t-e)/r.UD}),(function(e){return e.getUTCDate()-1}));const o=a;a.range},1416:(e,t,n)=>{n.d(t,{Ox:()=>o,l6:()=>s,hB:()=>u});var i=n(2576),r=n(1262);function a(e){return(0,i.Z)((function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+7*t)}),(function(e,t){return(t-e)/r.iM}))}var o=a(0),s=a(1),c=a(2),l=a(3),u=a(4),d=a(5),h=a(6);o.range,s.range,c.range,l.range,u.range,d.range,h.range},5762:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(2576),r=(0,i.Z)((function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)}),(function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()}),(function(e){return e.getUTCFullYear()}));r.every=function(e){return isFinite(e=Math.floor(e))&&e>0?(0,i.Z)((function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)})):null};const a=r;r.range},5235:(e,t,n)=>{n.d(t,{OM:()=>o,wA:()=>s,bL:()=>u});var i=n(2576),r=n(1262);function a(e){return(0,i.Z)((function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)}),(function(e,t){e.setDate(e.getDate()+7*t)}),(function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*r.yB)/r.iM}))}var o=a(0),s=a(1),c=a(2),l=a(3),u=a(4),d=a(5),h=a(6);o.range,s.range,c.range,l.range,u.range,d.range,h.range},8887:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(2576),r=(0,i.Z)((function(e){e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,t){e.setFullYear(e.getFullYear()+t)}),(function(e,t){return t.getFullYear()-e.getFullYear()}),(function(e){return e.getFullYear()}));r.every=function(e){return isFinite(e=Math.floor(e))&&e>0?(0,i.Z)((function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,n){t.setFullYear(t.getFullYear()+n*e)})):null};const a=r;r.range},1739:(e,t,n)=>{n.d(t,{zO:()=>f,B7:()=>_,HT:()=>v});var i,r,a=0,o=0,s=0,c=0,l=0,u=0,d="object"==typeof performance&&performance.now?performance:Date,h="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function f(){return l||(h(p),l=d.now()+u)}function p(){l=0}function _(){this._call=this._time=this._next=null}function v(e,t,n){var i=new _;return i.restart(e,t,n),i}function m(){l=(c=d.now())+u,a=o=0;try{!function(){f(),++a;for(var e,t=i;t;)(e=l-t._time)>=0&&t._call.call(void 0,e),t=t._next;--a}()}finally{a=0,function(){for(var e,t,n=i,a=1/0;n;)n._call?(a>n._time&&(a=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:i=t);r=e,g(a)}(),l=0}}function y(){var e=d.now(),t=e-c;t>1e3&&(u-=t,c=e)}function g(e){a||(o&&(o=clearTimeout(o)),e-l>24?(e<1/0&&(o=setTimeout(m,e-d.now()-u)),s&&(s=clearInterval(s))):(s||(c=d.now(),s=setInterval(y,1e3)),a=1,h(m)))}_.prototype=v.prototype={constructor:_,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?f():+n)+(null==t?0:+t),this._next||r===this||(r?r._next=this:i=this,r=this),this._call=e,this._time=n,g()},stop:function(){this._call&&(this._call=null,this._time=1/0,g())}}},8640:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(3390);function r(e,t){var n,r,a,o=e.__transition,s=!0;if(o){for(a in t=null==t?null:t+"",o)(n=o[a]).name===t?(r=n.state>i.KE&&n.state<i.wS,n.state=i.Ku,n.timer.stop(),n.on.call(r?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete o[a]):s=!1;s&&delete e.__transition}}},1689:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(8640);function r(e){return this.each((function(){(0,i.Z)(this,e)}))}},6786:(e,t,n)=>{n.d(t,{Z:()=>c});var i=n(6365),r=n(3390),a=n(1739),o={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function s(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function c(e){var t,n;e instanceof i.uT?(t=e._id,e=e._name):(t=(0,i.pZ)(),(n=o).time=(0,a.zO)(),e=null==e?null:e+"");for(var c=this._groups,l=c.length,u=0;u<l;++u)for(var d,h=c[u],f=h.length,p=0;p<f;++p)(d=h[p])&&(0,r.ZP)(d,e,t,p,h,n||s(d,t));return new i.uT(c,this._parents,e,t)}},5114:(e,t,n)=>{n.d(t,{Z:()=>f});var i=n(3465),r=n(1663),a=n(9040),o=n(4548);function s(e){return function(){this.removeAttribute(e)}}function c(e){return function(){this.removeAttributeNS(e.space,e.local)}}function l(e,t,n){var i,r,a=n+"";return function(){var o=this.getAttribute(e);return o===a?null:o===i?r:r=t(i=o,n)}}function u(e,t,n){var i,r,a=n+"";return function(){var o=this.getAttributeNS(e.space,e.local);return o===a?null:o===i?r:r=t(i=o,n)}}function d(e,t,n){var i,r,a;return function(){var o,s,c=n(this);if(null!=c)return(o=this.getAttribute(e))===(s=c+"")?null:o===i&&s===r?a:(r=s,a=t(i=o,c));this.removeAttribute(e)}}function h(e,t,n){var i,r,a;return function(){var o,s,c=n(this);if(null!=c)return(o=this.getAttributeNS(e.space,e.local))===(s=c+"")?null:o===i&&s===r?a:(r=s,a=t(i=o,c));this.removeAttributeNS(e.space,e.local)}}function f(e,t){var n=(0,r.Z)(e),f="transform"===n?i.w:o.Z;return this.attrTween(e,"function"==typeof t?(n.local?h:d)(n,f,(0,a.x)(this,"attr."+e,t)):null==t?(n.local?c:s)(n):(n.local?u:l)(n,f,t))}},8061:(e,t,n)=>{n.d(t,{Z:()=>c});var i=n(1663);function r(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function a(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function o(e,t){var n,i;function r(){var r=t.apply(this,arguments);return r!==i&&(n=(i=r)&&a(e,r)),n}return r._value=t,r}function s(e,t){var n,i;function a(){var a=t.apply(this,arguments);return a!==i&&(n=(i=a)&&r(e,a)),n}return a._value=t,a}function c(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;var r=(0,i.Z)(e);return this.tween(n,(r.local?o:s)(r,t))}},6882:(e,t,n)=>{n.d(t,{Z:()=>o});var i=n(3390);function r(e,t){return function(){(0,i.S1)(this,e).delay=+t.apply(this,arguments)}}function a(e,t){return t=+t,function(){(0,i.S1)(this,e).delay=t}}function o(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?r:a)(t,e)):(0,i.U2)(this.node(),t).delay}},4786:(e,t,n)=>{n.d(t,{Z:()=>o});var i=n(3390);function r(e,t){return function(){(0,i.t8)(this,e).duration=+t.apply(this,arguments)}}function a(e,t){return t=+t,function(){(0,i.t8)(this,e).duration=t}}function o(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?r:a)(t,e)):(0,i.U2)(this.node(),t).duration}},3353:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(3390);function r(e,t){if("function"!=typeof t)throw new Error;return function(){(0,i.t8)(this,e).ease=t}}function a(e){var t=this._id;return arguments.length?this.each(r(t,e)):(0,i.U2)(this.node(),t).ease}},5778:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(3390);function r(e){if("function"!=typeof e)throw new Error;return this.each(function(e,t){return function(){var n=t.apply(this,arguments);if("function"!=typeof n)throw new Error;(0,i.t8)(this,e).ease=n}}(this._id,e))}},5355:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(3390);function r(){var e,t,n=this,r=n._id,a=n.size();return new Promise((function(o,s){var c={value:s},l={value:function(){0==--a&&o()}};n.each((function(){var n=(0,i.t8)(this,r),a=n.on;a!==e&&((t=(e=a).copy())._.cancel.push(c),t._.interrupt.push(c),t._.end.push(l)),n.on=t})),0===a&&o()}))}},9579:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(4421),r=n(6365);function a(e){"function"!=typeof e&&(e=(0,i.Z)(e));for(var t=this._groups,n=t.length,a=new Array(n),o=0;o<n;++o)for(var s,c=t[o],l=c.length,u=a[o]=[],d=0;d<l;++d)(s=c[d])&&e.call(s,s.__data__,d,c)&&u.push(s);return new r.uT(a,this._parents,this._name,this._id)}},4548:(e,t,n)=>{n.d(t,{Z:()=>s});var i=n(8849),r=n(8063),a=n(187),o=n(6773);function s(e,t){var n;return("number"==typeof t?r.Z:t instanceof i.ZP?a.ZP:(n=(0,i.ZP)(t))?(t=n,a.ZP):o.Z)(e,t)}},9858:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(6365);function r(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,a=n.length,o=Math.min(r,a),s=new Array(r),c=0;c<o;++c)for(var l,u=t[c],d=n[c],h=u.length,f=s[c]=new Array(h),p=0;p<h;++p)(l=u[p]||d[p])&&(f[p]=l);for(;c<r;++c)s[c]=t[c];return new i.uT(s,this._parents,this._name,this._id)}},7349:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(3390);function r(e,t,n){var r,a,o=function(e){return(e+"").trim().split(/^|\s+/).every((function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e}))}(t)?i.S1:i.t8;return function(){var i=o(this,e),s=i.on;s!==r&&(a=(r=s).copy()).on(t,n),i.on=a}}function a(e,t){var n=this._id;return arguments.length<2?(0,i.U2)(this.node(),n).on.on(e):this.each(r(n,e,t))}},9935:(e,t,n)=>{function i(){return this.on("end.remove",(e=this._id,function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}));var e}n.d(t,{Z:()=>i})},3390:(e,t,n)=>{n.d(t,{Ku:()=>u,wS:()=>l,KE:()=>c,ZP:()=>d,U2:()=>p,S1:()=>h,t8:()=>f});var i=n(6057),r=n(1739);function a(e,t,n){var i=new r.B7;return t=null==t?0:+t,i.restart((n=>{i.stop(),e(n+t)}),t,n),i}var o=(0,i.Z)("start","end","cancel","interrupt"),s=[],c=2,l=5,u=6;function d(e,t,n,i,d,h){var f=e.__transition;if(f){if(n in f)return}else e.__transition={};!function(e,t,n){var i,o=e.__transition;function s(r){var l,f,p,_;if(1!==n.state)return h();for(l in o)if((_=o[l]).name===n.name){if(3===_.state)return a(s);4===_.state?(_.state=u,_.timer.stop(),_.on.call("interrupt",e,e.__data__,_.index,_.group),delete o[l]):+l<t&&(_.state=u,_.timer.stop(),_.on.call("cancel",e,e.__data__,_.index,_.group),delete o[l])}if(a((function(){3===n.state&&(n.state=4,n.timer.restart(d,n.delay,n.time),d(r))})),n.state=c,n.on.call("start",e,e.__data__,n.index,n.group),n.state===c){for(n.state=3,i=new Array(p=n.tween.length),l=0,f=-1;l<p;++l)(_=n.tween[l].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=_);i.length=f+1}}function d(t){for(var r=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(h),n.state=l,1),a=-1,o=i.length;++a<o;)i[a].call(e,r);n.state===l&&(n.on.call("end",e,e.__data__,n.index,n.group),h())}function h(){for(var i in n.state=u,n.timer.stop(),delete o[t],o)return;delete e.__transition}o[t]=n,n.timer=(0,r.HT)((function(e){n.state=1,n.timer.restart(s,n.delay,n.time),n.delay<=e&&s(e-n.delay)}),0,n.time)}(e,n,{name:t,index:i,group:d,on:o,tween:s,time:h.time,delay:h.delay,duration:h.duration,ease:h.ease,timer:null,state:0})}function h(e,t){var n=p(e,t);if(n.state>0)throw new Error("too late; already scheduled");return n}function f(e,t){var n=p(e,t);if(n.state>3)throw new Error("too late; already running");return n}function p(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}},4417:(e,t,n)=>{n.d(t,{Z:()=>o});var i=n(3010),r=n(6365),a=n(3390);function o(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=(0,i.Z)(e));for(var o=this._groups,s=o.length,c=new Array(s),l=0;l<s;++l)for(var u,d,h=o[l],f=h.length,p=c[l]=new Array(f),_=0;_<f;++_)(u=h[_])&&(d=e.call(u,u.__data__,_,h))&&("__data__"in u&&(d.__data__=u.__data__),p[_]=d,(0,a.ZP)(p[_],t,n,_,p,(0,a.U2)(u,n)));return new r.uT(c,this._parents,t,n)}},5174:(e,t,n)=>{n.d(t,{Z:()=>o});var i=n(9701),r=n(6365),a=n(3390);function o(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=(0,i.Z)(e));for(var o=this._groups,s=o.length,c=[],l=[],u=0;u<s;++u)for(var d,h=o[u],f=h.length,p=0;p<f;++p)if(d=h[p]){for(var _,v=e.call(d,d.__data__,p,h),m=(0,a.U2)(d,n),y=0,g=v.length;y<g;++y)(_=v[y])&&(0,a.ZP)(_,t,n,y,v,m);c.push(v),l.push(d)}return new r.uT(c,l,t,n)}},3836:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(8390).ZP.prototype.constructor;function r(){return new i(this._groups,this._parents)}},8508:(e,t,n)=>{n.d(t,{Z:()=>l});var i=n(3465),r=n(2627),a=n(3390),o=n(9040),s=n(4548);function c(e){return function(){this.style.removeProperty(e)}}function l(e,t,n){var l="transform"==(e+="")?i.Y:s.Z;return null==t?this.styleTween(e,function(e,t){var n,i,a;return function(){var o=(0,r.S)(this,e),s=(this.style.removeProperty(e),(0,r.S)(this,e));return o===s?null:o===n&&s===i?a:a=t(n=o,i=s)}}(e,l)).on("end.style."+e,c(e)):"function"==typeof t?this.styleTween(e,function(e,t,n){var i,a,o;return function(){var s=(0,r.S)(this,e),c=n(this),l=c+"";return null==c&&(this.style.removeProperty(e),l=c=(0,r.S)(this,e)),s===l?null:s===i&&l===a?o:(a=l,o=t(i=s,c))}}(e,l,(0,o.x)(this,"style."+e,t))).each(function(e,t){var n,i,r,o,s="style."+t,l="end."+s;return function(){var u=(0,a.t8)(this,e),d=u.on,h=null==u.value[s]?o||(o=c(t)):void 0;d===n&&r===h||(i=(n=d).copy()).on(l,r=h),u.on=i}}(this._id,e)):this.styleTween(e,function(e,t,n){var i,a,o=n+"";return function(){var s=(0,r.S)(this,e);return s===o?null:s===i?a:a=t(i=s,n)}}(e,l,t),n).on("end.style."+e,null)}},5109:(e,t,n)=>{function i(e,t,n){return function(i){this.style.setProperty(e,t.call(this,i),n)}}function r(e,t,n){var r,a;function o(){var o=t.apply(this,arguments);return o!==a&&(r=(a=o)&&i(e,o,n)),r}return o._value=t,o}function a(e,t,n){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==t)return this.tween(i,null);if("function"!=typeof t)throw new Error;return this.tween(i,r(e,t,null==n?"":n))}n.d(t,{Z:()=>a})},5699:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(9040);function r(e){return this.tween("text","function"==typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}((0,i.x)(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))}},4987:(e,t,n)=>{function i(e){return function(t){this.textContent=e.call(this,t)}}function r(e){var t,n;function r(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&i(r)),t}return r._value=e,r}function a(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;return this.tween(t,r(e))}n.d(t,{Z:()=>a})},4085:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(6365),r=n(3390);function a(){for(var e=this._name,t=this._id,n=(0,i.pZ)(),a=this._groups,o=a.length,s=0;s<o;++s)for(var c,l=a[s],u=l.length,d=0;d<u;++d)if(c=l[d]){var h=(0,r.U2)(c,t);(0,r.ZP)(c,e,n,d,l,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new i.uT(a,this._parents,e,n)}},9040:(e,t,n)=>{n.d(t,{Z:()=>o,x:()=>s});var i=n(3390);function r(e,t){var n,r;return function(){var a=(0,i.t8)(this,e),o=a.tween;if(o!==n)for(var s=0,c=(r=n=o).length;s<c;++s)if(r[s].name===t){(r=r.slice()).splice(s,1);break}a.tween=r}}function a(e,t,n){var r,a;if("function"!=typeof n)throw new Error;return function(){var o=(0,i.t8)(this,e),s=o.tween;if(s!==r){a=(r=s).slice();for(var c={name:t,value:n},l=0,u=a.length;l<u;++l)if(a[l].name===t){a[l]=c;break}l===u&&a.push(c)}o.tween=a}}function o(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o,s=(0,i.U2)(this.node(),n).tween,c=0,l=s.length;c<l;++c)if((o=s[c]).name===e)return o.value;return null}return this.each((null==t?r:a)(n,e,t))}function s(e,t,n){var r=e._id;return e.each((function(){var e=(0,i.t8)(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)})),function(e){return(0,i.U2)(e,r).value[t]}}},2714:(e,t,n)=>{function i(e,t,n){this.k=e,this.x=t,this.y=n}n.d(t,{wx:()=>i,yR:()=>r}),i.prototype={constructor:i,scale:function(e){return 1===e?this:new i(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new i(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var r=new i(1,0,0);i.prototype},6734:(e,t,n)=>{n.d(t,{Z:()=>w});var i=n(6057),r=n(848);function a(e){return((e=Math.exp(e))+1/e)/2}const o=function e(t,n,i){function r(e,r){var o,s,c=e[0],l=e[1],u=e[2],d=r[0],h=r[1],f=r[2],p=d-c,_=h-l,v=p*p+_*_;if(v<1e-12)s=Math.log(f/u)/t,o=function(e){return[c+e*p,l+e*_,u*Math.exp(t*e*s)]};else{var m=Math.sqrt(v),y=(f*f-u*u+i*v)/(2*u*n*m),g=(f*f-u*u-i*v)/(2*f*n*m),b=Math.log(Math.sqrt(y*y+1)-y),w=Math.log(Math.sqrt(g*g+1)-g);s=(w-b)/t,o=function(e){var i,r=e*s,o=a(b),d=u/(n*m)*(o*(i=t*r+b,((i=Math.exp(2*i))-1)/(i+1))-function(e){return((e=Math.exp(e))-1/e)/2}(b));return[c+d*p,l+d*_,u*o/a(t*r+b)]}}return o.duration=1e3*s*t/Math.SQRT2,o}return r.rho=function(t){var n=Math.max(.001,+t),i=n*n;return e(n,i,i*i)},r}(Math.SQRT2,2,4);var s=n(3838),c=n(3466),l=n(404);const u=e=>()=>e;function d(e,{sourceEvent:t,target:n,transform:i,dispatch:r}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:r}})}var h=n(2714);function f(e){e.stopImmediatePropagation()}function p(e){e.preventDefault(),e.stopImmediatePropagation()}function _(e){return!(e.ctrlKey&&"wheel"!==e.type||e.button)}function v(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e).hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]:[[0,0],[e.clientWidth,e.clientHeight]]}function m(){return this.__zoom||h.yR}function y(e){return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function g(){return navigator.maxTouchPoints||"ontouchstart"in this}function b(e,t,n){var i=e.invertX(t[0][0])-n[0][0],r=e.invertX(t[1][0])-n[1][0],a=e.invertY(t[0][1])-n[0][1],o=e.invertY(t[1][1])-n[1][1];return e.translate(r>i?(i+r)/2:Math.min(0,i)||Math.max(0,r),o>a?(a+o)/2:Math.min(0,a)||Math.max(0,o))}function w(){var e,t,n,a=_,w=v,x=b,k=y,E=g,S=[0,1/0],O=[[-1/0,-1/0],[1/0,1/0]],T=250,A=o,C=(0,i.Z)("start","zoom","end"),M=500,P=0,q=10;function L(e){e.property("__zoom",m).on("wheel.zoom",z,{passive:!1}).on("mousedown.zoom",Z).on("dblclick.zoom",H).filter(E).on("touchstart.zoom",B).on("touchmove.zoom",Y).on("touchend.zoom touchcancel.zoom",F).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function D(e,t){return(t=Math.max(S[0],Math.min(S[1],t)))===e.k?e:new h.wx(t,e.x,e.y)}function N(e,t,n){var i=t[0]-n[0]*e.k,r=t[1]-n[1]*e.k;return i===e.x&&r===e.y?e:new h.wx(e.k,i,r)}function j(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function R(e,t,n,i){e.on("start.zoom",(function(){U(this,arguments).event(i).start()})).on("interrupt.zoom end.zoom",(function(){U(this,arguments).event(i).end()})).tween("zoom",(function(){var e=this,r=arguments,a=U(e,r).event(i),o=w.apply(e,r),s=null==n?j(o):"function"==typeof n?n.apply(e,r):n,c=Math.max(o[1][0]-o[0][0],o[1][1]-o[0][1]),l=e.__zoom,u="function"==typeof t?t.apply(e,r):t,d=A(l.invert(s).concat(c/l.k),u.invert(s).concat(c/u.k));return function(e){if(1===e)e=u;else{var t=d(e),n=c/t[2];e=new h.wx(n,s[0]-t[0]*n,s[1]-t[1]*n)}a.zoom(null,e)}}))}function U(e,t,n){return!n&&e.__zooming||new I(e,t)}function I(e,t){this.that=e,this.args=t,this.active=0,this.sourceEvent=null,this.extent=w.apply(e,t),this.taps=0}function z(e,...t){if(a.apply(this,arguments)){var n=U(this,t).event(e),i=this.__zoom,r=Math.max(S[0],Math.min(S[1],i.k*Math.pow(2,k.apply(this,arguments)))),o=(0,c.Z)(e);if(n.wheel)n.mouse[0][0]===o[0]&&n.mouse[0][1]===o[1]||(n.mouse[1]=i.invert(n.mouse[0]=o)),clearTimeout(n.wheel);else{if(i.k===r)return;n.mouse=[o,i.invert(o)],(0,l.e1)(this),n.start()}p(e),n.wheel=setTimeout(s,150),n.zoom("mouse",x(N(D(i,r),n.mouse[0],n.mouse[1]),n.extent,O))}function s(){n.wheel=null,n.end()}}function Z(e,...t){if(!n&&a.apply(this,arguments)){var i=e.currentTarget,o=U(this,t,!0).event(e),u=(0,s.Z)(e.view).on("mousemove.zoom",v,!0).on("mouseup.zoom",m,!0),d=(0,c.Z)(e,i),h=e.clientX,_=e.clientY;(0,r.Z)(e.view),f(e),o.mouse=[d,this.__zoom.invert(d)],(0,l.e1)(this),o.start()}function v(e){if(p(e),!o.moved){var t=e.clientX-h,n=e.clientY-_;o.moved=t*t+n*n>P}o.event(e).zoom("mouse",x(N(o.that.__zoom,o.mouse[0]=(0,c.Z)(e,i),o.mouse[1]),o.extent,O))}function m(e){u.on("mousemove.zoom mouseup.zoom",null),(0,r.D)(e.view,o.moved),p(e),o.event(e).end()}}function H(e,...t){if(a.apply(this,arguments)){var n=this.__zoom,i=(0,c.Z)(e.changedTouches?e.changedTouches[0]:e,this),r=n.invert(i),o=n.k*(e.shiftKey?.5:2),l=x(N(D(n,o),i,r),w.apply(this,t),O);p(e),T>0?(0,s.Z)(this).transition().duration(T).call(R,l,i,e):(0,s.Z)(this).call(L.transform,l,i,e)}}function B(n,...i){if(a.apply(this,arguments)){var r,o,s,u,d=n.touches,h=d.length,p=U(this,i,n.changedTouches.length===h).event(n);for(f(n),o=0;o<h;++o)s=d[o],u=[u=(0,c.Z)(s,this),this.__zoom.invert(u),s.identifier],p.touch0?p.touch1||p.touch0[2]===u[2]||(p.touch1=u,p.taps=0):(p.touch0=u,r=!0,p.taps=1+!!e);e&&(e=clearTimeout(e)),r&&(p.taps<2&&(t=u[0],e=setTimeout((function(){e=null}),M)),(0,l.e1)(this),p.start())}}function Y(e,...t){if(this.__zooming){var n,i,r,a,o=U(this,t).event(e),s=e.changedTouches,l=s.length;for(p(e),n=0;n<l;++n)i=s[n],r=(0,c.Z)(i,this),o.touch0&&o.touch0[2]===i.identifier?o.touch0[0]=r:o.touch1&&o.touch1[2]===i.identifier&&(o.touch1[0]=r);if(i=o.that.__zoom,o.touch1){var u=o.touch0[0],d=o.touch0[1],h=o.touch1[0],f=o.touch1[1],_=(_=h[0]-u[0])*_+(_=h[1]-u[1])*_,v=(v=f[0]-d[0])*v+(v=f[1]-d[1])*v;i=D(i,Math.sqrt(_/v)),r=[(u[0]+h[0])/2,(u[1]+h[1])/2],a=[(d[0]+f[0])/2,(d[1]+f[1])/2]}else{if(!o.touch0)return;r=o.touch0[0],a=o.touch0[1]}o.zoom("touch",x(N(i,r,a),o.extent,O))}}function F(e,...i){if(this.__zooming){var r,a,o=U(this,i).event(e),l=e.changedTouches,u=l.length;for(f(e),n&&clearTimeout(n),n=setTimeout((function(){n=null}),M),r=0;r<u;++r)a=l[r],o.touch0&&o.touch0[2]===a.identifier?delete o.touch0:o.touch1&&o.touch1[2]===a.identifier&&delete o.touch1;if(o.touch1&&!o.touch0&&(o.touch0=o.touch1,delete o.touch1),o.touch0)o.touch0[1]=this.__zoom.invert(o.touch0[0]);else if(o.end(),2===o.taps&&(a=(0,c.Z)(a,this),Math.hypot(t[0]-a[0],t[1]-a[1])<q)){var d=(0,s.Z)(this).on("dblclick.zoom");d&&d.apply(this,arguments)}}}return L.transform=function(e,t,n,i){var r=e.selection?e.selection():e;r.property("__zoom",m),e!==r?R(e,t,n,i):r.interrupt().each((function(){U(this,arguments).event(i).start().zoom(null,"function"==typeof t?t.apply(this,arguments):t).end()}))},L.scaleBy=function(e,t,n,i){L.scaleTo(e,(function(){var e=this.__zoom.k,n="function"==typeof t?t.apply(this,arguments):t;return e*n}),n,i)},L.scaleTo=function(e,t,n,i){L.transform(e,(function(){var e=w.apply(this,arguments),i=this.__zoom,r=null==n?j(e):"function"==typeof n?n.apply(this,arguments):n,a=i.invert(r),o="function"==typeof t?t.apply(this,arguments):t;return x(N(D(i,o),r,a),e,O)}),n,i)},L.translateBy=function(e,t,n,i){L.transform(e,(function(){return x(this.__zoom.translate("function"==typeof t?t.apply(this,arguments):t,"function"==typeof n?n.apply(this,arguments):n),w.apply(this,arguments),O)}),null,i)},L.translateTo=function(e,t,n,i,r){L.transform(e,(function(){var e=w.apply(this,arguments),r=this.__zoom,a=null==i?j(e):"function"==typeof i?i.apply(this,arguments):i;return x(h.yR.translate(a[0],a[1]).scale(r.k).translate("function"==typeof t?-t.apply(this,arguments):-t,"function"==typeof n?-n.apply(this,arguments):-n),e,O)}),i,r)},I.prototype={event:function(e){return e&&(this.sourceEvent=e),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(e){var t=(0,s.Z)(this.that).datum();C.call(e,this.that,new d(e,{sourceEvent:this.sourceEvent,target:L,type:e,transform:this.that.__zoom,dispatch:C}),t)}},L.wheelDelta=function(e){return arguments.length?(k="function"==typeof e?e:u(+e),L):k},L.filter=function(e){return arguments.length?(a="function"==typeof e?e:u(!!e),L):a},L.touchable=function(e){return arguments.length?(E="function"==typeof e?e:u(!!e),L):E},L.extent=function(e){return arguments.length?(w="function"==typeof e?e:u([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),L):w},L.scaleExtent=function(e){return arguments.length?(S[0]=+e[0],S[1]=+e[1],L):[S[0],S[1]]},L.translateExtent=function(e){return arguments.length?(O[0][0]=+e[0][0],O[1][0]=+e[1][0],O[0][1]=+e[0][1],O[1][1]=+e[1][1],L):[[O[0][0],O[0][1]],[O[1][0],O[1][1]]]},L.constrain=function(e){return arguments.length?(x=e,L):x},L.duration=function(e){return arguments.length?(T=+e,L):T},L.interpolate=function(e){return arguments.length?(A=e,L):A},L.on=function(){var e=C.on.apply(C,arguments);return e===C?L:e},L.clickDistance=function(e){return arguments.length?(P=(e=+e)*e,L):Math.sqrt(P)},L.tapDistance=function(e){return arguments.length?(q=+e,L):q},L}}},n={};function i(e){var r=n[e];if(void 0!==r)return r.exports;var a=n[e]={exports:{}};return t[e](a,a.exports,i),a.exports}i.m=t,e=[],i.O=(t,n,r,a)=>{if(!n){var o=1/0;for(u=0;u<e.length;u++){for(var[n,r,a]=e[u],s=!0,c=0;c<n.length;c++)(!1&a||o>=a)&&Object.keys(i.O).every((e=>i.O[e](n[c])))?n.splice(c--,1):(s=!1,a<o&&(o=a));if(s){e.splice(u--,1);var l=r();void 0!==l&&(t=l)}}return t}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[n,r,a]},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.j=826,(()=>{var e={826:0};i.O.j=t=>0===e[t];var t=(t,n)=>{var r,a,[o,s,c]=n,l=0;if(o.some((t=>0!==e[t]))){for(r in s)i.o(s,r)&&(i.m[r]=s[r]);if(c)var u=c(i)}for(t&&t(n);l<o.length;l++)a=o[l],i.o(e,a)&&e[a]&&e[a][0](),e[o[l]]=0;return i.O(u)},n=self.webpackChunkagro_web=self.webpackChunkagro_web||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var r=i.O(void 0,[882,813,821,978,892],(()=>i(5039)));r=i.O(r)})();