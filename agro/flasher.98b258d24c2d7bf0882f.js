(()=>{var e,t={4232:(e,t,r)=>{"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function h(e,t,r){return(h=f()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var i=new(Function.bind.apply(e,n));return r&&o(i,r.prototype),i}).apply(null,arguments)}function p(e){var t="function"==typeof Map?new Map:void 0;return(p=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return h(e,arguments,l(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),o(n,e)})(e)}function d(e,t,r,n,i,a,o){try{var s=e[a](o),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,i)}function g(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var a=e.apply(t,r);function o(e){d(a,n,i,o,s,"next",e)}function s(e){d(a,n,i,o,s,"throw",e)}o(void 0)}))}}r(7287),r(8805);var v,A,_=r(7757),m=r.n(_);function y(){return"crypto"in window&&"subtle"in window.crypto}function b(){return"CompressionStream"in window}function w(e){return Array.from(new Uint8Array(e)).map((function(e){return e.toString(16).padStart(2,"0")})).join("")}function k(){return(k=g(m().mark((function e(t){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve({then:function(e){var r=new FileReader;new ArrayBuffer,r.loadend=function(){},r.onload=function(){var t=g(m().mark((function t(r){return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e(r.target.result);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),r.readAsArrayBuffer(t)}}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e){return I.apply(this,arguments)}function I(){return(I=g(m().mark((function e(t){var r;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,crypto.subtle.digest("SHA-256",t);case 2:return r=e.sent,e.abrupt("return",w(r));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e){return new Promise((function(t){return setTimeout(t,e)}))}function C(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return e.toString(16).padStart(t,"0")}function B(e){return"".concat(C(e[0],2),":").concat(C(e[1],2),":").concat(C(e[2],2),":").concat(C(e[3],2),":").concat(C(e[4],2),":").concat(C(e[5],2))}function E(e){for(var t=[],r=0;r<e.length;r++){var n=e.charCodeAt(r);n<=255&&t.push(n)}return t}function F(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"\0";return e.substring(0,e.indexOf(t))}function D(e){return/^0?x?[0-9a-fA-F]{0,}$/.test(e)}function L(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=e.length%t,i=0;i<n;i++)e.push(r);return e}function P(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"gzip";return new Response(new Response(e).body.pipeThrough(new CompressionStream(t))).arrayBuffer()}v={"bootloader.bin":{name:"bootloader",offset:4096},"partition-table.bin":{name:"partition-table",offset:32768},"ota_data_initial.bin":{name:"ota_data_initial",offset:53248}},(A=document.createElement("template")).innerHTML="\n<style>\n  :host{\n    display: inline-flex;\n    gap: 2px;\n    align-items: stretch;\n    min-height: 40px;\n    flex-wrap: wrap;\n  }\n\n  :host([disabled]) #button-upload\n  {\n      cursor: not-allowed;\n      opacity: 0.7;\n  }\n\n  * {\n    box-sizing: border-box;\n  }\n\n  #image-check\n  {\n    align-self: center;\n    cursor: pointer;\n  }\n\n  .file-input\n  {\n    position:fixed;\n    top:-100em;\n    opacity:0;\n  }\n\n  .left-container\n  {\n    border-radius: 5px 0px 0px 5px;\n    border-top: 1px solid black;\n    border-bottom: 1px solid black;\n    border-left: 1px solid black;\n    border-right: none;\n  }\n\n  .right-container\n  {\n    border-radius: 0px 5px 5px 0px;\n    border-top: 1px solid black;\n    border-bottom: 1px solid black;\n    border-right: 1px solid black;\n    border-left: none;\n  }\n\n  #file-container\n  {\n    display: inline-flex;\n    max-width: 100%;\n    align-items: stretch;\n    flex-grow: 1;\n  }\n\n  #file-input-container\n  {\n    width: 400px;\n    cursor: pointer;\n  }\n\n  label{\n    display: inline-flex;\n    align-items: stretch;\n  }\n\n  .input-style{\n    background-color: var(--primary-color-dark);\n    text-align: center;\n    font-size: 18px;\n    color: var(--text-color);\n    outline: none;\n  }\n\n  #file-name{\n    width: 100%;\n    display: inline-flex;\n    justify-content: center;\n    align-items: center;\n    white-space: nowrap;\n    overflow: hidden;\n  }\n\n  #erase-file\n  {\n    background-color: var(--primary-color-dark);\n    font-size: 30px;\n    cursor: pointer;\n    display: inline-flex;\n    align-items: center;\n  }\n\n  #erase-file:hover\n  {\n    font-weight: bold;\n  }\n\n  #image-offset\n  {\n    max-width: 10ch;\n    font-family: var(--font-family);\n    border: 1px solid black;\n    border-radius: 5px;\n  }\n\n  #file-name:empty:after{\n    content: 'File to flash';\n    color: lightgrey;\n    opacity: .7;\n  }\n\n  #button-upload\n  {\n    cursor: pointer;\n    display: inline-flex;\n    align-items: center;\n    font-size: 22px;\n  }\n\n  @media only screen and (max-width: 600px) {\n    :host{\n      display: flex;\n      width: 100%;\n    }\n\n    #file-input-container\n    {\n      width: 100%;\n    }\n  }\n</style>\n<div id=file-container>\n  <input type=checkbox id=image-check checked></input>\n  <label id=file-input-container>\n    <input type=\"file\" id=file-input class=file-input accept=\".bin\">\n    <div id=file-name class='input-style left-container'></div>\n  </label>\n  <div id=erase-file title='Remove file' class=right-container>&times</div>\n</div>\n<input id='image-offset' list='default-image-offsets' class=input-style placeholder=Offset></input>\n<span id=button-upload title='Flash file'><slot name=upload-button></slot></span>\n<datalist id=\"default-image-offsets\"></datalist>\n</div>",customElements.define("image-uploader",function(e){s(o,e);var t,r,i=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=l(t);if(r){var i=l(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return u(this,e)});function o(){var e;n(this,o);var t=(e=i.call(this)).attachShadow({mode:"open"});t.appendChild(A.content.cloneNode(!0)),e._file=null,e._image=null,e._file_name=t.querySelector("#file-name"),e._file_input=t.querySelector("#file-input"),e._offset=t.querySelector("#image-offset"),e._checked=t.querySelector("#image-check"),e._offset.addEventListener("keydown",(function(e){var t;!("key"in e)||e.key.length>1||(t=e.key,/[0-9a-fA-F]/.test(t)||e.preventDefault())})),t.querySelector("#erase-file").addEventListener("click",(function(t){e._file_name.textContent="",e._file=null,e._image=null,e.dispatchEvent(new CustomEvent("file",{bubbles:!0,detail:e.value}))})),e._file_input.addEventListener("change",(function(t){t.target.files.length&&(e._file=t.target.files[0],e._file_name.textContent=t.target.files[0].name,e._file_name.title=t.target.files[0].name,e._offset.value=t.target.files[0].name in v?v[t.target.files[0].name].offset.toString(16):65536..toString(16),function(e){return k.apply(this,arguments)}(e._file).then((function(t){e._image=t,e.dispatchEvent(new CustomEvent("file",{bubbles:!0,detail:e.value}))})))})),t.querySelector("#button-upload").addEventListener("click",(function(t){e.dispatchEvent(new CustomEvent("upload",{bubbles:!0,detail:e.value}))}));var r=t.querySelector("#default-image-offsets");Object.values(v).forEach((function(e){var t=document.createElement("option");t.value=e.offset.toString(16),t.textContent=e.name,r.appendChild(t)}));var a=document.createElement("option");return a.value=65536..toString(16),a.textContent="user_app",r.appendChild(a),e}return a(o,[{key:"connectedCallback",value:function(){}},{key:"value",get:function(){return{offset:this._offset.value,file:this._file,checked:this._checked.checked,disabled:this.disabled,image:this._image}}},{key:"disabled",get:function(){return this.hasAttribute("disabled")},set:function(e){Boolean(e)?this.setAttribute("disabled",""):this.removeAttribute("disabled")}}]),o}(p(HTMLElement))),customElements.define("upload-manager",function(e){s(o,e);var t,r,i=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=l(t);if(r){var i=l(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return u(this,e)});function o(){var e;return n(this,o),(e=i.call(this))._container=[],e._disabled=!1,e.addEventListener("file",(function(t){t.stopPropagation(),t.detail.file?e.add():e.remove(t.target)})),e._add(),e}return a(o,[{key:"connectedCallback",value:function(){}},{key:"value",get:function(){return this._container.map((function(e){return e.value}))}},{key:"add",value:function(){this._container.length&&!this._container[this._container.length-1].value.file||this._add()}},{key:"remove",value:function(e){1!=this._container.length&&(e.remove(),this._container=this._container.filter((function(t){return t!=e})),this._container[this._container.length-1].value.file&&this.add())}},{key:"_add",value:function(){var e=document.createElement("image-uploader");this.appendChild(e),e.innerHTML='<i slot=upload-button class="fas fa-file-import"></i>',e.disabled=this._disabled,this._container.push(e)}},{key:"disabled",set:function(e){var t=this;this._disabled=Boolean(e),this._container.forEach((function(e){e.disabled=t._disabled}))}}]),o}(p(HTMLElement))),function(){var e=document.createElement("template");e.innerHTML='\n<style>\n  :host\n  {\n    --border-radius: 5px;\n    --bar-color: #3063A5;\n    --text-color: #fff;\n    width: 100px;\n    background: #cccccc;\n    position: relative;\n    overflow: hidden;\n    display: inline-block;\n    padding: 1px;\n    border-radius: var(--border-radius);\n    height: 40px;\n  }\n\n  #bar\n  {\n    background: var(--bar-color);\n    text-align: center;\n    border-radius: var(--border-radius);\n    height: 100%;\n    width: 0;\n  }\n\n  #bar span {\n    color: var(--text-color);\n    position: absolute;\n    width: 100%;\n    left: 0;\n    display: inline-flex;\n    height: 100%;\n    justify-content: center;\n    align-items: center;\n  }\n</style>\n<div id="bar"><span></span></div>',customElements.define("progress-bar",function(t){s(c,t);var r,i,o=(r=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=l(r);if(i){var n=l(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return u(this,e)});function c(){var t;n(this,c);var r=(t=o.call(this)).attachShadow({mode:"open"});return r.appendChild(e.content.cloneNode(!0)),t._bar=r.querySelector("#bar"),t._text=r.querySelector("#bar span"),t}return a(c,[{key:"connectedCallback",value:function(){this.hasAttribute("text")&&(this.text=this.getAttribute("text"))}},{key:"text",set:function(e){this._text.textContent=e}},{key:"progress",set:function(e){"number"!=typeof e||e<0||e>100||(this._bar.style.width="".concat(e,"%"))}},{key:"update",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.progress=e,this.text=t}}]),c}(p(HTMLElement)))}();var O={0:"ESP32",2:"ESP32-S2",5:"ESP32-C3",9:"ESP32-S3",12:"ESP32-8684",14:"ESP32-H2 Beta2",10:"ESP32-H2 Beta1",65535:"invalid"},M={0:"QIO",1:"QOUT",2:"DIO",3:"DOUT",4:"FAST_READ",5:"SLOW_READ"},R={0:"40MHz",1:"26MHz",2:"20MHz",15:"80MHz"},Q={0:"1MB",1:"2MB",2:"4MB",3:"8MB",4:"16MB"};function H(e){var t=new DataView(e),r=t.getUint8(2),n=15&t.getUint8(3),i=t.getUint8(3)>>4&15,a=t.getUint16(12,!0);return{magic:t.getUint8(0),segment_count:t.getUint8(1),spi_mode:{value:r,name:r in M?M[r]:r},spi_speed:{value:n,name:n in R?R[n]:n},spi_size:{value:i,name:i in Q?Q[i]:i},entry_addr:t.getUint32(4,!0),wp_pin:t.getUint8(8),spi_pin_drv:e.slice(9,12),chip_id:{value:a,name:a in O?O[a]:chid_id},min_chip_rev:t.getUint8(14),hash_appended:t.getUint8(23)}}function U(e){return{magic_word:new Uint32Array(e,0,1)[0],secure_version:new Uint32Array(e,4,1)[0],version:F((new TextDecoder).decode(new Uint8Array(e,16,32))),project_name:F((new TextDecoder).decode(new Uint8Array(e,48,32))),time:F((new TextDecoder).decode(new Uint8Array(e,80,16))),date:F((new TextDecoder).decode(new Uint8Array(e,96,16))),idf_ver:F((new TextDecoder).decode(new Uint8Array(e,112,32))),app_elf_sha256:w(e.slice(144,176))}}function q(e){var t=new Uint8Array(e,0,1)[0];if(233!=t)return{error:!0,error_code:1,error_message:"Image header magic word doesn't match ['".concat(t.toString(16).padStart(2,"0"),"' != '").concat(233..toString(16).padStart(2,"0"),"']")};var r,n,i=e.slice(0,24),a=e.slice(24,32),o=e.slice(32,288);return{error:!1,error_code:0,error_message:"",header:H(i),header_segment:(r=a,n=new Uint32Array(r),{load_addr:n[0],data_len:n[1]}),description:U(o)}}function G(e){if(y()){var t=e.slice(-32),r=e.slice(0,-32);return Promise.all([x(e),x(r),w(t)])}return Promise.resolve({then:function(e){e({error:!0,error_code:3,error_message:"Crypto API not supported"})}})}var K=function(){function e(t,r){var i=this;n(this,e),this._devices=[],this._index=0,navigator.serial.addEventListener("connect",(function(e){i._add(e.target,!0)})),navigator.serial.addEventListener("disconnect",(function(e){i._remove(e.target,!0)}));for(var a=arguments.length,o=new Array(a>2?a-2:0),s=2;s<a;s++)o[s-2]=arguments[s];this._view=h(r,[this].concat(o)),this._serial_type=t,this.update_ports()}return a(e,[{key:"size",get:function(){return this._devices.length}},{key:"devices",get:function(){return this._devices}},{key:"view",get:function(){return this._view}},{key:"by_index",value:function(e){return this._devices.find((function(t){return t.index==e}))}},{key:"update_ports",value:function(){var e=this;navigator.serial.getPorts().then((function(t){var r=[];t.forEach((function(t){var n=e._devices.find((function(e){return e.device==t}));n?r.push(n):r.push(new e._serial_type(t,e._index++))})),e._devices=r,e._update_view()}))}},{key:"request_ports",value:function(){var e=this;navigator.serial.requestPort().then((function(t){e._add(t,!0)})).catch((function(e){}))}},{key:"_add",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this._devices.find((function(t){return t.device==e}));r||this._devices.push(new this._serial_type(e,this._index++)),t&&this._update_view()}},{key:"_remove",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._devices=this._devices.filter((function(t){return t.device!=e})),t&&this._update_view()}},{key:"_update_view",value:function(){this._view.update_view()}}],[{key:"support",value:function(){return"serial"in navigator}}]),e}(),j=function(){function e(t,r){n(this,e),this._device=t,this._index=r,this._reader=null,this._input_stream=null,this._output_stream=null,this._read_cb=function(){}}var t,r,i,o,s,c;return a(e,[{key:"register_cb",value:function(e){var t=this._read_cb;return this._read_cb=e,t}},{key:"full_name",get:function(){var e=this._device.getInfo();return"serial"+this._index+" [".concat(e.usbVendorId.toString(16).padStart(4,"0"),":").concat(e.usbProductId.toString(16).padStart(4,"0"),"]")}},{key:"is_open",value:function(){return null!=this._input_stream}},{key:"name",get:function(){return"serial"+this._index}},{key:"index",get:function(){return this._index}},{key:"device",get:function(){return this._device}},{key:"set_baudrate",value:(c=g(m().mark((function e(t){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.close();case 2:return e.next=4,this.open(t);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"open",value:(s=g(m().mark((function e(t){var r,n=arguments;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:null,e.next=3,this._device.open({baudRate:t});case 3:r&&this.register_cb(r),this._input_stream=this._device.readable,this._reader=this._input_stream.getReader(),this._output_stream=this._device.writable,this._read();case 8:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"close",value:(o=g(m().mark((function e(){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._reader){e.next=5;break}return e.next=3,this._reader.cancel();case 3:this._input_stream=null,this._reader=null;case 5:if(!this._output_stream){e.next=9;break}return e.next=8,this._output_stream.getWriter().close();case 8:this._output_stream=null;case 9:return e.next=11,this._device.close();case 11:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"_read",value:(i=g(m().mark((function e(){var t,r;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,this._reader.read();case 3:if(t=e.sent,r=t.value,!t.done){e.next=9;break}return this._reader.releaseLock(),e.abrupt("return");case 9:this._read_cb&&this._read_cb(r),e.next=0;break;case 12:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"read_timeout",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3;return new Promise((function(r,n){var i=setTimeout((function(){return n("timeout")}),t);e.register_cb((function(t){clearTimeout(i),r(t),e.register_cb(null)}))}))}},{key:"write",value:(r=g(m().mark((function e(t){var r;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this._output_stream.getWriter(),e.next=3,r.write(t);case 3:r.releaseLock();case 4:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"signals",value:(t=g(m().mark((function e(t){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._device.setSignals(t);case 2:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}(),z=r(2320),T=r(2617),J=115200,Y=function(){function e(t,r){var i=this;n(this,e),this._model=t,this._container=r,this._ports=r.querySelector("#serial-ports-list"),this._baudrate=r.querySelector("#serial-ports-baudrate"),this._open=r.querySelector("#serial-open-port"),this._reset=r.querySelector("#serial-monitor-port"),this._erase_flash=r.querySelector("#serial-erase-flash"),this._terminal=new z.Terminal({cursorBlink:!0,termName:"Serial Data"});var a=new T.FitAddon;this._terminal.loadAddon(a),this._terminal.open(r.querySelector("#terminal-container")),a.fit(),this._terminal.write("Welcome to [1;3;31mSerial Terminal Data[0m\r\n\r\n"),r.querySelector("#serial-request-port").addEventListener("click",(function(){i._model.request_ports()})),r.querySelector("#serial-get-ports").addEventListener("click",(function(e){i._model.update_ports()})),this._ports.addEventListener("click",(function(e){i._model.devices.length||i._model.request_ports()})),this._open.addEventListener("click",(function(e){var t=i._selected_device();t&&(t.is_open()?t.close().then((function(){i._set_state(!1)})):i._open_bootloader(t))})),this._reset.addEventListener("click",(function(e){i.reset()})),this._erase_flash.addEventListener("click",(function(e){var t=i._selected_device();t&&t.is_open()&&(i._terminal.write("Erasing flash...\r\n"),t.erase_flash().then((function(){return i._terminal.write("Flash erased...\r\n")})).catch((function(e){return i._terminal.write("Flash erase ERROR [".concat(e,"]\r\n"))})))})),r.querySelector("#clear-terminal").addEventListener("click",(function(e){i._terminal.clear()})),r.querySelector("#esp-flash-size").addEventListener("click",(function(e){var t=i._selected_device();t&&t.is_open()&&(i._terminal.write("Getting flash size...\r\n"),t.flash_size().then((function(e){console.log("value",e),console.log(e)})).catch((function(e){console.log("flash size fail",e)})))})),this._set_state(!1)}var t,r;return a(e,[{key:"selected",value:function(){return this._ports.selectedOptions[0]}},{key:"baudrate",value:function(){return+this._baudrate.selectedOptions[0].value}},{key:"reset",value:function(){var e=this,t=this._selected_device();t&&t.is_open()&&t.set_port_baudrate(115200).then((function(){return t.signal_reset()})).then((function(){return t.register_cb((function(t){return e._terminal.write(t)}))})).catch((function(e){return console.log("reset fail",e)}))}},{key:"update_view",value:function(){var e=this;if(this._check_open(),!this._model.size)return this._ports.innerHTML="<option value=-1>No ports</option>",void this._ports.classList.add("hide-first-opiton");var t=this.selected();this._ports.innerHTML="",this._ports.classList.remove("hide-first-opiton"),this._model.devices.forEach((function(r){var n=document.createElement("option");n.value=r.index,n.textContent=r.full_name,r.index==+t.value&&(n.selected=!0),e._ports.appendChild(n)}))}},{key:"write",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this._terminal.write(e+(t?"\r\n":""))}},{key:"_check_open",value:function(){var e=+this.selected().value;if(e<0)this._set_state(!1);else{var t=this._model.by_index(e);t?this._set_state(t.is_open()):this._set_state(!1)}}},{key:"_set_state",value:function(e){e?(this._open.textContent="Close",this._ports.disabled=!0,this._baudrate.disabled=!0,this._reset.disabled=!1,this._erase_flash.disabled=!1):(this._open.textContent="Open",this._ports.disabled=!1,this._baudrate.disabled=!1,this._reset.disabled=!0,this._erase_flash.disabled=!0)}},{key:"_selected_device",value:function(){var e=+this.selected().value;return!(e<0)&&this._model.by_index(e)}},{key:"selected_device",value:function(){return this._selected_device()}},{key:"open_bootloader",value:(r=g(m().mark((function e(){var t;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this._selected_device()){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,this._open_bootloader(t);case 5:return e.abrupt("return",t);case 6:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"_open_bootloader",value:(t=g(m().mark((function e(t){var r,n,i,a=this;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.open(J,(function(e){return a._terminal.write(e)}));case 3:return this._terminal.write("Bootloading ".concat(t.name,"...\r\n")),e.next=6,t.signal_bootloader();case 6:return this._terminal.write("Entered bootloader\r\n"),this._terminal.write("Syncing...\r\n"),e.next=10,t.sync();case 10:return this._terminal.write("Synced\r\n"),e.next=13,t.chip();case 13:return r=e.sent,this._terminal.write("Chip family: "+r+"\r\n"),e.next=17,t.efuses();case 17:if(e.sent,n=t.mac()){e.next=22;break}return this._terminal.write("Error reading MAC\r\n"),e.abrupt("return");case 22:return this._terminal.write("MAC: ".concat(B(n),"\r\n")),this._terminal.write("Uploading stub...\r\n"),e.next=26,t.upload_stub();case 26:if(this._terminal.write("Stub uploaded succefully\r\n"),this.baudrate()==J){e.next=31;break}return e.next=30,t.set_baudrate(this.baudrate());case 30:this._terminal.write("Baudrate updated to "+this.baudrate()+"\r\n");case 31:return e.prev=31,e.next=34,t.detect_flash_size();case 34:i=e.sent,this._terminal.write((i?"Flash size detected: ":"Error detecting flash size... Assuming ")+t.flash_size.name+"\r\n"),e.next=45;break;case 38:if(e.prev=38,e.t0=e.catch(31),"timeout"!=e.t0){e.next=44;break}this._terminal.write("[Timeout] Error detecting flash size... Assuming "+t.flash_size.name+"\r\n"),e.next=45;break;case 44:throw e.t0;case 45:t.register_cb((function(e){return a._terminal.write(e)})),this._set_state(!0),e.next=57;break;case 49:return e.prev=49,e.t1=e.catch(0),console.log("catch",e.t1),this._terminal.write("Error bootloading! closing... ["+e.t1+"]\r\n"),e.next=55,t.close();case 55:throw this._set_state(!1),e.t1;case 57:case"end":return e.stop()}}),e,this,[[0,49],[31,38]])}))),function(e){return t.apply(this,arguments)})}]),e}();function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Z(e){return function(e){if(Array.isArray(e))return N(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return N(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?N(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(e,t,r){return(V="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function W(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function X(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return $(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?$(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw a}}}}function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ee,te,re=function(){function e(){n(this,e)}return a(e,null,[{key:"encode",value:function(e){var t,r=[192],n=X(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;switch(i){case 219:r.push(219,221);break;case 192:r.push(219,220);break;default:r.push(i)}}}catch(e){n.e(e)}finally{n.f()}return r.push(192),r}},{key:"split_packet",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=[],n=0,i=!!t,a=t||[];n<e.length;n++)192==e[n]?i?(a.push(e[n]),r.push(a),i=!1,a=[]):(a=[e[n]],i=!0):i&&a.push(e[n]);return{packets:r,remain:a}}},{key:"read_packet",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=0,n=!!t,i=t||[];r<e.length;r++)if(192==e[r]){if(n)return i.push(e[r]),{packet:i,remain:e.slice(r+1,e.length)};i=[e[r]],n=!0}else n&&i.push(e[r]);return{packet:[],remain:i}}},{key:"payload",value:function(e){return!(!e.length||192!=e[0]||192!=e[e.length-1])&&e.slice(1,e.length-1)}},{key:"decode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(192!=e[0]||192!=e[e.length-1])return{error:!0,error_message:"missing control bytes"};for(var r=[],n=1;n<e.length-1;n++)if(219==e[n])if(++n<e.length-1)switch(e[n]){case 221:r.push(219);break;case 220:r.push(192);break;default:r.push(219,e[n])}else r.push(219);else r.push(e[n]);if(r.length<(t?10:12))return{error:!0,error_message:"packet too small"};if(1!=r[0])return{error:!0,error_message:"not a response"};var i=new Uint8Array(r),a=new DataView(i.buffer),o=i.slice(8),s=o[o.length-(t?2:4)],c=o[o.length-(t?1:3)];return{error:!1,direction:a.getUint8(0),op:a.getUint8(1),size:a.getUint16(2,!0),value:a.getUint32(4,!0),data:o,status:s,status_error:c}}},{key:"encoded_command",value:function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return new Uint8Array(e.encode(e.command(t,r,n)))}},{key:"command",value:function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return[0,t].concat(Z(e.pack16(r.length)),Z(e.pack32(n)),Z(r))}},{key:"checksum",value:function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:239,n=X(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;r^=i}}catch(e){n.e(e)}finally{n.f()}return r}},{key:"pack16",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Array.from(new Uint8Array(new Uint16Array(t).buffer))}},{key:"pack32",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Array.from(new Uint8Array(new Uint32Array(t).buffer))}}]),e}(),ne={text:E(atob("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")),text_start:1074520064,entry:1074521496,data:E(atob("CMD8Pw==")),data_start:1073605544};function ie(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ae(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(r),!0).forEach((function(t){W(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ie(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var oe=(W(ee={},18,{name:"256KB",value:262144}),W(ee,19,{name:"512KB",value:524288}),W(ee,20,{name:"1MB",value:1048576}),W(ee,21,{name:"2MB",value:2097152}),W(ee,22,{name:"4MB",value:4194304}),W(ee,23,{name:"8MB",value:8388608}),W(ee,24,{name:"16MB",value:16777216}),ee),se=2,ce=3,ue=4,le=5,fe=6,he=7,pe=8,de=9,ge=10,ve=11,Ae=13,_e=15,me=16,ye=17,be=18,we=19,ke=208,xe=4293968129,Ie=15736195,Se=1990,Ce=(W(te={},xe,{name:"ESP8266",efuses_addr:1072693328,mac:function(e){var t;if(0!=e[3])t=[e[3]>>16&255,e[3]>>8&255,255&e[3]];else if(0==(e[1]>>16&255))t=[24,254,52];else{if(1!=(e[1]>>16&255))return!1;t=[172,208,116]}return[t[0],t[1],t[2],e[1]>>8&255,255&e[1],e[0]>>24&255]},SPI_REG_BASE:1610613248,SPI_USR_OFFS:28,SPI_USR1_OFFS:32,SPI_USR2_OFFS:36,SPI_MOSI_DLEN_OFFS:null,SPI_MISO_DLEN_OFFS:null,SPI_W0_OFFS:64}),W(te,Ie,{name:"ESP32",efuses_addr:1073061888,mac:function(e){return[e[2]>>8&255,255&e[2],e[1]>>24&255,e[1]>>16&255,e[1]>>8&255,255&e[1]]},SPI_REG_BASE:1072963584,SPI_USR_OFFS:28,SPI_USR1_OFFS:32,SPI_USR2_OFFS:36,SPI_MOSI_DLEN_OFFS:40,SPI_MISO_DLEN_OFFS:44,SPI_W0_OFFS:128}),W(te,Se,{name:"ESP32-S2",efuses_addr:1610719232,mac:function(e){return[e[2]>>8&255,255&e[2],e[1]>>24&255,e[1]>>16&255,e[1]>>8&255,255&e[1]]},SPI_REG_BASE:1061167104,SPI_USR_OFFS:24,SPI_USR1_OFFS:28,SPI_USR2_OFFS:32,SPI_MOSI_DLEN_OFFS:36,SPI_MISO_DLEN_OFFS:40,SPI_W0_OFFS:88}),te),Be=4096,Ee=3e4,Fe=3e3,De=[7,7,18,32,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85],Le=function(e){s(Q,e);var t,r,i,o,c,f,h,p,d,v,A,_,y,b,w,k,x,I,B,E,F,D,P,O,M,R=(O=Q,M=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=l(O);if(M){var r=l(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return u(this,e)});function Q(e,t){var r;return n(this,Q),(r=R.call(this,e,t))._baudrate=null,r._chip=null,r._efuses=null,r._is_stub=!1,r._flash_size=22,r}return a(Q,[{key:"open",value:function(e){return this._baudrate=e,V(l(Q.prototype),"open",this).call(this,e)}},{key:"close",value:function(){return this._baudrate=null,V(l(Q.prototype),"close",this).call(this)}},{key:"set_port_baudrate",value:function(e){return V(l(Q.prototype),"set_baudrate",this).call(this,e)}},{key:"signal_reset",value:(P=g(m().mark((function e(){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.signals({dataTerminalReady:!1,requestToSend:!0});case 2:return e.next=4,S(100);case 4:return e.next=6,this.signals({dataTerminalReady:!0});case 6:case"end":return e.stop()}}),e,this)}))),function(){return P.apply(this,arguments)})},{key:"signal_bootloader",value:(D=g(m().mark((function e(){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.signals({dataTerminalReady:!1,requestToSend:!0});case 2:return e.next=4,this.signals({dataTerminalReady:!0,requestToSend:!1});case 4:return e.next=6,S(1e3);case 6:case"end":return e.stop()}}),e,this)}))),function(){return D.apply(this,arguments)})},{key:"sync",value:(F=g(m().mark((function e(){var t,r,n=arguments;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.length>0&&void 0!==n[0]?n[0]:5,r=0;case 2:if(!(r<t)){e.next=14;break}return e.prev=3,e.next=6,this.command(pe,De,0,100);case 6:return e.abrupt("return",!0);case 9:e.prev=9,e.t0=e.catch(3);case 11:r++,e.next=2;break;case 14:throw"Sync fail";case 15:case"end":return e.stop()}}),e,this,[[3,9]])}))),function(){return F.apply(this,arguments)})},{key:"erase_flash",value:(E=g(m().mark((function e(){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.command_until(ke,[],0,12e4);case 2:case"end":return e.stop()}}),e,this)}))),function(){return E.apply(this,arguments)})},{key:"chip",value:(B=g(m().mark((function e(){var t;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.read_register(1073745920);case 2:if(t=e.sent,this._chip=t.value,!(t.value in Ce)){e.next=6;break}return e.abrupt("return",Ce[t.value].name);case 6:return e.abrupt("return","0x"+C(t.value,8));case 7:case"end":return e.stop()}}),e,this)}))),function(){return B.apply(this,arguments)})},{key:"efuses",value:(I=g(m().mark((function e(){var t,r;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._chip&&this._chip in Ce){e.next=2;break}throw"chip not defined";case 2:this._efuses=[],e.prev=3,t=0;case 5:if(!(t<4)){e.next=15;break}return e.next=8,this.read_register(Ce[this._chip].efuses_addr+4*t);case 8:if(!(r=e.sent).error){e.next=11;break}throw"Error reading packet";case 11:this._efuses.push(r.value);case 12:t++,e.next=5;break;case 15:e.next=21;break;case 17:throw e.prev=17,e.t0=e.catch(3),this._efuses=null,e.t0;case 21:return e.abrupt("return",this._efuses);case 22:case"end":return e.stop()}}),e,this,[[3,17]])}))),function(){return I.apply(this,arguments)})},{key:"mac",value:function(){return!(!this._chip||!this._efuses)&&this._chip in Ce&&Ce[this._chip].mac(this._efuses)}},{key:"command",value:(x=g(m().mark((function e(t,r,n){var i,a,o,s=this,c=arguments;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=c.length>3&&void 0!==c[3]?c[3]:Fe,e.prev=1,a=null,e.next=5,this.write(re.encoded_command(t,r,n));case 5:if(0!=i){e.next=7;break}return e.abrupt("return",{});case 7:return e.next=9,this.read_timeout(i);case 9:if(o=e.sent,!re.split_packet(o).packets.some((function(e){if(!(a=re.decode(e,s._is_stub)).error&&a.op==t)return!0}))){e.next=16;break}return e.abrupt("return",a);case 16:throw a;case 17:e.next=22;break;case 19:throw e.prev=19,e.t0=e.catch(1),e.t0;case 22:case"end":return e.stop()}}),e,this,[[1,19]])}))),function(e,t,r){return x.apply(this,arguments)})},{key:"command_until",value:(k=g(m().mark((function e(t,r,n){var i,a,o,s,c,u,l=this,f=arguments;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=f.length>3&&void 0!==f[3]?f[3]:Fe,a=null,o=null,e.next=4,this.write(re.encoded_command(t,r,n));case 4:if(s=Date.now()+i,Date.now(),0!=i){e.next=8;break}return e.abrupt("return",{});case 8:return e.next=11,this.read_timeout(s-Date.now());case 11:if(c=e.sent,!(u=re.split_packet(c,o)).packets.some((function(e){if(!(a=re.decode(e,l._is_stub)).error&&a.op==t)return!0}))){e.next=15;break}return e.abrupt("return",a);case 15:o=u.remain,e.next=8;break;case 18:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return k.apply(this,arguments)})},{key:"read_register",value:(w=g(m().mark((function e(t){var r,n=arguments;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:Fe,e.next=3,this.command_until(ge,re.pack32(t),0,r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return w.apply(this,arguments)})},{key:"write_register",value:(b=g(m().mark((function e(t,r){var n,i,a,o=arguments;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>2&&void 0!==o[2]?o[2]:4294967295,i=o.length>3&&void 0!==o[3]?o[3]:0,a=o.length>4&&void 0!==o[4]?o[4]:Fe,e.next=5,this.command_until(de,re.pack32(t,r,n,i),0,a);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)}))),function(e,t){return b.apply(this,arguments)})},{key:"upload_stub",value:(y=g(m().mark((function e(){var t,r,n,i,a,o,s,c,u,l,f;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=6144,r=0,n=["text","data"];case 2:if(!(r<n.length)){e.next=21;break}if(!((i=n[r])in ne)){e.next=18;break}return a=ne[i+"_start"],o=ne[i].length,s=Math.floor((o+t-1)/t),e.next=8,this.mem_begin(o,s,t,a);case 8:c=0;case 9:if(!(c<s)){e.next=18;break}return(l=(u=c*t)+t)>o&&(l=o),e.next=15,this.mem_data(ne[i].slice(u,l),c);case 15:c++,e.next=9;break;case 18:r++,e.next=2;break;case 21:return e.prev=21,e.next=24,this.mem_end(0,ne.entry,50);case 24:e.sent,e.next=30;break;case 27:throw e.prev=27,e.t0=e.catch(21),e.t0;case 30:return e.prev=30,e.next=33,this.read_timeout(500);case 33:if(f=e.sent,"OHAI"==String.fromCharCode.apply(String,Z(re.payload(re.read_packet(f).packet)))){e.next=36;break}throw"Failed to start stub. Unexpected response: "+f;case 36:e.next=41;break;case 38:throw e.prev=38,e.t1=e.catch(30),e.t1;case 41:this._is_stub=!0;case 42:case"end":return e.stop()}}),e,this,[[21,27],[30,38]])}))),function(){return y.apply(this,arguments)})},{key:"mem_begin",value:function(e,t,r,n){return this.command(le,re.pack32(e,t,r,n),0)}},{key:"mem_data",value:function(e,t){var r;return this.command(he,(r=re.pack32(e.length,t,0,0)).concat.apply(r,Z(e)),re.checksum(e))}},{key:"mem_end",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:500;return this.command(fe,re.pack32(e,t),0,r)}},{key:"flash_image",value:(_=g(m().mark((function e(t,r){var n,i,a,o,s,c,u,l,f,h=arguments;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=h.length>2&&void 0!==h[2]?h[2]:{},i=ae(ae({},{end_flag:2,upload_progress:function(){}}),n),a=t.byteLength,e.next=5,this.flash_begin(a,r);case 5:o=e.sent,s=this.flash_write_size(),c=[],u=0,l=0,f=0;case 8:if(!(a-f>0)){e.next=18;break}return i.upload_progress({percent:Math.floor(100*(u+1)/o),seq:u,blocks:o,file_size:a,position:f,written:l}),c=a-f>=s?Array.from(new Uint8Array(t,f,s)):(c=Array.from(new Uint8Array(t,f,a-f))).concat(new Array(s-c.length).fill(255)),e.next=13,this.flash_data(c,u);case 13:u+=1,l+=c.length,f+=s,e.next=8;break;case 18:if(0!=i.end_flag&&1!=i.end_flag){e.next=21;break}return e.next=21,this.flash_end(i.end_flag);case 21:case"end":return e.stop()}}),e,this)}))),function(e,t){return _.apply(this,arguments)})},{key:"flash_begin",value:(A=g(m().mark((function e(){var t,r,n,i,a,o,s,c,u=arguments;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:0,r=u.length>1&&void 0!==u[1]?u[1]:0,n=u.length>2&&void 0!==u[2]&&u[2],i=this.flash_write_size(),this._is_stub||![Ie,Se].includes(this._chip)){e.next=7;break}return e.next=7,this.command(Ae,new Array(8).fill(0));case 7:if(this._chip!=Ie){e.next=10;break}return e.next=10,this.command(ve,re.pack32(0,this.flash_size.value,65536,4096,256,65535));case 10:return a=Math.floor((t+i-1)/i),o=this.erase_size(r,t),s=this._is_stub?Fe:Q.timeout_per_mb(Ee,t),c=re.pack32(o,a,i,r),this._chip!=Se||this._is_stub||c.push.apply(c,Z(re.pack32(n?1:0))),e.next=16,this.command(se,c,0,s);case 16:return e.abrupt("return",a);case 17:case"end":return e.stop()}}),e,this)}))),function(){return A.apply(this,arguments)})},{key:"flash_data",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Fe;return this.command_until(ce,re.pack32(e.length,t,0,0).concat(e),re.checksum(e),r)}},{key:"flash_end",value:(v=g(m().mark((function e(t){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.command(ue,re.pack32(t),0);case 2:case"end":return e.stop()}}),e,this)}))),function(e){return v.apply(this,arguments)})},{key:"flash_image_deflate",value:(d=g(m().mark((function e(t,r,n){var i,a,o,s,c,u,l,f,h,p,d=arguments;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=d.length>3&&void 0!==d[3]?d[3]:{},a=ae(ae({},{end_flag:2,upload_progress:function(){}}),i),o=r,s=t.byteLength,e.next=6,this.flash_begin_deflate(o,s,n);case 6:c=e.sent,u=this.flash_write_size(),l=[],f=0,h=0,p=0;case 9:if(!(s-p>0)){e.next=19;break}return l=s-p>=u?Array.from(new Uint8Array(t,p,u)):(l=Array.from(new Uint8Array(t,p,s-p))).concat(new Array(u-l.length).fill(255)),e.next=13,this.flash_data_deflate(l,f);case 13:f+=1,h+=l.length,p+=u,a.upload_progress({percent:Math.floor(100*f/c),seq:f,blocks:c,file_size:s,position:p,written:h}),e.next=9;break;case 19:if(0!=a.end_flag&&1!=a.end_flag){e.next=22;break}return e.next=22,this.flash_end_deflate(a.end_flag);case 22:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return d.apply(this,arguments)})},{key:"flash_begin_deflate",value:(p=g(m().mark((function e(t,r,n){var i,a,o,s,c,u,l=arguments;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=l.length>3&&void 0!==l[3]&&l[3],a=this.flash_write_size(),this._is_stub||![Ie,Se].includes(this._chip)){e.next=5;break}return e.next=5,this.command(Ae,new Array(8).fill(0));case 5:if(this._chip!=Ie){e.next=8;break}return e.next=8,this.command(ve,re.pack32(0,this.flash_size.value,65536,4096,256,65535));case 8:return o=Math.floor((r+a-1)/a),s=this.erase_size(n,t),c=this._is_stub?Fe:Q.timeout_per_mb(Ee,t),u=re.pack32(s,o,a,n),this._chip!=Se||this._is_stub||u.push.apply(u,Z(re.pack32(i?1:0))),e.next=14,this.command(me,u,0,c);case 14:return e.abrupt("return",o);case 15:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return p.apply(this,arguments)})},{key:"flash_data_deflate",value:(h=g(m().mark((function e(t,r){var n,i=arguments;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>2&&void 0!==i[2]?i[2]:Fe,e.abrupt("return",this.command_until(ye,re.pack32(t.length,r,0,0).concat(t),re.checksum(t),n));case 2:case"end":return e.stop()}}),e,this)}))),function(e,t){return h.apply(this,arguments)})},{key:"flash_end_deflate",value:(f=g(m().mark((function e(t){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.command(be,re.pack32(t),0);case 2:case"end":return e.stop()}}),e,this)}))),function(e){return f.apply(this,arguments)})},{key:"flash_md5_calc",value:(c=g(m().mark((function e(t,r){var n,i,a;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.command_until(we,re.pack32(t,r,0,0),0,this._is_stub?3e3:12e4);case 2:if(n=e.sent,!this._is_stub){e.next=7;break}for(i="",a=0;a<n.data.length-2;a++)i+=C(n.data[a],2);return e.abrupt("return",i);case 7:return e.abrupt("return",String.fromCharCode.apply(String,Z(n.data)));case 8:case"end":return e.stop()}}),e,this)}))),function(e,t){return c.apply(this,arguments)})},{key:"flash_write_size",value:function(){return this._is_stub?16384:1024}},{key:"erase_size",value:function(e,t){if(this._chip!=xe||this._is_stub)return t;var r=Math.floor((t+Be-1)/Be),n=16-Math.floor(e/Be)%16;return r<n&&(n=r),r<2*n?Math.floor((r+1)/2*Be):(r-n)*Be}},{key:"set_baudrate",value:(o=g(m().mark((function e(t){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._chip||this._chip!=xe){e.next=2;break}throw"invalid chip";case 2:return e.next=4,this.command(_e,re.pack32(t,this._is_stub?this._baudrate:0),0);case 4:return e.next=6,V(l(Q.prototype),"set_baudrate",this).call(this,t);case 6:return e.next=8,S(50);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"flash_id",value:(i=g(m().mark((function e(){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,this.command_spiflash(159,[],24);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"flash_size",get:function(){return oe[this._flash_size]}},{key:"detect_flash_size",value:(r=g(m().mark((function e(){var t,r;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.flash_id();case 2:if(0==(t=e.sent).data[0]){e.next=6;break}return this._flash_size=22,e.abrupt("return",!1);case 6:if(!((r=t.value>>16)in oe)){e.next=10;break}return this._flash_size=r,e.abrupt("return",!0);case 10:return e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"command_spiflash",value:(t=g(m().mark((function e(t,r){var n,i,a,o,s,c,u,l,f,h,p,d,v,A,_,y,b,w,k,x,I,S=this,C=arguments;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=C.length>2&&void 0!==C[2]?C[2]:0,this._chip&&this._chip in Ce){e.next=3;break}throw"chip not defined";case 3:if(!(n>32)){e.next=5;break}throw"Reading more than 32 bits back from a SPI flash operation is unsupported";case 5:return i=Ce[this._chip],a=1<<31,o=1<<28,s=1<<27,c=i.SPI_REG_BASE,u=c+0,l=c+i.SPI_USR_OFFS,f=c+i.SPI_USR1_OFFS,h=c+i.SPI_USR2_OFFS,p=c+i.SPI_W0_OFFS,d=i.SPI_MOSI_DLEN_OFFS?function(){var e=g(m().mark((function e(t,r){var n,a;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=c+i.SPI_MOSI_DLEN_OFFS,a=c+i.SPI_MISO_DLEN_OFFS,!(t>0)){e.next=4;break}return e.next=4,S.write_register(n,t-1);case 4:if(!(r>0)){e.next=7;break}return e.next=7,S.write_register(a,r-1);case 7:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}():function(){var e=g(m().mark((function e(t,r){var n;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=f,mosi_mask=0==t?0:t-1,miso_mask=0==r?0:r-1,e.next=5,S.write_register(n,miso_mask<<8|mosi_mask<<17);case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),v=1<<18,A=28,_=8*r.length,e.next=14,this.read_register(l);case 14:return y=e.sent,e.next=17,this.read_register(h);case 17:if(b=e.sent,w=a,!(r.length>64)){e.next=21;break}throw"Writing more than 64 bytes of data with one SPI command is unsupported";case 21:return n>0&&(w|=o),_>0&&(w|=s),e.next=25,d(_,n);case 25:return e.next=27,this.write_register(l,w);case 27:return e.next=29,this.write_register(h,7<<A|t);case 29:if(0!=_){e.next=34;break}return e.next=32,this.write_register(p,0);case 32:e.next=44;break;case 34:r=L(r,4,0),k=p,e.t0=m().keys(r);case 37:if((e.t1=e.t0()).done){e.next=44;break}return e.t1.value,e.next=41,this.write_register(k,word);case 41:k+=4,e.next=37;break;case 44:return e.next=46,this.write_register(u,v);case 46:return x=function(){var e=g(m().mark((function e(){var t;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=0;case 1:if(!(t<10)){e.next=10;break}return e.next=4,S.read_register(u);case 4:if(0!=(e.sent.value&v)){e.next=7;break}return e.abrupt("return");case 7:t++,e.next=1;break;case 10:throw"SPI command did not complete in time";case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.next=49,x();case 49:return e.next=51,this.read_register(p);case 51:return I=e.sent,e.next=54,this.write_register(l,y.value);case 54:return e.next=56,this.write_register(h,b.value);case 56:return e.abrupt("return",I);case 57:case"end":return e.stop()}}),e,this)}))),function(e,r){return t.apply(this,arguments)})}],[{key:"timeout_per_mb",value:function(e,t){var r=Math.floor(e*(t/486));return r<Fe?Fe:r}}]),Q}(j),Pe=r(8322);function Oe(e){return e>1024?"".concat(Math.floor(e/1024)," kb"):"".concat(e," b")}function Me(e){return"".concat(e.getFullYear(),"/").concat("".concat(e.getMonth()).padStart(2,"0"),"/").concat("".concat(e.getDate()).padStart(2,"0")," ")+"".concat("".concat(e.getHours()).padStart(2,"0"),":").concat("".concat(e.getMinutes()).padStart(2,"0"))}function Re(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return"<span class=info-content ".concat(r?"title=".concat(r):"","><span class=info-title>").concat(e,"</span><span class=info-data>").concat(t,"</span></span>")}function Qe(){return(Qe=g(m().mark((function e(t,r){var n,i,a,o,s,c,u,l,f;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Re("File",t.name)+Re("Size",Oe(t.size),"".concat(t.size," bytes"))+Re("Date Modified",Me(new Date(t.lastModified))),!(i=q(r)).error){e.next=5;break}return Je("ERROR! "+i.error_message,"error"),e.abrupt("return",{error:!0,error_message:"error parsing",data:n,image:r});case 5:return a=i.header,o=Re("Header magic","0x"+a.magic.toString(16).padStart(2,"0"))+Re("SPI","".concat(a.spi_mode.name," ").concat(a.spi_speed.name," ").concat(a.spi_size.name))+Re("Entry addr","0x"+a.entry_addr.toString(16).padStart(2,"0"))+Re("Chip ID",a.chip_id.name)+Re("Min chip rev",a.min_chip_rev)+Re("Hash appended",a.hash_appended),s=i.header_segment,c=Re("Load addr","0x"+s.load_addr.toString(16))+Re("Data length",s.data_len),u=i.description,l=Re("Magic word","0x"+u.magic_word.toString(16))+Re("Secure version",u.secure_version)+Re("Version",u.version)+Re("Project name",u.project_name)+Re("time",u.time)+Re("date",u.date)+Re("IDF version",u.idf_ver)+Re("ELF hash",u.app_elf_sha256.slice(-10),u.app_elf_sha256),e.next=13,G(r);case 13:if(!("error"in(f=e.sent))||!f.error||3!=f.error_code){e.next=16;break}return e.abrupt("return",{error:!1,data:n+o+c+l,image:r});case 16:if(f[1]==f[2]){e.next=19;break}return Je("ERROR! Hash image and calculated hash does not match","error"),e.abrupt("return",{error:!0,error_message:"hash not match",data:n+Re("File hash",f[0].slice(-10),f[0])+Re("Caculated hash",f[1].slice(-10),f[1])+Re("Image hash",f[2].slice(-10),f[2])+o+c+l,image:r});case 19:return e.abrupt("return",{error:!1,data:n+Re("File hash",f[0].slice(-10),f[0])+Re("Caculated hash",f[1].slice(-10),f[1])+Re("Image hash",f[2].slice(-10),f[2])+o+c+l,image:r});case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var He,Ue=document.querySelector("#upload-image"),qe=document.querySelector("#report"),Ge=document.querySelector("#file-info"),Ke=document.querySelector("#upload-progress"),je=document.querySelector("#reset-after-check"),ze=document.querySelector("#verify-upload"),Te=document.querySelector("#upload-all-btn");function Je(e,t){switch(t){case"success":qe.classList.remove("warning","error"),qe.classList.add("success"),qe.textContent=e;break;case"warning":qe.classList.remove("error","success"),qe.classList.add("warning"),qe.textContent=e;break;case"error":qe.classList.remove("warning","success"),qe.classList.add("error"),qe.textContent=e;break;default:qe.textContent=""}}if(He=document.querySelector("#support-inform"),K.support()||(He.innerHTML="<div class='inform report warning'><span>Your browser doesn't support the <em><a target=_blank href=https://developer.mozilla.org/en-US/docs/Web/API/Web_Serial_API>WebSerial API</a></em>. It won't be possible to flash image.</span><span class=close>&times</span></div>",Ue.disabled=!0,Te.disabled=!0,document.querySelector("#serial-container").style.display="none"),y()||(He.innerHTML+="<div class='inform report warning'><span>Your browser doesn't support the <em><a target=_blank href=https://developer.mozilla.org/en-US/docs/Web/API/Crypto>Crypto API</a></em>. It won't be possible to check the image integraty.</span><span class=close>&times</span></div>"),He.querySelectorAll(".close").forEach((function(e){e.addEventListener("click",(function(e){e.target.parentNode.outerHTML=""}))})),Ue.addEventListener("file",(function(e){Je(),Ge.textContent="",e.detail.file&&function(e,t){return Qe.apply(this,arguments)}(e.detail.file,e.detail.image).then((function(e){Ge.innerHTML=e.data,e.error&&Je(e.error_message,"error")}))})),K.support()){var Ye=new K(Le,Y,document.querySelector("#serial-container"));Ue.addEventListener("upload",function(){var e=g(m().mark((function e(t){var r,n;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Je(),r=t.detail,e.prev=2,e.next=5,Xe(Ye);case 5:if(n=e.sent){e.next=8;break}return e.abrupt("return");case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(2),Ye.view.write("Error initating serial ["+e.t0+"]"),e.abrupt("return");case 14:if(r.file){e.next=18;break}return Je("Upload image FAIL: Missing file","error"),Ye.view.write("Aborting! No file selected"),e.abrupt("return");case 18:if(r.image){e.next=22;break}return Je("Upload image FAIL: invalid image","error"),Ye.view.write("Aborting! Invalid image"),e.abrupt("return");case 22:if(r.offset.length&&D(r.offset)){e.next=26;break}return Je("Upload image FAIL: invalid offset ["+r.offset+"]","error"),Ye.view.write("Aborting! Offset not defined ["+r.offset+"]"),e.abrupt("return");case 26:return Ue.disabled=!0,Ke.update(0,"0/100"),parseInt(r.offset,16),e.prev=29,e.next=32,Ne(n,r,Ye);case 32:Je("Upload image '".concat(r.file.name,"' succeced"),"success"),Ye.view.write("Upload image '".concat(r.file.name,"' succeced")),je.checked&&(Ye.view.write("Resetting device...\r\n"),Ye.view.reset()),e.next=41;break;case 37:e.prev=37,e.t1=e.catch(29),Je("Upload image FAIL","error"),Ye.view.write("Upload image FAIL");case 41:Ue.disabled=!1;case 42:case"end":return e.stop()}}),e,null,[[2,10],[29,37]])})));return function(t){return e.apply(this,arguments)}}()),Te.addEventListener("click",function(){var e=g(m().mark((function e(t){var r,n;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Xe(Ye);case 3:if(r=e.sent){e.next=6;break}return e.abrupt("return");case 6:e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(0),Ye.view.write("Error initating serial ["+e.t0+"]"),e.abrupt("return");case 12:if(n=[],!Ue.value.some((function(e){if(e.checked){if(e.file&&e.image)return e.offset.length?D(e.offset)?void n.push(e):(Ye.view.write("Aborting! Image '".concat(e.file.name,"' invalid offset")),Je("Upload image FAIL: invalid offset ["+e.offset+"]","error"),!0):(Ye.view.write("Aborting! Image '".concat(e.file.name,"' offset not defined")),Je("Upload image FAIL: offset not defined","error"),!0)}else Ye.view.write("Ignoring image '".concat(e.file.name,"' [not selected]"))}))){e.next=16;break}return e.abrupt("return");case 16:if(n.length){e.next=20;break}return Ye.view.write("Aborting! No image selected"),Je("Upload image FAIL: no image selected","warning"),e.abrupt("return");case 20:return n.sort((function(e,t){return parseInt(e.offset,16)-parseInt(t.offset,16)})),Je("Upload images","success"),Ue.disabled=!0,e.prev=23,e.next=26,Ne(r,n,Ye);case 26:Je("Upload images succeced","success"),je.checked&&Ye.view.reset(),e.next=34;break;case 30:e.prev=30,e.t1=e.catch(23),Je("Upload image FAIL","error"),Ye.view.write("Images upload FAIL");case 34:case"end":return e.stop()}}),e,null,[[0,8],[23,30]])})));return function(t){return e.apply(this,arguments)}}())}function Ne(e,t,r){return Ze.apply(this,arguments)}function Ze(){return(Ze=g(m().mark((function e(t,r,n){var i,a,o,s,c,u,l;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Array.isArray(r)||(r=[r]),i=[],!b()){e.next=16;break}n.view.write("Compression supported!"),a=0;case 5:if(!(a<r.length)){e.next=14;break}return e.next=8,P(r[a].image,"deflate");case 8:o=e.sent,i.push({compressed:o,image:r[a],size:o.byteLength}),n.view.write("Compressed ".concat(r[a].file.name,": ").concat(r[a].image.byteLength," > ").concat(o.byteLength));case 11:a++,e.next=5;break;case 14:e.next=18;break;case 16:n.view.write("Compression NOT supported!"),r.forEach((function(e){return i.push({image:e,size:e.image.byteLength})}));case 18:Ke.update(0,"0/100"),s=i.reduce((function(e,t){return e+t.size}),0),c=0,u=m().mark((function e(a){var o;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=parseInt(r[a].offset,16),e.next=3,Ve(t,i[a],o,{upload_progress:function(e){var t=e.percent,i=(e.seq,e.blocks,e.file_size,e.position,e.written),o=Math.floor(100*(c+i)/s);Ke.update(o,"[".concat(r[a].file.name," at 0x").concat(r[a].offset,"] ").concat(o,"/100")),n.view.write("[".concat(r[a].file.name," at 0x").concat(r[a].offset,"] ").concat("".concat(t).padStart(3,"0"),"/100\r"),!1)}},n);case 3:if(e.sent){e.next=6;break}throw"image verification fail";case 6:c+=i[a].size;case 7:case"end":return e.stop()}}),e)})),l=0;case 23:if(!(l<i.length)){e.next=28;break}return e.delegateYield(u(l),"t0",25);case 25:l++,e.next=23;break;case 28:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ve(e,t,r,n,i){return We.apply(this,arguments)}function We(){return(We=g(m().mark((function e(t,r,n,i,a){var o,s;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!b()){e.next=6;break}return Je("Image compressed [".concat(r.image.image.byteLength," > ").concat(r.size,"]"),"success"),e.next=4,t.flash_image_deflate(r.compressed,r.image.image.byteLength,n,i);case 4:e.next=9;break;case 6:return Je("Compressed not supported [".concat(r.size,"]"),"success"),e.next=9,t.flash_image(r.image.image,n,i);case 9:if(!ze.checked){e.next=20;break}return e.next=12,t.flash_md5_calc(n,r.image.image.byteLength);case 12:if(o=e.sent,a.view.write("\r\n[".concat(r.image.file.name,"] hash flashed: ")+o),s=Pe.ArrayBuffer.hash(r.image.image),a.view.write("[".concat(r.image.file.name,"] hash image:   ")+s),o==s){e.next=19;break}return a.view.write("Verification FAIL! Image and flashed hash does not match."+o),e.abrupt("return",!1);case 19:a.view.write("Verification succeced!");case 20:return e.abrupt("return",!0);case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xe(e){return $e.apply(this,arguments)}function $e(){return($e=g(m().mark((function e(t){var r;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.view.selected_device()){e.next=5;break}return t.view.write("Aborting! Serial not found!"),Je("Upload image FAIL: serial not found","warning"),e.abrupt("return",!1);case 5:if(!r.is_open()){e.next=8;break}return t.view.write("Found serial "+r.name),e.abrupt("return",r);case 8:return e.next=10,t.view.open_bootloader();case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},5666:e=>{var t=function(e){"use strict";var t,r=Object.prototype,n=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var i=t&&t.prototype instanceof v?t:v,a=Object.create(i.prototype),o=new B(n||[]);return a._invoke=function(e,t,r){var n=f;return function(i,a){if(n===p)throw new Error("Generator is already running");if(n===d){if("throw"===i)throw a;return F()}for(r.method=i,r.arg=a;;){var o=r.delegate;if(o){var s=I(o,r);if(s){if(s===g)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===f)throw n=d,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=p;var c=l(e,t,r);if("normal"===c.type){if(n=r.done?d:h,c.arg===g)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n=d,r.method="throw",r.arg=c.arg)}}}(e,r,o),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var f="suspendedStart",h="suspendedYield",p="executing",d="completed",g={};function v(){}function A(){}function _(){}var m={};c(m,a,(function(){return this}));var y=Object.getPrototypeOf,b=y&&y(y(E([])));b&&b!==r&&n.call(b,a)&&(m=b);var w=_.prototype=v.prototype=Object.create(m);function k(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(i,a,o,s){var c=l(e[i],e,a);if("throw"!==c.type){var u=c.arg,f=u.value;return f&&"object"==typeof f&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,o,s)}),(function(e){r("throw",e,o,s)})):t.resolve(f).then((function(e){u.value=e,o(u)}),(function(e){return r("throw",e,o,s)}))}s(c.arg)}var i;this._invoke=function(e,n){function a(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(a,a):a()}}function I(e,r){var n=e.iterator[r.method];if(n===t){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=t,I(e,r),"throw"===r.method))return g;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var i=l(n,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,g;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,g):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function B(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function E(e){if(e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function r(){for(;++i<e.length;)if(n.call(e,i))return r.value=e[i],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}return{next:F}}function F(){return{value:t,done:!0}}return A.prototype=_,c(w,"constructor",_),c(_,"constructor",A),A.displayName=c(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===A||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,c(e,s,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},k(x.prototype),c(x.prototype,o,(function(){return this})),e.AsyncIterator=x,e.async=function(t,r,n,i,a){void 0===a&&(a=Promise);var o=new x(u(t,r,n,i),a);return e.isGeneratorFunction(r)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},k(w),c(w,s,"Generator"),c(w,a,(function(){return this})),c(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=E,B.prototype={constructor:B,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function i(n,i){return s.type="throw",s.arg=e,r.next=n,i&&(r.method="next",r.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),C(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;C(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:E(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),g}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},8322:e=>{e.exports=function(e){"use strict";var t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function r(e,t){var r=e[0],n=e[1],i=e[2],a=e[3];n=((n+=((i=((i+=((a=((a+=((r=((r+=(n&i|~n&a)+t[0]-680876936|0)<<7|r>>>25)+n|0)&n|~r&i)+t[1]-389564586|0)<<12|a>>>20)+r|0)&r|~a&n)+t[2]+606105819|0)<<17|i>>>15)+a|0)&a|~i&r)+t[3]-1044525330|0)<<22|n>>>10)+i|0,n=((n+=((i=((i+=((a=((a+=((r=((r+=(n&i|~n&a)+t[4]-176418897|0)<<7|r>>>25)+n|0)&n|~r&i)+t[5]+1200080426|0)<<12|a>>>20)+r|0)&r|~a&n)+t[6]-1473231341|0)<<17|i>>>15)+a|0)&a|~i&r)+t[7]-45705983|0)<<22|n>>>10)+i|0,n=((n+=((i=((i+=((a=((a+=((r=((r+=(n&i|~n&a)+t[8]+1770035416|0)<<7|r>>>25)+n|0)&n|~r&i)+t[9]-1958414417|0)<<12|a>>>20)+r|0)&r|~a&n)+t[10]-42063|0)<<17|i>>>15)+a|0)&a|~i&r)+t[11]-1990404162|0)<<22|n>>>10)+i|0,n=((n+=((i=((i+=((a=((a+=((r=((r+=(n&i|~n&a)+t[12]+1804603682|0)<<7|r>>>25)+n|0)&n|~r&i)+t[13]-40341101|0)<<12|a>>>20)+r|0)&r|~a&n)+t[14]-1502002290|0)<<17|i>>>15)+a|0)&a|~i&r)+t[15]+1236535329|0)<<22|n>>>10)+i|0,n=((n+=((i=((i+=((a=((a+=((r=((r+=(n&a|i&~a)+t[1]-165796510|0)<<5|r>>>27)+n|0)&i|n&~i)+t[6]-1069501632|0)<<9|a>>>23)+r|0)&n|r&~n)+t[11]+643717713|0)<<14|i>>>18)+a|0)&r|a&~r)+t[0]-373897302|0)<<20|n>>>12)+i|0,n=((n+=((i=((i+=((a=((a+=((r=((r+=(n&a|i&~a)+t[5]-701558691|0)<<5|r>>>27)+n|0)&i|n&~i)+t[10]+38016083|0)<<9|a>>>23)+r|0)&n|r&~n)+t[15]-660478335|0)<<14|i>>>18)+a|0)&r|a&~r)+t[4]-405537848|0)<<20|n>>>12)+i|0,n=((n+=((i=((i+=((a=((a+=((r=((r+=(n&a|i&~a)+t[9]+568446438|0)<<5|r>>>27)+n|0)&i|n&~i)+t[14]-1019803690|0)<<9|a>>>23)+r|0)&n|r&~n)+t[3]-187363961|0)<<14|i>>>18)+a|0)&r|a&~r)+t[8]+1163531501|0)<<20|n>>>12)+i|0,n=((n+=((i=((i+=((a=((a+=((r=((r+=(n&a|i&~a)+t[13]-1444681467|0)<<5|r>>>27)+n|0)&i|n&~i)+t[2]-51403784|0)<<9|a>>>23)+r|0)&n|r&~n)+t[7]+1735328473|0)<<14|i>>>18)+a|0)&r|a&~r)+t[12]-1926607734|0)<<20|n>>>12)+i|0,n=((n+=((i=((i+=((a=((a+=((r=((r+=(n^i^a)+t[5]-378558|0)<<4|r>>>28)+n|0)^n^i)+t[8]-2022574463|0)<<11|a>>>21)+r|0)^r^n)+t[11]+1839030562|0)<<16|i>>>16)+a|0)^a^r)+t[14]-35309556|0)<<23|n>>>9)+i|0,n=((n+=((i=((i+=((a=((a+=((r=((r+=(n^i^a)+t[1]-1530992060|0)<<4|r>>>28)+n|0)^n^i)+t[4]+1272893353|0)<<11|a>>>21)+r|0)^r^n)+t[7]-155497632|0)<<16|i>>>16)+a|0)^a^r)+t[10]-1094730640|0)<<23|n>>>9)+i|0,n=((n+=((i=((i+=((a=((a+=((r=((r+=(n^i^a)+t[13]+681279174|0)<<4|r>>>28)+n|0)^n^i)+t[0]-358537222|0)<<11|a>>>21)+r|0)^r^n)+t[3]-722521979|0)<<16|i>>>16)+a|0)^a^r)+t[6]+76029189|0)<<23|n>>>9)+i|0,n=((n+=((i=((i+=((a=((a+=((r=((r+=(n^i^a)+t[9]-640364487|0)<<4|r>>>28)+n|0)^n^i)+t[12]-421815835|0)<<11|a>>>21)+r|0)^r^n)+t[15]+530742520|0)<<16|i>>>16)+a|0)^a^r)+t[2]-995338651|0)<<23|n>>>9)+i|0,n=((n+=((a=((a+=(n^((r=((r+=(i^(n|~a))+t[0]-198630844|0)<<6|r>>>26)+n|0)|~i))+t[7]+1126891415|0)<<10|a>>>22)+r|0)^((i=((i+=(r^(a|~n))+t[14]-1416354905|0)<<15|i>>>17)+a|0)|~r))+t[5]-57434055|0)<<21|n>>>11)+i|0,n=((n+=((a=((a+=(n^((r=((r+=(i^(n|~a))+t[12]+1700485571|0)<<6|r>>>26)+n|0)|~i))+t[3]-1894986606|0)<<10|a>>>22)+r|0)^((i=((i+=(r^(a|~n))+t[10]-1051523|0)<<15|i>>>17)+a|0)|~r))+t[1]-2054922799|0)<<21|n>>>11)+i|0,n=((n+=((a=((a+=(n^((r=((r+=(i^(n|~a))+t[8]+1873313359|0)<<6|r>>>26)+n|0)|~i))+t[15]-30611744|0)<<10|a>>>22)+r|0)^((i=((i+=(r^(a|~n))+t[6]-1560198380|0)<<15|i>>>17)+a|0)|~r))+t[13]+1309151649|0)<<21|n>>>11)+i|0,n=((n+=((a=((a+=(n^((r=((r+=(i^(n|~a))+t[4]-145523070|0)<<6|r>>>26)+n|0)|~i))+t[11]-1120210379|0)<<10|a>>>22)+r|0)^((i=((i+=(r^(a|~n))+t[2]+718787259|0)<<15|i>>>17)+a|0)|~r))+t[9]-343485551|0)<<21|n>>>11)+i|0,e[0]=r+e[0]|0,e[1]=n+e[1]|0,e[2]=i+e[2]|0,e[3]=a+e[3]|0}function n(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}function i(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24);return r}function a(e){var t,i,a,o,s,c,u=e.length,l=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=u;t+=64)r(l,n(e.substring(t-64,t)));for(i=(e=e.substring(t-64)).length,a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<i;t+=1)a[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(a[t>>2]|=128<<(t%4<<3),t>55)for(r(l,a),t=0;t<16;t+=1)a[t]=0;return o=(o=8*u).toString(16).match(/(.*?)(.{0,8})$/),s=parseInt(o[2],16),c=parseInt(o[1],16)||0,a[14]=s,a[15]=c,r(l,a),l}function o(e){var r,n="";for(r=0;r<4;r+=1)n+=t[e>>8*r+4&15]+t[e>>8*r&15];return n}function s(e){var t;for(t=0;t<e.length;t+=1)e[t]=o(e[t]);return e.join("")}function c(e){return/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e))),e}function u(e){var t,r=[],n=e.length;for(t=0;t<n-1;t+=2)r.push(parseInt(e.substr(t,2),16));return String.fromCharCode.apply(String,r)}function l(){this.reset()}return s(a("hello")),"undefined"==typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function e(e,t){return(e=0|e||0)<0?Math.max(e+t,0):Math.min(e,t)}ArrayBuffer.prototype.slice=function(t,r){var n,i,a,o,s=this.byteLength,c=e(t,s),u=s;return undefined!==r&&(u=e(r,s)),c>u?new ArrayBuffer(0):(n=u-c,i=new ArrayBuffer(n),a=new Uint8Array(i),o=new Uint8Array(this,c,n),a.set(o),i)}}(),l.prototype.append=function(e){return this.appendBinary(c(e)),this},l.prototype.appendBinary=function(e){this._buff+=e,this._length+=e.length;var t,i=this._buff.length;for(t=64;t<=i;t+=64)r(this._hash,n(this._buff.substring(t-64,t)));return this._buff=this._buff.substring(t-64),this},l.prototype.end=function(e){var t,r,n=this._buff,i=n.length,a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<i;t+=1)a[t>>2]|=n.charCodeAt(t)<<(t%4<<3);return this._finish(a,i),r=s(this._hash),e&&(r=u(r)),this.reset(),r},l.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},l.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},l.prototype.setState=function(e){return this._buff=e.buff,this._length=e.length,this._hash=e.hash,this},l.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},l.prototype._finish=function(e,t){var n,i,a,o=t;if(e[o>>2]|=128<<(o%4<<3),o>55)for(r(this._hash,e),o=0;o<16;o+=1)e[o]=0;n=(n=8*this._length).toString(16).match(/(.*?)(.{0,8})$/),i=parseInt(n[2],16),a=parseInt(n[1],16)||0,e[14]=i,e[15]=a,r(this._hash,e)},l.hash=function(e,t){return l.hashBinary(c(e),t)},l.hashBinary=function(e,t){var r=s(a(e));return t?u(r):r},l.ArrayBuffer=function(){this.reset()},l.ArrayBuffer.prototype.append=function(e){var t,n,a,o,s,c=(n=this._buff.buffer,a=e,o=!0,(s=new Uint8Array(n.byteLength+a.byteLength)).set(new Uint8Array(n)),s.set(new Uint8Array(a),n.byteLength),o?s:s.buffer),u=c.length;for(this._length+=e.byteLength,t=64;t<=u;t+=64)r(this._hash,i(c.subarray(t-64,t)));return this._buff=t-64<u?new Uint8Array(c.buffer.slice(t-64)):new Uint8Array(0),this},l.ArrayBuffer.prototype.end=function(e){var t,r,n=this._buff,i=n.length,a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<i;t+=1)a[t>>2]|=n[t]<<(t%4<<3);return this._finish(a,i),r=s(this._hash),e&&(r=u(r)),this.reset(),r},l.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},l.ArrayBuffer.prototype.getState=function(){var e,t=l.prototype.getState.call(this);return t.buff=(e=t.buff,String.fromCharCode.apply(null,new Uint8Array(e))),t},l.ArrayBuffer.prototype.setState=function(e){return e.buff=function(e,t){var r,n=e.length,i=new ArrayBuffer(n),a=new Uint8Array(i);for(r=0;r<n;r+=1)a[r]=e.charCodeAt(r);return t?a:i}(e.buff,!0),l.prototype.setState.call(this,e)},l.ArrayBuffer.prototype.destroy=l.prototype.destroy,l.ArrayBuffer.prototype._finish=l.prototype._finish,l.ArrayBuffer.hash=function(e,t){var n=s(function(e){var t,n,a,o,s,c,u=e.length,l=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=u;t+=64)r(l,i(e.subarray(t-64,t)));for(n=(e=t-64<u?e.subarray(t-64):new Uint8Array(0)).length,a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<n;t+=1)a[t>>2]|=e[t]<<(t%4<<3);if(a[t>>2]|=128<<(t%4<<3),t>55)for(r(l,a),t=0;t<16;t+=1)a[t]=0;return o=(o=8*u).toString(16).match(/(.*?)(.{0,8})$/),s=parseInt(o[2],16),c=parseInt(o[1],16)||0,a[14]=s,a[15]=c,r(l,a),l}(new Uint8Array(e)));return t?u(n):n},l}()},2617:e=>{self,e.exports=(()=>{"use strict";var e={775:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FitAddon=void 0;var r=function(){function e(){}return e.prototype.activate=function(e){this._terminal=e},e.prototype.dispose=function(){},e.prototype.fit=function(){var e=this.proposeDimensions();if(e&&this._terminal){var t=this._terminal._core;this._terminal.rows===e.rows&&this._terminal.cols===e.cols||(t._renderService.clear(),this._terminal.resize(e.cols,e.rows))}},e.prototype.proposeDimensions=function(){if(this._terminal&&this._terminal.element&&this._terminal.element.parentElement){var e=this._terminal._core;if(0!==e._renderService.dimensions.actualCellWidth&&0!==e._renderService.dimensions.actualCellHeight){var t=window.getComputedStyle(this._terminal.element.parentElement),r=parseInt(t.getPropertyValue("height")),n=Math.max(0,parseInt(t.getPropertyValue("width"))),i=window.getComputedStyle(this._terminal.element),a=r-(parseInt(i.getPropertyValue("padding-top"))+parseInt(i.getPropertyValue("padding-bottom"))),o=n-(parseInt(i.getPropertyValue("padding-right"))+parseInt(i.getPropertyValue("padding-left")))-e.viewport.scrollBarWidth;return{cols:Math.max(2,Math.floor(o/e._renderService.dimensions.actualCellWidth)),rows:Math.max(1,Math.floor(a/e._renderService.dimensions.actualCellHeight))}}}},e}();t.FitAddon=r}},t={};return function r(n){if(t[n])return t[n].exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}(775)})()}},r={};function n(e){var i=r[e];if(void 0!==i)return i.exports;var a=r[e]={exports:{}};return t[e](a,a.exports,n),a.exports}n.m=t,e=[],n.O=(t,r,i,a)=>{if(!r){var o=1/0;for(l=0;l<e.length;l++){for(var[r,i,a]=e[l],s=!0,c=0;c<r.length;c++)(!1&a||o>=a)&&Object.keys(n.O).every((e=>n.O[e](r[c])))?r.splice(c--,1):(s=!1,a<o&&(o=a));if(s){e.splice(l--,1);var u=i();void 0!==u&&(t=u)}}return t}a=a||0;for(var l=e.length;l>0&&e[l-1][2]>a;l--)e[l]=e[l-1];e[l]=[r,i,a]},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.j=46,(()=>{var e={46:0};n.O.j=t=>0===e[t];var t=(t,r)=>{var i,a,[o,s,c]=r,u=0;if(o.some((t=>0!==e[t]))){for(i in s)n.o(s,i)&&(n.m[i]=s[i]);if(c)var l=c(n)}for(t&&t(r);u<o.length;u++)a=o[u],n.o(e,a)&&e[a]&&e[a][0](),e[o[u]]=0;return n.O(l)},r=self.webpackChunkagro_web=self.webpackChunkagro_web||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var i=n.O(void 0,[882,813,821,569],(()=>n(4232)));i=n.O(i)})();